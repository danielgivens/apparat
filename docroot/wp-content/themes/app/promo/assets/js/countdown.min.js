var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var e,t,r,i,n,o,a,s,l,c,u,h,p,d,f,m;_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,r){var i=function(e){var t,r=[],i=e.length;for(t=0;t!==i;r.push(e[t++]));return r},n=function(e,t,r){var i,n,o=e.cycle;for(i in o)n=o[i],e[i]="function"==typeof n?n.call(t[r],r):n[r%n.length];delete e.cycle},o=function(e,t,i){r.call(this,e,t,i),this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=o.prototype.render},a=1e-10,s=r._internals,l=s.isSelector,c=s.isArray,u=o.prototype=r.to({},.1,{}),h=[];o.version="1.18.2",u.constructor=o,u.kill()._gc=!1,o.killTweensOf=o.killDelayedCallsTo=r.killTweensOf,o.getTweensOf=r.getTweensOf,o.lagSmoothing=r.lagSmoothing,o.ticker=r.ticker,o.render=r.render,u.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),r.prototype.invalidate.call(this)},u.updateTo=function(e,t){var i,n=this.ratio,o=this.vars.immediateRender||e.immediateRender;for(i in t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),e)this.vars[i]=e[i];if(this._initted||o)if(t)this._initted=!1,o&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&r._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var a=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||o)for(var s,l=1/(1-n),c=this._firstPT;c;)s=c.s+c.c,c.c*=l,c.s=s-c.c,c=c._next;return this},u.render=function(e,t,r){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var i,n,o,l,c,u,h,p,d=this._dirty?this.totalDuration():this._totalDuration,f=this._time,m=this._totalTime,v=this._cycle,g=this._duration,y=this._rawPrevTime;if(e>=d-1e-7?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=g,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(i=!0,n="onComplete",r=r||this._timeline.autoRemoveChildren),0===g&&(this._initted||!this.vars.lazy||r)&&(this._startTime===this._timeline._duration&&(e=0),(0>y||0>=e&&e>=-1e-7||y===a&&"isPause"!==this.data)&&y!==e&&(r=!0,y>a&&(n="onReverseComplete")),this._rawPrevTime=p=!t||e||y===e?e:a)):1e-7>e?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===g&&y>0)&&(n="onReverseComplete",i=this._reversed),0>e&&(this._active=!1,0===g&&(this._initted||!this.vars.lazy||r)&&(y>=0&&(r=!0),this._rawPrevTime=p=!t||e||y===e?e:a)),this._initted||(r=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(l=g+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!=(1&this._cycle)&&(this._time=g-this._time),this._time>g?this._time=g:this._time<0&&(this._time=0)),this._easeType?(c=this._time/g,u=this._easeType,h=this._easePower,(1===u||3===u&&c>=.5)&&(c=1-c),3===u&&(c*=2),1===h?c*=c:2===h?c*=c*c:3===h?c*=c*c*c:4===h&&(c*=c*c*c*c),1===u?this.ratio=1-c:2===u?this.ratio=c:this._time/g<.5?this.ratio=c/2:this.ratio=1-c/2):this.ratio=this._ease.getRatio(this._time/g)),f!==this._time||r||v!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!r&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=f,this._totalTime=m,this._rawPrevTime=y,this._cycle=v,s.lazyTweens.push(this),void(this._lazy=[e,t]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/g):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==f&&e>=0&&(this._active=!0),0===m&&(2===this._initted&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,t,r):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===g)&&(t||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(0>e&&this._startAt&&this._startTime&&this._startAt.render(e,t,r),t||(this._totalTime!==m||i)&&this._callback("onUpdate")),this._cycle!==v&&(t||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),n&&(!this._gc||r)&&(0>e&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,r),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[n]&&this._callback(n),0===g&&this._rawPrevTime===a&&p!==a&&(this._rawPrevTime=0))}else m!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},o.to=function(e,t,r){return new o(e,t,r)},o.from=function(e,t,r){return r.runBackwards=!0,r.immediateRender=0!=r.immediateRender,new o(e,t,r)},o.fromTo=function(e,t,r,i){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,new o(e,t,i)},o.staggerTo=o.allTo=function(e,t,a,s,u,p,d){s=s||0;var f,m,v,g,y=0,x=[],_=function(){a.onComplete&&a.onComplete.apply(a.onCompleteScope||this,arguments),u.apply(d||a.callbackScope||this,p||h)},w=a.cycle,b=a.startAt&&a.startAt.cycle;for(c(e)||("string"==typeof e&&(e=r.selector(e)||e),l(e)&&(e=i(e))),e=e||[],0>s&&((e=i(e)).reverse(),s*=-1),f=e.length-1,v=0;f>=v;v++){for(g in m={},a)m[g]=a[g];if(w&&n(m,e,v),b){for(g in b=m.startAt={},a.startAt)b[g]=a.startAt[g];n(m.startAt,e,v)}m.delay=y+(m.delay||0),v===f&&u&&(m.onComplete=_),x[v]=new o(e[v],t,m),y+=s}return x},o.staggerFrom=o.allFrom=function(e,t,r,i,n,a,s){return r.runBackwards=!0,r.immediateRender=0!=r.immediateRender,o.staggerTo(e,t,r,i,n,a,s)},o.staggerFromTo=o.allFromTo=function(e,t,r,i,n,a,s,l){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,o.staggerTo(e,t,i,n,a,s,l)},o.delayedCall=function(e,t,r,i,n){return new o(t,0,{delay:e,onComplete:t,onCompleteParams:r,callbackScope:i,onReverseComplete:t,onReverseCompleteParams:r,immediateRender:!1,useFrames:n,overwrite:0})},o.set=function(e,t){return new o(e,0,t)},o.isTweening=function(e){return r.getTweensOf(e,!0).length>0};var p=function(e,t){for(var i=[],n=0,o=e._first;o;)o instanceof r?i[n++]=o:(t&&(i[n++]=o),n=(i=i.concat(p(o,t))).length),o=o._next;return i},d=o.getAllTweens=function(t){return p(e._rootTimeline,t).concat(p(e._rootFramesTimeline,t))};o.killAll=function(e,r,i,n){null==r&&(r=!0),null==i&&(i=!0);var o,a,s,l=d(0!=n),c=l.length,u=r&&i&&n;for(s=0;c>s;s++)a=l[s],(u||a instanceof t||(o=a.target===a.vars.onComplete)&&i||r&&!o)&&(e?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},o.killChildTweensOf=function(e,t){if(null!=e){var n,a,u,h,p,d=s.tweenLookup;if("string"==typeof e&&(e=r.selector(e)||e),l(e)&&(e=i(e)),c(e))for(h=e.length;--h>-1;)o.killChildTweensOf(e[h],t);else{for(u in n=[],d)for(a=d[u].target.parentNode;a;)a===e&&(n=n.concat(d[u].tweens)),a=a.parentNode;for(p=n.length,h=0;p>h;h++)t&&n[h].totalTime(n[h].totalDuration()),n[h]._enabled(!1,!1)}}};var f=function(e,r,i,n){r=!1!==r,i=!1!==i;for(var o,a,s=d(n=!1!==n),l=r&&i&&n,c=s.length;--c>-1;)a=s[c],(l||a instanceof t||(o=a.target===a.vars.onComplete)&&i||r&&!o)&&a.paused(e)};return o.pauseAll=function(e,t,r){f(!0,e,t,r)},o.resumeAll=function(e,t,r){f(!1,e,t,r)},o.globalTimeScale=function(t){var i=e._rootTimeline,n=r.ticker.time;return arguments.length?(t=t||a,i._startTime=n-(n-i._startTime)*i._timeScale/t,i=e._rootFramesTimeline,n=r.ticker.frame,i._startTime=n-(n-i._startTime)*i._timeScale/t,i._timeScale=e._rootTimeline._timeScale=t,t):i._timeScale},u.progress=function(e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},u.totalProgress=function(e){return arguments.length?this.totalTime(this.totalDuration()*e,!1):this._totalTime/this.totalDuration()},u.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!=(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},u.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},u.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},u.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},u.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},u.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},o},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,r){var i=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var r,i,n=this.vars;for(i in n)r=n[i],l(r)&&-1!==r.join("").indexOf("{self}")&&(n[i]=this._swapSelfInParams(r));l(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},n=1e-10,o=r._internals,a=i._internals={},s=o.isSelector,l=o.isArray,c=o.lazyTweens,u=o.lazyRender,h=_gsScope._gsDefine.globals,p=function(e){var t,r={};for(t in e)r[t]=e[t];return r},d=function(e,t,r){var i,n,o=e.cycle;for(i in o)n=o[i],e[i]="function"==typeof n?n.call(t[r],r):n[r%n.length];delete e.cycle},f=a.pauseCallback=function(){},m=function(e){var t,r=[],i=e.length;for(t=0;t!==i;r.push(e[t++]));return r},v=i.prototype=new t;return i.version="1.18.2",v.constructor=i,v.kill()._gc=v._forcingPlayhead=v._hasPause=!1,v.to=function(e,t,i,n){var o=i.repeat&&h.TweenMax||r;return t?this.add(new o(e,t,i),n):this.set(e,i,n)},v.from=function(e,t,i,n){return this.add((i.repeat&&h.TweenMax||r).from(e,t,i),n)},v.fromTo=function(e,t,i,n,o){var a=n.repeat&&h.TweenMax||r;return t?this.add(a.fromTo(e,t,i,n),o):this.set(e,n,o)},v.staggerTo=function(e,t,n,o,a,l,c,u){var h,f,v=new i({onComplete:l,onCompleteParams:c,callbackScope:u,smoothChildTiming:this.smoothChildTiming}),g=n.cycle;for("string"==typeof e&&(e=r.selector(e)||e),s(e=e||[])&&(e=m(e)),0>(o=o||0)&&((e=m(e)).reverse(),o*=-1),f=0;f<e.length;f++)(h=p(n)).startAt&&(h.startAt=p(h.startAt),h.startAt.cycle&&d(h.startAt,e,f)),g&&d(h,e,f),v.to(e[f],t,h,f*o);return this.add(v,a)},v.staggerFrom=function(e,t,r,i,n,o,a,s){return r.immediateRender=0!=r.immediateRender,r.runBackwards=!0,this.staggerTo(e,t,r,i,n,o,a,s)},v.staggerFromTo=function(e,t,r,i,n,o,a,s,l){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,this.staggerTo(e,t,i,n,o,a,s,l)},v.call=function(e,t,i,n){return this.add(r.delayedCall(0,e,t,i),n)},v.set=function(e,t,i){return i=this._parseTimeOrLabel(i,0,!0),null==t.immediateRender&&(t.immediateRender=i===this._time&&!this._paused),this.add(new r(e,0,t),i)},i.exportRoot=function(e,t){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var n,o,a=new i(e),s=a._timeline;for(null==t&&(t=!0),s._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=s._time,n=s._first;n;)o=n._next,t&&n instanceof r&&n.target===n.vars.onComplete||a.add(n,n._startTime-n._delay),n=o;return s.add(a,0),a},v.add=function(n,o,a,s){var c,u,h,p,d,f;if("number"!=typeof o&&(o=this._parseTimeOrLabel(o,0,!0,n)),!(n instanceof e)){if(n instanceof Array||n&&n.push&&l(n)){for(a=a||"normal",s=s||0,c=o,u=n.length,h=0;u>h;h++)l(p=n[h])&&(p=new i({tweens:p})),this.add(p,c),"string"!=typeof p&&"function"!=typeof p&&("sequence"===a?c=p._startTime+p.totalDuration()/p._timeScale:"start"===a&&(p._startTime-=p.delay())),c+=s;return this._uncache(!0)}if("string"==typeof n)return this.addLabel(n,o);if("function"!=typeof n)throw"Cannot add "+n+" into the timeline; it is not a tween, timeline, function, or string.";n=r.delayedCall(0,n)}if(t.prototype.add.call(this,n,o),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=(d=this).rawTime()>n._startTime;d._timeline;)f&&d._timeline.smoothChildTiming?d.totalTime(d._totalTime,!0):d._gc&&d._enabled(!0,!1),d=d._timeline;return this},v.remove=function(t){if(t instanceof e){this._remove(t,!1);var r=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;return t._startTime=(t._paused?t._pauseTime:r._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&l(t)){for(var i=t.length;--i>-1;)this.remove(t[i]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},v._remove=function(e,r){t.prototype._remove.call(this,e,r);var i=this._last;return i?this._time>i._startTime+i._totalDuration/i._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},v.insert=v.insertMultiple=function(e,t,r,i){return this.add(e,t||0,r,i)},v.appendMultiple=function(e,t,r,i){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),r,i)},v.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},v.addPause=function(e,t,i,n){var o=r.delayedCall(0,f,i,n||this);return o.vars.onComplete=o.vars.onReverseComplete=t,o.data="isPause",this._hasPause=!0,this.add(o,e)},v.removeLabel=function(e){return delete this._labels[e],this},v.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},v._parseTimeOrLabel=function(t,r,i,n){var o;if(n instanceof e&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&l(n)))for(o=n.length;--o>-1;)n[o]instanceof e&&n[o].timeline===this&&this.remove(n[o]);if("string"==typeof r)return this._parseTimeOrLabel(r,i&&"number"==typeof t&&null==this._labels[r]?t-this.duration():0,i);if(r=r||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=this.duration());else{if(-1===(o=t.indexOf("=")))return null==this._labels[t]?i?this._labels[t]=this.duration()+r:r:this._labels[t]+r;r=parseInt(t.charAt(o-1)+"1",10)*Number(t.substr(o+1)),t=o>1?this._parseTimeOrLabel(t.substr(0,o-1),0,i):this.duration()}return Number(t)+r},v.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(e,t){return this.play(e,t)},v.gotoAndStop=function(e,t){return this.pause(e,t)},v.render=function(e,t,r){this._gc&&this._enabled(!0,!1);var i,o,a,s,l,h,p,d=this._dirty?this.totalDuration():this._totalDuration,f=this._time,m=this._startTime,v=this._timeScale,g=this._paused;if(e>=d-1e-7)this._totalTime=this._time=d,this._reversed||this._hasPausedChild()||(o=!0,s="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=e&&e>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===n)&&this._rawPrevTime!==e&&this._first&&(l=!0,this._rawPrevTime>n&&(s="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:n,e=d+1e-4;else if(1e-7>e)if(this._totalTime=this._time=0,(0!==f||0===this._duration&&this._rawPrevTime!==n&&(this._rawPrevTime>0||0>e&&this._rawPrevTime>=0))&&(s="onReverseComplete",o=this._reversed),0>e)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=o=!0,s="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:n,0===e&&o)for(i=this._first;i&&0===i._startTime;)i._duration||(o=!1),i=i._next;e=0,this._initted||(l=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(e>=f)for(i=this._first;i&&i._startTime<=e&&!h;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(h=i),i=i._next;else for(i=this._last;i&&i._startTime>=e&&!h;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(h=i),i=i._prev;h&&(this._time=e=h._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=e}if(this._time!==f&&this._first||r||l||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==f&&e>0&&(this._active=!0),0===f&&this.vars.onStart&&0!==this._time&&(t||this._callback("onStart")),(p=this._time)>=f)for(i=this._first;i&&(a=i._next,p===this._time&&(!this._paused||g));)(i._active||i._startTime<=p&&!i._paused&&!i._gc)&&(h===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,r):i.render((e-i._startTime)*i._timeScale,t,r)),i=a;else for(i=this._last;i&&(a=i._prev,p===this._time&&(!this._paused||g));){if(i._active||i._startTime<=f&&!i._paused&&!i._gc){if(h===i){for(h=i._prev;h&&h.endTime()>this._time;)h.render(h._reversed?h.totalDuration()-(e-h._startTime)*h._timeScale:(e-h._startTime)*h._timeScale,t,r),h=h._prev;h=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,r):i.render((e-i._startTime)*i._timeScale,t,r)}i=a}this._onUpdate&&(t||(c.length&&u(),this._callback("onUpdate"))),s&&(this._gc||(m===this._startTime||v!==this._timeScale)&&(0===this._time||d>=this.totalDuration())&&(o&&(c.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[s]&&this._callback(s)))}},v._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof i&&e._hasPausedChild())return!0;e=e._next}return!1},v.getChildren=function(e,t,i,n){n=n||-9999999999;for(var o=[],a=this._first,s=0;a;)a._startTime<n||(a instanceof r?!1!==t&&(o[s++]=a):(!1!==i&&(o[s++]=a),!1!==e&&(s=(o=o.concat(a.getChildren(!0,t,i))).length))),a=a._next;return o},v.getTweensOf=function(e,t){var i,n,o=this._gc,a=[],s=0;for(o&&this._enabled(!0,!0),n=(i=r.getTweensOf(e)).length;--n>-1;)(i[n].timeline===this||t&&this._contains(i[n]))&&(a[s++]=i[n]);return o&&this._enabled(!1,!0),a},v.recent=function(){return this._recent},v._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},v.shiftChildren=function(e,t,r){r=r||0;for(var i,n=this._first,o=this._labels;n;)n._startTime>=r&&(n._startTime+=e),n=n._next;if(t)for(i in o)o[i]>=r&&(o[i]+=e);return this._uncache(!0)},v._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var r=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),i=r.length,n=!1;--i>-1;)r[i]._kill(e,t)&&(n=!0);return n},v.clear=function(e){var t=this.getChildren(!1,!0,!0),r=t.length;for(this._time=this._totalTime=0;--r>-1;)t[r]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},v._enabled=function(e,r){if(e===this._gc)for(var i=this._first;i;)i._enabled(e,!0),i=i._next;return t.prototype._enabled.call(this,e,r)},v.totalTime=function(t,r,i){this._forcingPlayhead=!0;var n=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,n},v.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,r,i=0,n=this._last,o=999999999999;n;)t=n._prev,n._dirty&&n.totalDuration(),n._startTime>o&&this._sortChildren&&!n._paused?this.add(n,n._startTime-n._delay):o=n._startTime,n._startTime<0&&!n._paused&&(i-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale),this.shiftChildren(-n._startTime,!1,-9999999999),o=0),(r=n._startTime+n._totalDuration/n._timeScale)>i&&(i=r),n=t;this._duration=this._totalDuration=i,this._dirty=!1}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this},v.paused=function(t){if(!t)for(var r=this._first,i=this._time;r;)r._startTime===i&&"isPause"===r.data&&(r._rawPrevTime=0),r=r._next;return e.prototype.paused.apply(this,arguments)},v.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},v.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},i},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,r){var i=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},n=1e-10,o=t._internals,a=o.lazyTweens,s=o.lazyRender,l=new r(null,null,1,0),c=i.prototype=new e;return c.constructor=i,c.kill()._gc=!1,i.version="1.18.2",c.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},c.addCallback=function(e,r,i,n){return this.add(t.delayedCall(0,e,i,n),r)},c.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var r=this.getTweensOf(e,!1),i=r.length,n=this._parseTimeOrLabel(t);--i>-1;)r[i]._startTime===n&&r[i]._enabled(!1,!1);return this},c.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)},c.tweenTo=function(e,r){r=r||{};var i,n,o,a={ease:l,useFrames:this.usesFrames(),immediateRender:!1};for(n in r)a[n]=r[n];return a.time=this._parseTimeOrLabel(e),i=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,o=new t(this,i,a),a.onStart=function(){o.target.paused(!0),o.vars.time!==o.target.time()&&i===o.duration()&&o.duration(Math.abs(o.vars.time-o.target.time())/o.target._timeScale),r.onStart&&o._callback("onStart")},o},c.tweenFromTo=function(e,t,r){r=r||{},e=this._parseTimeOrLabel(e),r.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},r.immediateRender=!1!==r.immediateRender;var i=this.tweenTo(t,r);return i.duration(Math.abs(i.vars.time-e)/this._timeScale||.001)},c.render=function(e,t,r){this._gc&&this._enabled(!0,!1);var i,o,l,c,u,h,p,d,f=this._dirty?this.totalDuration():this._totalDuration,m=this._duration,v=this._time,g=this._totalTime,y=this._startTime,x=this._timeScale,_=this._rawPrevTime,w=this._paused,b=this._cycle;if(e>=f-1e-7)this._locked||(this._totalTime=f,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(o=!0,c="onComplete",u=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=e&&e>=-1e-7||0>_||_===n)&&_!==e&&this._first&&(u=!0,_>n&&(c="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:n,this._yoyo&&0!=(1&this._cycle)?this._time=e=0:(this._time=m,e=m+1e-4);else if(1e-7>e)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==v||0===m&&_!==n&&(_>0||0>e&&_>=0)&&!this._locked)&&(c="onReverseComplete",o=this._reversed),0>e)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(u=o=!0,c="onReverseComplete"):_>=0&&this._first&&(u=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=m||!t||e||this._rawPrevTime===e?e:n,0===e&&o)for(i=this._first;i&&0===i._startTime;)i._duration||(o=!1),i=i._next;e=0,this._initted||(u=!0)}else if(0===m&&0>_&&(u=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(h=m+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!=(1&this._cycle)&&(this._time=m-this._time),this._time>m?(this._time=m,e=m+1e-4):this._time<0?this._time=e=0:e=this._time)),this._hasPause&&!this._forcingPlayhead&&!t){if((e=this._time)>=v)for(i=this._first;i&&i._startTime<=e&&!p;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(p=i),i=i._next;else for(i=this._last;i&&i._startTime>=e&&!p;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(p=i),i=i._prev;p&&(this._time=e=p._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==b&&!this._locked){var M=this._yoyo&&0!=(1&b),T=M===(this._yoyo&&0!=(1&this._cycle)),E=this._totalTime,S=this._cycle,R=this._rawPrevTime,P=this._time;if(this._totalTime=b*m,this._cycle<b?M=!M:this._totalTime+=m,this._time=v,this._rawPrevTime=0===m?_-1e-4:_,this._cycle=b,this._locked=!0,v=M?0:m,this.render(v,t,0===m),t||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),v!==this._time)return;if(T&&(v=M?m+1e-4:-1e-4,this.render(v,!0,!1)),this._locked=!1,this._paused&&!w)return;this._time=P,this._totalTime=E,this._cycle=S,this._rawPrevTime=R}if(this._time!==v&&this._first||r||u||p){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==g&&e>0&&(this._active=!0),0===g&&this.vars.onStart&&0!==this._totalTime&&(t||this._callback("onStart")),(d=this._time)>=v)for(i=this._first;i&&(l=i._next,d===this._time&&(!this._paused||w));)(i._active||i._startTime<=this._time&&!i._paused&&!i._gc)&&(p===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,r):i.render((e-i._startTime)*i._timeScale,t,r)),i=l;else for(i=this._last;i&&(l=i._prev,d===this._time&&(!this._paused||w));){if(i._active||i._startTime<=v&&!i._paused&&!i._gc){if(p===i){for(p=i._prev;p&&p.endTime()>this._time;)p.render(p._reversed?p.totalDuration()-(e-p._startTime)*p._timeScale:(e-p._startTime)*p._timeScale,t,r),p=p._prev;p=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,r):i.render((e-i._startTime)*i._timeScale,t,r)}i=l}this._onUpdate&&(t||(a.length&&s(),this._callback("onUpdate"))),c&&(this._locked||this._gc||(y===this._startTime||x!==this._timeScale)&&(0===this._time||f>=this.totalDuration())&&(o&&(a.length&&s(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[c]&&this._callback(c)))}else g!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},c.getActive=function(e,t,r){null==e&&(e=!0),null==t&&(t=!0),null==r&&(r=!1);var i,n,o=[],a=this.getChildren(e,t,r),s=0,l=a.length;for(i=0;l>i;i++)(n=a[i]).isActive()&&(o[s++]=n);return o},c.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,r=this.getLabelsArray(),i=r.length;for(t=0;i>t;t++)if(r[t].time>e)return r[t].name;return null},c.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),r=t.length;--r>-1;)if(t[r].time<e)return t[r].name;return null},c.getLabelsArray=function(){var e,t=[],r=0;for(e in this._labels)t[r++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},c.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},c.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},c.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},c.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!=(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},c.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},c.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},c.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},c.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},i},!0),e=180/Math.PI,t=[],r=[],i=[],n={},o=_gsScope._gsDefine.globals,a=function(e,t,r,i){this.a=e,this.b=t,this.c=r,this.d=i,this.da=i-e,this.ca=r-e,this.ba=t-e},s=function(e,t,r,i){var n={a:e},o={},a={},s={c:i},l=(e+t)/2,c=(t+r)/2,u=(r+i)/2,h=(l+c)/2,p=(c+u)/2,d=(p-h)/8;return n.b=l+(e-l)/4,o.b=h+d,n.c=o.a=(n.b+o.b)/2,o.c=a.a=(h+p)/2,a.b=p-d,s.b=u+(i-u)/4,a.c=s.a=(a.b+s.b)/2,[n,o,a,s]},l=function(e,n,o,a,l){var c,u,h,p,d,f,m,v,g,y,x,_,w,b=e.length-1,M=0,T=e[0].a;for(c=0;b>c;c++)u=(d=e[M]).a,h=d.d,p=e[M+1].d,l?(x=t[c],w=((_=r[c])+x)*n*.25/(a?.5:i[c]||.5),v=h-((f=h-(h-u)*(a?.5*n:0!==x?w/x:0))+(((m=h+(p-h)*(a?.5*n:0!==_?w/_:0))-f)*(3*x/(x+_)+.5)/4||0))):v=h-((f=h-(h-u)*n*.5)+(m=h+(p-h)*n*.5))/2,f+=v,m+=v,d.c=g=f,d.b=0!==c?T:T=d.a+.6*(d.c-d.a),d.da=h-u,d.ca=g-u,d.ba=T-u,o?(y=s(u,T,g,h),e.splice(M,1,y[0],y[1],y[2],y[3]),M+=4):M++,T=m;(d=e[M]).b=T,d.c=T+.4*(d.d-T),d.da=d.d-d.a,d.ca=d.c-d.a,d.ba=T-d.a,o&&(y=s(d.a,T,d.c,d.d),e.splice(M,1,y[0],y[1],y[2],y[3]))},c=function(e,i,n,o){var s,l,c,u,h,p,d=[];if(o)for(l=(e=[o].concat(e)).length;--l>-1;)"string"==typeof(p=e[l][i])&&"="===p.charAt(1)&&(e[l][i]=o[i]+Number(p.charAt(0)+p.substr(2)));if(0>(s=e.length-2))return d[0]=new a(e[0][i],0,0,e[-1>s?0:1][i]),d;for(l=0;s>l;l++)c=e[l][i],u=e[l+1][i],d[l]=new a(c,0,0,u),n&&(h=e[l+2][i],t[l]=(t[l]||0)+(u-c)*(u-c),r[l]=(r[l]||0)+(h-u)*(h-u));return d[l]=new a(e[l][i],0,0,e[l+1][i]),d},u=function(e,o,a,s,u,h){var p,d,f,m,v,g,y,x,_={},w=[],b=h||e[0];for(d in u="string"==typeof u?","+u+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==o&&(o=1),e[0])w.push(d);if(e.length>1){for(x=e[e.length-1],y=!0,p=w.length;--p>-1;)if(d=w[p],Math.abs(b[d]-x[d])>.05){y=!1;break}y&&(e=e.concat(),h&&e.unshift(h),e.push(e[1]),h=e[e.length-3])}for(t.length=r.length=i.length=0,p=w.length;--p>-1;)d=w[p],n[d]=-1!==u.indexOf(","+d+","),_[d]=c(e,d,n[d],h);for(p=t.length;--p>-1;)t[p]=Math.sqrt(t[p]),r[p]=Math.sqrt(r[p]);if(!s){for(p=w.length;--p>-1;)if(n[d])for(g=(f=_[w[p]]).length-1,m=0;g>m;m++)v=f[m+1].da/r[m]+f[m].da/t[m],i[m]=(i[m]||0)+v*v;for(p=i.length;--p>-1;)i[p]=Math.sqrt(i[p])}for(p=w.length,m=a?4:1;--p>-1;)f=_[d=w[p]],l(f,o,a,s,n[d]),y&&(f.splice(0,m),f.splice(f.length-m,m));return _},h=function(e,t,r){var i,n,o,s,l,c,u,h,p,d,f,m={},v="cubic"===(t=t||"soft")?3:2,g="soft"===t,y=[];if(g&&r&&(e=[r].concat(e)),null==e||e.length<v+1)throw"invalid Bezier data";for(p in e[0])y.push(p);for(c=y.length;--c>-1;){for(m[p=y[c]]=l=[],d=0,h=e.length,u=0;h>u;u++)i=null==r?e[u][p]:"string"==typeof(f=e[u][p])&&"="===f.charAt(1)?r[p]+Number(f.charAt(0)+f.substr(2)):Number(f),g&&u>1&&h-1>u&&(l[d++]=(i+l[d-2])/2),l[d++]=i;for(h=d-v+1,d=0,u=0;h>u;u+=v)i=l[u],n=l[u+1],o=l[u+2],s=2===v?0:l[u+3],l[d++]=f=3===v?new a(i,n,o,s):new a(i,(2*n+i)/3,(2*n+o)/3,o);l.length=d}return m},p=function(e,t,r){for(var i,n,o,a,s,l,c,u,h,p,d,f=1/r,m=e.length;--m>-1;)for(o=(p=e[m]).a,a=p.d-o,s=p.c-o,l=p.b-o,i=n=0,u=1;r>=u;u++)i=n-(n=((c=f*u)*c*a+3*(h=1-c)*(c*s+h*l))*c),t[d=m*r+u-1]=(t[d]||0)+i*i},d=function(e,t){var r,i,n,o,a=[],s=[],l=0,c=0,u=(t=t>>0||6)-1,h=[],d=[];for(r in e)p(e[r],a,t);for(n=a.length,i=0;n>i;i++)l+=Math.sqrt(a[i]),d[o=i%t]=l,o===u&&(c+=l,h[o=i/t>>0]=d,s[o]=c,l=0,d=[]);return{length:c,lengths:s,segments:h}},m=(f=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(e,t,r){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._round={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var i,n,o,a,s,l=t.values||[],c={},p=l[0],f=t.autoRotate||r.vars.orientToBezier;for(i in this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",!0===f?0:Number(f)||0]]:null,p)this._props.push(i);for(o=this._props.length;--o>-1;)i=this._props[o],this._overwriteProps.push(i),n=this._func[i]="function"==typeof e[i],c[i]=n?e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]():parseFloat(e[i]),s||c[i]!==l[0][i]&&(s=c);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?u(l,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,s):h(l,t.type,c),this._segCount=this._beziers[i].length,this._timeRes){var m=d(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),o=f.length;--o>-1;){for(a=0;3>a;a++)i=f[o][a],this._func[i]="function"==typeof e[i]&&e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)];i=f[o][2],this._initialRotations[o]=this._func[i]?this._func[i].call(this._target):this._target[i]}return this._startRatio=r.vars.runBackwards?1:0,!0},set:function(t){var r,i,n,o,a,s,l,c,u,h,p=this._segCount,d=this._func,f=this._target,m=t!==this._startRatio;if(this._timeRes){if(u=this._lengths,h=this._curSeg,t*=this._length,n=this._li,t>this._l2&&p-1>n){for(c=p-1;c>n&&(this._l2=u[++n])<=t;);this._l1=u[n-1],this._li=n,this._curSeg=h=this._segments[n],this._s2=h[this._s1=this._si=0]}else if(t<this._l1&&n>0){for(;n>0&&(this._l1=u[--n])>=t;);0===n&&t<this._l1?this._l1=0:n++,this._l2=u[n],this._li=n,this._curSeg=h=this._segments[n],this._s1=h[(this._si=h.length-1)-1]||0,this._s2=h[this._si]}if(r=n,t-=this._l1,n=this._si,t>this._s2&&n<h.length-1){for(c=h.length-1;c>n&&(this._s2=h[++n])<=t;);this._s1=h[n-1],this._si=n}else if(t<this._s1&&n>0){for(;n>0&&(this._s1=h[--n])>=t;);0===n&&t<this._s1?this._s1=0:n++,this._s2=h[n],this._si=n}s=(n+(t-this._s1)/(this._s2-this._s1))*this._prec}else s=(t-(r=0>t?0:t>=1?p-1:p*t>>0)*(1/p))*p;for(i=1-s,n=this._props.length;--n>-1;)o=this._props[n],l=(s*s*(a=this._beziers[o][r]).da+3*i*(s*a.ca+i*a.ba))*s+a.a,this._round[o]&&(l=Math.round(l)),d[o]?f[o](l):f[o]=l;if(this._autoRotate){var v,g,y,x,_,w,b,M=this._autoRotate;for(n=M.length;--n>-1;)o=M[n][2],w=M[n][3]||0,b=!0===M[n][4]?1:e,a=this._beziers[M[n][0]],v=this._beziers[M[n][1]],a&&v&&(a=a[r],v=v[r],g=a.a+(a.b-a.a)*s,g+=((x=a.b+(a.c-a.b)*s)-g)*s,x+=(a.c+(a.d-a.c)*s-x)*s,y=v.a+(v.b-v.a)*s,y+=((_=v.b+(v.c-v.b)*s)-y)*s,_+=(v.c+(v.d-v.c)*s-_)*s,l=m?Math.atan2(_-y,x-g)*b+w:this._initialRotations[n],d[o]?f[o](l):f[o]=l)}}})).prototype,f.bezierThrough=u,f.cubicToQuadratic=s,f._autoCSS=!0,f.quadraticToCubic=function(e,t,r){return new a(e,(2*t+e)/3,(2*t+r)/3,r)},f._cssRegister=function(){var e=o.CSSPlugin;if(e){var t=e._internals,r=t._parseToProxy,i=t._setPluginRatio,n=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,o,a,s,l){t instanceof Array&&(t={values:t}),l=new f;var c,u,h,p=t.values,d=p.length-1,m=[],v={};if(0>d)return s;for(c=0;d>=c;c++)h=r(e,p[c],a,s,l,d!==c),m[c]=h.end;for(u in t)v[u]=t[u];return v.values=m,(s=new n(e,"bezier",0,0,h.pt,2)).data=h,s.plugin=l,s.setRatio=i,0===v.autoRotate&&(v.autoRotate=!0),!v.autoRotate||v.autoRotate instanceof Array||(c=!0===v.autoRotate?0:Number(v.autoRotate),v.autoRotate=null!=h.end.left?[["left","top","rotation",c,!1]]:null!=h.end.x&&[["x","y","rotation",c,!1]]),v.autoRotate&&(a._transform||a._enableTransforms(!1),h.autoRotate=a._target._gsTransform),l._onInitTween(h.proxy,v,a._tween),s}})}},m._roundProps=function(e,t){for(var r=this._overwriteProps,i=r.length;--i>-1;)(e[r[i]]||e.bezier||e.bezierThrough)&&(this._round[r[i]]=t)},m._kill=function(e){var t,r,i=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],r=i.length;--r>-1;)i[r]===t&&i.splice(r,1);return this._super._kill.call(this,e)},_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var r,i,n,o,a=function(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},s=_gsScope._gsDefine.globals,l={},c=a.prototype=new e("css");c.constructor=a,a.version="1.18.2",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,c="px",a.suffixMap={top:c,right:c,bottom:c,left:c,width:c,height:c,fontSize:c,padding:c,margin:c,perspective:c,lineHeight:""};var u,h,p,d,f,m,v=/(?:\d|\-\d|\.\d|\-\.\d)+/g,g=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,y=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,x=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,_=/(?:\d|\-|\+|=|#|\.)*/g,w=/opacity *= *([^)]*)/i,b=/opacity:([^;]*)/i,M=/alpha\(opacity *=.+?\)/i,T=/^(rgb|hsl)/,E=/([A-Z])/g,S=/-([a-z])/gi,R=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,P=function(e,t){return t.toUpperCase()},A=/(?:Left|Right|Width)/i,C=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,L=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,O=/,(?=[^\)]*(?:\(|$))/gi,D=Math.PI/180,H=180/Math.PI,z={},I=document,k=function(e){return I.createElementNS?I.createElementNS("http://www.w3.org/1999/xhtml",e):I.createElement(e)},N=k("div"),U=k("img"),B=a._internals={_specialProps:l},F=navigator.userAgent,j=function(){var e=F.indexOf("Android"),t=k("a");return p=-1!==F.indexOf("Safari")&&-1===F.indexOf("Chrome")&&(-1===e||Number(F.substr(e+8,1))>3),f=p&&Number(F.substr(F.indexOf("Version/")+8,1))<6,d=-1!==F.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(F)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(F))&&(m=parseFloat(RegExp.$1)),!!t&&(t.style.cssText="top:1px;opacity:.55;",/^0.55/.test(t.style.opacity))}(),G=function(e){return w.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},W=function(e){window.console&&console.log(e)},V="",q="",X=function(e,t){var r,i,n=(t=t||N).style;if(void 0!==n[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),r=["O","Moz","ms","Ms","Webkit"],i=5;--i>-1&&void 0===n[r[i]+e];);return i>=0?(V="-"+(q=3===i?"ms":r[i]).toLowerCase()+"-",q+e):null},$=I.defaultView?I.defaultView.getComputedStyle:function(){},Y=a.getStyle=function(e,t,r,i,n){var o;return j||"opacity"!==t?(!i&&e.style[t]?o=e.style[t]:(r=r||$(e))?o=r[t]||r.getPropertyValue(t)||r.getPropertyValue(t.replace(E,"-$1").toLowerCase()):e.currentStyle&&(o=e.currentStyle[t]),null==n||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:n):G(e)},J=B.convertToPixels=function(e,r,i,n,o){if("px"===n||!n)return i;if("auto"===n||!i)return 0;var s,l,c,u=A.test(r),h=e,p=N.style,d=0>i;if(d&&(i=-i),"%"===n&&-1!==r.indexOf("border"))s=i/100*(u?e.clientWidth:e.clientHeight);else{if(p.cssText="border:0 solid red;position:"+Y(e,"position")+";line-height:0;","%"!==n&&h.appendChild&&"v"!==n.charAt(0)&&"rem"!==n)p[u?"borderLeftWidth":"borderTopWidth"]=i+n;else{if(l=(h=e.parentNode||I.body)._gsCache,c=t.ticker.frame,l&&u&&l.time===c)return l.width*i/100;p[u?"width":"height"]=i+n}h.appendChild(N),s=parseFloat(N[u?"offsetWidth":"offsetHeight"]),h.removeChild(N),u&&"%"===n&&!1!==a.cacheWidths&&((l=h._gsCache=h._gsCache||{}).time=c,l.width=s/i*100),0!==s||o||(s=J(e,r,i,n,!0))}return d?-s:s},Z=B.calculateOffset=function(e,t,r){if("absolute"!==Y(e,"position",r))return 0;var i="left"===t?"Left":"Top",n=Y(e,"margin"+i,r);return e["offset"+i]-(J(e,t,parseFloat(n),n.replace(_,""))||0)},Q=function(e,t){var r,i,n,o={};if(t=t||$(e,null))if(r=t.length)for(;--r>-1;)(-1===(n=t[r]).indexOf("-transform")||Ee===n)&&(o[n.replace(S,P)]=t.getPropertyValue(n));else for(r in t)(-1===r.indexOf("Transform")||Te===r)&&(o[r]=t[r]);else if(t=e.currentStyle||e.style)for(r in t)"string"==typeof r&&void 0===o[r]&&(o[r.replace(S,P)]=t[r]);return j||(o.opacity=G(e)),i=ke(e,t,!1),o.rotation=i.rotation,o.skewX=i.skewX,o.scaleX=i.scaleX,o.scaleY=i.scaleY,o.x=i.x,o.y=i.y,Re&&(o.z=i.z,o.rotationX=i.rotationX,o.rotationY=i.rotationY,o.scaleZ=i.scaleZ),o.filters&&delete o.filters,o},K=function(e,t,r,i,n){var o,a,s,l={},c=e.style;for(a in r)"cssText"!==a&&"length"!==a&&isNaN(a)&&(t[a]!==(o=r[a])||n&&n[a])&&-1===a.indexOf("Origin")&&("number"==typeof o||"string"==typeof o)&&(l[a]="auto"!==o||"left"!==a&&"top"!==a?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof t[a]||""===t[a].replace(x,"")?o:0:Z(e,a),void 0!==c[a]&&(s=new fe(c,a,c[a],s)));if(i)for(a in i)"className"!==a&&(l[a]=i[a]);return{difs:l,firstMPT:s}},ee={width:["Left","Right"],height:["Top","Bottom"]},te=["marginLeft","marginRight","marginTop","marginBottom"],re=function(e,t,r){var i=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),n=ee[t],o=n.length;for(r=r||$(e,null);--o>-1;)i-=parseFloat(Y(e,"padding"+n[o],r,!0))||0,i-=parseFloat(Y(e,"border"+n[o]+"Width",r,!0))||0;return i},ie=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";(null==e||""===e)&&(e="0 0");var r=e.split(" "),i=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":r[0],n=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":r[1];return null==n?n="center"===i?"50%":"0":"center"===n&&(n="50%"),("center"===i||isNaN(parseFloat(i))&&-1===(i+"").indexOf("="))&&(i="50%"),e=i+" "+n+(r.length>2?" "+r[2]:""),t&&(t.oxp=-1!==i.indexOf("%"),t.oyp=-1!==n.indexOf("%"),t.oxr="="===i.charAt(1),t.oyr="="===n.charAt(1),t.ox=parseFloat(i.replace(x,"")),t.oy=parseFloat(n.replace(x,"")),t.v=e),t||e},ne=function(e,t){return"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)},oe=function(e,t){return null==e?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)},ae=function(e,t,r,i){var n,o,a,s,l;return null==e?s=t:"number"==typeof e?s=e:(n=360,o=e.split("_"),a=((l="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(o[0].substr(2)):parseFloat(o[0]))*(-1===e.indexOf("rad")?1:H)-(l?0:t),o.length&&(i&&(i[r]=t+a),-1!==e.indexOf("short")&&(a%=n)!=a%(n/2)&&(a=0>a?a+n:a-n),-1!==e.indexOf("_cw")&&0>a?a=(a+9999999999*n)%n-(a/n|0)*n:-1!==e.indexOf("ccw")&&a>0&&(a=(a-9999999999*n)%n-(a/n|0)*n)),s=t+a),1e-6>s&&s>-1e-6&&(s=0),s},se={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},le=function(e,t,r){return 255*(1>6*(e=0>e?e+1:e>1?e-1:e)?t+(r-t)*e*6:.5>e?r:2>3*e?t+(r-t)*(2/3-e)*6:t)+.5|0},ce=a.parseColor=function(e,t){var r,i,n,o,a,s,l,c,u,h,p;if(e)if("number"==typeof e)r=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),se[e])r=se[e];else if("#"===e.charAt(0))4===e.length&&(e="#"+(i=e.charAt(1))+i+(n=e.charAt(2))+n+(o=e.charAt(3))+o),r=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(r=p=e.match(v),t){if(-1!==e.indexOf("="))return e.match(g)}else a=Number(r[0])%360/360,s=Number(r[1])/100,i=2*(l=Number(r[2])/100)-(n=.5>=l?l*(s+1):l+s-l*s),r.length>3&&(r[3]=Number(e[3])),r[0]=le(a+1/3,i,n),r[1]=le(a,i,n),r[2]=le(a-1/3,i,n);else r=e.match(v)||se.transparent;r[0]=Number(r[0]),r[1]=Number(r[1]),r[2]=Number(r[2]),r.length>3&&(r[3]=Number(r[3]))}else r=se.black;return t&&!p&&(i=r[0]/255,n=r[1]/255,o=r[2]/255,l=((c=Math.max(i,n,o))+(u=Math.min(i,n,o)))/2,c===u?a=s=0:(h=c-u,s=l>.5?h/(2-c-u):h/(c+u),a=c===i?(n-o)/h+(o>n?6:0):c===n?(o-i)/h+2:(i-n)/h+4,a*=60),r[0]=a+.5|0,r[1]=100*s+.5|0,r[2]=100*l+.5|0),r},ue=function(e,t){var r,i,n,o=e.match(he)||[],a=0,s=o.length?"":e;for(r=0;r<o.length;r++)i=o[r],a+=(n=e.substr(a,e.indexOf(i,a)-a)).length+i.length,3===(i=ce(i,t)).length&&i.push(1),s+=n+(t?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return s},he="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(c in se)he+="|"+c+"\\b";he=new RegExp(he+")","gi"),a.colorStringFilter=function(e){var t,r=e[0]+e[1];he.lastIndex=0,he.test(r)&&(t=-1!==r.indexOf("hsl(")||-1!==r.indexOf("hsla("),e[0]=ue(e[0],t),e[1]=ue(e[1],t))},t.defaultStringFilter||(t.defaultStringFilter=a.colorStringFilter);var pe=function(e,t,r,i){if(null==e)return function(e){return e};var n,o=t?(e.match(he)||[""])[0]:"",a=e.split(o).join("").match(y)||[],s=e.substr(0,e.indexOf(a[0])),l=")"===e.charAt(e.length-1)?")":"",c=-1!==e.indexOf(" ")?" ":",",u=a.length,h=u>0?a[0].replace(v,""):"";return u?n=t?function(e){var t,p,d,f;if("number"==typeof e)e+=h;else if(i&&O.test(e)){for(f=e.replace(O,"|").split("|"),d=0;d<f.length;d++)f[d]=n(f[d]);return f.join(",")}if(t=(e.match(he)||[o])[0],d=(p=e.split(t).join("").match(y)||[]).length,u>d--)for(;++d<u;)p[d]=r?p[(d-1)/2|0]:a[d];return s+p.join(c)+c+t+l+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,o,p;if("number"==typeof e)e+=h;else if(i&&O.test(e)){for(o=e.replace(O,"|").split("|"),p=0;p<o.length;p++)o[p]=n(o[p]);return o.join(",")}if(p=(t=e.match(y)||[]).length,u>p--)for(;++p<u;)t[p]=r?t[(p-1)/2|0]:a[p];return s+t.join(c)+l}:function(e){return e}},de=function(e){return e=e.split(","),function(t,r,i,n,o,a,s){var l,c=(r+"").split(" ");for(s={},l=0;4>l;l++)s[e[l]]=c[l]=c[l]||c[(l-1)/2>>0];return n.parse(t,s,o,a)}},fe=(B._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,r,i,n,o,a=this.data,s=a.proxy,l=a.firstMPT;l;)t=s[l.v],l.r?t=Math.round(t):1e-6>t&&t>-1e-6&&(t=0),l.t[l.p]=t,l=l._next;if(a.autoRotate&&(a.autoRotate.rotation=s.rotation),1===e||0===e)for(l=a.firstMPT,o=1===e?"e":"b";l;){if((r=l.t).type){if(1===r.type){for(n=r.xs0+r.s+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r[o]=n}}else r[o]=r.s+r.xs0;l=l._next}},function(e,t,r,i,n){this.t=e,this.p=t,this.v=r,this.r=n,i&&(i._prev=this,this._next=i)}),me=(B._parseToProxy=function(e,t,r,i,n,o){var a,s,l,c,u,h=i,p={},d={},f=r._transform,m=z;for(r._transform=null,z=t,i=u=r.parse(e,t,i,n),z=m,o&&(r._transform=f,h&&(h._prev=null,h._prev&&(h._prev._next=null)));i&&i!==h;){if(i.type<=1&&(d[s=i.p]=i.s+i.c,p[s]=i.s,o||(c=new fe(i,"s",s,c,i.r),i.c=0),1===i.type))for(a=i.l;--a>0;)l="xn"+a,d[s=i.p+"_"+l]=i.data[l],p[s]=i[l],o||(c=new fe(i,l,s,c,i.rxp[l]));i=i._next}return{proxy:p,end:d,firstMPT:c,pt:u}},B.CSSPropTween=function(e,t,i,n,a,s,l,c,u,h,p){this.t=e,this.p=t,this.s=i,this.c=n,this.n=l||t,e instanceof me||o.push(this.n),this.r=c,this.type=s||0,u&&(this.pr=u,r=!0),this.b=void 0===h?i:h,this.e=void 0===p?i+n:p,a&&(this._next=a,a._prev=this)}),ve=function(e,t,r,i,n,o){var a=new me(e,t,r,i-r,n,-1,o);return a.b=r,a.e=a.xs0=i,a},ge=a.parseComplex=function(e,t,r,i,n,o,a,s,l,c){r=r||o||"",a=new me(e,t,0,0,a,c?2:1,null,!1,s,r,i),i+="";var h,p,d,f,m,y,x,_,w,b,M,T,E,S=r.split(", ").join(",").split(" "),R=i.split(", ").join(",").split(" "),P=S.length,A=!1!==u;for((-1!==i.indexOf(",")||-1!==r.indexOf(","))&&(S=S.join(" ").replace(O,", ").split(" "),R=R.join(" ").replace(O,", ").split(" "),P=S.length),P!==R.length&&(P=(S=(o||"").split(" ")).length),a.plugin=l,a.setRatio=c,he.lastIndex=0,h=0;P>h;h++)if(f=S[h],m=R[h],(_=parseFloat(f))||0===_)a.appendXtra("",_,ne(m,_),m.replace(g,""),A&&-1!==m.indexOf("px"),!0);else if(n&&he.test(f))T=","===m.charAt(m.length-1)?"),":")",E=-1!==m.indexOf("hsl")&&j,f=ce(f,E),m=ce(m,E),(w=f.length+m.length>6)&&!j&&0===m[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(R[h]).join("transparent")):(j||(w=!1),E?a.appendXtra(w?"hsla(":"hsl(",f[0],ne(m[0],f[0]),",",!1,!0).appendXtra("",f[1],ne(m[1],f[1]),"%,",!1).appendXtra("",f[2],ne(m[2],f[2]),w?"%,":"%"+T,!1):a.appendXtra(w?"rgba(":"rgb(",f[0],m[0]-f[0],",",!0,!0).appendXtra("",f[1],m[1]-f[1],",",!0).appendXtra("",f[2],m[2]-f[2],w?",":T,!0),w&&(f=f.length<4?1:f[3],a.appendXtra("",f,(m.length<4?1:m[3])-f,T,!1))),he.lastIndex=0;else if(y=f.match(v)){if(!(x=m.match(g))||x.length!==y.length)return a;for(d=0,p=0;p<y.length;p++)M=y[p],b=f.indexOf(M,d),a.appendXtra(f.substr(d,b-d),Number(M),ne(x[p],M),"",A&&"px"===f.substr(b+M.length,2),0===p),d=b+M.length;a["xs"+a.l]+=f.substr(d)}else a["xs"+a.l]+=a.l?" "+m:m;if(-1!==i.indexOf("=")&&a.data){for(T=a.xs0+a.data.s,h=1;h<a.l;h++)T+=a["xs"+h]+a.data["xn"+h];a.e=T+a["xs"+h]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},ye=9;for((c=me.prototype).l=c.pr=0;--ye>0;)c["xn"+ye]=0,c["xs"+ye]="";c.xs0="",c._next=c._prev=c.xfirst=c.data=c.plugin=c.setRatio=c.rxp=null,c.appendXtra=function(e,t,r,i,n,o){var a=this,s=a.l;return a["xs"+s]+=o&&s?" "+e:e||"",r||0===s||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=i||"",s>0?(a.data["xn"+s]=t+r,a.rxp["xn"+s]=n,a["xn"+s]=t,a.plugin||(a.xfirst=new me(a,"xn"+s,t,r,a.xfirst||a,0,a.n,n,a.pr),a.xfirst.xs0=0),a):(a.data={s:t+r},a.rxp={},a.s=t,a.c=r,a.r=n,a)):(a["xs"+s]+=t+(i||""),a)};var xe=function(e,t){t=t||{},this.p=t.prefix&&X(e)||e,l[e]=l[this.p]=this,this.format=t.formatter||pe(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},_e=B._registerComplexSpecialProp=function(e,t,r){"object"!=typeof t&&(t={parser:r});var i,n=e.split(","),o=t.defaultValue;for(r=r||[o],i=0;i<n.length;i++)t.prefix=0===i&&t.prefix,t.defaultValue=r[i]||o,new xe(n[i],t)},we=function(e){if(!l[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";_e(e,{parser:function(e,r,i,n,o,a,c){var u=s.com.greensock.plugins[t];return u?(u._cssRegister(),l[i].parse(e,r,i,n,o,a,c)):(W("Error: "+t+" js file not loaded."),o)}})}};(c=xe.prototype).parseComplex=function(e,t,r,i,n,o){var a,s,l,c,u,h,p=this.keyword;if(this.multi&&(O.test(r)||O.test(t)?(s=t.replace(O,"|").split("|"),l=r.replace(O,"|").split("|")):p&&(s=[t],l=[r])),l){for(c=l.length>s.length?l.length:s.length,a=0;c>a;a++)t=s[a]=s[a]||this.dflt,r=l[a]=l[a]||this.dflt,p&&(u=t.indexOf(p))!==(h=r.indexOf(p))&&(-1===h?s[a]=s[a].split(p).join(""):-1===u&&(s[a]+=" "+p));t=s.join(", "),r=l.join(", ")}return ge(e,this.p,t,r,this.clrs,this.dflt,i,this.pr,n,o)},c.parse=function(e,t,r,i,o,a,s){return this.parseComplex(e.style,this.format(Y(e,this.p,n,!1,this.dflt)),this.format(t),o,a)},a.registerSpecialProp=function(e,t,r){_e(e,{parser:function(e,i,n,o,a,s,l){var c=new me(e,n,0,0,a,2,n,!1,r);return c.plugin=s,c.setRatio=t(e,i,o._tween,n),c},priority:r})},a.useSVGTransformAttr=p||d;var be,Me="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Te=X("transform"),Ee=V+"transform",Se=X("transformOrigin"),Re=null!==X("perspective"),Pe=B.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=!(!1===a.defaultForce3D||!Re)&&(a.defaultForce3D||"auto")},Ae=window.SVGElement,Ce=function(e,t,r){var i,n=I.createElementNS("http://www.w3.org/2000/svg",e),o=/([a-z])([A-Z])/g;for(i in r)n.setAttributeNS(null,i.replace(o,"$1-$2").toLowerCase(),r[i]);return t.appendChild(n),n},Le=I.documentElement,Oe=function(){var e,t,r,i=m||/Android/i.test(F)&&!window.chrome;return I.createElementNS&&!i&&(e=Ce("svg",Le),r=(t=Ce("rect",e,{width:100,height:50,x:100})).getBoundingClientRect().width,t.style[Se]="50% 50%",t.style[Te]="scaleX(0.5)",i=r===t.getBoundingClientRect().width&&!(d&&Re),Le.removeChild(e)),i}(),De=function(e,t,r,i,n){var o,s,l,c,u,h,p,d,f,m,v,g,y,x,_=e._gsTransform,w=Ie(e,!0);_&&(y=_.xOrigin,x=_.yOrigin),(!i||(o=i.split(" ")).length<2)&&(p=e.getBBox(),o=[(-1!==(t=ie(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*p.width:parseFloat(t[0]))+p.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*p.height:parseFloat(t[1]))+p.y]),r.xOrigin=c=parseFloat(o[0]),r.yOrigin=u=parseFloat(o[1]),i&&w!==ze&&(h=w[0],p=w[1],d=w[2],f=w[3],m=w[4],v=w[5],s=c*(f/(g=h*f-p*d))+u*(-d/g)+(d*v-f*m)/g,l=c*(-p/g)+u*(h/g)-(h*v-p*m)/g,c=r.xOrigin=o[0]=s,u=r.yOrigin=o[1]=l),_&&(n||!1!==n&&!1!==a.defaultSmoothOrigin?(s=c-y,l=u-x,_.xOffset+=s*w[0]+l*w[2]-s,_.yOffset+=s*w[1]+l*w[3]-l):_.xOffset=_.yOffset=0),e.setAttribute("data-svg-origin",o.join(" "))},He=function(e){return!!(Ae&&"function"==typeof e.getBBox&&e.getCTM&&(!e.parentNode||e.parentNode.getBBox&&e.parentNode.getCTM))},ze=[1,0,0,1,0,0],Ie=function(e,t){var r,i,n,o,a,s=e._gsTransform||new Pe;if(Te?i=Y(e,Ee,null,!0):e.currentStyle&&(i=(i=e.currentStyle.filter.match(C))&&4===i.length?[i[0].substr(4),Number(i[2].substr(4)),Number(i[1].substr(4)),i[3].substr(4),s.x||0,s.y||0].join(","):""),r=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,(s.svg||e.getBBox&&He(e))&&(r&&-1!==(e.style[Te]+"").indexOf("matrix")&&(i=e.style[Te],r=0),n=e.getAttribute("transform"),r&&n&&(-1!==n.indexOf("matrix")?(i=n,r=0):-1!==n.indexOf("translate")&&(i="matrix(1,0,0,1,"+n.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",r=0))),r)return ze;for(n=(i||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],ye=n.length;--ye>-1;)o=Number(n[ye]),n[ye]=(a=o-(o|=0))?(1e5*a+(0>a?-.5:.5)|0)/1e5+o:o;return t&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n},ke=B.getTransform=function(e,r,i,o){if(e._gsTransform&&i&&!o)return e._gsTransform;var s,l,c,u,h,p,d=i&&e._gsTransform||new Pe,f=d.scaleX<0,m=1e5,v=Re&&(parseFloat(Y(e,Se,r,!1,"0 0 0").split(" ")[2])||d.zOrigin)||0,g=parseFloat(a.defaultTransformPerspective)||0;if(d.svg=!(!e.getBBox||!He(e)),d.svg&&(De(e,Y(e,Se,n,!1,"50% 50%")+"",d,e.getAttribute("data-svg-origin")),be=a.useSVGTransformAttr||Oe),(s=Ie(e))!==ze){if(16===s.length){var y,x,_,w,b,M=s[0],T=s[1],E=s[2],S=s[3],R=s[4],P=s[5],A=s[6],C=s[7],L=s[8],O=s[9],D=s[10],z=s[12],I=s[13],k=s[14],N=s[11],U=Math.atan2(A,D);d.zOrigin&&(z=L*(k=-d.zOrigin)-s[12],I=O*k-s[13],k=D*k+d.zOrigin-s[14]),d.rotationX=U*H,U&&(y=R*(w=Math.cos(-U))+L*(b=Math.sin(-U)),x=P*w+O*b,_=A*w+D*b,L=R*-b+L*w,O=P*-b+O*w,D=A*-b+D*w,N=C*-b+N*w,R=y,P=x,A=_),U=Math.atan2(-E,D),d.rotationY=U*H,U&&(x=T*(w=Math.cos(-U))-O*(b=Math.sin(-U)),_=E*w-D*b,O=T*b+O*w,D=E*b+D*w,N=S*b+N*w,M=y=M*w-L*b,T=x,E=_),U=Math.atan2(T,M),d.rotation=U*H,U&&(M=M*(w=Math.cos(-U))+R*(b=Math.sin(-U)),x=T*w+P*b,P=T*-b+P*w,A=E*-b+A*w,T=x),d.rotationX&&Math.abs(d.rotationX)+Math.abs(d.rotation)>359.9&&(d.rotationX=d.rotation=0,d.rotationY=180-d.rotationY),d.scaleX=(Math.sqrt(M*M+T*T)*m+.5|0)/m,d.scaleY=(Math.sqrt(P*P+O*O)*m+.5|0)/m,d.scaleZ=(Math.sqrt(A*A+D*D)*m+.5|0)/m,d.skewX=0,d.perspective=N?1/(0>N?-N:N):0,d.x=z,d.y=I,d.z=k,d.svg&&(d.x-=d.xOrigin-(d.xOrigin*M-d.yOrigin*R),d.y-=d.yOrigin-(d.yOrigin*T-d.xOrigin*P))}else if((!Re||o||!s.length||d.x!==s[4]||d.y!==s[5]||!d.rotationX&&!d.rotationY)&&(void 0===d.x||"none"!==Y(e,"display",r))){var B=s.length>=6,F=B?s[0]:1,j=s[1]||0,G=s[2]||0,W=B?s[3]:1;d.x=s[4]||0,d.y=s[5]||0,c=Math.sqrt(F*F+j*j),u=Math.sqrt(W*W+G*G),h=F||j?Math.atan2(j,F)*H:d.rotation||0,p=G||W?Math.atan2(G,W)*H+h:d.skewX||0,Math.abs(p)>90&&Math.abs(p)<270&&(f?(c*=-1,p+=0>=h?180:-180,h+=0>=h?180:-180):(u*=-1,p+=0>=p?180:-180)),d.scaleX=c,d.scaleY=u,d.rotation=h,d.skewX=p,Re&&(d.rotationX=d.rotationY=d.z=0,d.perspective=g,d.scaleZ=1),d.svg&&(d.x-=d.xOrigin-(d.xOrigin*F+d.yOrigin*G),d.y-=d.yOrigin-(d.xOrigin*j+d.yOrigin*W))}for(l in d.zOrigin=v,d)d[l]<2e-5&&d[l]>-2e-5&&(d[l]=0)}return i&&(e._gsTransform=d,d.svg&&(be&&e.style[Te]?t.delayedCall(.001,function(){Fe(e.style,Te)}):!be&&e.getAttribute("transform")&&t.delayedCall(.001,function(){e.removeAttribute("transform")}))),d},Ne=function(e){var t,r,i=this.data,n=-i.rotation*D,o=n+i.skewX*D,a=1e5,s=(Math.cos(n)*i.scaleX*a|0)/a,l=(Math.sin(n)*i.scaleX*a|0)/a,c=(Math.sin(o)*-i.scaleY*a|0)/a,u=(Math.cos(o)*i.scaleY*a|0)/a,h=this.t.style,p=this.t.currentStyle;if(p){r=l,l=-c,c=-r,t=p.filter,h.filter="";var d,f,v=this.t.offsetWidth,g=this.t.offsetHeight,y="absolute"!==p.position,x="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+l+", M21="+c+", M22="+u,b=i.x+v*i.xPercent/100,M=i.y+g*i.yPercent/100;if(null!=i.ox&&(b+=(d=(i.oxp?v*i.ox*.01:i.ox)-v/2)-(d*s+(f=(i.oyp?g*i.oy*.01:i.oy)-g/2)*l),M+=f-(d*c+f*u)),x+=y?", Dx="+((d=v/2)-(d*s+(f=g/2)*l)+b)+", Dy="+(f-(d*c+f*u)+M)+")":", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?h.filter=t.replace(L,x):h.filter=x+" "+t,(0===e||1===e)&&1===s&&0===l&&0===c&&1===u&&(y&&-1===x.indexOf("Dx=0, Dy=0")||w.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&h.removeAttribute("filter")),!y){var T,E,S,R=8>m?1:-1;for(d=i.ieOffsetX||0,f=i.ieOffsetY||0,i.ieOffsetX=Math.round((v-((0>s?-s:s)*v+(0>l?-l:l)*g))/2+b),i.ieOffsetY=Math.round((g-((0>u?-u:u)*g+(0>c?-c:c)*v))/2+M),ye=0;4>ye;ye++)S=(r=-1!==(T=p[E=te[ye]]).indexOf("px")?parseFloat(T):J(this.t,E,parseFloat(T),T.replace(_,""))||0)!==i[E]?2>ye?-i.ieOffsetX:-i.ieOffsetY:2>ye?d-i.ieOffsetX:f-i.ieOffsetY,h[E]=(i[E]=Math.round(r-S*(0===ye||2===ye?1:R)))+"px"}}},Ue=B.set3DTransformRatio=B.setTransformRatio=function(e){var t,r,i,n,o,a,s,l,c,u,h,p,f,m,v,g,y,x,_,w,b,M,T,E=this.data,S=this.t.style,R=E.rotation,P=E.rotationX,A=E.rotationY,C=E.scaleX,L=E.scaleY,O=E.scaleZ,H=E.x,z=E.y,I=E.z,k=E.svg,N=E.perspective,U=E.force3D;if(!((1!==e&&0!==e||"auto"!==U||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&U||I||N||A||P||1!==O)||be&&k||!Re)R||E.skewX||k?(R*=D,M=E.skewX*D,T=1e5,t=Math.cos(R)*C,n=Math.sin(R)*C,r=Math.sin(R-M)*-L,o=Math.cos(R-M)*L,M&&"simple"===E.skewType&&(y=Math.tan(M),r*=y=Math.sqrt(1+y*y),o*=y,E.skewY&&(t*=y,n*=y)),k&&(H+=E.xOrigin-(E.xOrigin*t+E.yOrigin*r)+E.xOffset,z+=E.yOrigin-(E.xOrigin*n+E.yOrigin*o)+E.yOffset,be&&(E.xPercent||E.yPercent)&&(m=this.t.getBBox(),H+=.01*E.xPercent*m.width,z+=.01*E.yPercent*m.height),(m=1e-6)>H&&H>-m&&(H=0),m>z&&z>-m&&(z=0)),_=(t*T|0)/T+","+(n*T|0)/T+","+(r*T|0)/T+","+(o*T|0)/T+","+H+","+z+")",k&&be?this.t.setAttribute("transform","matrix("+_):S[Te]=(E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) matrix(":"matrix(")+_):S[Te]=(E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) matrix(":"matrix(")+C+",0,0,"+L+","+H+","+z+")";else{if(d&&((m=1e-4)>C&&C>-m&&(C=O=2e-5),m>L&&L>-m&&(L=O=2e-5),!N||E.z||E.rotationX||E.rotationY||(N=0)),R||E.skewX)R*=D,v=t=Math.cos(R),g=n=Math.sin(R),E.skewX&&(R-=E.skewX*D,v=Math.cos(R),g=Math.sin(R),"simple"===E.skewType&&(y=Math.tan(E.skewX*D),v*=y=Math.sqrt(1+y*y),g*=y,E.skewY&&(t*=y,n*=y))),r=-g,o=v;else{if(!(A||P||1!==O||N||k))return void(S[Te]=(E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) translate3d(":"translate3d(")+H+"px,"+z+"px,"+I+"px)"+(1!==C||1!==L?" scale("+C+","+L+")":""));t=o=1,r=n=0}c=1,i=a=s=l=u=h=0,p=N?-1/N:0,f=E.zOrigin,m=1e-6,w=",",b="0",(R=A*D)&&(v=Math.cos(R),s=-(g=Math.sin(R)),u=p*-g,i=t*g,a=n*g,c=v,p*=v,t*=v,n*=v),(R=P*D)&&(y=r*(v=Math.cos(R))+i*(g=Math.sin(R)),x=o*v+a*g,l=c*g,h=p*g,i=r*-g+i*v,a=o*-g+a*v,c*=v,p*=v,r=y,o=x),1!==O&&(i*=O,a*=O,c*=O,p*=O),1!==L&&(r*=L,o*=L,l*=L,h*=L),1!==C&&(t*=C,n*=C,s*=C,u*=C),(f||k)&&(f&&(H+=i*-f,z+=a*-f,I+=c*-f+f),k&&(H+=E.xOrigin-(E.xOrigin*t+E.yOrigin*r)+E.xOffset,z+=E.yOrigin-(E.xOrigin*n+E.yOrigin*o)+E.yOffset),m>H&&H>-m&&(H=b),m>z&&z>-m&&(z=b),m>I&&I>-m&&(I=0)),_=E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) matrix3d(":"matrix3d(",_+=(m>t&&t>-m?b:t)+w+(m>n&&n>-m?b:n)+w+(m>s&&s>-m?b:s),_+=w+(m>u&&u>-m?b:u)+w+(m>r&&r>-m?b:r)+w+(m>o&&o>-m?b:o),P||A||1!==O?(_+=w+(m>l&&l>-m?b:l)+w+(m>h&&h>-m?b:h)+w+(m>i&&i>-m?b:i),_+=w+(m>a&&a>-m?b:a)+w+(m>c&&c>-m?b:c)+w+(m>p&&p>-m?b:p)+w):_+=",0,0,0,0,1,0,",_+=H+w+z+w+I+w+(N?1+-I/N:1)+")",S[Te]=_}};(c=Pe.prototype).x=c.y=c.z=c.skewX=c.skewY=c.rotation=c.rotationX=c.rotationY=c.zOrigin=c.xPercent=c.yPercent=c.xOffset=c.yOffset=0,c.scaleX=c.scaleY=c.scaleZ=1,_e("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,r,i,o,s,l){if(i._lastParsedTransform===l)return o;i._lastParsedTransform=l;var c,u,h,p,d,f,m,v,g,y,x=e._gsTransform,_=e.style,w=Me.length,b=l,M={},T="transformOrigin";if(l.display?(p=Y(e,"display"),_.display="block",c=ke(e,n,!0,l.parseTransform),_.display=p):c=ke(e,n,!0,l.parseTransform),i._transform=c,"string"==typeof b.transform&&Te)(p=N.style)[Te]=b.transform,p.display="block",p.position="absolute",I.body.appendChild(N),u=ke(N,null,!1),I.body.removeChild(N),u.perspective||(u.perspective=c.perspective),null!=b.xPercent&&(u.xPercent=oe(b.xPercent,c.xPercent)),null!=b.yPercent&&(u.yPercent=oe(b.yPercent,c.yPercent));else if("object"==typeof b){if(u={scaleX:oe(null!=b.scaleX?b.scaleX:b.scale,c.scaleX),scaleY:oe(null!=b.scaleY?b.scaleY:b.scale,c.scaleY),scaleZ:oe(b.scaleZ,c.scaleZ),x:oe(b.x,c.x),y:oe(b.y,c.y),z:oe(b.z,c.z),xPercent:oe(b.xPercent,c.xPercent),yPercent:oe(b.yPercent,c.yPercent),perspective:oe(b.transformPerspective,c.perspective)},null!=(v=b.directionalRotation))if("object"==typeof v)for(p in v)b[p]=v[p];else b.rotation=v;"string"==typeof b.x&&-1!==b.x.indexOf("%")&&(u.x=0,u.xPercent=oe(b.x,c.xPercent)),"string"==typeof b.y&&-1!==b.y.indexOf("%")&&(u.y=0,u.yPercent=oe(b.y,c.yPercent)),u.rotation=ae("rotation"in b?b.rotation:"shortRotation"in b?b.shortRotation+"_short":"rotationZ"in b?b.rotationZ:c.rotation,c.rotation,"rotation",M),Re&&(u.rotationX=ae("rotationX"in b?b.rotationX:"shortRotationX"in b?b.shortRotationX+"_short":c.rotationX||0,c.rotationX,"rotationX",M),u.rotationY=ae("rotationY"in b?b.rotationY:"shortRotationY"in b?b.shortRotationY+"_short":c.rotationY||0,c.rotationY,"rotationY",M)),u.skewX=null==b.skewX?c.skewX:ae(b.skewX,c.skewX),u.skewY=null==b.skewY?c.skewY:ae(b.skewY,c.skewY),(h=u.skewY-c.skewY)&&(u.skewX+=h,u.rotation+=h)}for(Re&&null!=b.force3D&&(c.force3D=b.force3D,m=!0),c.skewType=b.skewType||c.skewType||a.defaultSkewType,(f=c.force3D||c.z||c.rotationX||c.rotationY||u.z||u.rotationX||u.rotationY||u.perspective)||null==b.scale||(u.scaleZ=1);--w>-1;)((d=u[r=Me[w]]-c[r])>1e-6||-1e-6>d||null!=b[r]||null!=z[r])&&(m=!0,o=new me(c,r,c[r],d,o),r in M&&(o.e=M[r]),o.xs0=0,o.plugin=s,i._overwriteProps.push(o.n));return d=b.transformOrigin,c.svg&&(d||b.svgOrigin)&&(g=c.xOffset,y=c.yOffset,De(e,ie(d),u,b.svgOrigin,b.smoothOrigin),o=ve(c,"xOrigin",(x?c:u).xOrigin,u.xOrigin,o,T),o=ve(c,"yOrigin",(x?c:u).yOrigin,u.yOrigin,o,T),(g!==c.xOffset||y!==c.yOffset)&&(o=ve(c,"xOffset",x?g:c.xOffset,c.xOffset,o,T),o=ve(c,"yOffset",x?y:c.yOffset,c.yOffset,o,T)),d=be?null:"0px 0px"),(d||Re&&f&&c.zOrigin)&&(Te?(m=!0,r=Se,d=(d||Y(e,r,n,!1,"50% 50%"))+"",(o=new me(_,r,0,0,o,-1,T)).b=_[r],o.plugin=s,Re?(p=c.zOrigin,d=d.split(" "),c.zOrigin=(d.length>2&&(0===p||"0px"!==d[2])?parseFloat(d[2]):p)||0,o.xs0=o.e=d[0]+" "+(d[1]||"50%")+" 0px",(o=new me(c,"zOrigin",0,0,o,-1,o.n)).b=p,o.xs0=o.e=c.zOrigin):o.xs0=o.e=d):ie(d+"",c)),m&&(i._transformType=c.svg&&be||!f&&3!==this._transformType?2:3),o},prefix:!0}),_e("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),_e("borderRadius",{defaultValue:"0px",parser:function(e,t,r,o,a,s){t=this.format(t);var l,c,u,h,p,d,f,m,v,g,y,x,_,w,b,M,T=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],E=e.style;for(v=parseFloat(e.offsetWidth),g=parseFloat(e.offsetHeight),l=t.split(" "),c=0;c<T.length;c++)this.p.indexOf("border")&&(T[c]=X(T[c])),-1!==(p=h=Y(e,T[c],n,!1,"0px")).indexOf(" ")&&(p=(h=p.split(" "))[0],h=h[1]),d=u=l[c],f=parseFloat(p),x=p.substr((f+"").length),(_="="===d.charAt(1))?(m=parseInt(d.charAt(0)+"1",10),d=d.substr(2),m*=parseFloat(d),y=d.substr((m+"").length-(0>m?1:0))||""):(m=parseFloat(d),y=d.substr((m+"").length)),""===y&&(y=i[r]||x),y!==x&&(w=J(e,"borderLeft",f,x),b=J(e,"borderTop",f,x),"%"===y?(p=w/v*100+"%",h=b/g*100+"%"):"em"===y?(p=w/(M=J(e,"borderLeft",1,"em"))+"em",h=b/M+"em"):(p=w+"px",h=b+"px"),_&&(d=parseFloat(p)+m+y,u=parseFloat(h)+m+y)),a=ge(E,T[c],p+" "+h,d+" "+u,!1,"0px",a);return a},prefix:!0,formatter:pe("0px 0px 0px 0px",!1,!0)}),_e("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,r,i,o,a){var s,l,c,u,h,p,d="background-position",f=n||$(e,null),v=this.format((f?m?f.getPropertyValue(d+"-x")+" "+f.getPropertyValue(d+"-y"):f.getPropertyValue(d):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),g=this.format(t);if(-1!==v.indexOf("%")!=(-1!==g.indexOf("%"))&&(p=Y(e,"backgroundImage").replace(R,""))&&"none"!==p){for(s=v.split(" "),l=g.split(" "),U.setAttribute("src",p),c=2;--c>-1;)(u=-1!==(v=s[c]).indexOf("%"))!=(-1!==l[c].indexOf("%"))&&(h=0===c?e.offsetWidth-U.width:e.offsetHeight-U.height,s[c]=u?parseFloat(v)/100*h+"px":parseFloat(v)/h*100+"%");v=s.join(" ")}return this.parseComplex(e.style,v,g,o,a)},formatter:ie}),_e("backgroundSize",{defaultValue:"0 0",formatter:ie}),_e("perspective",{defaultValue:"0px",prefix:!0}),_e("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),_e("transformStyle",{prefix:!0}),_e("backfaceVisibility",{prefix:!0}),_e("userSelect",{prefix:!0}),_e("margin",{parser:de("marginTop,marginRight,marginBottom,marginLeft")}),_e("padding",{parser:de("paddingTop,paddingRight,paddingBottom,paddingLeft")}),_e("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,r,i,o,a){var s,l,c;return 9>m?(l=e.currentStyle,c=8>m?" ":",",s="rect("+l.clipTop+c+l.clipRight+c+l.clipBottom+c+l.clipLeft+")",t=this.format(t).split(",").join(c)):(s=this.format(Y(e,this.p,n,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,s,t,o,a)}}),_e("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),_e("autoRound,strictUnits",{parser:function(e,t,r,i,n){return n}}),_e("border",{defaultValue:"0px solid #000",parser:function(e,t,r,i,o,a){return this.parseComplex(e.style,this.format(Y(e,"borderTopWidth",n,!1,"0px")+" "+Y(e,"borderTopStyle",n,!1,"solid")+" "+Y(e,"borderTopColor",n,!1,"#000")),this.format(t),o,a)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(he)||["#000"])[0]}}),_e("borderWidth",{parser:de("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),_e("float,cssFloat,styleFloat",{parser:function(e,t,r,i,n,o){var a=e.style,s="cssFloat"in a?"cssFloat":"styleFloat";return new me(a,s,0,0,n,-1,r,!1,0,a[s],t)}});var Be=function(e){var t,r=this.t,i=r.filter||Y(this.data,"filter")||"",n=this.s+this.c*e|0;100===n&&(-1===i.indexOf("atrix(")&&-1===i.indexOf("radient(")&&-1===i.indexOf("oader(")?(r.removeAttribute("filter"),t=!Y(this.data,"filter")):(r.filter=i.replace(M,""),t=!0)),t||(this.xn1&&(r.filter=i=i||"alpha(opacity="+n+")"),-1===i.indexOf("pacity")?0===n&&this.xn1||(r.filter=i+" alpha(opacity="+n+")"):r.filter=i.replace(w,"opacity="+n))};_e("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,r,i,o,a){var s=parseFloat(Y(e,"opacity",n,!1,"1")),l=e.style,c="autoAlpha"===r;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+s),c&&1===s&&"hidden"===Y(e,"visibility",n)&&0!==t&&(s=0),j?o=new me(l,"opacity",s,t-s,o):((o=new me(l,"opacity",100*s,100*(t-s),o)).xn1=c?1:0,l.zoom=1,o.type=2,o.b="alpha(opacity="+o.s+")",o.e="alpha(opacity="+(o.s+o.c)+")",o.data=e,o.plugin=a,o.setRatio=Be),c&&((o=new me(l,"visibility",0,0,o,-1,null,!1,0,0!==s?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",i._overwriteProps.push(o.n),i._overwriteProps.push(r)),o}});var Fe=function(e,t){t&&(e.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),e.removeProperty(t.replace(E,"-$1").toLowerCase())):e.removeAttribute(t))},je=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,r=this.t.style;t;)t.v?r[t.p]=t.v:Fe(r,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};_e("className",{parser:function(e,t,i,o,a,s,l){var c,u,h,p,d,f=e.getAttribute("class")||"",m=e.style.cssText;if((a=o._classNamePT=new me(e,i,0,0,a,2)).setRatio=je,a.pr=-11,r=!0,a.b=f,u=Q(e,n),h=e._gsClassPT){for(p={},d=h.data;d;)p[d.p]=1,d=d._next;h.setRatio(1)}return e._gsClassPT=a,a.e="="!==t.charAt(1)?t:f.replace(new RegExp("\\s*\\b"+t.substr(2)+"\\b"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",a.e),c=K(e,u,Q(e),l,p),e.setAttribute("class",f),a.data=c.firstMPT,e.style.cssText=m,a.xfirst=o.parse(e,c.difs,a,s)}});var Ge=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,r,i,n,o,a=this.t.style,s=l.transform.parse;if("all"===this.e)a.cssText="",n=!0;else for(i=(t=this.e.split(" ").join("").split(",")).length;--i>-1;)r=t[i],l[r]&&(l[r].parse===s?n=!0:r="transformOrigin"===r?Se:l[r].p),Fe(a,r);n&&(Fe(a,Te),(o=this.t._gsTransform)&&(o.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(_e("clearProps",{parser:function(e,t,i,n,o){return(o=new me(e,i,0,0,o,2)).setRatio=Ge,o.e=t,o.pr=-10,o.data=n._tween,r=!0,o}}),c="bezier,throwProps,physicsProps,physics2D".split(","),ye=c.length;ye--;)we(c[ye]);(c=a.prototype)._firstPT=c._lastParsedTransform=c._transform=null,c._onInitTween=function(e,t,s){if(!e.nodeType)return!1;this._target=e,this._tween=s,this._vars=t,u=t.autoRound,r=!1,i=t.suffixMap||a.suffixMap,n=$(e,""),o=this._overwriteProps;var c,d,m,v,g,y,x,_,w,M=e.style;if(h&&""===M.zIndex&&("auto"===(c=Y(e,"zIndex",n))||""===c)&&this._addLazySet(M,"zIndex",0),"string"==typeof t&&(v=M.cssText,c=Q(e,n),M.cssText=v+";"+t,c=K(e,c,Q(e)).difs,!j&&b.test(t)&&(c.opacity=parseFloat(RegExp.$1)),t=c,M.cssText=v),t.className?this._firstPT=d=l.className.parse(e,t.className,"className",this,null,null,t):this._firstPT=d=this.parse(e,t,null),this._transformType){for(w=3===this._transformType,Te?p&&(h=!0,""===M.zIndex&&("auto"===(x=Y(e,"zIndex",n))||""===x)&&this._addLazySet(M,"zIndex",0),f&&this._addLazySet(M,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(w?"visible":"hidden"))):M.zoom=1,m=d;m&&m._next;)m=m._next;_=new me(e,"transform",0,0,null,2),this._linkCSSP(_,null,m),_.setRatio=Te?Ue:Ne,_.data=this._transform||ke(e,n,!0),_.tween=s,_.pr=-1,o.pop()}if(r){for(;d;){for(y=d._next,m=v;m&&m.pr>d.pr;)m=m._next;(d._prev=m?m._prev:g)?d._prev._next=d:v=d,(d._next=m)?m._prev=d:g=d,d=y}this._firstPT=v}return!0},c.parse=function(e,t,r,o){var a,s,c,h,p,d,f,m,v,g,y=e.style;for(a in t)d=t[a],(s=l[a])?r=s.parse(e,d,a,this,r,o,t):(p=Y(e,a,n)+"",v="string"==typeof d,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||v&&T.test(d)?(v||(d=((d=ce(d)).length>3?"rgba(":"rgb(")+d.join(",")+")"),r=ge(y,a,p,d,!0,"transparent",r,0,o)):!v||-1===d.indexOf(" ")&&-1===d.indexOf(",")?(f=(c=parseFloat(p))||0===c?p.substr((c+"").length):"",(""===p||"auto"===p)&&("width"===a||"height"===a?(c=re(e,a,n),f="px"):"left"===a||"top"===a?(c=Z(e,a,n),f="px"):(c="opacity"!==a?0:1,f="")),(g=v&&"="===d.charAt(1))?(h=parseInt(d.charAt(0)+"1",10),d=d.substr(2),h*=parseFloat(d),m=d.replace(_,"")):(h=parseFloat(d),m=v?d.replace(_,""):""),""===m&&(m=a in i?i[a]:f),d=h||0===h?(g?h+c:h)+m:t[a],f!==m&&""!==m&&(h||0===h)&&c&&(c=J(e,a,c,f),"%"===m?(c/=J(e,a,100,"%")/100,!0!==t.strictUnits&&(p=c+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?c/=J(e,a,1,m):"px"!==m&&(h=J(e,a,h,m),m="px"),g&&(h||0===h)&&(d=h+c+m)),g&&(h+=c),!c&&0!==c||!h&&0!==h?void 0!==y[a]&&(d||d+""!="NaN"&&null!=d)?(r=new me(y,a,h||c||0,0,r,-1,a,!1,0,p,d)).xs0="none"!==d||"display"!==a&&-1===a.indexOf("Style")?d:p:W("invalid "+a+" tween value: "+t[a]):(r=new me(y,a,c,h-c,r,0,a,!1!==u&&("px"===m||"zIndex"===a),0,p,d)).xs0=m):r=ge(y,a,p,d,!0,null,r,0,o)),o&&r&&!r.plugin&&(r.plugin=o);return r},c.setRatio=function(e){var t,r,i,n=this._firstPT;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;n;){if(t=n.c*e+n.s,n.r?t=Math.round(t):1e-6>t&&t>-1e-6&&(t=0),n.type)if(1===n.type)if(2===(i=n.l))n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2;else if(3===i)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===i)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===i)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(r=n.xs0+t+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n.t[n.p]=r}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(e);else n.t[n.p]=t+n.xs0;n=n._next}else for(;n;)2!==n.type?n.t[n.p]=n.b:n.setRatio(e),n=n._next;else for(;n;){if(2!==n.type)if(n.r&&-1!==n.type)if(t=Math.round(n.s+n.c),n.type){if(1===n.type){for(i=n.l,r=n.xs0+t+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n.t[n.p]=r}}else n.t[n.p]=t+n.xs0;else n.t[n.p]=n.e;else n.setRatio(e);n=n._next}},c._enableTransforms=function(e){this._transform=this._transform||ke(this._target,n,!0),this._transformType=this._transform.svg&&be||!e&&3!==this._transformType?2:3};var We=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};c._addLazySet=function(e,t,r){var i=this._firstPT=new me(e,t,0,0,this._firstPT,2);i.e=r,i.setRatio=We,i.data=this},c._linkCSSP=function(e,t,r,i){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,i=!0),r?r._next=e:i||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=r),e},c._kill=function(t){var r,i,n,o=t;if(t.autoAlpha||t.alpha){for(i in o={},t)o[i]=t[i];o.opacity=1,o.autoAlpha&&(o.visibility=1)}return t.className&&(r=this._classNamePT)&&((n=r.xfirst)&&n._prev?this._linkCSSP(n._prev,r._next,n._prev._prev):n===this._firstPT&&(this._firstPT=r._next),r._next&&this._linkCSSP(r._next,r._next._next,n._prev),this._classNamePT=null),e.prototype._kill.call(this,o)};var Ve=function(e,t,r){var i,n,o,a;if(e.slice)for(n=e.length;--n>-1;)Ve(e[n],t,r);else for(n=(i=e.childNodes).length;--n>-1;)a=(o=i[n]).type,o.style&&(t.push(Q(o)),r&&r.push(o)),1!==a&&9!==a&&11!==a||!o.childNodes.length||Ve(o,t,r)};return a.cascadeTo=function(e,r,i){var n,o,a,s,l=t.to(e,r,i),c=[l],u=[],h=[],p=[],d=t._internals.reservedProps;for(e=l._targets||l.target,Ve(e,u,p),l.render(r,!0,!0),Ve(e,h),l.render(0,!0,!0),l._enabled(!0),n=p.length;--n>-1;)if((o=K(p[n],u[n],h[n])).firstMPT){for(a in o=o.difs,i)d[a]&&(o[a]=i[a]);for(a in s={},o)s[a]=u[n][a];c.push(t.fromTo(p[n],r,s,o))}return c},e.activate([a]),a},!0),function(){var e=function(e){for(;e;)e.f||e.blob||(e.r=1),e=e._next},t=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.5",priority:-1,API:2,init:function(e,t,r){return this._tween=r,!0}}).prototype;t._onInitAllProps=function(){for(var t,r,i,n=this._tween,o=n.vars.roundProps.join?n.vars.roundProps:n.vars.roundProps.split(","),a=o.length,s={},l=n._propLookup.roundProps;--a>-1;)s[o[a]]=1;for(a=o.length;--a>-1;)for(t=o[a],r=n._firstPT;r;)i=r._next,r.pg?r.t._roundProps(s,!0):r.n===t&&(2===r.f&&r.t?e(r.t._firstPT):(this._add(r.t,t,r.s,r.c),i&&(i._prev=r._prev),r._prev?r._prev._next=i:n._firstPT===r&&(n._firstPT=i),r._next=r._prev=null,n._propLookup[t]=l)),r=i;return!1},t._add=function(e,t,r,i){this._addTween(e,t,r,r+i,t,!0),this._overwriteProps.push(t)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.5.0",init:function(e,t,r){var i;if("function"!=typeof e.setAttribute)return!1;for(i in t)this._addTween(e,"setAttribute",e.getAttribute(i)+"",t[i]+"",i,!1,i),this._overwriteProps.push(i);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(e,t,r){"object"!=typeof t&&(t={rotation:t}),this.finals={};var i,n,o,a,s,l=!0===t.useRadians?2*Math.PI:360;for(i in t)"useRadians"!==i&&(n=(s=(t[i]+"").split("_"))[0],o=parseFloat("function"!=typeof e[i]?e[i]:e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]()),a=(this.finals[i]="string"==typeof n&&"="===n.charAt(1)?o+parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)):Number(n)||0)-o,s.length&&(-1!==(n=s.join("_")).indexOf("short")&&(a%=l)!=a%(l/2)&&(a=0>a?a+l:a-l),-1!==n.indexOf("_cw")&&0>a?a=(a+9999999999*l)%l-(a/l|0)*l:-1!==n.indexOf("ccw")&&a>0&&(a=(a-9999999999*l)%l-(a/l|0)*l)),(a>1e-6||-1e-6>a)&&(this._addTween(e,i,o,o+a,i),this._overwriteProps.push(i)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(e){var t,r,i,n=_gsScope.GreenSockGlobals||_gsScope,o=n.com.greensock,a=2*Math.PI,s=Math.PI/2,l=o._class,c=function(t,r){var i=l("easing."+t,function(){},!0),n=i.prototype=new e;return n.constructor=i,n.getRatio=r,i},u=e.register||function(){},h=function(e,t,r,i,n){var o=l("easing."+e,{easeOut:new t,easeIn:new r,easeInOut:new i},!0);return u(o,e),o},p=function(e,t,r){this.t=e,this.v=t,r&&(this.next=r,r.prev=this,this.c=r.v-t,this.gap=r.t-e)},d=function(t,r){var i=l("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),n=i.prototype=new e;return n.constructor=i,n.getRatio=r,n.config=function(e){return new i(e)},i},f=h("Back",d("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),d("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),d("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),m=l("easing.SlowMo",function(e,t,r){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=!0===r},!0),v=m.prototype=new e;return v.constructor=m,v.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},m.ease=new m(.7,.7),v.config=m.config=function(e,t,r){return new m(e,t,r)},(v=(t=l("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0)).prototype=new e).constructor=t,v.getRatio=function(e){return 0>e?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},v.config=t.config=function(e){return new t(e)},(v=(r=l("easing.RoughEase",function(t){for(var r,i,n,o,a,s,l=(t=t||{}).taper||"none",c=[],u=0,h=0|(t.points||20),d=h,f=!1!==t.randomize,m=!0===t.clamp,v=t.template instanceof e?t.template:null,g="number"==typeof t.strength?.4*t.strength:.4;--d>-1;)r=f?Math.random():1/h*d,i=v?v.getRatio(r):r,n="none"===l?g:"out"===l?(o=1-r)*o*g:"in"===l?r*r*g:.5>r?(o=2*r)*o*.5*g:(o=2*(1-r))*o*.5*g,f?i+=Math.random()*n-.5*n:d%2?i+=.5*n:i-=.5*n,m&&(i>1?i=1:0>i&&(i=0)),c[u++]={x:r,y:i};for(c.sort(function(e,t){return e.x-t.x}),s=new p(1,1,null),d=h;--d>-1;)a=c[d],s=new p(a.x,a.y,s);this._prev=new p(0,0,0!==s.t?s:s.next)},!0)).prototype=new e).constructor=r,v.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},v.config=function(e){return new r(e)},r.ease=new r,h("Bounce",c("BounceOut",function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),c("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:2/2.75>e?1-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),c("BounceInOut",function(e){var t=.5>e;return e=1/2.75>(e=t?1-2*e:2*e-1)?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),h("Circ",c("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),c("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),c("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),h("Elastic",(i=function(t,r,i){var n=l("easing."+t,function(e,t){this._p1=e>=1?e:1,this._p2=(t||i)/(1>e?e:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),o=n.prototype=new e;return o.constructor=n,o.getRatio=r,o.config=function(e,t){return new n(e,t)},n})("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),i("ElasticIn",function(e){return-this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)},.3),i("ElasticInOut",function(e){return(e*=2)<1?this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),h("Expo",c("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),c("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),c("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),h("Sine",c("SineOut",function(e){return Math.sin(e*s)}),c("SineIn",function(e){return 1-Math.cos(e*s)}),c("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),l("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),u(n.SlowMo,"SlowMo","ease,"),u(r,"RoughEase","ease,"),u(t,"SteppedEase","ease,"),f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e,t){"use strict";var r=e.GreenSockGlobals=e.GreenSockGlobals||e;if(!r.TweenLite){var i,n,o,a,s,l=function(e){var t,i=e.split("."),n=r;for(t=0;t<i.length;t++)n[i[t]]=n=n[i[t]]||{};return n},c=l("com.greensock"),u=1e-10,h=function(e){var t,r=[],i=e.length;for(t=0;t!==i;r.push(e[t++]));return r},p=function(){},d=function(){var e=Object.prototype.toString,t=e.call([]);return function(r){return null!=r&&(r instanceof Array||"object"==typeof r&&!!r.push&&e.call(r)===t)}}(),f={},m=function(t,i,n,o){this.sc=f[t]?f[t].sc:[],f[t]=this,this.gsClass=null,this.func=n;var a=[];this.check=function(s){for(var c,u,h,p,d,v=i.length,g=v;--v>-1;)(c=f[i[v]]||new m(i[v],[])).gsClass?(a[v]=c.gsClass,g--):s&&c.sc.push(this);if(0===g&&n)for(h=(u=("com.greensock."+t).split(".")).pop(),p=l(u.join("."))[h]=this.gsClass=n.apply(n,a),o&&(r[h]=p,!(d="undefined"!=typeof module&&module.exports)&&"function"==typeof define&&define.amd?define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+t.split(".").pop(),[],function(){return p}):"TweenMax"===t&&d&&(module.exports=p)),v=0;v<this.sc.length;v++)this.sc[v].check()},this.check(!0)},v=e._gsDefine=function(e,t,r,i){return new m(e,t,r,i)},g=c._class=function(e,t,r){return t=t||function(){},v(e,[],function(){return t},r),t};v.globals=r;var y=[0,0,1,1],x=[],_=g("easing.Ease",function(e,t,r,i){this._func=e,this._type=r||0,this._power=i||0,this._params=t?y.concat(t):y},!0),w=_.map={},b=_.register=function(e,t,r,i){for(var n,o,a,s,l=t.split(","),u=l.length,h=(r||"easeIn,easeOut,easeInOut").split(",");--u>-1;)for(o=l[u],n=i?g("easing."+o,null,!0):c.easing[o]||{},a=h.length;--a>-1;)s=h[a],w[o+"."+s]=w[s+o]=n[s]=e.getRatio?e:e[s]||new e};for((o=_.prototype)._calcEnd=!1,o.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,r=this._power,i=1===t?1-e:2===t?e:.5>e?2*e:2*(1-e);return 1===r?i*=i:2===r?i*=i*i:3===r?i*=i*i*i:4===r&&(i*=i*i*i*i),1===t?1-i:2===t?i:.5>e?i/2:1-i/2},n=(i=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--n>-1;)o=i[n]+",Power"+n,b(new _(null,null,1,n),o,"easeOut",!0),b(new _(null,null,2,n),o,"easeIn"+(0===n?",easeNone":"")),b(new _(null,null,3,n),o,"easeInOut");w.linear=c.easing.Linear.easeIn,w.swing=c.easing.Quad.easeInOut;var M=g("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});(o=M.prototype).addEventListener=function(e,t,r,i,n){n=n||0;var o,l,c=this._listeners[e],u=0;for(null==c&&(this._listeners[e]=c=[]),l=c.length;--l>-1;)(o=c[l]).c===t&&o.s===r?c.splice(l,1):0===u&&o.pr<n&&(u=l+1);c.splice(u,0,{c:t,s:r,up:i,pr:n}),this!==a||s||a.wake()},o.removeEventListener=function(e,t){var r,i=this._listeners[e];if(i)for(r=i.length;--r>-1;)if(i[r].c===t)return void i.splice(r,1)},o.dispatchEvent=function(e){var t,r,i,n=this._listeners[e];if(n)for(t=n.length,r=this._eventTarget;--t>-1;)(i=n[t])&&(i.up?i.c.call(i.s||r,{type:e,target:r}):i.c.call(i.s||r))};var T=e.requestAnimationFrame,E=e.cancelAnimationFrame,S=Date.now||function(){return(new Date).getTime()},R=S();for(n=(i=["ms","moz","webkit","o"]).length;--n>-1&&!T;)T=e[i[n]+"RequestAnimationFrame"],E=e[i[n]+"CancelAnimationFrame"]||e[i[n]+"CancelRequestAnimationFrame"];g("Ticker",function(e,t){var r,i,n,o,l,c=this,h=S(),d=!(!1===t||!T)&&"auto",f=500,m=33,v=function(e){var t,a,s=S()-R;s>f&&(h+=s-m),R+=s,c.time=(R-h)/1e3,t=c.time-l,(!r||t>0||!0===e)&&(c.frame++,l+=t+(t>=o?.004:o-t),a=!0),!0!==e&&(n=i(v)),a&&c.dispatchEvent("tick")};M.call(c),c.time=c.frame=0,c.tick=function(){v(!0)},c.lagSmoothing=function(e,t){f=e||1/u,m=Math.min(t,f,0)},c.sleep=function(){null!=n&&(d&&E?E(n):clearTimeout(n),i=p,n=null,c===a&&(s=!1))},c.wake=function(e){null!==n?c.sleep():e?h+=-R+(R=S()):c.frame>10&&(R=S()-f+5),i=0===r?p:d&&T?T:function(e){return setTimeout(e,1e3*(l-c.time)+1|0)},c===a&&(s=!0),v(2)},c.fps=function(e){return arguments.length?(o=1/((r=e)||60),l=this.time+o,void c.wake()):r},c.useRAF=function(e){return arguments.length?(c.sleep(),d=e,void c.fps(r)):d},c.fps(e),setTimeout(function(){"auto"===d&&c.frame<5&&"hidden"!==document.visibilityState&&c.useRAF(!1)},1500)}),(o=c.Ticker.prototype=new c.events.EventDispatcher).constructor=c.Ticker;var P=g("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!0===t.immediateRender,this.data=t.data,this._reversed=!0===t.reversed,q){s||a.wake();var r=this.vars.useFrames?V:q;r.add(this,r._time),this.vars.paused&&this.paused(!0)}});a=P.ticker=new c.Ticker,(o=P.prototype)._dirty=o._gc=o._initted=o._paused=!1,o._totalTime=o._time=0,o._rawPrevTime=-1,o._next=o._last=o._onUpdate=o._timeline=o.timeline=null,o._paused=!1;var A=function(){s&&S()-R>2e3&&a.wake(),setTimeout(A,2e3)};A(),o.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},o.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},o.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},o.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},o.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},o.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},o.render=function(e,t,r){},o.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},o.isActive=function(){var e,t=this._timeline,r=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime())>=r&&e<r+this.totalDuration()/this._timeScale},o._enabled=function(e,t){return s||a.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},o._kill=function(e,t){return this._enabled(!1,!1)},o.kill=function(e,t){return this._kill(e,t),this},o._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},o._swapSelfInParams=function(e){for(var t=e.length,r=e.concat();--t>-1;)"{self}"===e[t]&&(r[t]=this);return r},o._callback=function(e){var t=this.vars;t[e].apply(t[e+"Scope"]||t.callbackScope||this,t[e+"Params"]||x)},o.eventCallback=function(e,t,r,i){if("on"===(e||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[e];null==t?delete n[e]:(n[e]=t,n[e+"Params"]=d(r)&&-1!==r.join("").indexOf("{self}")?this._swapSelfInParams(r):r,n[e+"Scope"]=i),"onUpdate"===e&&(this._onUpdate=t)}return this},o.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},o.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},o.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},o.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},o.totalTime=function(e,t,r){if(s||a.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>e&&!r&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,n=this._timeline;if(e>i&&!r&&(e=i),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?i-e:e)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==e||0===this._duration)&&(D.length&&$(),this.render(e,t,!1),D.length&&$())}return this},o.progress=o.totalProgress=function(e,t){var r=this.duration();return arguments.length?this.totalTime(r*e,t):r?this._time/r:this.ratio},o.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},o.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},o.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||u,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,r=t||0===t?t:this._timeline.totalTime();this._startTime=r-(r-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},o.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},o.paused=function(e){if(!arguments.length)return this._paused;var t,r,i=this._timeline;return e!=this._paused&&i&&(s||e||a.wake(),r=(t=i.rawTime())-this._pauseTime,!e&&i.smoothChildTiming&&(this._startTime+=r,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==r&&this._initted&&this.duration()&&(t=i.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var C=g("core.SimpleTimeline",function(e){P.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});(o=C.prototype=new P).constructor=C,o.kill()._gc=!1,o._first=o._last=o._recent=null,o._sortChildren=!1,o.add=o.insert=function(e,t,r,i){var n,o;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),n=this._last,this._sortChildren)for(o=e._startTime;n&&n._startTime>o;)n=n._prev;return n?(e._next=n._next,n._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=n,this._recent=e,this._timeline&&this._uncache(!0),this},o._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},o.render=function(e,t,r){var i,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;n;)i=n._next,(n._active||e>=n._startTime&&!n._paused)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,r):n.render((e-n._startTime)*n._timeScale,t,r)),n=i},o.rawTime=function(){return s||a.wake(),this._totalTime};var L=g("TweenLite",function(t,r,i){if(P.call(this,r,i),this.render=L.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:L.selector(t)||t;var n,o,a,s=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?W[L.defaultOverwrite]:"number"==typeof l?l>>0:W[l],(s||t instanceof Array||t.push&&d(t))&&"number"!=typeof t[0])for(this._targets=a=h(t),this._propLookup=[],this._siblings=[],n=0;n<a.length;n++)(o=a[n])?"string"!=typeof o?o.length&&o!==e&&o[0]&&(o[0]===e||o[0].nodeType&&o[0].style&&!o.nodeType)?(a.splice(n--,1),this._targets=a=a.concat(h(o))):(this._siblings[n]=Y(o,this,!1),1===l&&this._siblings[n].length>1&&Z(o,this,null,1,this._siblings[n])):"string"==typeof(o=a[n--]=L.selector(o))&&a.splice(n+1,1):a.splice(n--,1);else this._propLookup={},this._siblings=Y(t,this,!1),1===l&&this._siblings.length>1&&Z(t,this,null,1,this._siblings);(this.vars.immediateRender||0===r&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-u,this.render(-this._delay))},!0),O=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)};(o=L.prototype=new P).constructor=L,o.kill()._gc=!1,o.ratio=0,o._firstPT=o._targets=o._overwrittenProps=o._startAt=null,o._notifyPluginsOfEnabled=o._lazy=!1,L.version="1.18.2",L.defaultEase=o._ease=new _(null,null,1,1),L.defaultOverwrite="auto",L.ticker=a,L.autoSleep=120,L.lagSmoothing=function(e,t){a.lagSmoothing(e,t)},L.selector=e.$||e.jQuery||function(t){var r=e.$||e.jQuery;return r?(L.selector=r,r(t)):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)};var D=[],H={},z=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,I=function(e){for(var t,r=this._firstPT;r;)t=r.blob?e?this.join(""):this.start:r.c*e+r.s,r.r?t=Math.round(t):1e-6>t&&t>-1e-6&&(t=0),r.f?r.fp?r.t[r.p](r.fp,t):r.t[r.p](t):r.t[r.p]=t,r=r._next},k=function(e,t,r,i){var n,o,a,s,l,c,u,h=[e,t],p=0,d="",f=0;for(h.start=e,r&&(r(h),e=h[0],t=h[1]),h.length=0,n=e.match(z)||[],o=t.match(z)||[],i&&(i._next=null,i.blob=1,h._firstPT=i),l=o.length,s=0;l>s;s++)u=o[s],d+=(c=t.substr(p,t.indexOf(u,p)-p))||!s?c:",",p+=c.length,f?f=(f+1)%5:"rgba("===c.substr(-5)&&(f=1),u===n[s]||n.length<=s?d+=u:(d&&(h.push(d),d=""),a=parseFloat(n[s]),h.push(a),h._firstPT={_next:h._firstPT,t:h,p:h.length-1,s:a,c:("="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*parseFloat(u.substr(2)):parseFloat(u)-a)||0,f:0,r:f&&4>f}),p+=u.length;return(d+=t.substr(p))&&h.push(d),h.setRatio=I,h},N=function(e,t,r,i,n,o,a,s){var l,c="get"===r?e[t]:r,u=typeof e[t],h="string"==typeof i&&"="===i.charAt(1),p={t:e,p:t,s:c,f:"function"===u,pg:0,n:n||t,r:o,pr:0,c:h?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-c||0};return"number"!==u&&("function"===u&&"get"===r&&(l=t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),p.s=c=a?e[l](a):e[l]()),"string"==typeof c&&(a||isNaN(c))?(p.fp=a,p={t:k(c,i,s||L.defaultStringFilter,p),p:"setRatio",s:0,c:1,f:2,pg:0,n:n||t,pr:0}):h||(p.s=parseFloat(c),p.c=parseFloat(i)-p.s||0)),p.c?((p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p,p):void 0},U=L._internals={isArray:d,isSelector:O,lazyTweens:D,blobDif:k},B=L._plugins={},F=U.tweenLookup={},j=0,G=U.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1},W={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},V=P._rootFramesTimeline=new C,q=P._rootTimeline=new C,X=30,$=U.lazyRender=function(){var e,t=D.length;for(H={};--t>-1;)(e=D[t])&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);D.length=0};q._startTime=a.time,V._startTime=a.frame,q._active=V._active=!0,setTimeout($,1),P._updateRoot=L.render=function(){var e,t,r;if(D.length&&$(),q.render((a.time-q._startTime)*q._timeScale,!1,!1),V.render((a.frame-V._startTime)*V._timeScale,!1,!1),D.length&&$(),a.frame>=X){for(r in X=a.frame+(parseInt(L.autoSleep,10)||120),F){for(e=(t=F[r].tweens).length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete F[r]}if((!(r=q._first)||r._paused)&&L.autoSleep&&!V._first&&1===a._listeners.tick.length){for(;r&&r._paused;)r=r._next;r||a.sleep()}}},a.addEventListener("tick",P._updateRoot);var Y=function(e,t,r){var i,n,o=e._gsTweenID;if(F[o||(e._gsTweenID=o="t"+j++)]||(F[o]={target:e,tweens:[]}),t&&((i=F[o].tweens)[n=i.length]=t,r))for(;--n>-1;)i[n]===t&&i.splice(n,1);return F[o].tweens},J=function(e,t,r,i){var n,o,a=e.vars.onOverwrite;return a&&(n=a(e,t,r,i)),(a=L.onOverwrite)&&(o=a(e,t,r,i)),!1!==n&&!1!==o},Z=function(e,t,r,i,n){var o,a,s,l;if(1===i||i>=4){for(l=n.length,o=0;l>o;o++)if((s=n[o])!==t)s._gc||s._kill(null,e,t)&&(a=!0);else if(5===i)break;return a}var c,h=t._startTime+u,p=[],d=0,f=0===t._duration;for(o=n.length;--o>-1;)(s=n[o])===t||s._gc||s._paused||(s._timeline!==t._timeline?(c=c||Q(t,0,f),0===Q(s,c,f)&&(p[d++]=s)):s._startTime<=h&&s._startTime+s.totalDuration()/s._timeScale>h&&((f||!s._initted)&&h-s._startTime<=2e-10||(p[d++]=s)));for(o=d;--o>-1;)if(s=p[o],2===i&&s._kill(r,e,t)&&(a=!0),2!==i||!s._firstPT&&s._initted){if(2!==i&&!J(s,t))continue;s._enabled(!1,!1)&&(a=!0)}return a},Q=function(e,t,r){for(var i=e._timeline,n=i._timeScale,o=e._startTime;i._timeline;){if(o+=i._startTime,n*=i._timeScale,i._paused)return-100;i=i._timeline}return(o/=n)>t?o-t:r&&o===t||!e._initted&&2*u>o-t?u:(o+=e.totalDuration()/e._timeScale/n)>t+u?0:o-t-u};o._init=function(){var e,t,r,i,n,o=this.vars,a=this._overwrittenProps,s=this._duration,l=!!o.immediateRender,c=o.ease;if(o.startAt){for(i in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),n={},o.startAt)n[i]=o.startAt[i];if(n.overwrite=!1,n.immediateRender=!0,n.lazy=l&&!1!==o.lazy,n.startAt=n.delay=null,this._startAt=L.to(this.target,0,n),l)if(this._time>0)this._startAt=null;else if(0!==s)return}else if(o.runBackwards&&0!==s)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(i in 0!==this._time&&(l=!1),r={},o)G[i]&&"autoCSS"!==i||(r[i]=o[i]);if(r.overwrite=0,r.data="isFromStart",r.lazy=l&&!1!==o.lazy,r.immediateRender=l,this._startAt=L.to(this.target,0,r),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof _?c:"function"==typeof c?new _(c,o.easeParams):w[c]||L.defaultEase:L.defaultEase,o.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(e=this._targets.length;--e>-1;)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],a?a[e]:null)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,a);if(t&&L._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(r=this._firstPT;r;)r.s+=r.c,r.c=-r.c,r=r._next;this._onUpdate=o.onUpdate,this._initted=!0},o._initProps=function(t,r,i,n){var o,a,s,l,c,u;if(null==t)return!1;for(o in H[t._gsTweenID]&&$(),this.vars.css||t.style&&t!==e&&t.nodeType&&B.css&&!1!==this.vars.autoCSS&&function(e,t){var r,i={};for(r in e)G[r]||r in t&&"transform"!==r&&"x"!==r&&"y"!==r&&"width"!==r&&"height"!==r&&"className"!==r&&"border"!==r||!(!B[r]||B[r]&&B[r]._autoCSS)||(i[r]=e[r],delete e[r]);e.css=i}(this.vars,t),this.vars)if(u=this.vars[o],G[o])u&&(u instanceof Array||u.push&&d(u))&&-1!==u.join("").indexOf("{self}")&&(this.vars[o]=u=this._swapSelfInParams(u,this));else if(B[o]&&(l=new B[o])._onInitTween(t,this.vars[o],this)){for(this._firstPT=c={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:l._priority},a=l._overwriteProps.length;--a>-1;)r[l._overwriteProps[a]]=this._firstPT;(l._priority||l._onInitAllProps)&&(s=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else r[o]=N.call(this,t,o,"get",u,o,0,null,this.vars.stringFilter);return n&&this._kill(n,t)?this._initProps(t,r,i,n):this._overwrite>1&&this._firstPT&&i.length>1&&Z(t,this,r,this._overwrite,i)?(this._kill(r,t),this._initProps(t,r,i,n)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(H[t._gsTweenID]=!0),s)},o.render=function(e,t,r){var i,n,o,a,s=this._time,l=this._duration,c=this._rawPrevTime;if(e>=l-1e-7)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,n="onComplete",r=r||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||r)&&(this._startTime===this._timeline._duration&&(e=0),(0>c||0>=e&&e>=-1e-7||c===u&&"isPause"!==this.data)&&c!==e&&(r=!0,c>u&&(n="onReverseComplete")),this._rawPrevTime=a=!t||e||c===e?e:u);else if(1e-7>e)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==s||0===l&&c>0)&&(n="onReverseComplete",i=this._reversed),0>e&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||r)&&(c>=0&&(c!==u||"isPause"!==this.data)&&(r=!0),this._rawPrevTime=a=!t||e||c===e?e:u)),this._initted||(r=!0);else if(this._totalTime=this._time=e,this._easeType){var h=e/l,p=this._easeType,d=this._easePower;(1===p||3===p&&h>=.5)&&(h=1-h),3===p&&(h*=2),1===d?h*=h:2===d?h*=h*h:3===d?h*=h*h*h:4===d&&(h*=h*h*h*h),this.ratio=1===p?1-h:2===p?h:.5>e/l?h/2:1-h/2}else this.ratio=this._ease.getRatio(e/l);if(this._time!==s||r){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!r&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=s,this._rawPrevTime=c,D.push(this),void(this._lazy=[e,t]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/l):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==s&&e>=0&&(this._active=!0),0===s&&(this._startAt&&(e>=0?this._startAt.render(e,t,r):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._time||0===l)&&(t||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(0>e&&this._startAt&&-1e-4!==e&&this._startAt.render(e,t,r),t||(this._time!==s||i)&&this._callback("onUpdate")),n&&(!this._gc||r)&&(0>e&&this._startAt&&!this._onUpdate&&-1e-4!==e&&this._startAt.render(e,t,r),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[n]&&this._callback(n),0===l&&this._rawPrevTime===u&&a!==u&&(this._rawPrevTime=0))}},o._kill=function(e,t,r){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:L.selector(t)||t;var i,n,o,a,s,l,c,u,h,p=r&&this._time&&r._startTime===this._startTime&&this._timeline===r._timeline;if((d(t)||O(t))&&"number"!=typeof t[0])for(i=t.length;--i>-1;)this._kill(e,t[i],r)&&(l=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(t===this._targets[i]){s=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[i]=e?this._overwrittenProps[i]||{}:"all";break}}else{if(t!==this.target)return!1;s=this._propLookup,n=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(s){if(c=e||s,u=e!==n&&"all"!==n&&e!==s&&("object"!=typeof e||!e._tempKill),r&&(L.onOverwrite||this.vars.onOverwrite)){for(o in c)s[o]&&(h||(h=[]),h.push(o));if((h||!e)&&!J(this,r,t,h))return!1}for(o in c)(a=s[o])&&(p&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,l=!0),a.pg&&a.t._kill(c)&&(l=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete s[o]),u&&(n[o]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},o.invalidate=function(){return this._notifyPluginsOfEnabled&&L._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],P.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-u,this.render(-this._delay)),this},o._enabled=function(e,t){if(s||a.wake(),e&&this._gc){var r,i=this._targets;if(i)for(r=i.length;--r>-1;)this._siblings[r]=Y(i[r],this,!0);else this._siblings=Y(this.target,this,!0)}return P.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&L._onPluginEvent(e?"_onEnable":"_onDisable",this)},L.to=function(e,t,r){return new L(e,t,r)},L.from=function(e,t,r){return r.runBackwards=!0,r.immediateRender=0!=r.immediateRender,new L(e,t,r)},L.fromTo=function(e,t,r,i){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,new L(e,t,i)},L.delayedCall=function(e,t,r,i,n){return new L(t,0,{delay:e,onComplete:t,onCompleteParams:r,callbackScope:i,onReverseComplete:t,onReverseCompleteParams:r,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},L.set=function(e,t){return new L(e,0,t)},L.getTweensOf=function(e,t){if(null==e)return[];var r,i,n,o;if(e="string"!=typeof e?e:L.selector(e)||e,(d(e)||O(e))&&"number"!=typeof e[0]){for(r=e.length,i=[];--r>-1;)i=i.concat(L.getTweensOf(e[r],t));for(r=i.length;--r>-1;)for(o=i[r],n=r;--n>-1;)o===i[n]&&i.splice(r,1)}else for(r=(i=Y(e).concat()).length;--r>-1;)(i[r]._gc||t&&!i[r].isActive())&&i.splice(r,1);return i},L.killTweensOf=L.killDelayedCallsTo=function(e,t,r){"object"==typeof t&&(r=t,t=!1);for(var i=L.getTweensOf(e,t),n=i.length;--n>-1;)i[n]._kill(r,e)};var K=g("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=K.prototype},!0);if(o=K.prototype,K.version="1.18.0",K.API=2,o._firstPT=null,o._addTween=N,o.setRatio=I,o._kill=function(e){var t,r=this._overwriteProps,i=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=r.length;--t>-1;)null!=e[r[t]]&&r.splice(t,1);for(;i;)null!=e[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},o._roundProps=function(e,t){for(var r=this._firstPT;r;)(e[this._propName]||null!=r.n&&e[r.n.split(this._propName+"_").join("")])&&(r.r=t),r=r._next},L._onPluginEvent=function(e,t){var r,i,n,o,a,s=t._firstPT;if("_onInitAllProps"===e){for(;s;){for(a=s._next,i=n;i&&i.pr>s.pr;)i=i._next;(s._prev=i?i._prev:o)?s._prev._next=s:n=s,(s._next=i)?i._prev=s:o=s,s=a}s=t._firstPT=n}for(;s;)s.pg&&"function"==typeof s.t[e]&&s.t[e]()&&(r=!0),s=s._next;return r},K.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===K.API&&(B[(new e[t])._propName]=e[t]);return!0},v.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,r=e.propName,i=e.priority||0,n=e.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},a=g("plugins."+r.charAt(0).toUpperCase()+r.substr(1)+"Plugin",function(){K.call(this,r,i),this._overwriteProps=n||[]},!0===e.global),s=a.prototype=new K(r);for(t in s.constructor=a,a.API=e.API,o)"function"==typeof e[t]&&(s[o[t]]=e[t]);return a.version=e.version,K.activate([a]),a},i=e._gsQueue){for(n=0;n<i.length;n++)i[n]();for(o in f)f[o].func||e.console.log("GSAP encountered missing dependency: com.greensock."+o)}s=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Scrollbar=t():e.Scrollbar=t()}(this,function(){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,o.default)(e)}var o=i(r(2)),a=i(r(55)),s=i(r(62));Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof s.default&&"symbol"==typeof a.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e},c=r(78),u=r(89);r(129),r(145),r(158),r(173),r(187),t.default=c.SmoothScrollbar,c.SmoothScrollbar.version="7.4.1",c.SmoothScrollbar.init=function(e,t){if(!e||1!==e.nodeType)throw new TypeError("expect element to be DOM Element, but got "+(void 0===e?"undefined":l(e)));if(u.sbList.has(e))return u.sbList.get(e);e.setAttribute("data-scrollbar","");var r=[].concat(n(e.childNodes)),i=document.createElement("div");i.innerHTML='\n        <div class="scroll-content"></div>\n        <div class="scrollbar-track scrollbar-track-x">\n            <div class="scrollbar-thumb scrollbar-thumb-x"></div>\n        </div>\n        <div class="scrollbar-track scrollbar-track-y">\n            <div class="scrollbar-thumb scrollbar-thumb-y"></div>\n        </div>\n        <canvas class="overscroll-glow"></canvas>\n    ';var o=i.querySelector(".scroll-content");return[].concat(n(i.childNodes)).forEach(function(t){return e.appendChild(t)}),r.forEach(function(e){return o.appendChild(e)}),new c.SmoothScrollbar(e,t)},c.SmoothScrollbar.initAll=function(e){return[].concat(n(document.querySelectorAll(u.selectors))).map(function(t){return c.SmoothScrollbar.init(t,e)})},c.SmoothScrollbar.has=function(e){return u.sbList.has(e)},c.SmoothScrollbar.get=function(e){return u.sbList.get(e)},c.SmoothScrollbar.getAll=function(){return[].concat(n(u.sbList.values()))},c.SmoothScrollbar.destroy=function(e,t){return c.SmoothScrollbar.has(e)&&c.SmoothScrollbar.get(e).destroy(t)},c.SmoothScrollbar.destroyAll=function(e){u.sbList.forEach(function(t){t.destroy(e)})},e.exports=t.default},function(e,t,r){e.exports={default:r(3),__esModule:!0}},function(e,t,r){r(4),r(48),e.exports=r(12).Array.from},function(e,t,r){"use strict";var i=r(5)(!0);r(8)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=i(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){var i=r(6),n=r(7);e.exports=function(e){return function(t,r){var o,a,s=String(n(t)),l=i(r),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(e,t){var r=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:r)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){"use strict";var i=r(9),n=r(10),o=r(25),a=r(15),s=r(26),l=r(27),c=r(28),u=r(44),h=r(46),p=r(45)("iterator"),d=!([].keys&&"next"in[].keys()),f="keys",m="values",v=function(){return this};e.exports=function(e,t,r,g,y,x,_){c(r,t,g);var w,b,M,T=function(e){if(!d&&e in P)return P[e];switch(e){case f:case m:return function(){return new r(this,e)}}return function(){return new r(this,e)}},E=t+" Iterator",S=y==m,R=!1,P=e.prototype,A=P[p]||P["@@iterator"]||y&&P[y],C=A||T(y),L=y?S?T("entries"):C:void 0,O="Array"==t&&P.entries||A;if(O&&(M=h(O.call(new e)))!==Object.prototype&&(u(M,E,!0),i||s(M,p)||a(M,p,v)),S&&A&&A.name!==m&&(R=!0,C=function(){return A.call(this)}),i&&!_||!d&&!R&&P[p]||a(P,p,C),l[t]=C,l[E]=v,y)if(w={values:S?C:T(m),keys:x?C:T(f),entries:L},_)for(b in w)b in P||o(P,b,w[b]);else n(n.P+n.F*(d||R),t,w);return w}},function(e,t){e.exports=!0},function(e,t,r){var i=r(11),n=r(12),o=r(13),a=r(15),s="prototype",l=function(e,t,r){var c,u,h,p=e&l.F,d=e&l.G,f=e&l.S,m=e&l.P,v=e&l.B,g=e&l.W,y=d?n:n[t]||(n[t]={}),x=y[s],_=d?i:f?i[t]:(i[t]||{})[s];for(c in d&&(r=t),r)(u=!p&&_&&void 0!==_[c])&&c in y||(h=u?_[c]:r[c],y[c]=d&&"function"!=typeof _[c]?r[c]:v&&u?o(h,i):g&&_[c]==h?function(e){var t=function(t,r,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,i)}return e.apply(this,arguments)};return t[s]=e[s],t}(h):m&&"function"==typeof h?o(Function.call,h):h,m&&((y.virtual||(y.virtual={}))[c]=h,e&l.R&&x&&!x[c]&&a(x,c,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(e,t,r){var i=r(14);e.exports=function(e,t,r){if(i(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,i){return e.call(t,r,i)};case 3:return function(r,i,n){return e.call(t,r,i,n)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){var i=r(16),n=r(24);e.exports=r(20)?function(e,t,r){return i.f(e,t,n(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var i=r(17),n=r(19),o=r(23),a=Object.defineProperty;t.f=r(20)?Object.defineProperty:function(e,t,r){if(i(e),t=o(t,!0),i(r),n)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var i=r(18);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(20)&&!r(21)(function(){return 7!=Object.defineProperty(r(22)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){e.exports=!r(21)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var i=r(18),n=r(11).document,o=i(n)&&i(n.createElement);e.exports=function(e){return o?n.createElement(e):{}}},function(e,t,r){var i=r(18);e.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!i(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){e.exports=r(15)},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t){e.exports={}},function(e,t,r){"use strict";var i=r(29),n=r(24),o=r(44),a={};r(15)(a,r(45)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=i(a,{next:n(1,r)}),o(e,t+" Iterator")}},function(e,t,r){var i=r(17),n=r(30),o=r(42),a=r(39)("IE_PROTO"),s=function(){},l="prototype",c=function(){var e,t=r(22)("iframe"),i=o.length;for(t.style.display="none",r(43).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;i--;)delete c[l][o[i]];return c()};e.exports=Object.create||function(e,t){var r;return null!==e?(s[l]=i(e),r=new s,s[l]=null,r[a]=e):r=c(),void 0===t?r:n(r,t)}},function(e,t,r){var i=r(16),n=r(17),o=r(31);e.exports=r(20)?Object.defineProperties:function(e,t){n(e);for(var r,a=o(t),s=a.length,l=0;s>l;)i.f(e,r=a[l++],t[r]);return e}},function(e,t,r){var i=r(32),n=r(42);e.exports=Object.keys||function(e){return i(e,n)}},function(e,t,r){var i=r(26),n=r(33),o=r(36)(!1),a=r(39)("IE_PROTO");e.exports=function(e,t){var r,s=n(e),l=0,c=[];for(r in s)r!=a&&i(s,r)&&c.push(r);for(;t.length>l;)i(s,r=t[l++])&&(~o(c,r)||c.push(r));return c}},function(e,t,r){var i=r(34),n=r(7);e.exports=function(e){return i(n(e))}},function(e,t,r){var i=r(35);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var i=r(33),n=r(37),o=r(38);e.exports=function(e){return function(t,r,a){var s,l=i(t),c=n(l.length),u=o(a,c);if(e&&r!=r){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===r)return e||u||0;return!e&&-1}}},function(e,t,r){var i=r(6),n=Math.min;e.exports=function(e){return e>0?n(i(e),9007199254740991):0}},function(e,t,r){var i=r(6),n=Math.max,o=Math.min;e.exports=function(e,t){return(e=i(e))<0?n(e+t,0):o(e,t)}},function(e,t,r){var i=r(40)("keys"),n=r(41);e.exports=function(e){return i[e]||(i[e]=n(e))}},function(e,t,r){var i=r(11),n="__core-js_shared__",o=i[n]||(i[n]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){var r=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+i).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){e.exports=r(11).document&&document.documentElement},function(e,t,r){var i=r(16).f,n=r(26),o=r(45)("toStringTag");e.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,r){var i=r(40)("wks"),n=r(41),o=r(11).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:n)("Symbol."+e))}).store=i},function(e,t,r){var i=r(26),n=r(47),o=r(39)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var i=r(7);e.exports=function(e){return Object(i(e))}},function(e,t,r){"use strict";var i=r(13),n=r(10),o=r(47),a=r(49),s=r(50),l=r(37),c=r(51),u=r(52);n(n.S+n.F*!r(54)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,n,h,p=o(e),d="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m,g=0,y=u(p);if(v&&(m=i(m,f>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(r=new d(t=l(p.length));t>g;g++)c(r,g,v?m(p[g],g):p[g]);else for(h=y.call(p),r=new d;!(n=h.next()).done;g++)c(r,g,v?a(h,m,[n.value,g],!0):n.value);return r.length=g,r}})},function(e,t,r){var i=r(17);e.exports=function(e,t,r,n){try{return n?t(i(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}},function(e,t,r){var i=r(27),n=r(45)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[n]===e)}},function(e,t,r){"use strict";var i=r(16),n=r(24);e.exports=function(e,t,r){t in e?i.f(e,t,n(0,r)):e[t]=r}},function(e,t,r){var i=r(53),n=r(45)("iterator"),o=r(27);e.exports=r(12).getIteratorMethod=function(e){if(void 0!=e)return e[n]||e["@@iterator"]||o[i(e)]}},function(e,t,r){var i=r(35),n=r(45)("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),n))?r:o?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,r){var i=r(45)("iterator"),n=!1;try{var o=[7][i]();o.return=function(){n=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var r=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:r=!0}},o[i]=function(){return a},e(o)}catch(e){}return r}},function(e,t,r){e.exports={default:r(56),__esModule:!0}},function(e,t,r){r(4),r(57),e.exports=r(61).f("iterator")},function(e,t,r){r(58);for(var i=r(11),n=r(15),o=r(27),a=r(45)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var c=s[l],u=i[c],h=u&&u.prototype;h&&!h[a]&&n(h,a,c),o[c]=o.Array}},function(e,t,r){"use strict";var i=r(59),n=r(60),o=r(27),a=r(33);e.exports=r(8)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,n(1)):n(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){t.f=r(45)},function(e,t,r){e.exports={default:r(63),__esModule:!0}},function(e,t,r){r(64),r(75),r(76),r(77),e.exports=r(12).Symbol},function(e,t,r){"use strict";var i=r(11),n=r(26),o=r(20),a=r(10),s=r(25),l=r(65).KEY,c=r(21),u=r(40),h=r(44),p=r(41),d=r(45),f=r(61),m=r(66),v=r(67),g=r(68),y=r(71),x=r(17),_=r(33),w=r(23),b=r(24),M=r(29),T=r(72),E=r(74),S=r(16),R=r(31),P=E.f,A=S.f,C=T.f,L=i.Symbol,O=i.JSON,D=O&&O.stringify,H="prototype",z=d("_hidden"),I=d("toPrimitive"),k={}.propertyIsEnumerable,N=u("symbol-registry"),U=u("symbols"),B=u("op-symbols"),F=Object[H],j="function"==typeof L,G=i.QObject,W=!G||!G[H]||!G[H].findChild,V=o&&c(function(){return 7!=M(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(e,t,r){var i=P(F,t);i&&delete F[t],A(e,t,r),i&&e!==F&&A(F,t,i)}:A,q=function(e){var t=U[e]=M(L[H]);return t._k=e,t},X=j&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},$=function(e,t,r){return e===F&&$(B,t,r),x(e),t=w(t,!0),x(r),n(U,t)?(r.enumerable?(n(e,z)&&e[z][t]&&(e[z][t]=!1),r=M(r,{enumerable:b(0,!1)})):(n(e,z)||A(e,z,b(1,{})),e[z][t]=!0),V(e,t,r)):A(e,t,r)},Y=function(e,t){x(e);for(var r,i=g(t=_(t)),n=0,o=i.length;o>n;)$(e,r=i[n++],t[r]);return e},J=function(e){var t=k.call(this,e=w(e,!0));return!(this===F&&n(U,e)&&!n(B,e))&&(!(t||!n(this,e)||!n(U,e)||n(this,z)&&this[z][e])||t)},Z=function(e,t){if(e=_(e),t=w(t,!0),e!==F||!n(U,t)||n(B,t)){var r=P(e,t);return!r||!n(U,t)||n(e,z)&&e[z][t]||(r.enumerable=!0),r}},Q=function(e){for(var t,r=C(_(e)),i=[],o=0;r.length>o;)n(U,t=r[o++])||t==z||t==l||i.push(t);return i},K=function(e){for(var t,r=e===F,i=C(r?B:_(e)),o=[],a=0;i.length>a;)!n(U,t=i[a++])||r&&!n(F,t)||o.push(U[t]);return o};j||(s((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(r){this===F&&t.call(B,r),n(this,z)&&n(this[z],e)&&(this[z][e]=!1),V(this,e,b(1,r))};return o&&W&&V(F,e,{configurable:!0,set:t}),q(e)})[H],"toString",function(){return this._k}),E.f=Z,S.f=$,r(73).f=T.f=Q,r(70).f=J,r(69).f=K,o&&!r(9)&&s(F,"propertyIsEnumerable",J,!0),f.f=function(e){return q(d(e))}),a(a.G+a.W+a.F*!j,{Symbol:L});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)d(ee[te++]);for(ee=R(d.store),te=0;ee.length>te;)m(ee[te++]);a(a.S+a.F*!j,"Symbol",{for:function(e){return n(N,e+="")?N[e]:N[e]=L(e)},keyFor:function(e){if(X(e))return v(N,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!j,"Object",{create:function(e,t){return void 0===t?M(e):Y(M(e),t)},defineProperty:$,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:K}),O&&a(a.S+a.F*(!j||c(function(){var e=L();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!X(e)){for(var t,r,i=[e],n=1;arguments.length>n;)i.push(arguments[n++]);return"function"==typeof(t=i[1])&&(r=t),!r&&y(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!X(t))return t}),i[1]=t,D.apply(O,i)}}}),L[H][I]||r(15)(L[H],I,L[H].valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(e,t,r){var i=r(41)("meta"),n=r(18),o=r(26),a=r(16).f,s=0,l=Object.isExtensible||function(){return!0},c=!r(21)(function(){return l(Object.preventExtensions({}))}),u=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[i].w},onFreeze:function(e){return c&&h.NEED&&l(e)&&!o(e,i)&&u(e),e}}},function(e,t,r){var i=r(11),n=r(12),o=r(9),a=r(61),s=r(16).f;e.exports=function(e){var t=n.Symbol||(n.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,r){var i=r(31),n=r(33);e.exports=function(e,t){for(var r,o=n(e),a=i(o),s=a.length,l=0;s>l;)if(o[r=a[l++]]===t)return r}},function(e,t,r){var i=r(31),n=r(69),o=r(70);e.exports=function(e){var t=i(e),r=n.f;if(r)for(var a,s=r(e),l=o.f,c=0;s.length>c;)l.call(e,a=s[c++])&&t.push(a);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var i=r(35);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,r){var i=r(33),n=r(73).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return n(e)}catch(e){return a.slice()}}(e):n(i(e))}},function(e,t,r){var i=r(32),n=r(42).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},function(e,t,r){var i=r(70),n=r(24),o=r(33),a=r(23),s=r(26),l=r(19),c=Object.getOwnPropertyDescriptor;t.f=r(20)?c:function(e,t){if(e=o(e),t=a(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return n(!i.f.call(e,t),e[t])}},function(e,t){},function(e,t,r){r(66)("asyncIterator")},function(e,t,r){r(66)("observable")},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(79)),o=i(r(82)),a=i(r(86));Object.defineProperty(t,"__esModule",{value:!0}),t.SmoothScrollbar=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,a.default)(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=r(89),c=r(112);t.SmoothScrollbar=function(){function e(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),t.setAttribute("tabindex","1");var a=(0,c.findChild)(t,"scroll-content"),s=(0,c.findChild)(t,"overscroll-glow"),u=(0,c.findChild)(t,"scrollbar-track-x"),h=(0,c.findChild)(t,"scrollbar-track-y");(0,c.setStyle)(t,{overflow:"hidden",outline:"none"}),(0,c.setStyle)(s,{display:"none","pointer-events":"none"}),this.__readonly("targets",(0,o.default)({container:t,content:a,canvas:{elem:s,context:s.getContext("2d")},xAxis:(0,o.default)({track:u,thumb:(0,c.findChild)(u,"scrollbar-thumb-x")}),yAxis:(0,o.default)({track:h,thumb:(0,c.findChild)(h,"scrollbar-thumb-y")})})).__readonly("offset",{x:0,y:0}).__readonly("thumbOffset",{x:0,y:0}).__readonly("limit",{x:1/0,y:1/0}).__readonly("movement",{x:0,y:0}).__readonly("movementLocked",{x:!1,y:!1}).__readonly("overscrollRendered",{x:0,y:0}).__readonly("overscrollBack",!1).__readonly("thumbSize",{x:0,y:0,realX:0,realY:0}).__readonly("bounding",{top:0,right:0,bottom:0,left:0}).__readonly("children",[]).__readonly("parents",[]).__readonly("size",this.getSize()).__readonly("isNestedScrollbar",!1),(0,n.default)(this,{__hideTrackThrottle:{value:(0,c.debounce)(this.hideTrack.bind(this),1e3,!1)},__updateThrottle:{value:(0,c.debounce)(this.update.bind(this))},__touchRecord:{value:new c.TouchRecord},__listeners:{value:[]},__handlers:{value:[]},__children:{value:[]},__timerID:{value:{}}}),this.__initOptions(i),this.__initScrollbar();var p=t.scrollLeft,d=t.scrollTop;if(t.scrollLeft=t.scrollTop=0,this.setPosition(p,d,!0),l.sbList.set(t,this),"function"==typeof l.GLOBAL_ENV.MutationObserver){var f=new l.GLOBAL_ENV.MutationObserver(function(){r.update(!0)});f.observe(a,{childList:!0}),Object.defineProperty(this,"__observer",{value:f})}}return s(e,[{key:"MAX_OVERSCROLL",get:function(){var e=this.options,t=this.size;switch(e.overscrollEffect){case"bounce":var r=Math.floor(Math.sqrt(Math.pow(t.container.width,2)+Math.pow(t.container.height,2))),i=this.__isMovementLocked()?2:10;return l.GLOBAL_ENV.TOUCH_SUPPORTED?(0,c.pickInRange)(r/i,100,1e3):(0,c.pickInRange)(r/10,25,50);case"glow":return 150;default:return 0}}},{key:"scrollTop",get:function(){return this.offset.y}},{key:"scrollLeft",get:function(){return this.offset.x}}]),e}()},function(e,t,r){e.exports={default:r(80),__esModule:!0}},function(e,t,r){r(81);var i=r(12).Object;e.exports=function(e,t){return i.defineProperties(e,t)}},function(e,t,r){var i=r(10);i(i.S+i.F*!r(20),"Object",{defineProperties:r(30)})},function(e,t,r){e.exports={default:r(83),__esModule:!0}},function(e,t,r){r(84),e.exports=r(12).Object.freeze},function(e,t,r){var i=r(18),n=r(65).onFreeze;r(85)("freeze",function(e){return function(t){return e&&i(t)?e(n(t)):t}})},function(e,t,r){var i=r(10),n=r(12),o=r(21);e.exports=function(e,t){var r=(n.Object||{})[e]||Object[e],a={};a[e]=t(r),i(i.S+i.F*o(function(){r(1)}),"Object",a)}},function(e,t,r){e.exports={default:r(87),__esModule:!0}},function(e,t,r){r(88);var i=r(12).Object;e.exports=function(e,t,r){return i.defineProperty(e,t,r)}},function(e,t,r){var i=r(10);i(i.S+i.F*!r(20),"Object",{defineProperty:r(16).f})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(93);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t,r){e.exports={default:r(91),__esModule:!0}},function(e,t,r){r(92),e.exports=r(12).Object.keys},function(e,t,r){var i=r(47),n=r(31);r(85)("keys",function(){return function(e){return n(i(e))}})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(94);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(95);(0,o.default)(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return s[e]}})});var l=r(111);(0,o.default)(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return l[e]}})})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a={MutationObserver:function(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver},TOUCH_SUPPORTED:function(){return"ontouchstart"in document},EASING_MULTIPLIER:function(){return navigator.userAgent.match(/Android/)?.5:.25},WHEEL_EVENT:function(){return"onwheel"in window?"wheel":"mousewheel"}};t.GLOBAL_ENV=function(e){var t={},r={};return(0,o.default)(e).forEach(function(i){(0,n.default)(t,i,{get:function(){if(!r.hasOwnProperty(i)){var t=e[i];r[i]=t()}return r[i]}})}),t}(a)},function(e,t,r){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(r(96));Object.defineProperty(t,"__esModule",{value:!0});var n=new i.default,o=n.set.bind(n),a=n.delete.bind(n);n.update=function(){n.forEach(function(e){e.__updateTree()})},n.delete=function(){var e=a.apply(void 0,arguments);return n.update(),e},n.set=function(){var e=o.apply(void 0,arguments);return n.update(),e},t.sbList=n},function(e,t,r){e.exports={default:r(97),__esModule:!0}},function(e,t,r){r(75),r(4),r(57),r(98),r(108),e.exports=r(12).Map},function(e,t,r){"use strict";var i=r(99);e.exports=r(104)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=i.getEntry(this,e);return t&&t.v},set:function(e,t){return i.def(this,0===e?0:e,t)}},i,!0)},function(e,t,r){"use strict";var i=r(16).f,n=r(29),o=r(100),a=r(13),s=r(101),l=r(7),c=r(102),u=r(8),h=r(60),p=r(103),d=r(20),f=r(65).fastKey,m=d?"_s":"size",v=function(e,t){var r,i=f(t);if("F"!==i)return e._i[i];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,u){var h=e(function(e,i){s(e,h,t,"_i"),e._i=n(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=i&&c(i,r,e[u],e)});return o(h.prototype,{clear:function(){for(var e=this,t=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var t=this,r=v(t,e);if(r){var i=r.n,n=r.p;delete t._i[r.i],r.r=!0,n&&(n.n=i),i&&(i.p=n),t._f==r&&(t._f=i),t._l==r&&(t._l=n),t[m]--}return!!r},forEach:function(e){s(this,h,"forEach");for(var t,r=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!v(this,e)}}),d&&i(h.prototype,"size",{get:function(){return l(this[m])}}),h},def:function(e,t,r){var i,n,o=v(e,t);return o?o.v=r:(e._l=o={i:n=f(t,!0),k:t,v:r,p:i=e._l,n:void 0,r:!1},e._f||(e._f=o),i&&(i.n=o),e[m]++,"F"!==n&&(e._i[n]=o)),e},getEntry:v,setStrong:function(e,t,r){u(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?h(0,"keys"==t?r.k:"values"==t?r.v:[r.k,r.v]):(e._t=void 0,h(1))},r?"entries":"values",!r,!0),p(t)}}},function(e,t,r){var i=r(15);e.exports=function(e,t,r){for(var n in t)r&&e[n]?e[n]=t[n]:i(e,n,t[n]);return e}},function(e,t){e.exports=function(e,t,r,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var i=r(13),n=r(49),o=r(50),a=r(17),s=r(37),l=r(52),c={},u={};(t=e.exports=function(e,t,r,h,p){var d,f,m,v,g=p?function(){return e}:l(e),y=i(r,h,t?2:1),x=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(d=s(e.length);d>x;x++)if((v=t?y(a(f=e[x])[0],f[1]):y(e[x]))===c||v===u)return v}else for(m=g.call(e);!(f=m.next()).done;)if((v=n(m,y,f.value,t))===c||v===u)return v}).BREAK=c,t.RETURN=u},function(e,t,r){"use strict";var i=r(11),n=r(12),o=r(16),a=r(20),s=r(45)("species");e.exports=function(e){var t="function"==typeof n[e]?n[e]:i[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){"use strict";var i=r(11),n=r(10),o=r(65),a=r(21),s=r(15),l=r(100),c=r(102),u=r(101),h=r(18),p=r(44),d=r(16).f,f=r(105)(0),m=r(20);e.exports=function(e,t,r,v,g,y){var x=i[e],_=x,w=g?"set":"add",b=_&&_.prototype,M={};return m&&"function"==typeof _&&(y||b.forEach&&!a(function(){(new _).entries().next()}))?(_=t(function(t,r){u(t,_,e,"_c"),t._c=new x,void 0!=r&&c(r,g,t[w],t)}),f("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in b&&(!y||"clear"!=e)&&s(_.prototype,e,function(r,i){if(u(this,_,e),!t&&y&&!h(r))return"get"==e&&void 0;var n=this._c[e](0===r?0:r,i);return t?this:n})}),"size"in b&&d(_.prototype,"size",{get:function(){return this._c.size}})):(_=v.getConstructor(t,e,g,w),l(_.prototype,r),o.NEED=!0),p(_,e),M[e]=_,n(n.G+n.W+n.F,M),y||v.setStrong(_,e,g),_}},function(e,t,r){var i=r(13),n=r(34),o=r(47),a=r(37),s=r(106);e.exports=function(e,t){var r=1==e,l=2==e,c=3==e,u=4==e,h=6==e,p=5==e||h,d=t||s;return function(t,s,f){for(var m,v,g=o(t),y=n(g),x=i(s,f,3),_=a(y.length),w=0,b=r?d(t,_):l?d(t,0):void 0;_>w;w++)if((p||w in y)&&(v=x(m=y[w],w,g),e))if(r)b[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:b.push(m)}else if(u)return!1;return h?-1:c||u?u:b}}},function(e,t,r){var i=r(107);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,r){var i=r(18),n=r(71),o=r(45)("species");e.exports=function(e){var t;return n(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!n(t.prototype)||(t=void 0),i(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){var i=r(10);i(i.P+i.R,"Map",{toJSON:r(109)("Map")})},function(e,t,r){var i=r(53),n=r(110);e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return n(this)}}},function(e,t,r){var i=r(102);e.exports=function(e,t){var r=[];return i(e,!1,r.push,r,t),r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectors="scrollbar, [scrollbar], [data-scrollbar]"},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(113);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(114);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(115);(0,o.default)(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return s[e]}})});var l=r(116);(0,o.default)(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return l[e]}})});var c=r(117);(0,o.default)(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return c[e]}})});var u=r(118);(0,o.default)(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return u[e]}})});var h=r(119);(0,o.default)(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return h[e]}})});var p=r(120);(0,o.default)(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return p[e]}})});var d=r(121);(0,o.default)(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return d[e]}})});var f=r(122);(0,o.default)(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return f[e]}})});var m=r(123);(0,o.default)(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return m[e]}})});var v=r(124);(0,o.default)(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return v[e]}})})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildCurve=function(e,t){if(t<=0)return[e];for(var r=[],i=Math.round(t/1e3*60)-1,n=e?Math.pow(1/Math.abs(e),1/i):0,o=1;o<=i;o++)r.push(e-e*Math.pow(n,o));return r.push(e),r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("function"==typeof e){var i=void 0;return function(){for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];!i&&r&&setTimeout(function(){return e.apply(void 0,o)}),clearTimeout(i),i=setTimeout(function(){i=void 0,e.apply(void 0,o)},t)}}}},function(e,t,r){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(r(2));Object.defineProperty(t,"__esModule",{value:!0}),t.findChild=function(e,t){var r=e.children,n=null;return r&&[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,i.default)(e)}(r)).some(function(e){if(e.className.match(t))return n=e,!0}),n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[1,28,500];t.getDelta=function(e){if("deltaX"in e){var t=function(e){return r[e]||r[0]}(e.deltaMode);return{x:e.deltaX/1*t,y:e.deltaY/1*t}}return"wheelDeltaX"in e?{x:e.wheelDeltaX/-3,y:e.wheelDeltaY/-3}:{x:0,y:e.wheelDelta/-3}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPointerData=function(e){return e.touches?e.touches[e.touches.length-1]:e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPosition=void 0;var i=r(118);t.getPosition=function(e){var t=(0,i.getPointerData)(e);return{x:t.clientX,y:t.clientY}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTouchID=void 0;var i=r(118);t.getTouchID=function(e){return(0,i.getPointerData)(e).identifier}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOneOf=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).some(function(t){return e===t})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pickInRange=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.max(t,Math.min(e,r))}},function(e,t,r){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(r(90));Object.defineProperty(t,"__esModule",{value:!0});var n=["webkit","moz","ms","o"],o=new RegExp("^-(?!(?:"+n.join("|")+")-)");t.setStyle=function(e,t){t=function(e){var t={};return(0,i.default)(e).forEach(function(r){if(o.test(r)){var i=e[r];r=r.replace(/^-/,""),t[r]=i,n.forEach(function(e){t["-"+e+"-"+r]=i})}else t[r]=e[r]}),t}(t),(0,i.default)(t).forEach(function(r){var i=r.replace(/^-/,"").replace(/-([a-z])/g,function(e,t){return t.toUpperCase()});e.style[i]=t[r]})}},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,a.default)(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=i(r(2)),s=i(r(86)),l=i(r(125));Object.defineProperty(t,"__esModule",{value:!0}),t.TouchRecord=void 0;var c=l.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,s.default)(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),h=r(119),p=function(){function e(t){o(this,e),this.updateTime=Date.now(),this.delta={x:0,y:0},this.velocity={x:0,y:0},this.lastPosition=(0,h.getPosition)(t)}return u(e,[{key:"update",value:function(e){var t=this.velocity,r=this.updateTime,i=this.lastPosition,n=Date.now(),o=(0,h.getPosition)(e),a={x:-(o.x-i.x),y:-(o.y-i.y)},s=n-r||16,l=a.x/s*1e3,c=a.y/s*1e3;t.x=.8*l+.2*t.x,t.y=.8*c+.2*t.y,this.delta=a,this.updateTime=n,this.lastPosition=o}}]),e}();t.TouchRecord=function(){function e(){o(this,e),this.touchList={},this.lastTouch=null,this.activeTouchID=void 0}return u(e,[{key:"__add",value:function(e){if(this.__has(e))return null;var t=new p(e);return this.touchList[e.identifier]=t,t}},{key:"__renew",value:function(e){if(!this.__has(e))return null;var t=this.touchList[e.identifier];return t.update(e),t}},{key:"__delete",value:function(e){return delete this.touchList[e.identifier]}},{key:"__has",value:function(e){return this.touchList.hasOwnProperty(e.identifier)}},{key:"__setActiveID",value:function(e){this.activeTouchID=e[e.length-1].identifier,this.lastTouch=this.touchList[this.activeTouchID]}},{key:"__getActiveTracker",value:function(){return this.touchList[this.activeTouchID]}},{key:"isActive",value:function(){return void 0!==this.activeTouchID}},{key:"getDelta",value:function(){var e=this.__getActiveTracker();return e?c({},e.delta):this.__primitiveValue}},{key:"getVelocity",value:function(){var e=this.__getActiveTracker();return e?c({},e.velocity):this.__primitiveValue}},{key:"getLastPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.__getActiveTracker()||this.lastTouch,r=t?t.lastPosition:this.__primitiveValue;return e?r.hasOwnProperty(e)?r[e]:0:c({},r)}},{key:"updatedRecently",value:function(){var e=this.__getActiveTracker();return e&&Date.now()-e.updateTime<30}},{key:"track",value:function(e){var t=this,r=e.targetTouches;return[].concat(n(r)).forEach(function(e){t.__add(e)}),this.touchList}},{key:"update",value:function(e){var t=this,r=e.touches,i=e.changedTouches;return[].concat(n(r)).forEach(function(e){t.__renew(e)}),this.__setActiveID(i),this.touchList}},{key:"release",value:function(e){var t=this;return this.activeTouchID=void 0,[].concat(n(e.changedTouches)).forEach(function(e){t.__delete(e)}),this.touchList}},{key:"__primitiveValue",get:function(){return{x:0,y:0}}}]),e}()},function(e,t,r){e.exports={default:r(126),__esModule:!0}},function(e,t,r){r(127),e.exports=r(12).Object.assign},function(e,t,r){var i=r(10);i(i.S+i.F,"Object",{assign:r(128)})},function(e,t,r){"use strict";var i=r(31),n=r(69),o=r(70),a=r(47),s=r(34),l=Object.assign;e.exports=!l||r(21)(function(){var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[r]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var r=a(e),l=arguments.length,c=1,u=n.f,h=o.f;l>c;)for(var p,d=s(arguments[c++]),f=u?i(d).concat(u(d)):i(d),m=f.length,v=0;m>v;)h.call(d,p=f[v++])&&(r[p]=d[p]);return r}:l},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(130);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(131);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(132);(0,o.default)(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return s[e]}})});var l=r(133);(0,o.default)(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return l[e]}})});var c=r(134);(0,o.default)(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return c[e]}})});var u=r(135);(0,o.default)(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return u[e]}})});var h=r(136);(0,o.default)(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return h[e]}})});var p=r(137);(0,o.default)(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return p[e]}})});var d=r(138);(0,o.default)(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return d[e]}})});var f=r(139);(0,o.default)(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return f[e]}})});var m=r(140);(0,o.default)(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return m[e]}})});var v=r(141);(0,o.default)(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return v[e]}})});var g=r(142);(0,o.default)(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return g[e]}})});var y=r(143);(0,o.default)(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return y[e]}})});var x=r(144);(0,o.default)(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return x[e]}})})},function(e,t,r){"use strict";var i=r(78);i.SmoothScrollbar.prototype.clearMovement=i.SmoothScrollbar.prototype.stop=function(){this.movement.x=this.movement.y=0,cancelAnimationFrame(this.__timerID.scrollTo)}},function(e,t,r){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,n.default)(e)}var n=function(e){return e&&e.__esModule?e:{default:e}}(r(2)),o=r(78),a=r(112),s=r(89);o.SmoothScrollbar.prototype.destroy=function(e){var t=this.__listeners,r=this.__handlers,n=this.__observer,o=this.targets,l=o.container,c=o.content;if(r.forEach(function(e){var t=e.evt,r=e.elem,i=e.fn;r.removeEventListener(t,i)}),r.length=t.length=0,this.stop(),cancelAnimationFrame(this.__timerID.render),n&&n.disconnect(),s.sbList.delete(l),!e&&l.parentNode){for(var u=[].concat(i(c.childNodes));l.firstChild;)l.removeChild(l.firstChild);u.forEach(function(e){return l.appendChild(e)}),(0,a.setStyle)(l,{overflow:""}),l.scrollTop=this.scrollTop,l.scrollLeft=this.scrollLeft}}},function(e,t,r){"use strict";r(78).SmoothScrollbar.prototype.getContentElem=function(){return this.targets.content}},function(e,t,r){"use strict";r(78).SmoothScrollbar.prototype.getSize=function(){var e=this.targets.container,t=this.targets.content;return{container:{width:e.clientWidth,height:e.clientHeight},content:{width:t.offsetWidth-t.clientWidth+t.scrollWidth,height:t.offsetHeight-t.clientHeight+t.scrollHeight}}}},function(e,t,r){"use strict";r(78).SmoothScrollbar.prototype.infiniteScroll=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;if("function"==typeof e){var r={x:0,y:0},i=!1;this.addListener(function(n){var o=n.offset,a=n.limit;a.y-o.y<=t&&o.y>r.y&&!i&&(i=!0,setTimeout(function(){return e(n)})),a.y-o.y>t&&(i=!1),r=o})}}},function(e,t,r){"use strict";r(78).SmoothScrollbar.prototype.isVisible=function(e){var t=this.bounding,r=e.getBoundingClientRect(),i=Math.max(t.top,r.top),n=Math.max(t.left,r.left),o=Math.min(t.right,r.right);return i<Math.min(t.bottom,r.bottom)&&n<o}},function(e,t,r){"use strict";var i=r(78);i.SmoothScrollbar.prototype.addListener=function(e){"function"==typeof e&&this.__listeners.push(e)},i.SmoothScrollbar.prototype.removeListener=function(e){"function"==typeof e&&this.__listeners.some(function(t,r,i){return t===e&&i.splice(r,1)})}},function(e,t,r){"use strict";function i(e,t,r){return t in e?(0,a.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.REGIESTER,t=c[e];return function(){for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];this.__handlers.forEach(function(r){var n=r.elem,o=r.evt,a=r.fn,s=r.hasRegistered;s&&e===l.REGIESTER||!s&&e===l.UNREGIESTER||function(e,t){return!!t.length&&t.some(function(t){return e.match(t)})}(o,i)&&(n[t](o,a),r.hasRegistered=!s)})}}var o,a=function(e){return e&&e.__esModule?e:{default:e}}(r(86)),s=r(78),l={REGIESTER:0,UNREGIESTER:1},c=(i(o={},l.REGIESTER,"addEventListener"),i(o,l.UNREGIESTER,"removeEventListener"),o);s.SmoothScrollbar.prototype.registerEvents=n(l.REGIESTER),s.SmoothScrollbar.prototype.unregisterEvents=n(l.UNREGIESTER)},function(e,t,r){"use strict";r(78).SmoothScrollbar.prototype.scrollIntoView=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.alignToTop,i=void 0===r||r,n=t.onlyScrollIfNeeded,o=void 0!==n&&n,a=t.offsetTop,s=void 0===a?0:a,l=t.offsetLeft,c=void 0===l?0:l,u=t.offsetBottom,h=void 0===u?0:u,p=this.targets,d=this.bounding;if(e&&p.container.contains(e)){var f=e.getBoundingClientRect();o&&this.isVisible(e)||this.__setMovement(f.left-d.left-c,i?f.top-d.top-s:f.bottom-d.bottom-h)}}},function(e,t,r){"use strict";var i=r(112);r(78).SmoothScrollbar.prototype.scrollTo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.offset.x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.offset.y,r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.options,s=this.offset,l=this.limit,c=this.__timerID;cancelAnimationFrame(c.scrollTo),o="function"==typeof o?o:function(){},a.renderByPixels&&(e=Math.round(e),t=Math.round(t));var u=s.x,h=s.y,p=(0,i.pickInRange)(e,0,l.x)-u,d=(0,i.pickInRange)(t,0,l.y)-h,f=(0,i.buildCurve)(p,n),m=(0,i.buildCurve)(d,n),v=f.length,g=0;!function e(){r.setPosition(u+f[g],h+m[g]),++g===v?requestAnimationFrame(function(){o(r)}):c.scrollTo=requestAnimationFrame(e)}()}},function(e,t,r){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(r(90));r(78).SmoothScrollbar.prototype.setOptions=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(t).forEach(function(r){e.options.hasOwnProperty(r)&&void 0!==t[r]&&(e.options[r]=t[r])})}},function(e,t,r){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(r(125)).default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n=r(112);r(78).SmoothScrollbar.prototype.setPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.offset.x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.offset.y,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.__hideTrackThrottle();var o={},a=this.options,s=this.offset,l=this.limit,c=this.targets,u=this.__listeners;a.renderByPixels&&(e=Math.round(e),t=Math.round(t)),e!==s.x&&this.showTrack("x"),t!==s.y&&this.showTrack("y"),e=(0,n.pickInRange)(e,0,l.x),t=(0,n.pickInRange)(t,0,l.y),e===s.x&&t===s.y||(o.direction={x:e===s.x?"none":e>s.x?"right":"left",y:t===s.y?"none":t>s.y?"down":"up"},this.__readonly("offset",{x:e,y:t}),o.limit=i({},l),o.offset=i({},this.offset),this.__setThumbPosition(),(0,n.setStyle)(c.content,{"-transform":"translate3d("+-e+"px, "+-t+"px, 0)"}),r||u.forEach(function(e){a.syncCallbacks?e(o):requestAnimationFrame(function(){e(o)})}))}},function(e,t,r){"use strict";function i(e,t,r){return t in e?(0,a.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.SHOW,t=u[e];return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"both",i=this.options,n=this.movement,o=this.targets,a=o.container,s=o.xAxis,u=o.yAxis;n.x||n.y?a.classList.add(c.CONTAINER):a.classList.remove(c.CONTAINER),i.alwaysShowTracks&&e===l.HIDE||("both"===(r=r.toLowerCase())&&(s.track.classList[t](c.TRACK),u.track.classList[t](c.TRACK)),"x"===r&&s.track.classList[t](c.TRACK),"y"===r&&u.track.classList[t](c.TRACK))}}var o,a=function(e){return e&&e.__esModule?e:{default:e}}(r(86)),s=r(78),l={SHOW:0,HIDE:1},c={TRACK:"show",CONTAINER:"scrolling"},u=(i(o={},l.SHOW,"add"),i(o,l.HIDE,"remove"),o);s.SmoothScrollbar.prototype.showTrack=n(l.SHOW),s.SmoothScrollbar.prototype.hideTrack=n(l.HIDE)},function(e,t,r){"use strict";function i(){var e=this.options;this.__updateBounding();var t=this.getSize(),r={x:Math.max(t.content.width-t.container.width,0),y:Math.max(t.content.height-t.container.height,0)},i={realX:t.container.width/t.content.width*t.container.width,realY:t.container.height/t.content.height*t.container.height};i.x=Math.max(i.realX,e.thumbMinSize),i.y=Math.max(i.realY,e.thumbMinSize),this.__readonly("size",t).__readonly("limit",r).__readonly("thumbSize",i),function(){var e=this.size,t=this.thumbSize,r=this.targets,i=r.xAxis,o=r.yAxis;(0,n.setStyle)(i.track,{display:e.content.width<=e.container.width?"none":"block"}),(0,n.setStyle)(o.track,{display:e.content.height<=e.container.height?"none":"block"}),(0,n.setStyle)(i.thumb,{width:t.x+"px"}),(0,n.setStyle)(o.thumb,{height:t.y+"px"})}.call(this),function(){if("glow"===this.options.overscrollEffect){var e=this.targets,t=this.size,r=e.canvas,i=r.elem,n=r.context,o=window.devicePixelRatio||1,a=t.container.width*o,s=t.container.height*o;a===i.width&&s===i.height||(i.width=a,i.height=s,n.scale(o,o))}}.call(this),this.setPosition(),this.__setThumbPosition()}var n=r(112);r(78).SmoothScrollbar.prototype.update=function(e){e?requestAnimationFrame(i.bind(this)):i.call(this)}},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(146);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(147);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(148);(0,o.default)(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return s[e]}})});var l=r(149);(0,o.default)(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return l[e]}})});var c=r(154);(0,o.default)(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return c[e]}})});var u=r(155);(0,o.default)(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return u[e]}})});var h=r(156);(0,o.default)(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return h[e]}})});var p=r(157);(0,o.default)(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return p[e]}})})},function(e,t,r){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,n.default)(e)}var n=function(e){return e&&e.__esModule?e:{default:e}}(r(2)),o=r(112),a=r(78);Object.defineProperty(a.SmoothScrollbar.prototype,"__addMovement",{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.limit,a=this.options,s=this.movement;this.__updateThrottle(),a.renderByPixels&&(e=Math.round(e),t=Math.round(t));var l=s.x+e,c=s.y+t;0===n.x&&(l=0),0===n.y&&(c=0);var u=this.__getDeltaLimit(r);s.x=o.pickInRange.apply(void 0,[l].concat(i(u.x))),s.y=o.pickInRange.apply(void 0,[c].concat(i(u.y)))},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=r(78),n=["x","y"];Object.defineProperty(i.SmoothScrollbar.prototype,"__autoLockMovement",{value:function(){var e=this,t=this.movement,r=this.movementLocked;n.forEach(function(i){r[i]=t[i]&&e.__willOverscroll(i,t[i])})},writable:!0,configurable:!0}),Object.defineProperty(i.SmoothScrollbar.prototype,"__unlockMovement",{value:function(){var e=this.movementLocked;n.forEach(function(t){e[t]=!1})},writable:!0,configurable:!0}),Object.defineProperty(i.SmoothScrollbar.prototype,"__isMovementLocked",{value:function(){var e=this.movementLocked;return e.x||e.y},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(r(125)).default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n=r(78),o=r(150),a=r(89),s=r(112);Object.defineProperty(n.SmoothScrollbar.prototype,"__renderOverscroll",{value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length&&this.options.overscrollEffect){var r=this.options,n=this.overscrollRendered,l=i({},n);if(t.forEach(function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var t=this.options,r=this.movement,i=this.overscrollRendered,n=this.MAX_OVERSCROLL,o=r[e]=(0,s.pickInRange)(r[e],-n,n),a=t.overscrollDamping,l=i[e]+(o-i[e])*a;t.renderByPixels&&(l|=0),!this.__isMovementLocked()&&Math.abs(l-i[e])<.1&&(l-=o/Math.abs(o||1)),Math.abs(l)<Math.abs(i[e])&&this.__readonly("overscrollBack",!0),(l*i[e]<0||Math.abs(l)<=1)&&(l=0,this.__readonly("overscrollBack",!1)),i[e]=l}}.call(e,t)}),function(e){var t=this.__touchRecord,r=this.overscrollRendered;return r.x!==e.x||r.y!==e.y||!(!a.GLOBAL_ENV.TOUCH_SUPPORTED||!t.updatedRecently())}.call(this,l))switch(r.overscrollEffect){case"bounce":return o.overscrollBounce.call(this,n.x,n.y);case"glow":return o.overscrollGlow.call(this,n.x,n.y);default:return}}},writable:!0,configurable:!0})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(151);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(152);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(153);(0,o.default)(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return s[e]}})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overscrollBounce=function(e,t){var r=this.size,n=this.offset,o=this.targets,a=this.thumbOffset,s=o.xAxis,l=o.yAxis,c=o.content;if((0,i.setStyle)(c,{"-transform":"translate3d("+-(n.x+e)+"px, "+-(n.y+t)+"px, 0)"}),e){var u=r.container.width/(r.container.width+Math.abs(e));(0,i.setStyle)(s.thumb,{"-transform":"translate3d("+a.x+"px, 0, 0) scale3d("+u+", 1, 1)","-transform-origin":e<0?"left":"right"})}if(t){var h=r.container.height/(r.container.height+Math.abs(t));(0,i.setStyle)(l.thumb,{"-transform":"translate3d(0, "+a.y+"px, 0) scale3d(1, "+h+", 1)","-transform-origin":t<0?"top":"bottom"})}};var i=r(112)},function(e,t,r){"use strict";function i(e){var t=this.size,r=this.targets,i=this.__touchRecord,n=this.MAX_OVERSCROLL,l=t.container,c=l.width,u=l.height,h=r.canvas.context;h.save(),e>0&&h.transform(-1,0,0,1,c,0);var p=(0,o.pickInRange)(Math.abs(e)/n,0,a),d=(0,o.pickInRange)(p,0,s)*c,f=Math.abs(e),m=i.getLastPosition("y")||u/2;h.globalAlpha=p,h.beginPath(),h.moveTo(0,-d),h.quadraticCurveTo(f,m,0,u+d),h.fill(),h.closePath(),h.restore()}function n(e){var t=this.size,r=this.targets,i=this.__touchRecord,n=this.MAX_OVERSCROLL,l=t.container,c=l.width,u=l.height,h=r.canvas.context;h.save(),e>0&&h.transform(1,0,0,-1,0,u);var p=(0,o.pickInRange)(Math.abs(e)/n,0,a),d=(0,o.pickInRange)(p,0,s)*c,f=i.getLastPosition("x")||c/2,m=Math.abs(e);h.globalAlpha=p,h.beginPath(),h.moveTo(-d,0),h.quadraticCurveTo(f,m,c+d,0),h.fill(),h.closePath(),h.restore()}Object.defineProperty(t,"__esModule",{value:!0}),t.overscrollGlow=function(e,t){var r=this.size,a=this.targets,s=this.options,l=a.canvas,c=l.elem,u=l.context;return e||t?((0,o.setStyle)(c,{display:"block"}),u.clearRect(0,0,r.content.width,r.container.height),u.fillStyle=s.overscrollEffectColor,i.call(this,e),void n.call(this,t)):(0,o.setStyle)(c,{display:"none"})};var o=r(112),a=.75,s=.25},function(e,t,r){"use strict";function i(e){var t=this.options,r=this.offset,i=this.movement,n=this.__touchRecord,o=t.damping,a=t.renderByPixels,s=t.overscrollDamping,l=r[e],c=i[e],u=o;if(this.__willOverscroll(e,c)?u=s:n.isActive()&&(u=.5),Math.abs(c)<1){var h=l+c;return{movement:0,position:c>0?Math.ceil(h):Math.floor(h)}}var p=c*(1-u);return a&&(p|=0),{movement:p,position:l+c-p}}var n=r(78),o=r(112);Object.defineProperty(n.SmoothScrollbar.prototype,"__render",{value:function e(){var t=this.options,r=this.offset,n=this.limit,a=this.movement,s=this.overscrollRendered,l=this.__timerID;if(a.x||a.y||s.x||s.y){var c=i.call(this,"x"),u=i.call(this,"y"),h=[];if(t.overscrollEffect){var p=(0,o.pickInRange)(c.position,0,n.x),d=(0,o.pickInRange)(u.position,0,n.y);(s.x||p===r.x&&a.x)&&h.push("x"),(s.y||d===r.y&&a.y)&&h.push("y")}this.movementLocked.x||(a.x=c.movement),this.movementLocked.y||(a.y=u.movement),this.setPosition(c.position,u.position),this.__renderOverscroll(h)}l.render=requestAnimationFrame(e.bind(this))},writable:!0,configurable:!0})},function(e,t,r){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,n.default)(e)}var n=function(e){return e&&e.__esModule?e:{default:e}}(r(2)),o=r(112),a=r(78);Object.defineProperty(a.SmoothScrollbar.prototype,"__setMovement",{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.options,a=this.movement;this.__updateThrottle();var s=this.__getDeltaLimit(r);n.renderByPixels&&(e=Math.round(e),t=Math.round(t)),a.x=o.pickInRange.apply(void 0,[e].concat(i(s.x))),a.y=o.pickInRange.apply(void 0,[t].concat(i(s.y)))},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=r(78),n=r(112);Object.defineProperty(i.SmoothScrollbar.prototype,"__shouldPropagateMovement",{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.options,i=this.offset,o=this.limit;if(!r.continuousScrolling)return!1;var a=(0,n.pickInRange)(e+i.x,0,o.x),s=(0,n.pickInRange)(t+i.y,0,o.y),l=!0;return l&=a===i.x,(l&=s===i.y)&(a===o.x||0===a||s===o.y||0===s)},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=r(78),n=r(112);Object.defineProperty(i.SmoothScrollbar.prototype,"__willOverscroll",{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return!1;var r=this.offset,i=this.limit,o=r[e];return(0,n.pickInRange)(t+o,0,i[e])===o&&(0===o||o===i[e])},writable:!0,configurable:!0})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(159);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(160);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(161);(0,o.default)(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return s[e]}})});var l=r(168);(0,o.default)(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return l[e]}})});var c=r(169);(0,o.default)(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return c[e]}})});var u=r(170);(0,o.default)(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return u[e]}})});var h=r(171);(0,o.default)(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return h[e]}})});var p=r(172);(0,o.default)(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return p[e]}})})},function(e,t,r){"use strict";var i=r(78),n=r(112);Object.defineProperty(i.SmoothScrollbar.prototype,"__dragHandler",{value:function(){var e=this,t=this.targets,r=t.container,i=t.content,o=!1,a=void 0,s=void 0;Object.defineProperty(this,"__isDrag",{get:function(){return o},enumerable:!1}),this.__addEvent(r,"dragstart",function(t){e.__eventFromChildScrollbar(t)||(o=!0,s=t.target.clientHeight,(0,n.setStyle)(i,{"pointer-events":"auto"}),cancelAnimationFrame(a),e.__updateBounding())}),this.__addEvent(document,"dragover mousemove touchmove",function(t){o&&!e.__eventFromChildScrollbar(t)&&(cancelAnimationFrame(a),t.preventDefault(),function t(r){var i=r.x,n=r.y;if(i||n){var o=e.options.speed;e.__setMovement(i*o,n*o),a=requestAnimationFrame(function(){t({x:i,y:n})})}}(e.__getPointerTrend(t,s)))}),this.__addEvent(document,"dragend mouseup touchend blur",function(){cancelAnimationFrame(a),o=!1})},writable:!0,configurable:!0})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(162)),o=i(r(165)),a=function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var r=[],i=!0,n=!1,a=void 0;try{for(var s,l=(0,o.default)(e);!(i=(s=l.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(n)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=r(78),l=32,c=33,u=34,h=35,p=36,d=37,f=38,m=39,v=40;Object.defineProperty(s.SmoothScrollbar.prototype,"__keyboardHandler",{value:function(){var e=this,t=this.targets.container;this.__addEvent(t,"keydown",function(r){if(document.activeElement===t){var i=e.options,n=e.parents,o=e.movementLocked,s=function(t){var r=e.size,i=e.offset,n=e.limit,o=e.movement;switch(t){case l:return[0,200];case c:return[0,40-r.container.height];case u:return[0,r.container.height-40];case h:return[0,Math.abs(o.y)+n.y-i.y];case p:return[0,-Math.abs(o.y)-i.y];case d:return[-40,0];case f:return[0,-40];case m:return[40,0];case v:return[0,40];default:return null}}(r.keyCode||r.which);if(s){var g=a(s,2),y=g[0],x=g[1];if(e.__shouldPropagateMovement(y,x))return t.blur(),n.length&&n[0].focus(),e.__updateThrottle();r.preventDefault(),e.__unlockMovement(),y&&e.__willOverscroll("x",y)&&(o.x=!0),x&&e.__willOverscroll("y",x)&&(o.y=!0);var _=i.speed;e.__addMovement(y*_,x*_)}}}),this.__addEvent(t,"keyup",function(){e.__unlockMovement()})},writable:!0,configurable:!0})},function(e,t,r){e.exports={default:r(163),__esModule:!0}},function(e,t,r){r(57),r(4),e.exports=r(164)},function(e,t,r){var i=r(53),n=r(45)("iterator"),o=r(27);e.exports=r(12).isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||o.hasOwnProperty(i(t))}},function(e,t,r){e.exports={default:r(166),__esModule:!0}},function(e,t,r){r(57),r(4),e.exports=r(167)},function(e,t,r){var i=r(17),n=r(52);e.exports=r(12).getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,r){"use strict";var i=r(78),n=r(112);Object.defineProperty(i.SmoothScrollbar.prototype,"__mouseHandler",{value:function(){var e=this,t=this.targets,r=t.container,i=t.xAxis,o=t.yAxis,a=function(t,r){var i=e.size,n=e.thumbSize;return"x"===t?r/(i.container.width-(n.x-n.realX))*i.content.width:"y"===t?r/(i.container.height-(n.y-n.realY))*i.content.height:0},s=function(e){return(0,n.isOneOf)(e,[i.track,i.thumb])?"x":(0,n.isOneOf)(e,[o.track,o.thumb])?"y":void 0},l=void 0,c=void 0,u=void 0,h=void 0,p=void 0;this.__addEvent(r,"click",function(t){if(!c&&(0,n.isOneOf)(t.target,[i.track,o.track])){var r=t.target,l=s(r),u=r.getBoundingClientRect(),h=(0,n.getPosition)(t),p=e.offset,d=e.thumbSize;if("x"===l){var f=h.x-u.left-d.x/2;e.__setMovement(a(l,f)-p.x,0)}else{var m=h.y-u.top-d.y/2;e.__setMovement(0,a(l,m)-p.y)}}}),this.__addEvent(r,"mousedown",function(t){if((0,n.isOneOf)(t.target,[i.thumb,o.thumb])){l=!0;var r=(0,n.getPosition)(t),a=t.target.getBoundingClientRect();h=s(t.target),u={x:r.x-a.left,y:r.y-a.top},p=e.targets.container.getBoundingClientRect()}}),this.__addEvent(window,"mousemove",function(t){if(l){t.preventDefault(),c=!0;var r=e.offset,i=(0,n.getPosition)(t);if("x"===h){var o=i.x-u.x-p.left;e.setPosition(a(h,o),r.y)}if("y"===h){var s=i.y-u.y-p.top;e.setPosition(r.x,a(h,s))}}}),this.__addEvent(window,"mouseup blur",function(){l=c=!1})},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=r(78);Object.defineProperty(i.SmoothScrollbar.prototype,"__resizeHandler",{value:function(){this.__addEvent(window,"resize",this.__updateThrottle)},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=r(78),n=r(112);Object.defineProperty(i.SmoothScrollbar.prototype,"__selectHandler",{value:function(){var e=this,t=!1,r=void 0,i=this.targets,o=i.container,a=i.content,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,n.setStyle)(o,{"-user-select":e})};this.__addEvent(window,"mousemove",function(i){t&&(cancelAnimationFrame(r),function t(i){var n=i.x,o=i.y;if(n||o){var a=e.options.speed;e.__setMovement(n*a,o*a),r=requestAnimationFrame(function(){t({x:n,y:o})})}}(e.__getPointerTrend(i)))}),this.__addEvent(a,"selectstart",function(i){return e.__eventFromChildScrollbar(i)?s("none"):(cancelAnimationFrame(r),e.__updateBounding(),void(t=!0))}),this.__addEvent(window,"mouseup blur",function(){cancelAnimationFrame(r),s(),t=!1}),this.__addEvent(o,"scroll",function(e){e.preventDefault(),o.scrollTop=o.scrollLeft=0})},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(r(90)),n=r(78),o=r(89),a=r(112),s=null;Object.defineProperty(n.SmoothScrollbar.prototype,"__touchHandler",{value:function(){var e=this,t=this.targets,r=this.__touchRecord,n=t.container;this.__addEvent(n,"touchstart",function(t){if(!e.__isDrag){var i=e.__timerID,n=e.movement;cancelAnimationFrame(i.scrollTo),e.__willOverscroll("x")||(n.x=0),e.__willOverscroll("y")||(n.y=0),r.track(t),e.__autoLockMovement()}}),this.__addEvent(n,"touchmove",function(t){if(!(e.__isDrag||s&&s!==e)){r.update(t);var i=r.getDelta(),n=i.x,o=i.y;if(e.__shouldPropagateMovement(n,o))return e.__updateThrottle();var a=e.movement,l=e.MAX_OVERSCROLL,c=e.options;if(a.x&&e.__willOverscroll("x",n)){var u=2;"bounce"===c.overscrollEffect&&(u+=Math.abs(10*a.x/l)),Math.abs(a.x)>=l?n=0:n/=u}if(a.y&&e.__willOverscroll("y",o)){var h=2;"bounce"===c.overscrollEffect&&(h+=Math.abs(10*a.y/l)),Math.abs(a.y)>=l?o=0:o/=h}e.__autoLockMovement(),t.preventDefault(),e.__addMovement(n,o,!0),s=e}}),this.__addEvent(n,"touchcancel touchend",function(t){if(!e.__isDrag){var n=e.options.speed,l=r.getVelocity(),c={};(0,i.default)(l).forEach(function(e){var t=(0,a.pickInRange)(l[e]*o.GLOBAL_ENV.EASING_MULTIPLIER,-1e3,1e3);c[e]=Math.abs(t)>100?t*n:0}),e.__addMovement(c.x,c.y,!0),e.__unlockMovement(),r.release(t),s=null}})},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=r(78),n=r(112),o=r(89);Object.defineProperty(i.SmoothScrollbar.prototype,"__wheelHandler",{value:function(){var e=this,t=this.targets.container,r=!1,i=(0,n.debounce)(function(){r=!1},30,!1);this.__addEvent(t,o.GLOBAL_ENV.WHEEL_EVENT,function(t){var o=e.options,a=(0,n.getDelta)(t),s=a.x,l=a.y;return s*=o.speed,l*=o.speed,e.__shouldPropagateMovement(s,l)?e.__updateThrottle():(t.preventDefault(),i(),e.overscrollBack&&(r=!0),r&&(e.__willOverscroll("x",s)&&(s=0),e.__willOverscroll("y",l)&&(l=0)),void e.__addMovement(s,l,!0))})},writable:!0,configurable:!0})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(174);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90));Object.defineProperty(t,"__esModule",{value:!0});var a=r(175);(0,o.default)(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(176);(0,o.default)(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return s[e]}})});var l=r(177);(0,o.default)(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return l[e]}})});var c=r(178);(0,o.default)(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return c[e]}})});var u=r(179);(0,o.default)(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return u[e]}})});var h=r(182);(0,o.default)(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return h[e]}})});var p=r(183);(0,o.default)(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return p[e]}})});var d=r(184);(0,o.default)(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return d[e]}})});var f=r(185);(0,o.default)(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return f[e]}})});var m=r(186);(0,o.default)(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&(0,n.default)(t,e,{enumerable:!0,get:function(){return m[e]}})})},function(e,t,r){"use strict";var i=r(78);Object.defineProperty(i.SmoothScrollbar.prototype,"__addEvent",{value:function(e,t,r){var i=this;if(!e||"function"!=typeof e.addEventListener)throw new TypeError("expect elem to be a DOM element, but got "+e);var n=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];!e.type.match(/drag/)&&e.defaultPrevented||r.apply(void 0,[e].concat(i))};t.split(/\s+/g).forEach(function(t){i.__handlers.push({evt:t,elem:e,fn:n,hasRegistered:!0}),e.addEventListener(t,n)})},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=r(78);Object.defineProperty(i.SmoothScrollbar.prototype,"__eventFromChildScrollbar",{value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target;return this.children.some(function(t){return t.contains(e)})},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=r(78);Object.defineProperty(i.SmoothScrollbar.prototype,"__getDeltaLimit",{value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.options,r=this.offset,i=this.limit;return e&&(t.continuousScrolling||t.overscrollEffect)?{x:[-1/0,1/0],y:[-1/0,1/0]}:{x:[-r.x,i.x-r.x],y:[-r.y,i.y-r.y]}},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=r(78),n=r(112);Object.defineProperty(i.SmoothScrollbar.prototype,"__getPointerTrend",{value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.bounding,i=r.top,o=r.right,a=r.bottom,s=r.left,l=(0,n.getPosition)(e),c=l.x,u=l.y,h={x:0,y:0};return 0===c&&0===u?h:(c>o-t?h.x=c-o+t:c<s+t&&(h.x=c-s-t),u>a-t?h.y=u-a+t:u<i+t&&(h.y=u-i-t),h)},writable:!0,configurable:!0})},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(86)),o=i(r(90)),a=i(r(180)),s=i(r(2)),l=i(r(55)),c=i(r(62)),u="function"==typeof c.default&&"symbol"==typeof l.default?function(e){return typeof e}:function(e){return e&&"function"==typeof c.default&&e.constructor===c.default&&e!==c.default.prototype?"symbol":typeof e},h=r(112),p=r(78);Object.defineProperty(p.SmoothScrollbar.prototype,"__initOptions",{value:function(e){var t=this,r={speed:1,damping:.1,thumbMinSize:20,syncCallbacks:!1,renderByPixels:!0,alwaysShowTracks:!1,continuousScrolling:"auto",overscrollEffect:!1,overscrollEffectColor:"#87ceeb",overscrollDamping:.2},i={damping:[0,1],speed:[0,1/0],thumbMinSize:[0,1/0],overscrollEffect:[!1,"bounce","glow"],overscrollDamping:[0,1]},l={set ignoreEvents(e){console.warn("`options.ignoreEvents` parameter is deprecated, use `instance#unregisterEvents()` method instead. https://github.com/idiotWu/smooth-scrollbar/wiki/Instance-Methods#instanceunregisterevents-regex--regex-regex--")},set friction(e){console.warn("`options.friction="+e+"` is deprecated, use `options.damping="+e/100+"` instead."),this.damping=e/100},get syncCallbacks(){return r.syncCallbacks},set syncCallbacks(e){r.syncCallbacks=!!e},get renderByPixels(){return r.renderByPixels},set renderByPixels(e){r.renderByPixels=!!e},get alwaysShowTracks(){return r.alwaysShowTracks},set alwaysShowTracks(e){e=!!e,r.alwaysShowTracks=e;var i=t.targets.container;e?(t.showTrack(),i.classList.add("sticky")):(t.hideTrack(),i.classList.remove("sticky"))},get continuousScrolling(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto";if(!1!==r.overscrollEffect)return!1;switch(e){case"auto":return t.isNestedScrollbar;default:return!!e}}(r.continuousScrolling)},set continuousScrolling(e){r.continuousScrolling="auto"===e?e:!!e},get overscrollEffect(){return r.overscrollEffect},set overscrollEffect(e){e&&!~i.overscrollEffect.indexOf(e)&&(console.warn("`overscrollEffect` should be one of "+(0,a.default)(i.overscrollEffect)+", but got "+(0,a.default)(e)+". It will be set to `false` now."),e=!1),r.overscrollEffect=e},get overscrollEffectColor(){return r.overscrollEffectColor},set overscrollEffectColor(e){r.overscrollEffectColor=e}};(0,o.default)(r).filter(function(e){return!l.hasOwnProperty(e)}).forEach(function(e){(0,n.default)(l,e,{enumerable:!0,get:function(){return r[e]},set:function(t){if(isNaN(parseFloat(t)))throw new TypeError("expect `options."+e+"` to be a number, but got "+(void 0===t?"undefined":u(t)));r[e]=h.pickInRange.apply(void 0,[t].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,s.default)(e)}(i[e])))}})}),this.__readonly("options",l),this.setOptions(e)},writable:!0,configurable:!0})},function(e,t,r){e.exports={default:r(181),__esModule:!0}},function(e,t,r){var i=r(12),n=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},function(e,t,r){"use strict";var i=r(78);Object.defineProperty(i.SmoothScrollbar.prototype,"__initScrollbar",{value:function(){this.update(),this.__keyboardHandler(),this.__resizeHandler(),this.__selectHandler(),this.__mouseHandler(),this.__touchHandler(),this.__wheelHandler(),this.__dragHandler(),this.__render()},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(r(86)),n=r(78);Object.defineProperty(n.SmoothScrollbar.prototype,"__readonly",{value:function(e,t){return(0,i.default)(this,e,{value:t,enumerable:!0,configurable:!0})},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=r(112),n=r(78);Object.defineProperty(n.SmoothScrollbar.prototype,"__setThumbPosition",{value:function(){var e=this.targets,t=this.size,r=this.offset,n=this.thumbOffset,o=this.thumbSize;n.x=r.x/t.content.width*(t.container.width-(o.x-o.realX)),n.y=r.y/t.content.height*(t.container.height-(o.y-o.realY)),(0,i.setStyle)(e.xAxis.thumb,{"-transform":"translate3d("+n.x+"px, 0, 0)"}),(0,i.setStyle)(e.yAxis.thumb,{"-transform":"translate3d(0, "+n.y+"px, 0)"})},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=r(78);Object.defineProperty(i.SmoothScrollbar.prototype,"__updateBounding",{value:function(){var e=this.targets.container.getBoundingClientRect(),t=e.top,r=e.right,i=e.bottom,n=e.left,o=window,a=o.innerHeight,s=o.innerWidth;this.__readonly("bounding",{top:Math.max(t,0),right:Math.min(r,s),bottom:Math.min(i,a),left:Math.max(n,0)})},writable:!0,configurable:!0})},function(e,t,r){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(r(2)),n=r(78),o=r(89);Object.defineProperty(n.SmoothScrollbar.prototype,"__updateTree",{value:function(){var e=this.targets,t=e.container,r=e.content;this.__readonly("children",[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,i.default)(e)}(r.querySelectorAll(o.selectors)))),this.__readonly("isNestedScrollbar",!1);for(var n=[],a=t;a=a.parentElement;)o.sbList.has(a)&&(this.__readonly("isNestedScrollbar",!0),n.push(a));this.__readonly("parents",n)},writable:!0,configurable:!0})},function(e,t){}])}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var r=[],i=e.document,n=r.slice,o=r.concat,a=r.push,s=r.indexOf,l={},c=l.toString,u=l.hasOwnProperty,h={},p="2.2.0",d=function(e,t){return new d.fn.init(e,t)},f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,v=/-([\da-z])/gi,g=function(e,t){return t.toUpperCase()};function y(e){var t=!!e&&"length"in e&&e.length,r=d.type(e);return"function"!==r&&!d.isWindow(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}d.fn=d.prototype={jquery:p,constructor:d,selector:"",length:0,toArray:function(){return n.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:n.call(this)},pushStack:function(e){var t=d.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return d.each(this,e)},map:function(e){return this.pushStack(d.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(0>e?t:0);return this.pushStack(r>=0&&t>r?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:r.sort,splice:r.splice},d.extend=d.fn.extend=function(){var e,t,r,i,n,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||d.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)r=a[t],a!==(i=e[t])&&(c&&i&&(d.isPlainObject(i)||(n=d.isArray(i)))?(n?(n=!1,o=r&&d.isArray(r)?r:[]):o=r&&d.isPlainObject(r)?r:{},a[t]=d.extend(c,o,i)):void 0!==i&&(a[t]=i));return a},d.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===d.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!d.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){return!("object"!==d.type(e)||e.nodeType||d.isWindow(e)||e.constructor&&!u.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e},globalEval:function(e){var t,r=eval;(e=d.trim(e))&&(1===e.indexOf("use strict")?((t=i.createElement("script")).text=e,i.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(m,"ms-").replace(v,g)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,i=0;if(y(e))for(r=e.length;r>i&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(f,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(y(Object(e))?d.merge(r,"string"==typeof e?[e]:e):a.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:s.call(t,e,r)},merge:function(e,t){for(var r=+t.length,i=0,n=e.length;r>i;i++)e[n++]=t[i];return e.length=n,e},grep:function(e,t,r){for(var i=[],n=0,o=e.length,a=!r;o>n;n++)!t(e[n],n)!==a&&i.push(e[n]);return i},map:function(e,t,r){var i,n,a=0,s=[];if(y(e))for(i=e.length;i>a;a++)null!=(n=t(e[a],a,r))&&s.push(n);else for(a in e)null!=(n=t(e[a],a,r))&&s.push(n);return o.apply([],s)},guid:1,proxy:function(e,t){var r,i,o;return"string"==typeof t&&(r=e[t],t=e,e=r),d.isFunction(e)?(i=n.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(n.call(arguments)))}).guid=e.guid=e.guid||d.guid++,o):void 0},now:Date.now,support:h}),"function"==typeof Symbol&&(d.fn[Symbol.iterator]=r[Symbol.iterator]),d.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});var x=function(e){var t,r,i,n,o,a,s,l,c,u,h,p,d,f,m,v,g,y,x,_="sizzle"+1*new Date,w=e.document,b=0,M=0,T=oe(),E=oe(),S=oe(),R=function(e,t){return e===t&&(h=!0),0},P=1<<31,A={}.hasOwnProperty,C=[],L=C.pop,O=C.push,D=C.push,H=C.slice,z=function(e,t){for(var r=0,i=e.length;i>r;r++)if(e[r]===t)return r;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",k="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",U="\\["+k+"*("+N+")(?:"+k+"*([*^$|!~]?=)"+k+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+k+"*\\]",B=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",F=new RegExp(k+"+","g"),j=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g"),G=new RegExp("^"+k+"*,"+k+"*"),W=new RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),V=new RegExp("="+k+"*([^\\]'\"]*?)"+k+"*\\]","g"),q=new RegExp(B),X=new RegExp("^"+N+"$"),$={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+k+"?|("+k+")|.)","ig"),re=function(e,t,r){var i="0x"+t-65536;return i!=i||r?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ie=function(){p()};try{D.apply(C=H.call(w.childNodes),w.childNodes),C[w.childNodes.length].nodeType}catch(e){D={apply:C.length?function(e,t){O.apply(e,H.call(t))}:function(e,t){for(var r=e.length,i=0;e[r++]=t[i++];);e.length=r-1}}}function ne(e,t,i,n){var o,s,c,u,h,f,g,y,b=t&&t.ownerDocument,M=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==M&&9!==M&&11!==M)return i;if(!n&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,m)){if(11!==M&&(f=Q.exec(e)))if(o=f[1]){if(9===M){if(!(c=t.getElementById(o)))return i;if(c.id===o)return i.push(c),i}else if(b&&(c=b.getElementById(o))&&x(t,c)&&c.id===o)return i.push(c),i}else{if(f[2])return D.apply(i,t.getElementsByTagName(e)),i;if((o=f[3])&&r.getElementsByClassName&&t.getElementsByClassName)return D.apply(i,t.getElementsByClassName(o)),i}if(r.qsa&&!S[e+" "]&&(!v||!v.test(e))){if(1!==M)b=t,y=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(ee,"\\$&"):t.setAttribute("id",u=_),s=(g=a(e)).length,h=X.test(u)?"#"+u:"[id='"+u+"']";s--;)g[s]=h+" "+me(g[s]);y=g.join(","),b=K.test(e)&&de(t.parentNode)||t}if(y)try{return D.apply(i,b.querySelectorAll(y)),i}catch(e){}finally{u===_&&t.removeAttribute("id")}}}return l(e.replace(j,"$1"),t,i,n)}function oe(){var e=[];return function t(r,n){return e.push(r+" ")>i.cacheLength&&delete t[e.shift()],t[r+" "]=n}}function ae(e){return e[_]=!0,e}function se(e){var t=d.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var r=e.split("|"),n=r.length;n--;)i.attrHandle[r[n]]=t}function ce(e,t){var r=t&&e,i=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||P)-(~e.sourceIndex||P);if(i)return i;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function ue(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function pe(e){return ae(function(t){return t=+t,ae(function(r,i){for(var n,o=e([],r.length,t),a=o.length;a--;)r[n=o[a]]&&(r[n]=!(i[n]=r[n]))})})}function de(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=ne.support={},o=ne.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=ne.setDocument=function(e){var t,n,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(f=(d=a).documentElement,m=!o(d),(n=d.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ie,!1):n.attachEvent&&n.attachEvent("onunload",ie)),r.attributes=se(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=se(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=Z.test(d.getElementsByClassName),r.getById=se(function(e){return f.appendChild(e).id=_,!d.getElementsByName||!d.getElementsByName(_).length}),r.getById?(i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var r=t.getElementById(e);return r?[r]:[]}},i.filter.ID=function(e){var t=e.replace(te,re);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(te,re);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}}),i.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,i=[],n=0,o=t.getElementsByTagName(e);if("*"===e){for(;r=o[n++];)1===r.nodeType&&i.push(r);return i}return o},i.find.CLASS=r.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&m?t.getElementsByClassName(e):void 0},g=[],v=[],(r.qsa=Z.test(d.querySelectorAll))&&(se(function(e){f.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+k+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+k+"*(?:value|"+I+")"),e.querySelectorAll("[id~="+_+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||v.push(".#.+[+~]")}),se(function(e){var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+k+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(r.matchesSelector=Z.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&se(function(e){r.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",B)}),v=v.length&&new RegExp(v.join("|")),g=g.length&&new RegExp(g.join("|")),t=Z.test(f.compareDocumentPosition),x=t||Z.test(f.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},R=t?function(e,t){if(e===t)return h=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:u?z(u,e)-z(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return h=!0,0;var r,i=0,n=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!n||!o)return e===d?-1:t===d?1:n?-1:o?1:u?z(u,e)-z(u,t):0;if(n===o)return ce(e,t);for(r=e;r=r.parentNode;)a.unshift(r);for(r=t;r=r.parentNode;)s.unshift(r);for(;a[i]===s[i];)i++;return i?ce(a[i],s[i]):a[i]===w?-1:s[i]===w?1:0},d):d},ne.matches=function(e,t){return ne(e,null,null,t)},ne.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(V,"='$1']"),r.matchesSelector&&m&&!S[t+" "]&&(!g||!g.test(t))&&(!v||!v.test(t)))try{var i=y.call(e,t);if(i||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return ne(t,d,null,[e]).length>0},ne.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},ne.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var n=i.attrHandle[t.toLowerCase()],o=n&&A.call(i.attrHandle,t.toLowerCase())?n(e,t,!m):void 0;return void 0!==o?o:r.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ne.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ne.uniqueSort=function(e){var t,i=[],n=0,o=0;if(h=!r.detectDuplicates,u=!r.sortStable&&e.slice(0),e.sort(R),h){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return u=null,e},n=ne.getText=function(e){var t,r="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=n(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)r+=n(t);return r},(i=ne.selectors={cacheLength:50,createPseudo:ae,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,re),e[3]=(e[3]||e[4]||e[5]||"").replace(te,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ne.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ne.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&q.test(r)&&(t=a(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+k+")"+e+"("+k+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,r){return function(i){var n=ne.attr(i,e);return null==n?"!="===t:!t||(n+="","="===t?n===r:"!="===t?n!==r:"^="===t?r&&0===n.indexOf(r):"*="===t?r&&n.indexOf(r)>-1:"$="===t?r&&n.slice(-r.length)===r:"~="===t?(" "+n.replace(F," ")+" ").indexOf(r)>-1:"|="===t&&(n===r||n.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,i,n){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===n?function(e){return!!e.parentNode}:function(t,r,l){var c,u,h,p,d,f,m=o!==a?"nextSibling":"previousSibling",v=t.parentNode,g=s&&t.nodeName.toLowerCase(),y=!l&&!s,x=!1;if(v){if(o){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?v.firstChild:v.lastChild],a&&y){for(x=(d=(c=(u=(h=(p=v)[_]||(p[_]={}))[p.uniqueID]||(h[p.uniqueID]={}))[e]||[])[0]===b&&c[1])&&c[2],p=d&&v.childNodes[d];p=++d&&p&&p[m]||(x=d=0)||f.pop();)if(1===p.nodeType&&++x&&p===t){u[e]=[b,d,x];break}}else if(y&&(x=d=(c=(u=(h=(p=t)[_]||(p[_]={}))[p.uniqueID]||(h[p.uniqueID]={}))[e]||[])[0]===b&&c[1]),!1===x)for(;(p=++d&&p&&p[m]||(x=d=0)||f.pop())&&((s?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++x||(y&&((u=(h=p[_]||(p[_]={}))[p.uniqueID]||(h[p.uniqueID]={}))[e]=[b,x]),p!==t)););return(x-=n)===i||x%i==0&&x/i>=0}}},PSEUDO:function(e,t){var r,n=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ne.error("unsupported pseudo: "+e);return n[_]?n(t):n.length>1?(r=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ae(function(e,r){for(var i,o=n(e,t),a=o.length;a--;)e[i=z(e,o[a])]=!(r[i]=o[a])}):function(e){return n(e,0,r)}):n}},pseudos:{not:ae(function(e){var t=[],r=[],i=s(e.replace(j,"$1"));return i[_]?ae(function(e,t,r,n){for(var o,a=i(e,null,n,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,n,o){return t[0]=e,i(t,null,o,r),t[0]=null,!r.pop()}}),has:ae(function(e){return function(t){return ne(e,t).length>0}}),contains:ae(function(e){return e=e.replace(te,re),function(t){return(t.textContent||t.innerText||n(t)).indexOf(e)>-1}}),lang:ae(function(e){return X.test(e||"")||ne.error("unsupported lang: "+e),e=e.replace(te,re).toLowerCase(),function(t){var r;do{if(r=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,r){return[0>r?r+t:r]}),even:pe(function(e,t){for(var r=0;t>r;r+=2)e.push(r);return e}),odd:pe(function(e,t){for(var r=1;t>r;r+=2)e.push(r);return e}),lt:pe(function(e,t,r){for(var i=0>r?r+t:r;--i>=0;)e.push(i);return e}),gt:pe(function(e,t,r){for(var i=0>r?r+t:r;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=ue(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=he(t);function fe(){}function me(e){for(var t=0,r=e.length,i="";r>t;t++)i+=e[t].value;return i}function ve(e,t,r){var i=t.dir,n=r&&"parentNode"===i,o=M++;return t.first?function(t,r,o){for(;t=t[i];)if(1===t.nodeType||n)return e(t,r,o)}:function(t,r,a){var s,l,c,u=[b,o];if(a){for(;t=t[i];)if((1===t.nodeType||n)&&e(t,r,a))return!0}else for(;t=t[i];)if(1===t.nodeType||n){if((s=(l=(c=t[_]||(t[_]={}))[t.uniqueID]||(c[t.uniqueID]={}))[i])&&s[0]===b&&s[1]===o)return u[2]=s[2];if(l[i]=u,u[2]=e(t,r,a))return!0}}}function ge(e){return e.length>1?function(t,r,i){for(var n=e.length;n--;)if(!e[n](t,r,i))return!1;return!0}:e[0]}function ye(e,t,r,i,n){for(var o,a=[],s=0,l=e.length,c=null!=t;l>s;s++)(o=e[s])&&(!r||r(o,i,n))&&(a.push(o),c&&t.push(s));return a}function xe(e,t,r,i,n,o){return i&&!i[_]&&(i=xe(i)),n&&!n[_]&&(n=xe(n,o)),ae(function(o,a,s,l){var c,u,h,p=[],d=[],f=a.length,m=o||function(e,t,r){for(var i=0,n=t.length;n>i;i++)ne(e,t[i],r);return r}(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?m:ye(m,p,e,s,l),g=r?n||(o?e:f||i)?[]:a:v;if(r&&r(v,g,s,l),i)for(c=ye(g,d),i(c,[],s,l),u=c.length;u--;)(h=c[u])&&(g[d[u]]=!(v[d[u]]=h));if(o){if(n||e){if(n){for(c=[],u=g.length;u--;)(h=g[u])&&c.push(v[u]=h);n(null,g=[],c,l)}for(u=g.length;u--;)(h=g[u])&&(c=n?z(o,h):p[u])>-1&&(o[c]=!(a[c]=h))}}else g=ye(g===a?g.splice(f,g.length):g),n?n(null,a,g,l):D.apply(a,g)})}function _e(e){for(var t,r,n,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],l=a?1:0,u=ve(function(e){return e===t},s,!0),h=ve(function(e){return z(t,e)>-1},s,!0),p=[function(e,r,i){var n=!a&&(i||r!==c)||((t=r).nodeType?u(e,r,i):h(e,r,i));return t=null,n}];o>l;l++)if(r=i.relative[e[l].type])p=[ve(ge(p),r)];else{if((r=i.filter[e[l].type].apply(null,e[l].matches))[_]){for(n=++l;o>n&&!i.relative[e[n].type];n++);return xe(l>1&&ge(p),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(j,"$1"),r,n>l&&_e(e.slice(l,n)),o>n&&_e(e=e.slice(n)),o>n&&me(e))}p.push(r)}return ge(p)}function we(e,t){var r=t.length>0,n=e.length>0,o=function(o,a,s,l,u){var h,f,v,g=0,y="0",x=o&&[],_=[],w=c,M=o||n&&i.find.TAG("*",u),T=b+=null==w?1:Math.random()||.1,E=M.length;for(u&&(c=a===d||a||u);y!==E&&null!=(h=M[y]);y++){if(n&&h){for(f=0,a||h.ownerDocument===d||(p(h),s=!m);v=e[f++];)if(v(h,a||d,s)){l.push(h);break}u&&(b=T)}r&&((h=!v&&h)&&g--,o&&x.push(h))}if(g+=y,r&&y!==g){for(f=0;v=t[f++];)v(x,_,a,s);if(o){if(g>0)for(;y--;)x[y]||_[y]||(_[y]=L.call(l));_=ye(_)}D.apply(l,_),u&&!o&&_.length>0&&g+t.length>1&&ne.uniqueSort(l)}return u&&(b=T,c=w),x};return r?ae(o):o}return fe.prototype=i.filters=i.pseudos,i.setFilters=new fe,a=ne.tokenize=function(e,t){var r,n,o,a,s,l,c,u=E[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=i.preFilter;s;){for(a in(!r||(n=G.exec(s)))&&(n&&(s=s.slice(n[0].length)||s),l.push(o=[])),r=!1,(n=W.exec(s))&&(r=n.shift(),o.push({value:r,type:n[0].replace(j," ")}),s=s.slice(r.length)),i.filter)!(n=$[a].exec(s))||c[a]&&!(n=c[a](n))||(r=n.shift(),o.push({value:r,type:a,matches:n}),s=s.slice(r.length));if(!r)break}return t?s.length:s?ne.error(e):E(e,l).slice(0)},s=ne.compile=function(e,t){var r,i=[],n=[],o=S[e+" "];if(!o){for(t||(t=a(e)),r=t.length;r--;)(o=_e(t[r]))[_]?i.push(o):n.push(o);(o=S(e,we(n,i))).selector=e}return o},l=ne.select=function(e,t,n,o){var l,c,u,h,p,d="function"==typeof e&&e,f=!o&&a(e=d.selector||e);if(n=n||[],1===f.length){if((c=f[0]=f[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&r.getById&&9===t.nodeType&&m&&i.relative[c[1].type]){if(!(t=(i.find.ID(u.matches[0].replace(te,re),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(l=$.needsContext.test(e)?0:c.length;l--&&(u=c[l],!i.relative[h=u.type]);)if((p=i.find[h])&&(o=p(u.matches[0].replace(te,re),K.test(c[0].type)&&de(t.parentNode)||t))){if(c.splice(l,1),!(e=o.length&&me(c)))return D.apply(n,o),n;break}}return(d||s(e,f))(o,t,!m,n,!t||K.test(e)&&de(t.parentNode)||t),n},r.sortStable=_.split("").sort(R).join("")===_,r.detectDuplicates=!!h,p(),r.sortDetached=se(function(e){return 1&e.compareDocumentPosition(d.createElement("div"))}),se(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,r){return r?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),r.attributes&&se(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,r){return r||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),se(function(e){return null==e.getAttribute("disabled")})||le(I,function(e,t,r){var i;return r?void 0:!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),ne}(e);d.find=x,d.expr=x.selectors,d.expr[":"]=d.expr.pseudos,d.uniqueSort=d.unique=x.uniqueSort,d.text=x.getText,d.isXMLDoc=x.isXML,d.contains=x.contains;var _=function(e,t,r){for(var i=[],n=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&d(e).is(r))break;i.push(e)}return i},w=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},b=d.expr.match.needsContext,M=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,T=/^.[^:#\[\.,]*$/;function E(e,t,r){if(d.isFunction(t))return d.grep(e,function(e,i){return!!t.call(e,i,e)!==r});if(t.nodeType)return d.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(T.test(t))return d.filter(t,e,r);t=d.filter(t,e)}return d.grep(e,function(e){return s.call(t,e)>-1!==r})}d.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?d.find.matchesSelector(i,e)?[i]:[]:d.find.matches(e,d.grep(t,function(e){return 1===e.nodeType}))},d.fn.extend({find:function(e){var t,r=this.length,i=[],n=this;if("string"!=typeof e)return this.pushStack(d(e).filter(function(){for(t=0;r>t;t++)if(d.contains(n[t],this))return!0}));for(t=0;r>t;t++)d.find(e,n[t],i);return(i=this.pushStack(r>1?d.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(E(this,e||[],!1))},not:function(e){return this.pushStack(E(this,e||[],!0))},is:function(e){return!!E(this,"string"==typeof e&&b.test(e)?d(e):e||[],!1).length}});var S,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(d.fn.init=function(e,t,r){var n,o;if(!e)return this;if(r=r||S,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:R.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof d?t[0]:t,d.merge(this,d.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:i,!0)),M.test(n[1])&&d.isPlainObject(t))for(n in t)d.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(o=i.getElementById(n[2]))&&o.parentNode&&(this.length=1,this[0]=o),this.context=i,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):d.isFunction(e)?void 0!==r.ready?r.ready(e):e(d):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),d.makeArray(e,this))}).prototype=d.fn,S=d(i);var P=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function C(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}d.fn.extend({has:function(e){var t=d(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(d.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,n=this.length,o=[],a=b.test(e)||"string"!=typeof e?d(e,t||this.context):0;n>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&d.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?d.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?s.call(d(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(d.uniqueSort(d.merge(this.get(),d(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),d.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return _(e,"parentNode")},parentsUntil:function(e,t,r){return _(e,"parentNode",r)},next:function(e){return C(e,"nextSibling")},prev:function(e){return C(e,"previousSibling")},nextAll:function(e){return _(e,"nextSibling")},prevAll:function(e){return _(e,"previousSibling")},nextUntil:function(e,t,r){return _(e,"nextSibling",r)},prevUntil:function(e,t,r){return _(e,"previousSibling",r)},siblings:function(e){return w((e.parentNode||{}).firstChild,e)},children:function(e){return w(e.firstChild)},contents:function(e){return e.contentDocument||d.merge([],e.childNodes)}},function(e,t){d.fn[e]=function(r,i){var n=d.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(n=d.filter(i,n)),this.length>1&&(A[e]||d.uniqueSort(n),P.test(e)&&n.reverse()),this.pushStack(n)}});var L,O=/\S+/g;function D(){i.removeEventListener("DOMContentLoaded",D),e.removeEventListener("load",D),d.ready()}d.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return d.each(e.match(O)||[],function(e,r){t[r]=!0}),t}(e):d.extend({},e);var t,r,i,n,o=[],a=[],s=-1,l=function(){for(n=e.once,i=t=!0;a.length;s=-1)for(r=a.shift();++s<o.length;)!1===o[s].apply(r[0],r[1])&&e.stopOnFalse&&(s=o.length,r=!1);e.memory||(r=!1),t=!1,n&&(o=r?[]:"")},c={add:function(){return o&&(r&&!t&&(s=o.length-1,a.push(r)),function t(r){d.each(r,function(r,i){d.isFunction(i)?e.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==d.type(i)&&t(i)})}(arguments),r&&!t&&l()),this},remove:function(){return d.each(arguments,function(e,t){for(var r;(r=d.inArray(t,o,r))>-1;)o.splice(r,1),s>=r&&s--}),this},has:function(e){return e?d.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return n=a=[],o=r="",this},disabled:function(){return!o},lock:function(){return n=a=[],r||(o=r=""),this},locked:function(){return!!n},fireWith:function(e,r){return n||(r=[e,(r=r||[]).slice?r.slice():r],a.push(r),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},d.extend({Deferred:function(e){var t=[["resolve","done",d.Callbacks("once memory"),"resolved"],["reject","fail",d.Callbacks("once memory"),"rejected"],["notify","progress",d.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var e=arguments;return d.Deferred(function(r){d.each(t,function(t,o){var a=d.isFunction(e[t])&&e[t];n[o[1]](function(){var e=a&&a.apply(this,arguments);e&&d.isFunction(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[o[0]+"With"](this===i?r.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?d.extend(e,i):i}},n={};return i.pipe=i.then,d.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){r=s},t[1^e][2].disable,t[2][2].lock),n[o[0]]=function(){return n[o[0]+"With"](this===n?i:this,arguments),this},n[o[0]+"With"]=a.fireWith}),i.promise(n),e&&e.call(n,n),n},when:function(e){var t,r,i,o=0,a=n.call(arguments),s=a.length,l=1!==s||e&&d.isFunction(e.promise)?s:0,c=1===l?e:d.Deferred(),u=function(e,r,i){return function(o){r[e]=this,i[e]=arguments.length>1?n.call(arguments):o,i===t?c.notifyWith(r,i):--l||c.resolveWith(r,i)}};if(s>1)for(t=new Array(s),r=new Array(s),i=new Array(s);s>o;o++)a[o]&&d.isFunction(a[o].promise)?a[o].promise().progress(u(o,r,t)).done(u(o,i,a)).fail(c.reject):--l;return l||c.resolveWith(i,a),c.promise()}}),d.fn.ready=function(e){return d.ready.promise().done(e),this},d.extend({isReady:!1,readyWait:1,holdReady:function(e){e?d.readyWait++:d.ready(!0)},ready:function(e){(!0===e?--d.readyWait:d.isReady)||(d.isReady=!0,!0!==e&&--d.readyWait>0||(L.resolveWith(i,[d]),d.fn.triggerHandler&&(d(i).triggerHandler("ready"),d(i).off("ready"))))}}),d.ready.promise=function(t){return L||(L=d.Deferred(),"complete"===i.readyState||"loading"!==i.readyState&&!i.documentElement.doScroll?e.setTimeout(d.ready):(i.addEventListener("DOMContentLoaded",D),e.addEventListener("load",D))),L.promise(t)},d.ready.promise();var H=function(e,t,r,i,n,o,a){var s=0,l=e.length,c=null==r;if("object"===d.type(r))for(s in n=!0,r)H(e,t,s,r[s],!0,o,a);else if(void 0!==i&&(n=!0,d.isFunction(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,r){return c.call(d(e),r)})),t))for(;l>s;s++)t(e[s],r,a?i:i.call(e[s],s,t(e[s],r)));return n?e:c?t.call(e):l?t(e[0],r):o},z=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function I(){this.expando=d.expando+I.uid++}I.uid=1,I.prototype={register:function(e,t){var r=t||{};return e.nodeType?e[this.expando]=r:Object.defineProperty(e,this.expando,{value:r,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!z(e))return{};var t=e[this.expando];return t||(t={},z(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var i,n=this.cache(e);if("string"==typeof t)n[t]=r;else for(i in t)n[i]=t[i];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?void 0!==(i=this.get(e,t))?i:this.get(e,d.camelCase(t)):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,n,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{d.isArray(t)?i=t.concat(t.map(d.camelCase)):(n=d.camelCase(t),i=t in o?[t,n]:(i=n)in o?[i]:i.match(O)||[]),r=i.length;for(;r--;)delete o[i[r]]}(void 0===t||d.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!d.isEmptyObject(t)}};var k=new I,N=new I,U=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,B=/[A-Z]/g;function F(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(B,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(i))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:U.test(r)?d.parseJSON(r):r)}catch(e){}N.set(e,t,r)}else r=void 0;return r}d.extend({hasData:function(e){return N.hasData(e)||k.hasData(e)},data:function(e,t,r){return N.access(e,t,r)},removeData:function(e,t){N.remove(e,t)},_data:function(e,t,r){return k.access(e,t,r)},_removeData:function(e,t){k.remove(e,t)}}),d.fn.extend({data:function(e,t){var r,i,n,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(n=N.get(o),1===o.nodeType&&!k.get(o,"hasDataAttrs"))){for(r=a.length;r--;)a[r]&&0===(i=a[r].name).indexOf("data-")&&(i=d.camelCase(i.slice(5)),F(o,i,n[i]));k.set(o,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each(function(){N.set(this,e)}):H(this,function(t){var r,i;if(o&&void 0===t){if(void 0!==(r=N.get(o,e)||N.get(o,e.replace(B,"-$&").toLowerCase())))return r;if(i=d.camelCase(e),void 0!==(r=N.get(o,i)))return r;if(void 0!==(r=F(o,i,void 0)))return r}else i=d.camelCase(e),this.each(function(){var r=N.get(this,i);N.set(this,i,t),e.indexOf("-")>-1&&void 0!==r&&N.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){N.remove(this,e)})}}),d.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=k.get(e,t),r&&(!i||d.isArray(r)?i=k.access(e,t,d.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=d.queue(e,t),i=r.length,n=r.shift(),o=d._queueHooks(e,t);"inprogress"===n&&(n=r.shift(),i--),n&&("fx"===t&&r.unshift("inprogress"),delete o.stop,n.call(e,function(){d.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return k.get(e,r)||k.access(e,r,{empty:d.Callbacks("once memory").add(function(){k.remove(e,[t+"queue",r])})})}}),d.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?d.queue(this[0],e):void 0===t?this:this.each(function(){var r=d.queue(this,e,t);d._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&d.dequeue(this,e)})},dequeue:function(e){return this.each(function(){d.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,n=d.Deferred(),o=this,a=this.length,s=function(){--i||n.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(r=k.get(o[a],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(s));return s(),n.promise(t)}});var j=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,G=new RegExp("^(?:([+-])=|)("+j+")([a-z%]*)$","i"),W=["Top","Right","Bottom","Left"],V=function(e,t){return e=t||e,"none"===d.css(e,"display")||!d.contains(e.ownerDocument,e)};function q(e,t,r,i){var n,o=1,a=20,s=i?function(){return i.cur()}:function(){return d.css(e,t,"")},l=s(),c=r&&r[3]||(d.cssNumber[t]?"":"px"),u=(d.cssNumber[t]||"px"!==c&&+l)&&G.exec(d.css(e,t));if(u&&u[3]!==c){c=c||u[3],r=r||[],u=+l||1;do{u/=o=o||".5",d.style(e,t,u+c)}while(o!==(o=s()/l)&&1!==o&&--a)}return r&&(u=+u||+l||0,n=r[1]?u+(r[1]+1)*r[2]:+r[2],i&&(i.unit=c,i.start=u,i.end=n)),n}var X=/^(?:checkbox|radio)$/i,$=/<([\w:-]+)/,Y=/^$|\/(?:java|ecma)script/i,J={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Z(e,t){var r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&d.nodeName(e,t)?d.merge([e],r):r}function Q(e,t){for(var r=0,i=e.length;i>r;r++)k.set(e[r],"globalEval",!t||k.get(t[r],"globalEval"))}J.optgroup=J.option,J.tbody=J.tfoot=J.colgroup=J.caption=J.thead,J.th=J.td;var K=/<|&#?\w+;/;function ee(e,t,r,i,n){for(var o,a,s,l,c,u,h=t.createDocumentFragment(),p=[],f=0,m=e.length;m>f;f++)if((o=e[f])||0===o)if("object"===d.type(o))d.merge(p,o.nodeType?[o]:o);else if(K.test(o)){for(a=a||h.appendChild(t.createElement("div")),s=($.exec(o)||["",""])[1].toLowerCase(),l=J[s]||J._default,a.innerHTML=l[1]+d.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;d.merge(p,a.childNodes),(a=h.firstChild).textContent=""}else p.push(t.createTextNode(o));for(h.textContent="",f=0;o=p[f++];)if(i&&d.inArray(o,i)>-1)n&&n.push(o);else if(c=d.contains(o.ownerDocument,o),a=Z(h.appendChild(o),"script"),c&&Q(a),r)for(u=0;o=a[u++];)Y.test(o.type||"")&&r.push(o);return h}!function(){var e=i.createDocumentFragment().appendChild(i.createElement("div")),t=i.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var te=/^key/,re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ie=/^([^.]*)(?:\.(.+)|)/;function ne(){return!0}function oe(){return!1}function ae(){try{return i.activeElement}catch(e){}}function se(e,t,r,i,n,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof r&&(i=i||r,r=void 0),t)se(e,s,r,i,t[s],o);return e}if(null==i&&null==n?(n=r,i=r=void 0):null==n&&("string"==typeof r?(n=i,i=void 0):(n=i,i=r,r=void 0)),!1===n)n=oe;else if(!n)return this;return 1===o&&(a=n,(n=function(e){return d().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=d.guid++)),e.each(function(){d.event.add(this,t,n,i,r)})}d.event={global:{},add:function(e,t,r,i,n){var o,a,s,l,c,u,h,p,f,m,v,g=k.get(e);if(g)for(r.handler&&(r=(o=r).handler,n=o.selector),r.guid||(r.guid=d.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==d&&d.event.triggered!==t.type?d.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(O)||[""]).length;c--;)f=v=(s=ie.exec(t[c])||[])[1],m=(s[2]||"").split(".").sort(),f&&(h=d.event.special[f]||{},f=(n?h.delegateType:h.bindType)||f,h=d.event.special[f]||{},u=d.extend({type:f,origType:v,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&d.expr.match.needsContext.test(n),namespace:m.join(".")},o),(p=l[f])||((p=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,m,a)||e.addEventListener&&e.addEventListener(f,a)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=r.guid)),n?p.splice(p.delegateCount++,0,u):p.push(u),d.event.global[f]=!0)},remove:function(e,t,r,i,n){var o,a,s,l,c,u,h,p,f,m,v,g=k.hasData(e)&&k.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(O)||[""]).length;c--;)if(f=v=(s=ie.exec(t[c])||[])[1],m=(s[2]||"").split(".").sort(),f){for(h=d.event.special[f]||{},p=l[f=(i?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)u=p[o],!n&&v!==u.origType||r&&r.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(o,1),u.selector&&p.delegateCount--,h.remove&&h.remove.call(e,u));a&&!p.length&&(h.teardown&&!1!==h.teardown.call(e,m,g.handle)||d.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)d.event.remove(e,f+t[c],r,i,!0);d.isEmptyObject(l)&&k.remove(e,"handle events")}},dispatch:function(e){e=d.event.fix(e);var t,r,i,o,a,s=[],l=n.call(arguments),c=(k.get(this,"events")||{})[e.type]||[],u=d.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(s=d.event.handlers.call(this,e,c),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(a=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.rnamespace||e.rnamespace.test(a.namespace))&&(e.handleObj=a,e.data=a.data,void 0!==(i=((d.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,l))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,n,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],r=0;s>r;r++)void 0===i[n=(o=t[r]).selector+" "]&&(i[n]=o.needsContext?d(n,this).index(l)>-1:d.find(n,this,null,[l]).length),i[n]&&i.push(o);i.length&&a.push({elem:l,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,n,o,a=t.button;return null==e.pageX&&null!=t.clientX&&(n=(r=e.target.ownerDocument||i).documentElement,o=r.body,e.pageX=t.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[d.expando])return e;var t,r,n,o=e.type,a=e,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=re.test(o)?this.mouseHooks:te.test(o)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new d.Event(a),t=n.length;t--;)e[r=n[t]]=a[r];return e.target||(e.target=i),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ae()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ae()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&d.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return d.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},d.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},d.Event=function(e,t){return this instanceof d.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ne:oe):this.type=e,t&&d.extend(this,t),this.timeStamp=e&&e.timeStamp||d.now(),void(this[d.expando]=!0)):new d.Event(e,t)},d.Event.prototype={constructor:d.Event,isDefaultPrevented:oe,isPropagationStopped:oe,isImmediatePropagationStopped:oe,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ne,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ne,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ne,e&&e.stopImmediatePropagation(),this.stopPropagation()}},d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){d.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=e.relatedTarget,n=e.handleObj;return(!i||i!==this&&!d.contains(this,i))&&(e.type=n.origType,r=n.handler.apply(this,arguments),e.type=t),r}}}),d.fn.extend({on:function(e,t,r,i){return se(this,e,t,r,i)},one:function(e,t,r,i){return se(this,e,t,r,i,1)},off:function(e,t,r){var i,n;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,d(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return(!1===t||"function"==typeof t)&&(r=t,t=void 0),!1===r&&(r=oe),this.each(function(){d.event.remove(this,e,r,t)})}});var le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ce=/<script|<style|<link/i,ue=/checked\s*(?:[^=]|=\s*.checked.)/i,he=/^true\/(.*)/,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function de(e,t){return d.nodeName(e,"table")&&d.nodeName(11!==t.nodeType?t:t.firstChild,"tr")&&e.getElementsByTagName("tbody")[0]||e}function fe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function me(e){var t=he.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ve(e,t){var r,i,n,o,a,s,l,c;if(1===t.nodeType){if(k.hasData(e)&&(o=k.access(e),a=k.set(t,o),c=o.events))for(n in delete a.handle,a.events={},c)for(r=0,i=c[n].length;i>r;r++)d.event.add(t,n,c[n][r]);N.hasData(e)&&(s=N.access(e),l=d.extend({},s),N.set(t,l))}}function ge(e,t){var r=t.nodeName.toLowerCase();"input"===r&&X.test(e.type)?t.checked=e.checked:("input"===r||"textarea"===r)&&(t.defaultValue=e.defaultValue)}function ye(e,t,r,i){t=o.apply([],t);var n,a,s,l,c,u,p=0,f=e.length,m=f-1,v=t[0],g=d.isFunction(v);if(g||f>1&&"string"==typeof v&&!h.checkClone&&ue.test(v))return e.each(function(n){var o=e.eq(n);g&&(t[0]=v.call(this,n,o.html())),ye(o,t,r,i)});if(f&&(a=(n=ee(t,e[0].ownerDocument,!1,e,i)).firstChild,1===n.childNodes.length&&(n=a),a||i)){for(l=(s=d.map(Z(n,"script"),fe)).length;f>p;p++)c=n,p!==m&&(c=d.clone(c,!0,!0),l&&d.merge(s,Z(c,"script"))),r.call(e[p],c,p);if(l)for(u=s[s.length-1].ownerDocument,d.map(s,me),p=0;l>p;p++)c=s[p],Y.test(c.type||"")&&!k.access(c,"globalEval")&&d.contains(u,c)&&(c.src?d._evalUrl&&d._evalUrl(c.src):d.globalEval(c.textContent.replace(pe,"")))}return e}function xe(e,t,r){for(var i,n=t?d.filter(t,e):e,o=0;null!=(i=n[o]);o++)r||1!==i.nodeType||d.cleanData(Z(i)),i.parentNode&&(r&&d.contains(i.ownerDocument,i)&&Q(Z(i,"script")),i.parentNode.removeChild(i));return e}d.extend({htmlPrefilter:function(e){return e.replace(le,"<$1></$2>")},clone:function(e,t,r){var i,n,o,a,s=e.cloneNode(!0),l=d.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||d.isXMLDoc(e)))for(a=Z(s),i=0,n=(o=Z(e)).length;n>i;i++)ge(o[i],a[i]);if(t)if(r)for(o=o||Z(e),a=a||Z(s),i=0,n=o.length;n>i;i++)ve(o[i],a[i]);else ve(e,s);return(a=Z(s,"script")).length>0&&Q(a,!l&&Z(e,"script")),s},cleanData:function(e){for(var t,r,i,n=d.event.special,o=0;void 0!==(r=e[o]);o++)if(z(r)){if(t=r[k.expando]){if(t.events)for(i in t.events)n[i]?d.event.remove(r,i):d.removeEvent(r,i,t.handle);r[k.expando]=void 0}r[N.expando]&&(r[N.expando]=void 0)}}}),d.fn.extend({domManip:ye,detach:function(e){return xe(this,e,!0)},remove:function(e){return xe(this,e)},text:function(e){return H(this,function(e){return void 0===e?d.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return ye(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||de(this,e).appendChild(e)})},prepend:function(){return ye(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=de(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return ye(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return ye(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(d.cleanData(Z(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return d.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ce.test(e)&&!J[($.exec(e)||["",""])[1].toLowerCase()]){e=d.htmlPrefilter(e);try{for(;i>r;r++)1===(t=this[r]||{}).nodeType&&(d.cleanData(Z(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return ye(this,arguments,function(t){var r=this.parentNode;d.inArray(this,e)<0&&(d.cleanData(Z(this)),r&&r.replaceChild(t,this))},e)}}),d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){d.fn[e]=function(e){for(var r,i=[],n=d(e),o=n.length-1,s=0;o>=s;s++)r=s===o?this:this.clone(!0),d(n[s])[t](r),a.apply(i,r.get());return this.pushStack(i)}});var _e,we={HTML:"block",BODY:"block"};function be(e,t){var r=d(t.createElement(e)).appendTo(t.body),i=d.css(r[0],"display");return r.detach(),i}function Me(e){var t=i,r=we[e];return r||("none"!==(r=be(e,t))&&r||((t=(_e=(_e||d("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),r=be(e,t),_e.detach()),we[e]=r),r}var Te=/^margin/,Ee=new RegExp("^("+j+")(?!px)[a-z%]+$","i"),Se=function(t){var r=t.ownerDocument.defaultView;return r.opener||(r=e),r.getComputedStyle(t)},Re=function(e,t,r,i){var n,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in n=r.apply(e,i||[]),t)e.style[o]=a[o];return n},Pe=i.documentElement;function Ae(e,t,r){var i,n,o,a,s=e.style;return(r=r||Se(e))&&(""!==(a=r.getPropertyValue(t)||r[t])||d.contains(e.ownerDocument,e)||(a=d.style(e,t)),!h.pixelMarginRight()&&Ee.test(a)&&Te.test(t)&&(i=s.width,n=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=r.width,s.width=i,s.minWidth=n,s.maxWidth=o)),void 0!==a?a+"":a}function Ce(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){var t,r,n,o,a=i.createElement("div"),s=i.createElement("div");if(s.style){function l(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Pe.appendChild(a);var i=e.getComputedStyle(s);t="1%"!==i.top,o="2px"===i.marginLeft,r="4px"===i.width,s.style.marginRight="50%",n="4px"===i.marginRight,Pe.removeChild(a)}s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),d.extend(h,{pixelPosition:function(){return l(),t},boxSizingReliable:function(){return null==r&&l(),r},pixelMarginRight:function(){return null==r&&l(),n},reliableMarginLeft:function(){return null==r&&l(),o},reliableMarginRight:function(){var t,r=s.appendChild(i.createElement("div"));return r.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",s.style.width="1px",Pe.appendChild(a),t=!parseFloat(e.getComputedStyle(r).marginRight),Pe.removeChild(a),s.removeChild(r),t}})}}();var Le=/^(none|table(?!-c[ea]).+)/,Oe={position:"absolute",visibility:"hidden",display:"block"},De={letterSpacing:"0",fontWeight:"400"},He=["Webkit","O","Moz","ms"],ze=i.createElement("div").style;function Ie(e){if(e in ze)return e;for(var t=e[0].toUpperCase()+e.slice(1),r=He.length;r--;)if((e=He[r]+t)in ze)return e}function ke(e,t,r){var i=G.exec(t);return i?Math.max(0,i[2]-(r||0))+(i[3]||"px"):t}function Ne(e,t,r,i,n){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===r&&(a+=d.css(e,r+W[o],!0,n)),i?("content"===r&&(a-=d.css(e,"padding"+W[o],!0,n)),"margin"!==r&&(a-=d.css(e,"border"+W[o]+"Width",!0,n))):(a+=d.css(e,"padding"+W[o],!0,n),"padding"!==r&&(a+=d.css(e,"border"+W[o]+"Width",!0,n)));return a}function Ue(t,r,n){var o=!0,a="width"===r?t.offsetWidth:t.offsetHeight,s=Se(t),l="border-box"===d.css(t,"boxSizing",!1,s);if(i.msFullscreenElement&&e.top!==e&&t.getClientRects().length&&(a=Math.round(100*t.getBoundingClientRect()[r])),0>=a||null==a){if((0>(a=Ae(t,r,s))||null==a)&&(a=t.style[r]),Ee.test(a))return a;o=l&&(h.boxSizingReliable()||a===t.style[r]),a=parseFloat(a)||0}return a+Ne(t,r,n||(l?"border":"content"),o,s)+"px"}function Be(e,t){for(var r,i,n,o=[],a=0,s=e.length;s>a;a++)(i=e[a]).style&&(o[a]=k.get(i,"olddisplay"),r=i.style.display,t?(o[a]||"none"!==r||(i.style.display=""),""===i.style.display&&V(i)&&(o[a]=k.access(i,"olddisplay",Me(i.nodeName)))):(n=V(i),"none"===r&&n||k.set(i,"olddisplay",n?r:d.css(i,"display"))));for(a=0;s>a;a++)(i=e[a]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function Fe(e,t,r,i,n){return new Fe.prototype.init(e,t,r,i,n)}d.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Ae(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,a,s=d.camelCase(t),l=e.style;return t=d.cssProps[s]||(d.cssProps[s]=Ie(s)||s),a=d.cssHooks[t]||d.cssHooks[s],void 0===r?a&&"get"in a&&void 0!==(n=a.get(e,!1,i))?n:l[t]:("string"==(o=typeof r)&&(n=G.exec(r))&&n[1]&&(r=q(e,t,n),o="number"),void(null!=r&&r==r&&("number"===o&&(r+=n&&n[3]||(d.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==r||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(r=a.set(e,r,i))||(l[t]=r))))}},css:function(e,t,r,i){var n,o,a,s=d.camelCase(t);return t=d.cssProps[s]||(d.cssProps[s]=Ie(s)||s),(a=d.cssHooks[t]||d.cssHooks[s])&&"get"in a&&(n=a.get(e,!0,r)),void 0===n&&(n=Ae(e,t,i)),"normal"===n&&t in De&&(n=De[t]),""===r||r?(o=parseFloat(n),!0===r||isFinite(o)?o||0:n):n}}),d.each(["height","width"],function(e,t){d.cssHooks[t]={get:function(e,r,i){return r?Le.test(d.css(e,"display"))&&0===e.offsetWidth?Re(e,Oe,function(){return Ue(e,t,i)}):Ue(e,t,i):void 0},set:function(e,r,i){var n,o=i&&Se(e),a=i&&Ne(e,t,i,"border-box"===d.css(e,"boxSizing",!1,o),o);return a&&(n=G.exec(r))&&"px"!==(n[3]||"px")&&(e.style[t]=r,r=d.css(e,t)),ke(0,r,a)}}}),d.cssHooks.marginLeft=Ce(h.reliableMarginLeft,function(e,t){return t?(parseFloat(Ae(e,"marginLeft"))||e.getBoundingClientRect().left-Re(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),d.cssHooks.marginRight=Ce(h.reliableMarginRight,function(e,t){return t?Re(e,{display:"inline-block"},Ae,[e,"marginRight"]):void 0}),d.each({margin:"",padding:"",border:"Width"},function(e,t){d.cssHooks[e+t]={expand:function(r){for(var i=0,n={},o="string"==typeof r?r.split(" "):[r];4>i;i++)n[e+W[i]+t]=o[i]||o[i-2]||o[0];return n}},Te.test(e)||(d.cssHooks[e+t].set=ke)}),d.fn.extend({css:function(e,t){return H(this,function(e,t,r){var i,n,o={},a=0;if(d.isArray(t)){for(i=Se(e),n=t.length;n>a;a++)o[t[a]]=d.css(e,t[a],!1,i);return o}return void 0!==r?d.style(e,t,r):d.css(e,t)},e,t,arguments.length>1)},show:function(){return Be(this,!0)},hide:function(){return Be(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){V(this)?d(this).show():d(this).hide()})}}),d.Tween=Fe,Fe.prototype={constructor:Fe,init:function(e,t,r,i,n,o){this.elem=e,this.prop=r,this.easing=n||d.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(d.cssNumber[r]?"":"px")},cur:function(){var e=Fe.propHooks[this.prop];return e&&e.get?e.get(this):Fe.propHooks._default.get(this)},run:function(e){var t,r=Fe.propHooks[this.prop];return this.options.duration?this.pos=t=d.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Fe.propHooks._default.set(this),this}},Fe.prototype.init.prototype=Fe.prototype,Fe.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=d.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){d.fx.step[e.prop]?d.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[d.cssProps[e.prop]]&&!d.cssHooks[e.prop]?e.elem[e.prop]=e.now:d.style(e.elem,e.prop,e.now+e.unit)}}},Fe.propHooks.scrollTop=Fe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},d.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},d.fx=Fe.prototype.init,d.fx.step={};var je,Ge,We=/^(?:toggle|show|hide)$/,Ve=/queueHooks$/;function qe(){return e.setTimeout(function(){je=void 0}),je=d.now()}function Xe(e,t){var r,i=0,n={height:e};for(t=t?1:0;4>i;i+=2-t)n["margin"+(r=W[i])]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function $e(e,t,r){for(var i,n=(Ye.tweeners[t]||[]).concat(Ye.tweeners["*"]),o=0,a=n.length;a>o;o++)if(i=n[o].call(r,t,e))return i}function Ye(e,t,r){var i,n,o=0,a=Ye.prefilters.length,s=d.Deferred().always(function(){delete l.elem}),l=function(){if(n)return!1;for(var t=je||qe(),r=Math.max(0,c.startTime+c.duration-t),i=1-(r/c.duration||0),o=0,a=c.tweens.length;a>o;o++)c.tweens[o].run(i);return s.notifyWith(e,[c,i,r]),1>i&&a?r:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:d.extend({},t),opts:d.extend(!0,{specialEasing:{},easing:d.easing._default},r),originalProperties:t,originalOptions:r,startTime:je||qe(),duration:r.duration,tweens:[],createTween:function(t,r){var i=d.Tween(e,c.opts,t,r,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var r=0,i=t?c.tweens.length:0;if(n)return this;for(n=!0;i>r;r++)c.tweens[r].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var r,i,n,o,a;for(r in e)if(n=t[i=d.camelCase(r)],o=e[r],d.isArray(o)&&(n=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),(a=d.cssHooks[i])&&"expand"in a)for(r in o=a.expand(o),delete e[i],o)r in e||(e[r]=o[r],t[r]=n);else t[i]=n}(u,c.opts.specialEasing);a>o;o++)if(i=Ye.prefilters[o].call(c,e,u,c.opts))return d.isFunction(i.stop)&&(d._queueHooks(c.elem,c.opts.queue).stop=d.proxy(i.stop,i)),i;return d.map(u,$e,c),d.isFunction(c.opts.start)&&c.opts.start.call(e,c),d.fx.timer(d.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}d.Animation=d.extend(Ye,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return q(r.elem,e,G.exec(t),r),r}]},tweener:function(e,t){d.isFunction(e)?(t=e,e=["*"]):e=e.match(O);for(var r,i=0,n=e.length;n>i;i++)r=e[i],Ye.tweeners[r]=Ye.tweeners[r]||[],Ye.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var i,n,o,a,s,l,c,u=this,h={},p=e.style,f=e.nodeType&&V(e),m=k.get(e,"fxshow");for(i in r.queue||(null==(s=d._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,d.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===("none"===(c=d.css(e,"display"))?k.get(e,"olddisplay")||Me(e.nodeName):c)&&"none"===d.css(e,"float")&&(p.display="inline-block")),r.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=r.overflow[0],p.overflowX=r.overflow[1],p.overflowY=r.overflow[2]})),t)if(n=t[i],We.exec(n)){if(delete t[i],o=o||"toggle"===n,n===(f?"hide":"show")){if("show"!==n||!m||void 0===m[i])continue;f=!0}h[i]=m&&m[i]||d.style(e,i)}else c=void 0;if(d.isEmptyObject(h))"inline"===("none"===c?Me(e.nodeName):c)&&(p.display=c);else for(i in m?"hidden"in m&&(f=m.hidden):m=k.access(e,"fxshow",{}),o&&(m.hidden=!f),f?d(e).show():u.done(function(){d(e).hide()}),u.done(function(){var t;for(t in k.remove(e,"fxshow"),h)d.style(e,t,h[t])}),h)a=$e(f?m[i]:0,i,u),i in m||(m[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}],prefilter:function(e,t){t?Ye.prefilters.unshift(e):Ye.prefilters.push(e)}}),d.speed=function(e,t,r){var i=e&&"object"==typeof e?d.extend({},e):{complete:r||!r&&t||d.isFunction(e)&&e,duration:e,easing:r&&t||t&&!d.isFunction(t)&&t};return i.duration=d.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in d.fx.speeds?d.fx.speeds[i.duration]:d.fx.speeds._default,(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){d.isFunction(i.old)&&i.old.call(this),i.queue&&d.dequeue(this,i.queue)},i},d.fn.extend({fadeTo:function(e,t,r,i){return this.filter(V).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var n=d.isEmptyObject(e),o=d.speed(t,r,i),a=function(){var t=Ye(this,d.extend({},e),o);(n||k.get(this,"finish"))&&t.stop(!0)};return a.finish=a,n||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=d.timers,a=k.get(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Ve.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&d.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,r=k.get(this),i=r[e+"queue"],n=r[e+"queueHooks"],o=d.timers,a=i?i.length:0;for(r.finish=!0,d.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),d.each(["toggle","show","hide"],function(e,t){var r=d.fn[t];d.fn[t]=function(e,i,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Xe(t,!0),e,i,n)}}),d.each({slideDown:Xe("show"),slideUp:Xe("hide"),slideToggle:Xe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){d.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}}),d.timers=[],d.fx.tick=function(){var e,t=0,r=d.timers;for(je=d.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||d.fx.stop(),je=void 0},d.fx.timer=function(e){d.timers.push(e),e()?d.fx.start():d.timers.pop()},d.fx.interval=13,d.fx.start=function(){Ge||(Ge=e.setInterval(d.fx.tick,d.fx.interval))},d.fx.stop=function(){e.clearInterval(Ge),Ge=null},d.fx.speeds={slow:600,fast:200,_default:400},d.fn.delay=function(t,r){return t=d.fx&&d.fx.speeds[t]||t,r=r||"fx",this.queue(r,function(r,i){var n=e.setTimeout(r,t);i.stop=function(){e.clearTimeout(n)}})},function(){var e=i.createElement("input"),t=i.createElement("select"),r=t.appendChild(i.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=r.selected,t.disabled=!0,h.optDisabled=!r.disabled,(e=i.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var Je,Ze=d.expr.attrHandle;d.fn.extend({attr:function(e,t){return H(this,d.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){d.removeAttr(this,e)})}}),d.extend({attr:function(e,t,r){var i,n,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?d.prop(e,t,r):(1===o&&d.isXMLDoc(e)||(t=t.toLowerCase(),n=d.attrHooks[t]||(d.expr.match.bool.test(t)?Je:void 0)),void 0!==r?null===r?void d.removeAttr(e,t):n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:(e.setAttribute(t,r+""),r):n&&"get"in n&&null!==(i=n.get(e,t))?i:null==(i=d.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&d.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,i,n=0,o=t&&t.match(O);if(o&&1===e.nodeType)for(;r=o[n++];)i=d.propFix[r]||r,d.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)}}),Je={set:function(e,t,r){return!1===t?d.removeAttr(e,r):e.setAttribute(r,r),r}},d.each(d.expr.match.bool.source.match(/\w+/g),function(e,t){var r=Ze[t]||d.find.attr;Ze[t]=function(e,t,i){var n,o;return i||(o=Ze[t],Ze[t]=n,n=null!=r(e,t,i)?t.toLowerCase():null,Ze[t]=o),n}});var Qe=/^(?:input|select|textarea|button)$/i,Ke=/^(?:a|area)$/i;d.fn.extend({prop:function(e,t){return H(this,d.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[d.propFix[e]||e]})}}),d.extend({prop:function(e,t,r){var i,n,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&d.isXMLDoc(e)||(t=d.propFix[t]||t,n=d.propHooks[t]),void 0!==r?n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:e[t]=r:n&&"get"in n&&null!==(i=n.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=d.find.attr(e,"tabindex");return t?parseInt(t,10):Qe.test(e.nodeName)||Ke.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(d.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){d.propFix[this.toLowerCase()]=this});var et=/[\t\r\n\f]/g;function tt(e){return e.getAttribute&&e.getAttribute("class")||""}d.fn.extend({addClass:function(e){var t,r,i,n,o,a,s,l=0;if(d.isFunction(e))return this.each(function(t){d(this).addClass(e.call(this,t,tt(this)))});if("string"==typeof e&&e)for(t=e.match(O)||[];r=this[l++];)if(n=tt(r),i=1===r.nodeType&&(" "+n+" ").replace(et," ")){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");n!==(s=d.trim(i))&&r.setAttribute("class",s)}return this},removeClass:function(e){var t,r,i,n,o,a,s,l=0;if(d.isFunction(e))return this.each(function(t){d(this).removeClass(e.call(this,t,tt(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(O)||[];r=this[l++];)if(n=tt(r),i=1===r.nodeType&&(" "+n+" ").replace(et," ")){for(a=0;o=t[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");n!==(s=d.trim(i))&&r.setAttribute("class",s)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):d.isFunction(e)?this.each(function(r){d(this).toggleClass(e.call(this,r,tt(this),t),t)}):this.each(function(){var t,i,n,o;if("string"===r)for(i=0,n=d(this),o=e.match(O)||[];t=o[i++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else(void 0===e||"boolean"===r)&&((t=tt(this))&&k.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":k.get(this,"__className__")||""))})},hasClass:function(e){var t,r,i=0;for(t=" "+e+" ";r=this[i++];)if(1===r.nodeType&&(" "+tt(r)+" ").replace(et," ").indexOf(t)>-1)return!0;return!1}});var rt=/\r/g;d.fn.extend({val:function(e){var t,r,i,n=this[0];return arguments.length?(i=d.isFunction(e),this.each(function(r){var n;1===this.nodeType&&(null==(n=i?e.call(this,r,d(this).val()):e)?n="":"number"==typeof n?n+="":d.isArray(n)&&(n=d.map(n,function(e){return null==e?"":e+""})),(t=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))})):n?(t=d.valHooks[n.type]||d.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(n,"value"))?r:"string"==typeof(r=n.value)?r.replace(rt,""):null==r?"":r:void 0}}),d.extend({valHooks:{option:{get:function(e){return d.trim(e.value)}},select:{get:function(e){for(var t,r,i=e.options,n=e.selectedIndex,o="select-one"===e.type||0>n,a=o?null:[],s=o?n+1:i.length,l=0>n?s:o?n:0;s>l;l++)if(((r=i[l]).selected||l===n)&&(h.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!d.nodeName(r.parentNode,"optgroup"))){if(t=d(r).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var r,i,n=e.options,o=d.makeArray(t),a=n.length;a--;)((i=n[a]).selected=d.inArray(d.valHooks.option.get(i),o)>-1)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(e,t){return d.isArray(t)?e.checked=d.inArray(d(e).val(),t)>-1:void 0}},h.checkOn||(d.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var it=/^(?:focusinfocus|focusoutblur)$/;d.extend(d.event,{trigger:function(t,r,n,o){var a,s,l,c,h,p,f,m=[n||i],v=u.call(t,"type")?t.type:t,g=u.call(t,"namespace")?t.namespace.split("."):[];if(s=l=n=n||i,3!==n.nodeType&&8!==n.nodeType&&!it.test(v+d.event.triggered)&&(v.indexOf(".")>-1&&(v=(g=v.split(".")).shift(),g.sort()),h=v.indexOf(":")<0&&"on"+v,(t=t[d.expando]?t:new d.Event(v,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),r=null==r?[t]:d.makeArray(r,[t]),f=d.event.special[v]||{},o||!f.trigger||!1!==f.trigger.apply(n,r))){if(!o&&!f.noBubble&&!d.isWindow(n)){for(c=f.delegateType||v,it.test(c+v)||(s=s.parentNode);s;s=s.parentNode)m.push(s),l=s;l===(n.ownerDocument||i)&&m.push(l.defaultView||l.parentWindow||e)}for(a=0;(s=m[a++])&&!t.isPropagationStopped();)t.type=a>1?c:f.bindType||v,(p=(k.get(s,"events")||{})[t.type]&&k.get(s,"handle"))&&p.apply(s,r),(p=h&&s[h])&&p.apply&&z(s)&&(t.result=p.apply(s,r),!1===t.result&&t.preventDefault());return t.type=v,o||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(m.pop(),r)||!z(n)||h&&d.isFunction(n[v])&&!d.isWindow(n)&&((l=n[h])&&(n[h]=null),d.event.triggered=v,n[v](),d.event.triggered=void 0,l&&(n[h]=l)),t.result}},simulate:function(e,t,r){var i=d.extend(new d.Event,r,{type:e,isSimulated:!0});d.event.trigger(i,null,t),i.isDefaultPrevented()&&r.preventDefault()}}),d.fn.extend({trigger:function(e,t){return this.each(function(){d.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?d.event.trigger(e,t,r,!0):void 0}}),d.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){d.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),d.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),h.focusin="onfocusin"in e,h.focusin||d.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){d.event.simulate(t,e.target,d.event.fix(e))};d.event.special[t]={setup:function(){var i=this.ownerDocument||this,n=k.access(i,t);n||i.addEventListener(e,r,!0),k.access(i,t,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this,n=k.access(i,t)-1;n?k.access(i,t,n):(i.removeEventListener(e,r,!0),k.remove(i,t))}}});var nt=e.location,ot=d.now(),at=/\?/;d.parseJSON=function(e){return JSON.parse(e+"")},d.parseXML=function(t){var r;if(!t||"string"!=typeof t)return null;try{r=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){r=void 0}return(!r||r.getElementsByTagName("parsererror").length)&&d.error("Invalid XML: "+t),r};var st=/#.*$/,lt=/([?&])_=[^&]*/,ct=/^(.*?):[ \t]*([^\r\n]*)$/gm,ut=/^(?:GET|HEAD)$/,ht=/^\/\//,pt={},dt={},ft="*/".concat("*"),mt=i.createElement("a");function vt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,n=0,o=t.toLowerCase().match(O)||[];if(d.isFunction(r))for(;i=o[n++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function gt(e,t,r,i){var n={},o=e===dt;function a(s){var l;return n[s]=!0,d.each(e[s]||[],function(e,s){var c=s(t,r,i);return"string"!=typeof c||o||n[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),l}return a(t.dataTypes[0])||!n["*"]&&a("*")}function yt(e,t){var r,i,n=d.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:i||(i={}))[r]=t[r]);return i&&d.extend(!0,e,i),e}mt.href=nt.href,d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:nt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(nt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":d.parseJSON,"text xml":d.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?yt(yt(e,d.ajaxSettings),t):yt(d.ajaxSettings,e)},ajaxPrefilter:vt(pt),ajaxTransport:vt(dt),ajax:function(t,r){"object"==typeof t&&(r=t,t=void 0),r=r||{};var n,o,a,s,l,c,u,h,p=d.ajaxSetup({},r),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?d(f):d.event,v=d.Deferred(),g=d.Callbacks("once memory"),y=p.statusCode||{},x={},_={},w=0,b="canceled",M={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!s)for(s={};t=ct.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?a:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return w||(e=_[r]=_[r]||e,x[e]=t),this},overrideMimeType:function(e){return w||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)y[t]=[y[t],e[t]];else M.always(e[M.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),T(0,t),this}};if(v.promise(M).complete=g.add,M.success=M.done,M.error=M.fail,p.url=((t||p.url||nt.href)+"").replace(st,"").replace(ht,nt.protocol+"//"),p.type=r.method||r.type||p.method||p.type,p.dataTypes=d.trim(p.dataType||"*").toLowerCase().match(O)||[""],null==p.crossDomain){c=i.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=mt.protocol+"//"+mt.host!=c.protocol+"//"+c.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=d.param(p.data,p.traditional)),gt(pt,p,r,M),2===w)return M;for(h in(u=d.event&&p.global)&&0==d.active++&&d.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!ut.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(at.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=lt.test(o)?o.replace(lt,"$1_="+ot++):o+(at.test(o)?"&":"?")+"_="+ot++)),p.ifModified&&(d.lastModified[o]&&M.setRequestHeader("If-Modified-Since",d.lastModified[o]),d.etag[o]&&M.setRequestHeader("If-None-Match",d.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||r.contentType)&&M.setRequestHeader("Content-Type",p.contentType),M.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+ft+"; q=0.01":""):p.accepts["*"]),p.headers)M.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(f,M,p)||2===w))return M.abort();for(h in b="abort",{success:1,error:1,complete:1})M[h](p[h]);if(n=gt(dt,p,r,M)){if(M.readyState=1,u&&m.trigger("ajaxSend",[M,p]),2===w)return M;p.async&&p.timeout>0&&(l=e.setTimeout(function(){M.abort("timeout")},p.timeout));try{w=1,n.send(x,T)}catch(e){if(!(2>w))throw e;T(-1,e)}}else T(-1,"No Transport");function T(t,r,i,s){var c,h,x,_,b,T=r;2!==w&&(w=2,l&&e.clearTimeout(l),n=void 0,a=s||"",M.readyState=t>0?4:0,c=t>=200&&300>t||304===t,i&&(_=function(e,t,r){for(var i,n,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(n in s)if(s[n]&&s[n].test(i)){l.unshift(n);break}if(l[0]in r)o=l[0];else{for(n in r){if(!l[0]||e.converters[n+" "+l[0]]){o=n;break}a||(a=n)}o=o||a}return o?(o!==l[0]&&l.unshift(o),r[o]):void 0}(p,M,i)),_=function(e,t,r,i){var n,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(n in c)if((s=n.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[n]:!0!==c[n]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(p,_,M,c),c?(p.ifModified&&((b=M.getResponseHeader("Last-Modified"))&&(d.lastModified[o]=b),(b=M.getResponseHeader("etag"))&&(d.etag[o]=b)),204===t||"HEAD"===p.type?T="nocontent":304===t?T="notmodified":(T=_.state,h=_.data,c=!(x=_.error))):(x=T,(t||!T)&&(T="error",0>t&&(t=0))),M.status=t,M.statusText=(r||T)+"",c?v.resolveWith(f,[h,T,M]):v.rejectWith(f,[M,T,x]),M.statusCode(y),y=void 0,u&&m.trigger(c?"ajaxSuccess":"ajaxError",[M,p,c?h:x]),g.fireWith(f,[M,T]),u&&(m.trigger("ajaxComplete",[M,p]),--d.active||d.event.trigger("ajaxStop")))}return M},getJSON:function(e,t,r){return d.get(e,t,r,"json")},getScript:function(e,t){return d.get(e,void 0,t,"script")}}),d.each(["get","post"],function(e,t){d[t]=function(e,r,i,n){return d.isFunction(r)&&(n=n||i,i=r,r=void 0),d.ajax(d.extend({url:e,type:t,dataType:n,data:r,success:i},d.isPlainObject(e)&&e))}}),d._evalUrl=function(e){return d.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},d.fn.extend({wrapAll:function(e){var t;return d.isFunction(e)?this.each(function(t){d(this).wrapAll(e.call(this,t))}):(this[0]&&(t=d(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return d.isFunction(e)?this.each(function(t){d(this).wrapInner(e.call(this,t))}):this.each(function(){var t=d(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=d.isFunction(e);return this.each(function(r){d(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){d.nodeName(this,"body")||d(this).replaceWith(this.childNodes)}).end()}}),d.expr.filters.hidden=function(e){return!d.expr.filters.visible(e)},d.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var xt=/%20/g,_t=/\[\]$/,wt=/\r?\n/g,bt=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;function Tt(e,t,r,i){var n;if(d.isArray(t))d.each(t,function(t,n){r||_t.test(e)?i(e,n):Tt(e+"["+("object"==typeof n&&null!=n?t:"")+"]",n,r,i)});else if(r||"object"!==d.type(t))i(e,t);else for(n in t)Tt(e+"["+n+"]",t[n],r,i)}d.param=function(e,t){var r,i=[],n=function(e,t){t=d.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=d.ajaxSettings&&d.ajaxSettings.traditional),d.isArray(e)||e.jquery&&!d.isPlainObject(e))d.each(e,function(){n(this.name,this.value)});else for(r in e)Tt(r,e[r],t,n);return i.join("&").replace(xt,"+")},d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=d.prop(this,"elements");return e?d.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!d(this).is(":disabled")&&Mt.test(this.nodeName)&&!bt.test(e)&&(this.checked||!X.test(e))}).map(function(e,t){var r=d(this).val();return null==r?null:d.isArray(r)?d.map(r,function(e){return{name:t.name,value:e.replace(wt,"\r\n")}}):{name:t.name,value:r.replace(wt,"\r\n")}}).get()}}),d.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Et={0:200,1223:204},St=d.ajaxSettings.xhr();h.cors=!!St&&"withCredentials"in St,h.ajax=St=!!St,d.ajaxTransport(function(t){var r,i;return h.cors||St&&!t.crossDomain?{send:function(n,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)s.setRequestHeader(a,n[a]);r=function(e){return function(){r&&(r=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Et[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=r(),i=s.onerror=r("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){r&&i()})},r=r("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}:void 0}),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return d.globalEval(e),e}}}),d.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),d.ajaxTransport("script",function(e){var t,r;if(e.crossDomain)return{send:function(n,o){t=d("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&o("error"===e.type?404:200,e.type)}),i.head.appendChild(t[0])},abort:function(){r&&r()}}});var Rt=[],Pt=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rt.pop()||d.expando+"_"+ot++;return this[e]=!0,e}}),d.ajaxPrefilter("json jsonp",function(t,r,i){var n,o,a,s=!1!==t.jsonp&&(Pt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Pt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(n=t.jsonpCallback=d.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Pt,"$1"+n):!1!==t.jsonp&&(t.url+=(at.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return a||d.error(n+" was not called"),a[0]},t.dataTypes[0]="json",o=e[n],e[n]=function(){a=arguments},i.always(function(){void 0===o?d(e).removeProp(n):e[n]=o,t[n]&&(t.jsonpCallback=r.jsonpCallback,Rt.push(n)),a&&d.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),h.createHTMLDocument=function(){var e=i.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),d.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||(h.createHTMLDocument?i.implementation.createHTMLDocument(""):i);var n=M.exec(e),o=!r&&[];return n?[t.createElement(n[1])]:(n=ee([e],t,o),o&&o.length&&d(o).remove(),d.merge([],n.childNodes))};var At=d.fn.load;function Ct(e){return d.isWindow(e)?e:9===e.nodeType&&e.defaultView}d.fn.load=function(e,t,r){if("string"!=typeof e&&At)return At.apply(this,arguments);var i,n,o,a=this,s=e.indexOf(" ");return s>-1&&(i=d.trim(e.slice(s)),e=e.slice(0,s)),d.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(n="POST"),a.length>0&&d.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?d("<div>").append(d.parseHTML(e)).find(i):e)}).always(r&&function(e,t){a.each(function(){r.apply(a,o||[e.responseText,t,e])})}),this},d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){d.fn[t]=function(e){return this.on(t,e)}}),d.expr.filters.animated=function(e){return d.grep(d.timers,function(t){return e===t.elem}).length},d.offset={setOffset:function(e,t,r){var i,n,o,a,s,l,c=d.css(e,"position"),u=d(e),h={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=d.css(e,"top"),l=d.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(i=u.position()).top,n=i.left):(a=parseFloat(o)||0,n=parseFloat(l)||0),d.isFunction(t)&&(t=t.call(e,r,d.extend({},s))),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+n),"using"in t?t.using.call(e,h):u.css(h)}},d.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){d.offset.setOffset(this,e,t)});var t,r,i=this[0],n={top:0,left:0},o=i&&i.ownerDocument;return o?(t=o.documentElement,d.contains(t,i)?(n=i.getBoundingClientRect(),r=Ct(o),{top:n.top+r.pageYOffset-t.clientTop,left:n.left+r.pageXOffset-t.clientLeft}):n):void 0},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===d.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),d.nodeName(e[0],"html")||(i=e.offset()),i.top+=d.css(e[0],"borderTopWidth",!0)-e.scrollTop(),i.left+=d.css(e[0],"borderLeftWidth",!0)-e.scrollLeft()),{top:t.top-i.top-d.css(r,"marginTop",!0),left:t.left-i.left-d.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===d.css(e,"position");)e=e.offsetParent;return e||Pe})}}),d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;d.fn[e]=function(i){return H(this,function(e,i,n){var o=Ct(e);return void 0===n?o?o[t]:e[i]:void(o?o.scrollTo(r?o.pageXOffset:n,r?n:o.pageYOffset):e[i]=n)},e,i,arguments.length)}}),d.each(["top","left"],function(e,t){d.cssHooks[t]=Ce(h.pixelPosition,function(e,r){return r?(r=Ae(e,t),Ee.test(r)?d(e).position()[t]+"px":r):void 0})}),d.each({Height:"height",Width:"width"},function(e,t){d.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){d.fn[i]=function(i,n){var o=arguments.length&&(r||"boolean"!=typeof i),a=r||(!0===i||!0===n?"margin":"border");return H(this,function(t,r,i){var n;return d.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+e],n["scroll"+e],t.body["offset"+e],n["offset"+e],n["client"+e])):void 0===i?d.css(t,r,a):d.style(t,r,i,a)},t,o?i:void 0,o,null)}})}),d.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},size:function(){return this.length}}),d.fn.andSelf=d.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return d});var Lt=e.jQuery,Ot=e.$;return d.noConflict=function(t){return e.$===d&&(e.$=Ot),t&&e.jQuery===d&&(e.jQuery=Lt),d},t||(e.jQuery=e.$=d),d}),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Marquee3k=t()}(this,function(){"use strict";class e{constructor(e,t){this.element=e,this.selector=t.selector,this.speed=e.dataset.speed||.25,this.pausable=e.dataset.pausable,this.reverse=e.dataset.reverse,this.paused=!1,this.parent=e.parentElement,this.parentProps=this.parent.getBoundingClientRect(),this.content=e.children[0],this.innerContent=this.content.innerHTML,this.wrapStyles="",this.offset=0,this._setupWrapper(),this._setupContent(),this._setupEvents(),this.wrapper.appendChild(this.content),this.element.appendChild(this.wrapper)}_setupWrapper(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("marquee3k__wrapper"),this.wrapper.style.whiteSpace="nowrap"}_setupContent(){this.content.classList.add(`${this.selector}__copy`),this.content.style.display="inline-block",this.contentWidth=this.content.offsetWidth,this.requiredReps=this.contentWidth>this.parentProps.width?2:Math.ceil((this.parentProps.width-this.contentWidth)/this.contentWidth)+1;for(let e=0;e<this.requiredReps;e++)this._createClone();this.reverse&&(this.offset=-1*this.contentWidth),this.element.classList.add("is-init")}_setupEvents(){this.element.addEventListener("mouseenter",()=>{this.pausable&&(this.paused=!0)}),this.element.addEventListener("mouseleave",()=>{this.pausable&&(this.paused=!1)})}_createClone(){const e=this.content.cloneNode(!0);e.style.display="inline-block",e.classList.add(`${this.selector}__copy`),this.wrapper.appendChild(e)}animate(){if(!this.paused){const e=this.reverse?this.offset<0:this.offset>-1*this.contentWidth,t=this.reverse?-1:1,r=this.reverse?-1*this.contentWidth:0;e?this.offset-=this.speed*t:this.offset=r,this.wrapper.style.whiteSpace="nowrap",this.wrapper.style.transform=`translate(${this.offset}px, 0) translateZ(0)`}}_refresh(){this.contentWidth=this.content.offsetWidth}repopulate(e,t){if(this.contentWidth=this.content.offsetWidth,t){const t=Math.ceil(e/this.contentWidth)+1;for(let e=0;e<t;e++)this._createClone()}}static refresh(e){MARQUEES[e]._refresh()}static refreshAll(){for(let e=0;e<MARQUEES.length;e++)MARQUEES[e]._refresh()}static init(t={selector:"marquee3k"}){window.MARQUEES=[];const r=Array.from(document.querySelectorAll(`.${t.selector}`));let i,n=window.innerWidth;for(let i=0;i<r.length;i++){const n=r[i],o=new e(n,t);MARQUEES.push(o)}!function e(){for(let e=0;e<MARQUEES.length;e++)MARQUEES[e].animate();window.requestAnimationFrame(e)}(),window.addEventListener("resize",()=>{clearTimeout(i),i=setTimeout(()=>{const e=n<window.innerWidth,t=window.innerWidth-n;for(let r=0;r<MARQUEES.length;r++)MARQUEES[r].repopulate(t,e);n=this.innerWidth})},250)}}return e}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.THREE={})}(this,function(e){"use strict";function t(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners[e];if(void 0!==r){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var r=t.slice(0),i=0,n=r.length;i<n;i++)r[i].call(this,e)}}}});var r,i,n,o,a,s,l,c,u,h,p,d,f=0,m=1,v=2,g=1,y=2,x=0,_=1,w=2,b=0,M=1,T=2,E=0,S=1,R=2,P=3,A=4,C=5,L=100,O=101,D=102,H=103,z=104,I=200,k=201,N=202,U=203,B=204,F=205,j=206,G=207,W=208,V=209,q=210,X=0,$=1,Y=2,J=3,Z=4,Q=5,K=6,ee=7,te=0,re=1,ie=2,ne=0,oe=1,ae=2,se=3,le=4,ce=5,ue=301,he=302,pe=303,de=304,fe=305,me=306,ve=307,ge=1e3,ye=1001,xe=1002,_e=1003,we=1004,be=1005,Me=1006,Te=1007,Ee=1008,Se=1009,Re=1010,Pe=1011,Ae=1012,Ce=1013,Le=1014,Oe=1015,De=1016,He=1017,ze=1018,Ie=1019,ke=1020,Ne=1021,Ue=1022,Be=1023,Fe=1024,je=1025,Ge=Be,We=1026,Ve=1027,qe=1028,Xe=33776,$e=33777,Ye=33778,Je=33779,Ze=35840,Qe=35841,Ke=35842,et=35843,tt=36196,rt=37808,it=37809,nt=37810,ot=37811,at=37812,st=37813,lt=37814,ct=37815,ut=37816,ht=37817,pt=37818,dt=37819,ft=37820,mt=37821,vt=2201,gt=2400,yt=0,xt=1,_t=2,wt=3e3,bt=3001,Mt=3007,Tt=3002,Et=3004,St=3005,Rt=3006,Pt=3200,At=3201,Ct=0,Lt=1,Ot={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&r]+e[r>>8&255]+"-"+e[r>>16&15|64]+e[r>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&n]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]).toUpperCase()}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Ot.DEG2RAD},radToDeg:function(e){return e*Ot.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Dt(e,t){this.x=e||0,this.y=t||0}function Ht(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function zt(e,t,r,i){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==i?i:1}function It(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function kt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Dt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Dt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(r=new Dt,i=new Dt,function(e,t){return r.set(e,e),i.set(t,t),this.clamp(r,i)}),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,o=this.y-e.y;return this.x=n*r-o*i+e.x,this.y=n*i+o*r+e.y,this}}),Object.assign(Ht.prototype,{isMatrix4:!0,set:function(e,t,r,i,n,o,a,s,l,c,u,h,p,d,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=i,v[1]=n,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=c,v[10]=u,v[14]=h,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ht).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:(h=new It,function(e){var t=this.elements,r=e.elements,i=1/h.setFromMatrixColumn(e,0).length(),n=1/h.setFromMatrixColumn(e,1).length(),o=1/h.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,i=e.y,n=e.z,o=Math.cos(r),a=Math.sin(r),s=Math.cos(i),l=Math.sin(i),c=Math.cos(n),u=Math.sin(n);if("XYZ"===e.order){var h=o*c,p=o*u,d=a*c,f=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=p+d*l,t[5]=h-f*l,t[9]=-a*s,t[2]=f-h*l,t[6]=d+p*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,v=s*u,g=l*c,y=l*u;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order)m=s*c,v=s*u,g=l*c,y=l*u,t[0]=m-y*a,t[4]=-o*u,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*c,t[9]=y-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s;else if("ZYX"===e.order)h=o*c,p=o*u,d=a*c,f=a*u,t[0]=s*c,t[4]=d*l-p,t[8]=h*l+f,t[1]=s*u,t[5]=f*l+h,t[9]=p*l-d,t[2]=-l,t[6]=a*s,t[10]=o*s;else if("YZX"===e.order){var x=o*s,_=o*l,w=a*s,b=a*l;t[0]=s*c,t[4]=b-x*u,t[8]=w*u+_,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=_*u+w,t[10]=x-b*u}else"XZY"===e.order&&(x=o*s,_=o*l,w=a*s,b=a*l,t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=x*u+b,t[5]=o*c,t[9]=_*u-w,t[2]=w*u-_,t[6]=a*c,t[10]=b*u+x);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:(c=new It(0,0,0),u=new It(1,1,1),function(e){return this.compose(c,e,u)}),lookAt:(a=new It,s=new It,l=new It,function(e,t,r){var i=this.elements;return l.subVectors(e,t),0===l.lengthSq()&&(l.z=1),l.normalize(),a.crossVectors(r,l),0===a.lengthSq()&&(1===Math.abs(r.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),a.crossVectors(r,l)),a.normalize(),s.crossVectors(l,a),i[0]=a.x,i[4]=s.x,i[8]=l.x,i[1]=a.y,i[5]=s.y,i[9]=l.y,i[2]=a.z,i[6]=s.z,i[10]=l.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,i=t.elements,n=this.elements,o=r[0],a=r[4],s=r[8],l=r[12],c=r[1],u=r[5],h=r[9],p=r[13],d=r[2],f=r[6],m=r[10],v=r[14],g=r[3],y=r[7],x=r[11],_=r[15],w=i[0],b=i[4],M=i[8],T=i[12],E=i[1],S=i[5],R=i[9],P=i[13],A=i[2],C=i[6],L=i[10],O=i[14],D=i[3],H=i[7],z=i[11],I=i[15];return n[0]=o*w+a*E+s*A+l*D,n[4]=o*b+a*S+s*C+l*H,n[8]=o*M+a*R+s*L+l*z,n[12]=o*T+a*P+s*O+l*I,n[1]=c*w+u*E+h*A+p*D,n[5]=c*b+u*S+h*C+p*H,n[9]=c*M+u*R+h*L+p*z,n[13]=c*T+u*P+h*O+p*I,n[2]=d*w+f*E+m*A+v*D,n[6]=d*b+f*S+m*C+v*H,n[10]=d*M+f*R+m*L+v*z,n[14]=d*T+f*P+m*O+v*I,n[3]=g*w+y*E+x*A+_*D,n[7]=g*b+y*S+x*C+_*H,n[11]=g*M+y*R+x*L+_*z,n[15]=g*T+y*P+x*O+_*I,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new It;return function(t){for(var r=0,i=t.count;r<i;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix4(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],p=e[14];return e[3]*(+n*s*u-i*l*u-n*a*h+r*l*h+i*a*p-r*s*p)+e[7]*(+t*s*p-t*l*h+n*o*h-i*o*p+i*l*c-n*s*c)+e[11]*(+t*l*u-t*a*p-n*o*u+r*o*p+n*a*c-r*l*c)+e[15]*(-i*a*c-t*s*u+t*a*h+i*o*u-r*o*h+r*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,i=e.elements,n=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],p=i[8],d=i[9],f=i[10],m=i[11],v=i[12],g=i[13],y=i[14],x=i[15],_=d*y*h-g*f*h+g*u*m-c*y*m-d*u*x+c*f*x,w=v*f*h-p*y*h-v*u*m+l*y*m+p*u*x-l*f*x,b=p*g*h-v*d*h+v*c*m-l*g*m-p*c*x+l*d*x,M=v*d*u-p*g*u-v*c*f+l*g*f+p*c*y-l*d*y,T=n*_+o*w+a*b+s*M;if(0===T){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return console.warn(E),this.identity()}var S=1/T;return r[0]=_*S,r[1]=(g*f*s-d*y*s-g*a*m+o*y*m+d*a*x-o*f*x)*S,r[2]=(c*y*s-g*u*s+g*a*h-o*y*h-c*a*x+o*u*x)*S,r[3]=(d*u*s-c*f*s-d*a*h+o*f*h+c*a*m-o*u*m)*S,r[4]=w*S,r[5]=(p*y*s-v*f*s+v*a*m-n*y*m-p*a*x+n*f*x)*S,r[6]=(v*u*s-l*y*s-v*a*h+n*y*h+l*a*x-n*u*x)*S,r[7]=(l*f*s-p*u*s+p*a*h-n*f*h-l*a*m+n*u*m)*S,r[8]=b*S,r[9]=(v*d*s-p*g*s-v*o*m+n*g*m+p*o*x-n*d*x)*S,r[10]=(l*g*s-v*c*s+v*o*h-n*g*h-l*o*x+n*c*x)*S,r[11]=(p*c*s-l*d*s-p*o*h+n*d*h+l*o*m-n*c*m)*S,r[12]=M*S,r[13]=(p*g*a-v*d*a+v*o*f-n*g*f-p*o*y+n*d*y)*S,r[14]=(v*c*a-l*g*a-v*o*u+n*g*u+l*o*y-n*c*y)*S,r[15]=(l*d*a-p*c*a+p*o*u-n*d*u-l*o*f+n*c*f)*S,this},scale:function(e){var t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),i=Math.sin(t),n=1-r,o=e.x,a=e.y,s=e.z,l=n*o,c=n*a;return this.set(l*o+r,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+r,c*s-i*o,0,l*s-i*a,c*s+i*o,n*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,r){var i=this.elements,n=t._x,o=t._y,a=t._z,s=t._w,l=n+n,c=o+o,u=a+a,h=n*l,p=n*c,d=n*u,f=o*c,m=o*u,v=a*u,g=s*l,y=s*c,x=s*u,_=r.x,w=r.y,b=r.z;return i[0]=(1-(f+v))*_,i[1]=(p+x)*_,i[2]=(d-y)*_,i[3]=0,i[4]=(p-x)*w,i[5]=(1-(h+v))*w,i[6]=(m+g)*w,i[7]=0,i[8]=(d+y)*b,i[9]=(m-g)*b,i[10]=(1-(h+f))*b,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this},decompose:(n=new It,o=new Ht,function(e,t,r){var i=this.elements,a=n.set(i[0],i[1],i[2]).length(),s=n.set(i[4],i[5],i[6]).length(),l=n.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],o.copy(this);var c=1/a,u=1/s,h=1/l;return o.elements[0]*=c,o.elements[1]*=c,o.elements[2]*=c,o.elements[4]*=u,o.elements[5]*=u,o.elements[6]*=u,o.elements[8]*=h,o.elements[9]*=h,o.elements[10]*=h,t.setFromRotationMatrix(o),r.x=a,r.y=s,r.z=l,this}),makePerspective:function(e,t,r,i,n,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*n/(t-e),l=2*n/(r-i),c=(t+e)/(t-e),u=(r+i)/(r-i),h=-(o+n)/(o-n),p=-2*o*n/(o-n);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,r,i,n,o){var a=this.elements,s=1/(t-e),l=1/(r-i),c=1/(o-n),u=(t+e)*s,h=(r+i)*l,p=(o+n)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}),Object.assign(zt,{slerp:function(e,t,r,i){return r.copy(e).slerp(t,i)},slerpFlat:function(e,t,r,i,n,o,a){var s=r[i+0],l=r[i+1],c=r[i+2],u=r[i+3],h=n[o+0],p=n[o+1],d=n[o+2],f=n[o+3];if(u!==f||s!==h||l!==p||c!==d){var m=1-a,v=s*h+l*p+c*d+u*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var x=Math.sqrt(y),_=Math.atan2(x,v*g);m=Math.sin(m*_)/x,a=Math.sin(a*_)/x}var w=a*g;if(s=s*m+h*w,l=l*m+p*w,c=c*m+d*w,u=u*m+f*w,m===1-a){var b=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=b,l*=b,c*=b,u*=b}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}}),Object.defineProperties(zt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(zt.prototype,{isQuaternion:!0,set:function(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,i=e._y,n=e._z,o=e.order,a=Math.cos,s=Math.sin,l=a(r/2),c=a(i/2),u=a(n/2),h=s(r/2),p=s(i/2),d=s(n/2);return"XYZ"===o?(this._x=h*c*u+l*p*d,this._y=l*p*u-h*c*d,this._z=l*c*d+h*p*u,this._w=l*c*u-h*p*d):"YXZ"===o?(this._x=h*c*u+l*p*d,this._y=l*p*u-h*c*d,this._z=l*c*d-h*p*u,this._w=l*c*u+h*p*d):"ZXY"===o?(this._x=h*c*u-l*p*d,this._y=l*p*u+h*c*d,this._z=l*c*d+h*p*u,this._w=l*c*u-h*p*d):"ZYX"===o?(this._x=h*c*u-l*p*d,this._y=l*p*u+h*c*d,this._z=l*c*d-h*p*u,this._w=l*c*u+h*p*d):"YZX"===o?(this._x=h*c*u+l*p*d,this._y=l*p*u+h*c*d,this._z=l*c*d-h*p*u,this._w=l*c*u-h*p*d):"XZY"===o&&(this._x=h*c*u-l*p*d,this._y=l*p*u-h*c*d,this._z=l*c*d+h*p*u,this._w=l*c*u+h*p*d),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,i=r[0],n=r[4],o=r[8],a=r[1],s=r[5],l=r[9],c=r[2],u=r[6],h=r[10],p=i+s+h;return p>0?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(u-l)*t,this._y=(o-c)*t,this._z=(a-n)*t):i>s&&i>h?(t=2*Math.sqrt(1+i-s-h),this._w=(u-l)/t,this._x=.25*t,this._y=(n+a)/t,this._z=(o+c)/t):s>h?(t=2*Math.sqrt(1+s-i-h),this._w=(o-c)/t,this._x=(n+a)/t,this._y=.25*t,this._z=(l+u)/t):(t=2*Math.sqrt(1+h-i-s),this._w=(a-n)/t,this._x=(o+c)/t,this._y=(l+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new It;return function(r,i){return void 0===t&&(t=new It),(e=r.dot(i)+1)<1e-6?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(Ot.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var r=this.angleTo(e);if(0===r)return this;var i=Math.min(1,t/r);return this.slerp(e,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,i=e._y,n=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=r*c+o*a+i*l-n*s,this._y=i*c+o*s+n*a-r*l,this._z=n*c+o*l+r*s-i*a,this._w=o*c-r*a-i*s-n*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,i=this._y,n=this._z,o=this._w,a=o*e._w+r*e._x+i*e._y+n*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=n,this;var s=1-a*a;if(s<=Number.EPSILON){var l=1-t;return this._w=l*o+t*this._w,this._x=l*r+t*this._x,this._y=l*i+t*this._y,this._z=l*n+t*this._z,this.normalize()}var c=Math.sqrt(s),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=o*h+this._w*p,this._x=r*h+this._x*p,this._y=i*h+this._y*p,this._z=n*h+this._z*p,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(It.prototype,{isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(p=new zt,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(p.setFromEuler(e))}),applyAxisAngle:function(){var e=new zt;return function(t,r){return this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this},applyMatrix4:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements,o=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*o,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*o,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*o,this},applyQuaternion:function(e){var t=this.x,r=this.y,i=this.z,n=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*i-a*r,c=s*r+a*t-n*i,u=s*i+n*r-o*t,h=-n*t-o*r-a*i;return this.x=l*s+h*-n+c*-a-u*-o,this.y=c*s+h*-o+u*-n-l*-a,this.z=u*s+h*-a+l*-o-c*-n,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(){var e=new Ht;return function(t){return this.applyMatrix4(e.getInverse(t.projectionMatrix)).applyMatrix4(t.matrixWorld)}}(),transformDirection:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new It,t=new It;return function(r,i){return e.set(r,r,r),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var r=e.x,i=e.y,n=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-n*a,this.y=n*o-r*s,this.z=r*a-i*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new It;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new It;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Ot.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,r){var i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(kt.prototype,{isMatrix3:!0,set:function(e,t,r,i,n,o,a,s,l){var c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=n,c[5]=s,c[6]=r,c[7]=o,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new It;return function(t){for(var r=0,i=t.count;r<i;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,i=t.elements,n=this.elements,o=r[0],a=r[3],s=r[6],l=r[1],c=r[4],u=r[7],h=r[2],p=r[5],d=r[8],f=i[0],m=i[3],v=i[6],g=i[1],y=i[4],x=i[7],_=i[2],w=i[5],b=i[8];return n[0]=o*f+a*g+s*_,n[3]=o*m+a*y+s*w,n[6]=o*v+a*x+s*b,n[1]=l*f+c*g+u*_,n[4]=l*m+c*y+u*w,n[7]=l*v+c*x+u*b,n[2]=h*f+p*g+d*_,n[5]=h*m+p*y+d*w,n[8]=h*v+p*x+d*b,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-r*n*c+r*a*s+i*n*l-i*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=e.elements,i=this.elements,n=r[0],o=r[1],a=r[2],s=r[3],l=r[4],c=r[5],u=r[6],h=r[7],p=r[8],d=p*l-c*h,f=c*u-p*s,m=h*s-l*u,v=n*d+o*f+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return i[0]=d*y,i[1]=(a*h-p*o)*y,i[2]=(c*o-a*l)*y,i[3]=f*y,i[4]=(p*n-a*u)*y,i[5]=(a*s-c*n)*y,i[6]=m*y,i[7]=(o*u-h*n)*y,i[8]=(l*n-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,r,i,n,o,a){var s=Math.cos(n),l=Math.sin(n);this.set(r*s,r*l,-r*(s*o+l*a)+o+e,-i*l,i*s,-i*(-l*o+s*a)+a+t,0,0,1)},scale:function(e,t){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this},rotate:function(e){var t=Math.cos(e),r=Math.sin(e),i=this.elements,n=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=t*n+r*s,i[3]=t*o+r*l,i[6]=t*a+r*c,i[1]=-r*n+t*s,i[4]=-r*o+t*l,i[7]=-r*a+t*c,this},translate:function(e,t){var r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this},equals:function(e){for(var t=this.elements,r=e.elements,i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}});var Nt,Ut,Bt,Ft,jt,Gt={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===d&&(d=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),d.width=e.width,d.height=e.height;var r=d.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=d}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Wt=0;function Vt(e,t,r,i,n,o,a,s,l,c){Object.defineProperty(this,"id",{value:Wt++}),this.uuid=Ot.generateUUID(),this.name="",this.image=void 0!==e?e:Vt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Vt.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:ye,this.wrapT=void 0!==i?i:ye,this.magFilter=void 0!==n?n:Me,this.minFilter=void 0!==o?o:Ee,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:Be,this.type=void 0!==s?s:Se,this.offset=new Dt(0,0),this.repeat=new Dt(1,1),this.center=new Dt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:wt,this.version=0,this.onUpdate=null}function qt(e,t,r,i){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==i?i:1}function Xt(e,t,r){this.width=e,this.height=t,this.scissor=new qt(0,0,e,t),this.scissorTest=!1,this.viewport=new qt(0,0,e,t),r=r||{},this.texture=new Vt(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Me,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function $t(e,t,r){Xt.call(this,e,t,r),this.samples=4}function Yt(e,t,r){Xt.call(this,e,t,r),this.activeCubeFace=0,this.activeMipMapLevel=0}function Jt(e,t,r,i,n,o,a,s,l,c,u,h){Vt.call(this,null,o,a,s,l,c,i,n,u,h),this.image={data:e,width:t,height:r},this.magFilter=void 0!==l?l:_e,this.minFilter=void 0!==c?c:_e,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Zt(e,t){this.min=void 0!==e?e:new It(1/0,1/0,1/0),this.max=void 0!==t?t:new It(-1/0,-1/0,-1/0)}function Qt(e,t){this.center=void 0!==e?e:new It,this.radius=void 0!==t?t:0}function Kt(e,t){this.normal=void 0!==e?e:new It(1,0,0),this.constant=void 0!==t?t:0}function er(e,t,r,i,n,o){this.planes=[void 0!==e?e:new Kt,void 0!==t?t:new Kt,void 0!==r?r:new Kt,void 0!==i?i:new Kt,void 0!==n?n:new Kt,void 0!==o?o:new Kt]}Vt.DEFAULT_IMAGE=void 0,Vt.DEFAULT_MAPPING=300,Vt.prototype=Object.assign(Object.create(t.prototype),{constructor:Vt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=Ot.generateUUID()),!t&&void 0===e.images[i.uuid]){var n;if(Array.isArray(i)){n=[];for(var o=0,a=i.length;o<a;o++)n.push(Gt.getDataURL(i[o]))}else n=Gt.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:n}}r.image=i.uuid}return t||(e.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ge:e.x=e.x-Math.floor(e.x);break;case ye:e.x=e.x<0?0:1;break;case xe:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ge:e.y=e.y-Math.floor(e.y);break;case ye:e.y=e.y<0?0:1;break;case xe:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Vt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(qt.prototype,{isVector4:!0,set:function(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,r=this.y,i=this.z,n=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*n,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*n,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*n,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*n,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,i,n,o=e.elements,a=o[0],s=o[4],l=o[8],c=o[1],u=o[5],h=o[9],p=o[2],d=o[6],f=o[10];if(Math.abs(s-c)<.01&&Math.abs(l-p)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+c)<.1&&Math.abs(l+p)<.1&&Math.abs(h+d)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(u+1)/2,g=(f+1)/2,y=(s+c)/4,x=(l+p)/4,_=(h+d)/4;return m>v&&m>g?m<.01?(r=0,i=.707106781,n=.707106781):(i=y/(r=Math.sqrt(m)),n=x/r):v>g?v<.01?(r=.707106781,i=0,n=.707106781):(r=y/(i=Math.sqrt(v)),n=_/i):g<.01?(r=.707106781,i=.707106781,n=0):(r=x/(n=Math.sqrt(g)),i=_/n),this.set(r,i,n,t),this}var w=Math.sqrt((d-h)*(d-h)+(l-p)*(l-p)+(c-s)*(c-s));return Math.abs(w)<.001&&(w=1),this.x=(d-h)/w,this.y=(l-p)/w,this.z=(c-s)/w,this.w=Math.acos((a+u+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,i){return void 0===e&&(e=new qt,t=new qt),e.set(r,r,r,r),t.set(i,i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Xt.prototype=Object.assign(Object.create(t.prototype),{constructor:Xt,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),$t.prototype=Object.assign(Object.create(Xt.prototype),{constructor:$t,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Xt.prototype.copy.call(this,e),this.samples=e.samples,this}}),Yt.prototype=Object.create(Xt.prototype),Yt.prototype.constructor=Yt,Yt.prototype.isWebGLRenderTargetCube=!0,Jt.prototype=Object.create(Vt.prototype),Jt.prototype.constructor=Jt,Jt.prototype.isDataTexture=!0,Object.assign(Zt.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,i=1/0,n=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var c=e[s],u=e[s+1],h=e[s+2];c<t&&(t=c),u<r&&(r=u),h<i&&(i=h),c>n&&(n=c),u>o&&(o=u),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(n,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,i=1/0,n=-1/0,o=-1/0,a=-1/0,s=0,l=e.count;s<l;s++){var c=e.getX(s),u=e.getY(s),h=e.getZ(s);c<t&&(t=c),u<r&&(r=u),h<i&&(i=h),c>n&&(n=c),u>o&&(o=u),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(n,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new It;return function(t,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new It),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new It),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,r,i=new It;function n(n){var o=n.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,r=a.length;t<r;t++)i.copy(a[t]),i.applyMatrix4(n.matrixWorld),e.expandByPoint(i)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,r=s.count;t<r;t++)i.fromBufferAttribute(s,t).applyMatrix4(n.matrixWorld),e.expandByPoint(i)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(n),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new It),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(Ut=new It,function(e){return this.clampPoint(e.center,Ut),Ut.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant},intersectsTriangle:function(){var e=new It,t=new It,r=new It,i=new It,n=new It,o=new It,a=new It,s=new It,l=new It,c=new It;function u(i){var n,o;for(n=0,o=i.length-3;n<=o;n+=3){a.fromArray(i,n);var s=l.x*Math.abs(a.x)+l.y*Math.abs(a.y)+l.z*Math.abs(a.z),c=e.dot(a),u=t.dot(a),h=r.dot(a);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),l.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),r.subVectors(a.c,s),i.subVectors(t,e),n.subVectors(r,t),o.subVectors(e,r);var h=[0,-i.z,i.y,0,-n.z,n.y,0,-o.z,o.y,i.z,0,-i.x,n.z,0,-n.x,o.z,0,-o.x,-i.y,i.x,0,-n.y,n.x,0,-o.y,o.x,0];return!!u(h)&&!!u(h=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(i,n),u(h=[c.x,c.y,c.z]))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new It),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new It;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new It;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new Qt),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(Nt=[new It,new It,new It,new It,new It,new It,new It,new It],function(e){return this.isEmpty()?this:(Nt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Nt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Nt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Nt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Nt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Nt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Nt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Nt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Nt),this)}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Qt.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Bt=new Zt,function(e,t){var r=this.center;void 0!==t?r.copy(t):Bt.setFromPoints(e).getCenter(r);for(var i=0,n=0,o=e.length;n<o;n++)i=Math.max(i,r.distanceToSquared(e[n]));return this.radius=Math.sqrt(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new It),t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Zt),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Kt.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new It,t=new It;return function(r,i,n){var o=e.subVectors(n,i).cross(t.subVectors(r,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new It),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new It;return function(t,r){void 0===r&&(console.warn("THREE.Plane: .intersectLine() target is now required"),r=new It);var i=t.delta(e),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(t.start)?r.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/n;return o<0||o>1?void 0:r.copy(i).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new It),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new It,t=new kt;return function(r,i){var n=i||t.getNormalMatrix(r),o=this.coplanarPoint(e).applyMatrix4(r),a=this.normal.applyMatrix3(n).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(er.prototype,{set:function(e,t,r,i,n,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(n),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,i=r[0],n=r[1],o=r[2],a=r[3],s=r[4],l=r[5],c=r[6],u=r[7],h=r[8],p=r[9],d=r[10],f=r[11],m=r[12],v=r[13],g=r[14],y=r[15];return t[0].setComponents(a-i,u-s,f-h,y-m).normalize(),t[1].setComponents(a+i,u+s,f+h,y+m).normalize(),t[2].setComponents(a+n,u+l,f+p,y+v).normalize(),t[3].setComponents(a-n,u-l,f-p,y-v).normalize(),t[4].setComponents(a-o,u-c,f-d,y-g).normalize(),t[5].setComponents(a+o,u+c,f+d,y+g).normalize(),this},intersectsObject:(jt=new Qt,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),jt.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(jt)}),intersectsSprite:function(){var e=new Qt;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,i=-e.radius,n=0;n<6;n++)if(t[n].distanceToPoint(r)<i)return!1;return!0},intersectsBox:(Ft=new It,function(e){for(var t=this.planes,r=0;r<6;r++){var i=t[r];if(Ft.x=i.normal.x>0?e.max.x:e.min.x,Ft.y=i.normal.y>0?e.max.y:e.min.y,Ft.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ft)<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}});var tr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"};function rr(e){var t={};for(var r in e)for(var i in t[r]={},e[r]){var n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}return t}function ir(e){for(var t={},r=0;r<e.length;r++){var i=rr(e[r]);for(var n in i)t[n]=i[n]}return t}var nr,or,ar,sr={clone:rr,merge:ir},lr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function cr(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}Object.assign(cr.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}return function(t,r,i){if(t=Ot.euclideanModulo(t,1),r=Ot.clamp(r,0,1),i=Ot.clamp(i,0,1),0===r)this.r=this.g=this.b=i;else{var n=i<=.5?i*(1+r):i+r-i*r,o=2*i-n;this.r=e(o,n,t+1/3),this.g=e(o,n,t),this.b=e(o,n,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,n=r[1],o=r[2];switch(n){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(a,s,l)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c,u=(c=r[1]).length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return e&&e.length>0&&(void 0!==(c=lr[e])?this.setHex(c):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,r,i=this.r,n=this.g,o=this.b,a=Math.max(i,n,o),s=Math.min(i,n,o),l=(s+a)/2;if(s===a)t=0,r=0;else{var c=a-s;switch(r=l<=.5?c/(a+s):c/(2-a-s),a){case i:t=(n-o)/c+(n<o?6:0);break;case n:t=(o-i)/c+2;break;case o:t=(i-n)/c+4}t/=6}return e.h=t,e.s=r,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(ar={},function(e,t,r){return this.getHSL(ar),ar.h+=e,ar.s+=t,ar.l+=r,this.setHSL(ar.h,ar.s,ar.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:(nr={h:0,s:0,l:0},or={h:0,s:0,l:0},function(e,t){this.getHSL(nr),e.getHSL(or);var r=Ot.lerp(nr.h,or.h,t),i=Ot.lerp(nr.s,or.s,t),n=Ot.lerp(nr.l,or.l,t);return this.setHSL(r,i,n),this}),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var ur,hr={common:{diffuse:{value:new cr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new kt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Dt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new cr(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new cr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new kt}},sprite:{diffuse:{value:new cr(15658734)},opacity:{value:1},center:{value:new Dt(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new kt}}},pr={basic:{uniforms:ir([hr.common,hr.specularmap,hr.envmap,hr.aomap,hr.lightmap,hr.fog]),vertexShader:tr.meshbasic_vert,fragmentShader:tr.meshbasic_frag},lambert:{uniforms:ir([hr.common,hr.specularmap,hr.envmap,hr.aomap,hr.lightmap,hr.emissivemap,hr.fog,hr.lights,{emissive:{value:new cr(0)}}]),vertexShader:tr.meshlambert_vert,fragmentShader:tr.meshlambert_frag},phong:{uniforms:ir([hr.common,hr.specularmap,hr.envmap,hr.aomap,hr.lightmap,hr.emissivemap,hr.bumpmap,hr.normalmap,hr.displacementmap,hr.gradientmap,hr.fog,hr.lights,{emissive:{value:new cr(0)},specular:{value:new cr(1118481)},shininess:{value:30}}]),vertexShader:tr.meshphong_vert,fragmentShader:tr.meshphong_frag},standard:{uniforms:ir([hr.common,hr.envmap,hr.aomap,hr.lightmap,hr.emissivemap,hr.bumpmap,hr.normalmap,hr.displacementmap,hr.roughnessmap,hr.metalnessmap,hr.fog,hr.lights,{emissive:{value:new cr(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:tr.meshphysical_vert,fragmentShader:tr.meshphysical_frag},matcap:{uniforms:ir([hr.common,hr.bumpmap,hr.normalmap,hr.displacementmap,hr.fog,{matcap:{value:null}}]),vertexShader:tr.meshmatcap_vert,fragmentShader:tr.meshmatcap_frag},points:{uniforms:ir([hr.points,hr.fog]),vertexShader:tr.points_vert,fragmentShader:tr.points_frag},dashed:{uniforms:ir([hr.common,hr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tr.linedashed_vert,fragmentShader:tr.linedashed_frag},depth:{uniforms:ir([hr.common,hr.displacementmap]),vertexShader:tr.depth_vert,fragmentShader:tr.depth_frag},normal:{uniforms:ir([hr.common,hr.bumpmap,hr.normalmap,hr.displacementmap,{opacity:{value:1}}]),vertexShader:tr.normal_vert,fragmentShader:tr.normal_frag},sprite:{uniforms:ir([hr.sprite,hr.fog]),vertexShader:tr.sprite_vert,fragmentShader:tr.sprite_frag},background:{uniforms:{uvTransform:{value:new kt},t2D:{value:null}},vertexShader:tr.background_vert,fragmentShader:tr.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:tr.cube_vert,fragmentShader:tr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tr.equirect_vert,fragmentShader:tr.equirect_frag},distanceRGBA:{uniforms:ir([hr.common,hr.displacementmap,{referencePosition:{value:new It},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tr.distanceRGBA_vert,fragmentShader:tr.distanceRGBA_frag},shadow:{uniforms:ir([hr.lights,hr.fog,{color:{value:new cr(0)},opacity:{value:1}}]),vertexShader:tr.shadow_vert,fragmentShader:tr.shadow_frag}};function dr(){var e=null,t=!1,r=null;function i(n,o){!1!==t&&(r(n,o),e.requestAnimationFrame(i))}return{start:function(){!0!==t&&null!==r&&(e.requestAnimationFrame(i),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){r=e},setContext:function(t){e=t}}}function fr(e,t,r,i,n,o){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new It,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new cr,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==o?o:0}function mr(e,t,r,i){this._x=e||0,this._y=t||0,this._z=r||0,this._order=i||mr.DefaultOrder}function vr(){this.mask=1}pr.physical={uniforms:ir([pr.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:tr.meshphysical_vert,fragmentShader:tr.meshphysical_frag},Object.assign(fr.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),mr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],mr.DefaultOrder="XYZ",Object.defineProperties(mr.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(mr.prototype,{isEuler:!0,set:function(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var i=Ot.clamp,n=e.elements,o=n[0],a=n[4],s=n[8],l=n[1],c=n[5],u=n[9],h=n[2],p=n[6],d=n[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===t?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(p,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new Ht;return function(t,r,i){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(ur=new zt,function(e){return ur.setFromEuler(this),this.setFromQuaternion(ur,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new It(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(vr.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var gr,yr,xr,_r,wr=0;function br(){Object.defineProperty(this,"id",{value:wr++}),this.uuid=Ot.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=br.DefaultUp.clone();var e=new It,t=new mr,r=new zt,i=new It(1,1,1);t.onChange(function(){r.setFromEuler(t,!1)}),r.onChange(function(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ht},normalMatrix:{value:new kt}}),this.matrix=new Ht,this.matrixWorld=new Ht,this.matrixAutoUpdate=br.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new vr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}br.DefaultUp=new It(0,1,0),br.DefaultMatrixAutoUpdate=!0,br.prototype=Object.assign(Object.create(t.prototype),{constructor:br,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(_r=new zt,function(e,t){return _r.setFromAxisAngle(e,t),this.quaternion.multiply(_r),this}),rotateOnWorldAxis:function(){var e=new zt;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new It(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new It(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new It(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new It;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new It(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new It(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new It(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(xr=new Ht,function(e){return e.applyMatrix4(xr.getInverse(this.matrixWorld))}),lookAt:function(){var e=new zt,t=new Ht,r=new It,i=new It;return function(n,o,a){n.isVector3?r.copy(n):r.set(n,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),i.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?t.lookAt(i,r,this.up):t.lookAt(r,i,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var r=this.children.indexOf(e);return-1!==r&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,i=this.children.length;r<i;r++){var n=this.children[r].getObjectByProperty(e,t);if(void 0!==n)return n}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new It),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(gr=new It,yr=new It,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new zt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(gr,e,yr),e}),getWorldScale:function(){var e=new It,t=new zt;return function(r){return void 0===r&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),r=new It),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new It),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,i=t.length;r<i;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,n=0,o=i.length;n<o;n++)i[n].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function n(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e)),r.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){i.geometry=n(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var c=a[s];n(e.shapes,c)}else n(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(s=0,l=this.material.length;s<l;s++)u.push(n(e.materials,this.material[s]));i.material=u}else i.material=n(e.materials,this.material);if(this.children.length>0)for(i.children=[],s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object);if(t){var h=m(e.geometries),p=m(e.materials),d=m(e.textures),f=m(e.images);a=m(e.shapes),h.length>0&&(r.geometries=h),p.length>0&&(r.materials=p),d.length>0&&(r.textures=d),f.length>0&&(r.images=f),a.length>0&&(r.shapes=a)}return r.object=i,r;function m(e){var t=[];for(var r in e){var i=e[r];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var i=e.children[r];this.add(i.clone())}return this}});var Mr,Tr,Er=0;function Sr(){Object.defineProperty(this,"id",{value:Er+=2}),this.uuid=Ot.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Rr(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Pr(e,t,r){Rr.call(this,new Int8Array(e),t,r)}function Ar(e,t,r){Rr.call(this,new Uint8Array(e),t,r)}function Cr(e,t,r){Rr.call(this,new Uint8ClampedArray(e),t,r)}function Lr(e,t,r){Rr.call(this,new Int16Array(e),t,r)}function Or(e,t,r){Rr.call(this,new Uint16Array(e),t,r)}function Dr(e,t,r){Rr.call(this,new Int32Array(e),t,r)}function Hr(e,t,r){Rr.call(this,new Uint32Array(e),t,r)}function zr(e,t,r){Rr.call(this,new Float32Array(e),t,r)}function Ir(e,t,r){Rr.call(this,new Float64Array(e),t,r)}function kr(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Nr(e){if(0===e.length)return-1/0;for(var t=e[0],r=1,i=e.length;r<i;++r)e[r]>t&&(t=e[r]);return t}Sr.prototype=Object.assign(Object.create(t.prototype),{constructor:Sr,isGeometry:!0,applyMatrix:function(e){for(var t=(new kt).getNormalMatrix(e),r=0,i=this.vertices.length;r<i;r++)this.vertices[r].applyMatrix4(e);for(r=0,i=this.faces.length;r<i;r++){var n=this.faces[r];n.normal.applyMatrix3(t).normalize();for(var o=0,a=n.vertexNormals.length;o<a;o++)n.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Ht;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Ht;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Ht;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Ht;return function(t,r,i){return e.makeTranslation(t,r,i),this.applyMatrix(e),this}}(),scale:function(){var e=new Ht;return function(t,r,i){return e.makeScale(t,r,i),this.applyMatrix(e),this}}(),lookAt:(Tr=new br,function(e){Tr.lookAt(e),Tr.updateMatrix(),this.applyMatrix(Tr.matrix)}),fromBufferGeometry:function(e){var t=this,r=null!==e.index?e.index.array:void 0,i=e.attributes,n=i.position.array,o=void 0!==i.normal?i.normal.array:void 0,a=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=0,u=0;c<n.length;c+=3,u+=2)t.vertices.push((new It).fromArray(n,c)),void 0!==a&&t.colors.push((new cr).fromArray(a,c));function h(e,r,i,n){var c=void 0===a?[]:[t.colors[e].clone(),t.colors[r].clone(),t.colors[i].clone()],u=new fr(e,r,i,void 0===o?[]:[(new It).fromArray(o,3*e),(new It).fromArray(o,3*r),(new It).fromArray(o,3*i)],c,n);t.faces.push(u),void 0!==s&&t.faceVertexUvs[0].push([(new Dt).fromArray(s,2*e),(new Dt).fromArray(s,2*r),(new Dt).fromArray(s,2*i)]),void 0!==l&&t.faceVertexUvs[1].push([(new Dt).fromArray(l,2*e),(new Dt).fromArray(l,2*r),(new Dt).fromArray(l,2*i)])}var p=e.groups;if(p.length>0)for(c=0;c<p.length;c++)for(var d=p[c],f=d.start,m=(u=f,f+d.count);u<m;u+=3)void 0!==r?h(r[u],r[u+1],r[u+2],d.materialIndex):h(u,u+1,u+2,d.materialIndex);else if(void 0!==r)for(c=0;c<r.length;c+=3)h(r[c],r[c+1],r[c+2]);else for(c=0;c<n.length/3;c+=3)h(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(Mr=new It,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mr).negate(),this.translate(Mr.x,Mr.y,Mr.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,i=new Ht;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new It,t=new It,r=0,i=this.faces.length;r<i;r++){var n=this.faces[r],o=this.vertices[n.a],a=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){var t,r,i,n,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)a[t]=new It;if(e){var s,l,c,u=new It,h=new It;for(i=0,n=this.faces.length;i<n;i++)o=this.faces[i],s=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c],u.subVectors(c,l),h.subVectors(s,l),u.cross(h),a[o.a].add(u),a[o.b].add(u),a[o.c].add(u)}else for(this.computeFaceNormals(),i=0,n=this.faces.length;i<n;i++)a[(o=this.faces[i]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,r=this.vertices.length;t<r;t++)a[t].normalize();for(i=0,n=this.faces.length;i<n;i++){var p=(o=this.faces[i]).vertexNormals;3===p.length?(p[0].copy(a[o.a]),p[1].copy(a[o.b]),p[2].copy(a[o.c])):(p[0]=a[o.a].clone(),p[1]=a[o.b].clone(),p[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(r=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,i,n;for(r=0,i=this.faces.length;r<i;r++)for((n=this.faces[r]).__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;e<t;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var o=new Sr;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(r=0,i=this.faces.length;r<i;r++)l=new It,c={a:new It,b:new It,c:new It},a.push(l),s.push(c)}var l,c,u=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),r=0,i=this.faces.length;r<i;r++)n=this.faces[r],l=u.faceNormals[r],c=u.vertexNormals[r],l.copy(n.normal),c.a.copy(n.vertexNormals[0]),c.b.copy(n.vertexNormals[1]),c.c.copy(n.vertexNormals[2])}for(r=0,i=this.faces.length;r<i;r++)(n=this.faces[r]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Zt),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Qt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(e&&e.isGeometry){var i,n=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.faceVertexUvs[0],u=e.faceVertexUvs[0],h=this.colors,p=e.colors;void 0===r&&(r=0),void 0!==t&&(i=(new kt).getNormalMatrix(t));for(var d=0,f=a.length;d<f;d++){var m=a[d].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(d=0,f=p.length;d<f;d++)h.push(p[d].clone());for(d=0,f=l.length;d<f;d++){var v,g,y,x=l[d],_=x.vertexNormals,w=x.vertexColors;(v=new fr(x.a+n,x.b+n,x.c+n)).normal.copy(x.normal),void 0!==i&&v.normal.applyMatrix3(i).normalize();for(var b=0,M=_.length;b<M;b++)g=_[b].clone(),void 0!==i&&g.applyMatrix3(i).normalize(),v.vertexNormals.push(g);for(v.color.copy(x.color),b=0,M=w.length;b<M;b++)y=w[b],v.vertexColors.push(y.clone());v.materialIndex=x.materialIndex+r,s.push(v)}for(d=0,f=u.length;d<f;d++){var T=u[d],E=[];if(void 0!==T){for(b=0,M=T.length;b<M;b++)E.push(T[b].clone());c.push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,r,i,n,o,a,s,l={},c=[],u=[],h=Math.pow(10,4);for(r=0,i=this.vertices.length;r<i;r++)e=this.vertices[r],void 0===l[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(l[t]=r,c.push(this.vertices[r]),u[r]=c.length-1):u[r]=u[l[t]];var p=[];for(r=0,i=this.faces.length;r<i;r++){(n=this.faces[r]).a=u[n.a],n.b=u[n.b],n.c=u[n.c],o=[n.a,n.b,n.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){p.push(r);break}}for(r=p.length-1;r>=0;r--){var f=p[r];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var i=e[t];this.vertices.push(new It(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var i,n,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(i=[]),a&&a.length===t&&(n=[]),r=0;r<t;r++){var s=e[r]._id;i&&i.push(o[s]),n&&n.push(a[s])}i&&(this.faceVertexUvs[0]=i),n&&(this.faceVertexUvs[1]=n)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var i=[],n=0;n<this.vertices.length;n++){var o=this.vertices[n];i.push(o.x,o.y,o.z)}var a=[],s=[],l={},c=[],u={},h=[],p={};for(n=0;n<this.faces.length;n++){var d=this.faces[n],f=void 0!==this.faceVertexUvs[0][n],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,x=0;if(x=M(x=M(x=M(x=M(x=M(x=M(x=M(x=M(x,0,0),1,!0),2,!1),3,f),4,m),5,v),6,g),7,y),a.push(x),a.push(d.a,d.b,d.c),a.push(d.materialIndex),f){var _=this.faceVertexUvs[0][n];a.push(S(_[0]),S(_[1]),S(_[2]))}if(m&&a.push(T(d.normal)),v){var w=d.vertexNormals;a.push(T(w[0]),T(w[1]),T(w[2]))}if(g&&a.push(E(d.color)),y){var b=d.vertexColors;a.push(E(b[0]),E(b[1]),E(b[2]))}}function M(e,t,r){return r?e|1<<t:e&~(1<<t)}function T(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]?l[t]:(l[t]=s.length/3,s.push(e.x,e.y,e.z),l[t])}function E(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]?u[t]:(u[t]=c.length,c.push(e.getHex()),u[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]?p[t]:(p[t]=h.length/2,h.push(e.x,e.y),p[t])}return e.data={},e.data.vertices=i,e.data.normals=s,c.length>0&&(e.data.colors=c),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new Sr).copy(this)},copy:function(e){var t,r,i,n,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,r=l.length;t<r;t++)this.colors.push(l[t].clone());var c=e.faces;for(t=0,r=c.length;t<r;t++)this.faces.push(c[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,n=u.length;i<n;i++){var h=u[i],p=[];for(o=0,a=h.length;o<a;o++){var d=h[o];p.push(d.clone())}this.faceVertexUvs[t].push(p)}}var f=e.morphTargets;for(t=0,r=f.length;t<r;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],i=0,n=f[t].vertices.length;i<n;i++)m.vertices.push(f[t].vertices[i].clone());if(void 0!==f[t].normals)for(m.normals=[],i=0,n=f[t].normals.length;i<n;i++)m.normals.push(f[t].normals[i].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,r=v.length;t<r;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],i=0,n=v[t].vertexNormals.length;i<n;i++){var y=v[t].vertexNormals[i],x={};x.a=y.a.clone(),x.b=y.b.clone(),x.c=y.c.clone(),g.vertexNormals.push(x)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],i=0,n=v[t].faceNormals.length;i<n;i++)g.faceNormals.push(v[t].faceNormals[i].clone());this.morphNormals.push(g)}var _=e.skinWeights;for(t=0,r=_.length;t<r;t++)this.skinWeights.push(_[t].clone());var w=e.skinIndices;for(t=0,r=w.length;t<r;t++)this.skinIndices.push(w[t].clone());var b=e.lineDistances;for(t=0,r=b.length;t<r;t++)this.lineDistances.push(b[t]);var M=e.boundingBox;null!==M&&(this.boundingBox=M.clone());var T=e.boundingSphere;return null!==T&&(this.boundingSphere=T.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Rr.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Rr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new cr),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new Dt),t[r++]=o.x,t[r++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new It),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new qt),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this},setXYZW:function(e,t,r,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Pr.prototype=Object.create(Rr.prototype),Pr.prototype.constructor=Pr,Ar.prototype=Object.create(Rr.prototype),Ar.prototype.constructor=Ar,Cr.prototype=Object.create(Rr.prototype),Cr.prototype.constructor=Cr,Lr.prototype=Object.create(Rr.prototype),Lr.prototype.constructor=Lr,Or.prototype=Object.create(Rr.prototype),Or.prototype.constructor=Or,Dr.prototype=Object.create(Rr.prototype),Dr.prototype.constructor=Dr,Hr.prototype=Object.create(Rr.prototype),Hr.prototype.constructor=Hr,zr.prototype=Object.create(Rr.prototype),zr.prototype.constructor=zr,Ir.prototype=Object.create(Rr.prototype),Ir.prototype.constructor=Ir,Object.assign(kr.prototype,{computeGroups:function(e){for(var t,r=[],i=void 0,n=e.faces,o=0;o<n.length;o++){var a=n[o];a.materialIndex!==i&&(i=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,r.push(t)),t={start:3*o,materialIndex:i})}void 0!==t&&(t.count=3*o-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,r=e.faces,i=e.vertices,n=e.faceVertexUvs,o=n[0]&&n[0].length>0,a=n[1]&&n[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var c=0;c<l;c++)t[c]={name:s[c].name,data:[]};this.morphTargets.position=t}var u,h=e.morphNormals,p=h.length;if(p>0){for(u=[],c=0;c<p;c++)u[c]={name:h[c].name,data:[]};this.morphTargets.normal=u}var d=e.skinIndices,f=e.skinWeights,m=d.length===i.length,v=f.length===i.length;for(i.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),c=0;c<r.length;c++){var g=r[c];this.vertices.push(i[g.a],i[g.b],i[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=g.normal;this.normals.push(x,x,x)}var _,w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var b=g.color;this.colors.push(b,b,b)}!0===o&&(void 0!==(_=n[0][c])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new Dt,new Dt,new Dt))),!0===a&&(void 0!==(_=n[1][c])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new Dt,new Dt,new Dt)));for(var M=0;M<l;M++){var T=s[M].vertices;t[M].data.push(T[g.a],T[g.b],T[g.c])}for(M=0;M<p;M++){var E=h[M].vertexNormals[c];u[M].data.push(E.a,E.b,E.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Ur=1;function Br(){Object.defineProperty(this,"id",{value:Ur+=2}),this.uuid=Ot.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Fr(e,t,r,i,n,o){Sr.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:o},this.fromBufferGeometry(new jr(e,t,r,i,n,o)),this.mergeVertices()}function jr(e,t,r,i,n,o){Br.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:o};var a=this;e=e||1,t=t||1,r=r||1,i=Math.floor(i)||1,n=Math.floor(n)||1;var s=[],l=[],c=[],u=[],h=0,p=0;function d(e,t,r,i,n,o,d,f,m,v,g){var y,x,_=o/m,w=d/v,b=o/2,M=d/2,T=f/2,E=m+1,S=v+1,R=0,P=0,A=new It;for(x=0;x<S;x++){var C=x*w-M;for(y=0;y<E;y++){var L=y*_-b;A[e]=L*i,A[t]=C*n,A[r]=T,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[r]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(y/m),u.push(1-x/v),R+=1}}for(x=0;x<v;x++)for(y=0;y<m;y++){var O=h+y+E*x,D=h+y+E*(x+1),H=h+(y+1)+E*(x+1),z=h+(y+1)+E*x;s.push(O,D,z),s.push(D,H,z),P+=6}a.addGroup(p,P,g),p+=P,h+=R}d("z","y","x",-1,-1,r,t,e,o=Math.floor(o)||1,n,0),d("z","y","x",1,-1,r,t,-e,o,n,1),d("x","z","y",1,1,e,r,t,i,o,2),d("x","z","y",1,-1,e,r,-t,i,o,3),d("x","y","z",1,-1,e,t,r,i,n,4),d("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(s),this.addAttribute("position",new zr(l,3)),this.addAttribute("normal",new zr(c,3)),this.addAttribute("uv",new zr(u,2))}function Gr(e,t,r,i){Sr.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i},this.fromBufferGeometry(new Wr(e,t,r,i)),this.mergeVertices()}function Wr(e,t,r,i){Br.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};var n,o,a=(e=e||1)/2,s=(t=t||1)/2,l=Math.floor(r)||1,c=Math.floor(i)||1,u=l+1,h=c+1,p=e/l,d=t/c,f=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*d-s;for(n=0;n<u;n++){var x=n*p-a;m.push(x,-y,0),v.push(0,0,1),g.push(n/l),g.push(1-o/c)}}for(o=0;o<c;o++)for(n=0;n<l;n++){var _=n+u*o,w=n+u*(o+1),b=n+1+u*(o+1),M=n+1+u*o;f.push(_,w,M),f.push(w,b,M)}this.setIndex(f),this.addAttribute("position",new zr(m,3)),this.addAttribute("normal",new zr(v,3)),this.addAttribute("uv",new zr(g,2))}Br.prototype=Object.assign(Object.create(t.prototype),{constructor:Br,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Nr(e)>65535?Hr:Or)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new Rr(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var r=this.attributes.normal;return void 0!==r&&((new kt).getNormalMatrix(e).applyToBufferAttribute(r),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Ht;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Ht;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Ht;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Ht;return function(t,r,i){return e.makeTranslation(t,r,i),this.applyMatrix(e),this}}(),scale:function(){var e=new Ht;return function(t,r,i){return e.makeScale(t,r,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new br;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new It;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new zr(3*t.vertices.length,3),i=new zr(3*t.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var n=new zr(t.lineDistances.length,1);this.addAttribute("lineDistance",n.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],r=0,i=e.length;r<i;r++){var n=e[r];t.push(n.x,n.y,n.z||0)}return this.addAttribute("position",new zr(t,3)),this},updateFromObject:function(e){var t,r=e.geometry;if(e.isMesh){var i=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(i=void 0,r.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(r);i.verticesNeedUpdate=r.verticesNeedUpdate,i.normalsNeedUpdate=r.normalsNeedUpdate,i.colorsNeedUpdate=r.colorsNeedUpdate,i.uvsNeedUpdate=r.uvsNeedUpdate,i.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=i}return!0===r.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(r.vertices),t.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(r.normals),t.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(r.colors),t.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(r.uvs),t.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(r.lineDistances),t.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(e.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new kr).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new Rr(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.addAttribute("normal",new Rr(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new Rr(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var n=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new Rr(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new Rr(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[a],c=0,u=l.length;c<u;c++){var h=l[c],p=new zr(3*h.data.length,3);p.name=h.name,s.push(p.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var d=new zr(4*e.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new zr(4*e.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Zt);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Zt,t=new It;return function(){null===this.boundingSphere&&(this.boundingSphere=new Qt);var r=this.attributes.position;if(r){var i=this.boundingSphere.center;e.setFromBufferAttribute(r),e.getCenter(i);for(var n=0,o=0,a=r.count;o<a;o++)t.x=r.getX(o),t.y=r.getY(o),t.z=r.getZ(o),n=Math.max(n,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Rr(new Float32Array(r.length),3));else for(var i=t.normal.array,n=0,o=i.length;n<o;n++)i[n]=0;var a,s,l,c=t.normal.array,u=new It,h=new It,p=new It,d=new It,f=new It;if(e){var m=e.array;for(n=0,o=e.count;n<o;n+=3)a=3*m[n+0],s=3*m[n+1],l=3*m[n+2],u.fromArray(r,a),h.fromArray(r,s),p.fromArray(r,l),d.subVectors(p,h),f.subVectors(u,h),d.cross(f),c[a]+=d.x,c[a+1]+=d.y,c[a+2]+=d.z,c[s]+=d.x,c[s+1]+=d.y,c[s+2]+=d.z,c[l]+=d.x,c[l+1]+=d.y,c[l+2]+=d.z}else for(n=0,o=r.length;n<o;n+=9)u.fromArray(r,n),h.fromArray(r,n+3),p.fromArray(r,n+6),d.subVectors(p,h),f.subVectors(u,h),d.cross(f),c[n]=d.x,c[n+1]=d.y,c[n+2]=d.z,c[n+3]=d.x,c[n+4]=d.y,c[n+5]=d.z,c[n+6]=d.x,c[n+7]=d.y,c[n+8]=d.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes;for(var i in r)if(void 0!==e.attributes[i])for(var n=r[i].array,o=e.attributes[i],a=o.array,s=0,l=o.itemSize*t;s<a.length;s++,l++)n[l]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new It;return function(){for(var t=this.attributes.normal,r=0,i=t.count;r<i;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.normalize(),t.setXYZ(r,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Br,t=this.index.array,r=this.attributes;for(var i in r){for(var n=r[i],o=n.array,a=n.itemSize,s=new o.constructor(t.length*a),l=0,c=0,u=0,h=t.length;u<h;u++){l=t[u]*a;for(var p=0;p<a;p++)s[c++]=o[l++]}e.addAttribute(i,new Rr(s,a))}var d=this.groups;for(u=0,h=d.length;u<h;u++){var f=d[u];e.addGroup(f.start,f.count,f.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var n=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:n}}var o=this.attributes;for(var r in o){var a=o[r];n=Array.prototype.slice.call(a.array),e.data.attributes[r]={itemSize:a.itemSize,type:a.array.constructor.name,array:n,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new Br).copy(this)},copy:function(e){var t,r,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var l=[],c=s[t];for(r=0,i=c.length;r<i;r++)l.push(c[r].clone());this.morphAttributes[t]=l}var u=e.groups;for(r=0,i=u.length;r<i;r++){var h=u[r];this.addGroup(h.start,h.count,h.materialIndex)}var p=e.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Fr.prototype=Object.create(Sr.prototype),Fr.prototype.constructor=Fr,jr.prototype=Object.create(Br.prototype),jr.prototype.constructor=jr,Gr.prototype=Object.create(Sr.prototype),Gr.prototype.constructor=Gr,Wr.prototype=Object.create(Br.prototype),Wr.prototype.constructor=Wr;var Vr,qr,Xr,$r,Yr,Jr,Zr,Qr,Kr,ei,ti,ri,ii=0;function ni(){Object.defineProperty(this,"id",{value:ii++}),this.uuid=Ot.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=S,this.side=x,this.flatShading=!1,this.vertexColors=b,this.opacity=1,this.transparent=!1,this.blendSrc=B,this.blendDst=F,this.blendEquation=L,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=J,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function oi(e){ni.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function ai(e,t){this.origin=void 0!==e?e:new It,this.direction=void 0!==t?t:new It}function si(e,t,r){this.a=void 0!==e?e:new It,this.b=void 0!==t?t:new It,this.c=void 0!==r?r:new It}function li(e){ni.call(this),this.type="MeshBasicMaterial",this.color=new cr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=te,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function ci(e,t){br.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Br,this.material=void 0!==t?t:new li({color:16777215*Math.random()}),this.drawMode=yt,this.updateMorphTargets()}function ui(e,t){return Math.abs(t[1])-Math.abs(e[1])}function hi(e,t,r,i,n,o,a,s,l,c){e=void 0!==e?e:[],t=void 0!==t?t:ue,Vt.call(this,e,t,r,i,n,o,a,s,l,c),this.flipY=!1}function pi(e,t,r,i){Vt.call(this,null),this.image={data:e,width:t,height:r,depth:i},this.magFilter=_e,this.minFilter=_e,this.generateMipmaps=!1,this.flipY=!1}ni.prototype=Object.assign(Object.create(t.prototype),{constructor:ni,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var r in e){var i=e[r];delete i.metadata,t.push(i)}return t}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==S&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==x&&(r.side=this.side),this.vertexColors!==b&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){var n=i(e.textures),o=i(e.images);n.length>0&&(r.textures=n),o.length>0&&(r.images=o)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(null!==t){var i=t.length;r=new Array(i);for(var n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),oi.prototype=Object.create(ni.prototype),oi.prototype.constructor=oi,oi.prototype.isShaderMaterial=!0,oi.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=rr(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},oi.prototype.toJSON=function(e){var t=ni.prototype.toJSON.call(this,e);for(var r in t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var n={};for(var o in this.extensions)!0===this.extensions[o]&&(n[o]=!0);return Object.keys(n).length>0&&(t.extensions=n),t},Object.assign(ai.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new It),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new It;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new It),t.subVectors(e,this.origin);var r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new It;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(qr=new It,Xr=new It,$r=new It,function(e,t,r,i){qr.copy(e).add(t).multiplyScalar(.5),Xr.copy(t).sub(e).normalize(),$r.copy(this.origin).sub(qr);var n,o,a,s,l=.5*e.distanceTo(t),c=-this.direction.dot(Xr),u=$r.dot(this.direction),h=-$r.dot(Xr),p=$r.lengthSq(),d=Math.abs(1-c*c);if(d>0)if(o=c*u-h,s=l*d,(n=c*h-u)>=0)if(o>=-s)if(o<=s){var f=1/d;a=(n*=f)*(n+c*(o*=f)+2*u)+o*(c*n+o+2*h)+p}else o=l,a=-(n=Math.max(0,-(c*o+u)))*n+o*(o+2*h)+p;else o=-l,a=-(n=Math.max(0,-(c*o+u)))*n+o*(o+2*h)+p;else o<=-s?a=-(n=Math.max(0,-(-c*l+u)))*n+(o=n>0?-l:Math.min(Math.max(-l,-h),l))*(o+2*h)+p:o<=s?(n=0,a=(o=Math.min(Math.max(-l,-h),l))*(o+2*h)+p):a=-(n=Math.max(0,-(c*l+u)))*n+(o=n>0?l:Math.min(Math.max(-l,-h),l))*(o+2*h)+p;else o=c>0?-l:l,a=-(n=Math.max(0,-(c*o+u)))*n+o*(o+2*h)+p;return r&&r.copy(this.direction).multiplyScalar(n).add(this.origin),i&&i.copy(Xr).multiplyScalar(o).add(qr),a}),intersectSphere:function(){var e=new It;return function(t,r){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),n=e.dot(e)-i*i,o=t.radius*t.radius;if(n>o)return null;var a=Math.sqrt(o-n),s=i-a,l=i+a;return s<0&&l<0?null:s<0?this.at(l,r):this.at(s,r)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,i,n,o,a,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(r=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(r=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),c>=0?(n=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(n=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),r>o||n>i?null:((n>r||r!=r)&&(r=n),(o<i||i!=i)&&(i=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),r>s||a>i?null:((a>r||r!=r)&&(r=a),(s<i||i!=i)&&(i=s),i<0?null:this.at(r>=0?r:i,t)))},intersectsBox:(Vr=new It,function(e){return null!==this.intersectBox(e,Vr)}),intersectTriangle:function(){var e=new It,t=new It,r=new It,i=new It;return function(n,o,a,s,l){t.subVectors(o,n),r.subVectors(a,n),i.crossVectors(t,r);var c,u=this.direction.dot(i);if(u>0){if(s)return null;c=1}else{if(!(u<0))return null;c=-1,u=-u}e.subVectors(this.origin,n);var h=c*this.direction.dot(r.crossVectors(e,r));if(h<0)return null;var p=c*this.direction.dot(t.cross(e));if(p<0)return null;if(h+p>u)return null;var d=-c*e.dot(i);return d<0?null:this.at(d/u,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(si,{getNormal:(Jr=new It,function(e,t,r,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new It),i.subVectors(r,t),Jr.subVectors(e,t),i.cross(Jr);var n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}),getBarycoord:function(){var e=new It,t=new It,r=new It;return function(i,n,o,a,s){e.subVectors(a,n),t.subVectors(o,n),r.subVectors(i,n);var l=e.dot(e),c=e.dot(t),u=e.dot(r),h=t.dot(t),p=t.dot(r),d=l*h-c*c;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new It),0===d)return s.set(-2,-1,-1);var f=1/d,m=(h*u-c*p)*f,v=(l*p-c*u)*f;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var e=new It;return function(t,r,i,n){return si.getBarycoord(t,r,i,n,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:(Yr=new It,function(e,t,r,i,n,o,a,s){return this.getBarycoord(e,t,r,i,Yr),s.set(0,0),s.addScaledVector(n,Yr.x),s.addScaledVector(o,Yr.y),s.addScaledVector(a,Yr.z),s})}),Object.assign(si.prototype,{set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new It,t=new It;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new It),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return si.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new It),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return si.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return si.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,r,i,n){return si.getUV(e,this.a,this.b,this.c,t,r,i,n)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:(Zr=new It,Qr=new It,Kr=new It,ei=new It,ti=new It,ri=new It,function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new It);var r,i,n=this.a,o=this.b,a=this.c;Zr.subVectors(o,n),Qr.subVectors(a,n),ei.subVectors(e,n);var s=Zr.dot(ei),l=Qr.dot(ei);if(s<=0&&l<=0)return t.copy(n);ti.subVectors(e,o);var c=Zr.dot(ti),u=Qr.dot(ti);if(c>=0&&u<=c)return t.copy(o);var h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return r=s/(s-c),t.copy(n).addScaledVector(Zr,r);ri.subVectors(e,a);var p=Zr.dot(ri),d=Qr.dot(ri);if(d>=0&&p<=d)return t.copy(a);var f=p*l-s*d;if(f<=0&&l>=0&&d<=0)return i=l/(l-d),t.copy(n).addScaledVector(Qr,i);var m=c*d-p*u;if(m<=0&&u-c>=0&&p-d>=0)return Kr.subVectors(a,o),i=(u-c)/(u-c+(p-d)),t.copy(o).addScaledVector(Kr,i);var v=1/(m+f+h);return r=f*v,i=h*v,t.copy(n).addScaledVector(Zr,r).addScaledVector(Qr,i)}),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),li.prototype=Object.create(ni.prototype),li.prototype.constructor=li,li.prototype.isMeshBasicMaterial=!0,li.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},ci.prototype=Object.assign(Object.create(br.prototype),{constructor:ci,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return br.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,r,i=this.geometry;if(i.isBufferGeometry){var n=i.morphAttributes,o=Object.keys(n);if(o.length>0){var a=n[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)r=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var e=new Ht,t=new ai,r=new Qt,i=new It,n=new It,o=new It,a=new It,s=new It,l=new It,c=new Dt,u=new Dt,h=new Dt,p=new It,d=new It;function f(e,t,r,i,n,o,a,s){if(null===(t.side===_?i.intersectTriangle(a,o,n,!0,s):i.intersectTriangle(n,o,a,t.side!==w,s)))return null;d.copy(s),d.applyMatrix4(e.matrixWorld);var l=r.ray.origin.distanceTo(d);return l<r.near||l>r.far?null:{distance:l,point:d.clone(),object:e}}function m(e,t,r,a,s,l,d,m,v){i.fromBufferAttribute(s,d),n.fromBufferAttribute(s,m),o.fromBufferAttribute(s,v);var g=f(e,t,r,a,i,n,o,p);if(g){l&&(c.fromBufferAttribute(l,d),u.fromBufferAttribute(l,m),h.fromBufferAttribute(l,v),g.uv=si.getUV(p,i,n,o,c,u,h,new Dt));var y=new fr(d,m,v);si.getNormal(i,n,o,y.normal),g.face=y}return g}return function(d,v){var g,y=this.geometry,x=this.material,_=this.matrixWorld;if(void 0!==x&&(null===y.boundingSphere&&y.computeBoundingSphere(),r.copy(y.boundingSphere),r.applyMatrix4(_),!1!==d.ray.intersectsSphere(r)&&(e.getInverse(_),t.copy(d.ray).applyMatrix4(e),null===y.boundingBox||!1!==t.intersectsBox(y.boundingBox))))if(y.isBufferGeometry){var w,b,M,T,E,S,R,P,A,C=y.index,L=y.attributes.position,O=y.attributes.uv,D=y.groups,H=y.drawRange;if(null!==C)if(Array.isArray(x))for(T=0,S=D.length;T<S;T++)for(A=x[(P=D[T]).materialIndex],E=Math.max(P.start,H.start),R=Math.min(P.start+P.count,H.start+H.count);E<R;E+=3)w=C.getX(E),b=C.getX(E+1),M=C.getX(E+2),(g=m(this,A,d,t,L,O,w,b,M))&&(g.faceIndex=Math.floor(E/3),v.push(g));else for(T=Math.max(0,H.start),S=Math.min(C.count,H.start+H.count);T<S;T+=3)w=C.getX(T),b=C.getX(T+1),M=C.getX(T+2),(g=m(this,x,d,t,L,O,w,b,M))&&(g.faceIndex=Math.floor(T/3),v.push(g));else if(void 0!==L)if(Array.isArray(x))for(T=0,S=D.length;T<S;T++)for(A=x[(P=D[T]).materialIndex],E=Math.max(P.start,H.start),R=Math.min(P.start+P.count,H.start+H.count);E<R;E+=3)(g=m(this,A,d,t,L,O,w=E,b=E+1,M=E+2))&&(g.faceIndex=Math.floor(E/3),v.push(g));else for(T=Math.max(0,H.start),S=Math.min(L.count,H.start+H.count);T<S;T+=3)(g=m(this,x,d,t,L,O,w=T,b=T+1,M=T+2))&&(g.faceIndex=Math.floor(T/3),v.push(g))}else if(y.isGeometry){var z,I,k,N,U=Array.isArray(x),B=y.vertices,F=y.faces,j=y.faceVertexUvs[0];j.length>0&&(N=j);for(var G=0,W=F.length;G<W;G++){var V=F[G],q=U?x[V.materialIndex]:x;if(void 0!==q){if(z=B[V.a],I=B[V.b],k=B[V.c],!0===q.morphTargets){var X=y.morphTargets,$=this.morphTargetInfluences;i.set(0,0,0),n.set(0,0,0),o.set(0,0,0);for(var Y=0,J=X.length;Y<J;Y++){var Z=$[Y];if(0!==Z){var Q=X[Y].vertices;i.addScaledVector(a.subVectors(Q[V.a],z),Z),n.addScaledVector(s.subVectors(Q[V.b],I),Z),o.addScaledVector(l.subVectors(Q[V.c],k),Z)}}i.add(z),n.add(I),o.add(k),z=i,I=n,k=o}if(g=f(this,q,d,t,z,I,k,p)){if(N&&N[G]){var K=N[G];c.copy(K[0]),u.copy(K[1]),h.copy(K[2]),g.uv=si.getUV(p,z,I,k,c,u,h,new Dt)}g.face=V,g.faceIndex=G,v.push(g)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),hi.prototype=Object.create(Vt.prototype),hi.prototype.constructor=hi,hi.prototype.isCubeTexture=!0,Object.defineProperty(hi.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),pi.prototype=Object.create(Vt.prototype),pi.prototype.constructor=pi,pi.prototype.isDataTexture3D=!0;var di=new Vt,fi=new pi,mi=new hi;function vi(){this.seq=[],this.map={}}var gi=[],yi=[],xi=new Float32Array(16),_i=new Float32Array(9),wi=new Float32Array(4);function bi(e,t,r){var i=e[0];if(i<=0||i>0)return e;var n=t*r,o=gi[n];if(void 0===o&&(o=new Float32Array(n),gi[n]=o),0!==t){i.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=r,e[a].toArray(o,s)}return o}function Mi(e,t){if(e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function Ti(e,t){for(var r=0,i=t.length;r<i;r++)e[r]=t[r]}function Ei(e,t){var r=yi[t];void 0===r&&(r=new Int32Array(t),yi[t]=r);for(var i=0;i!==t;++i)r[i]=e.allocTextureUnit();return r}function Si(e,t){var r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function Ri(e,t){var r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function Pi(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Mi(r,t))return;e.uniform2fv(this.addr,t),Ti(r,t)}}function Ai(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)r[0]===t.r&&r[1]===t.g&&r[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(Mi(r,t))return;e.uniform3fv(this.addr,t),Ti(r,t)}}function Ci(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z&&r[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Mi(r,t))return;e.uniform4fv(this.addr,t),Ti(r,t)}}function Li(e,t){var r=this.cache,i=t.elements;if(void 0===i){if(Mi(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),Ti(r,t)}else{if(Mi(r,i))return;wi.set(i),e.uniformMatrix2fv(this.addr,!1,wi),Ti(r,i)}}function Oi(e,t){var r=this.cache,i=t.elements;if(void 0===i){if(Mi(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),Ti(r,t)}else{if(Mi(r,i))return;_i.set(i),e.uniformMatrix3fv(this.addr,!1,_i),Ti(r,i)}}function Di(e,t){var r=this.cache,i=t.elements;if(void 0===i){if(Mi(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),Ti(r,t)}else{if(Mi(r,i))return;xi.set(i),e.uniformMatrix4fv(this.addr,!1,xi),Ti(r,i)}}function Hi(e,t,r){var i=this.cache,n=r.allocTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2D(t||di,n)}function zi(e,t,r){var i=this.cache,n=r.allocTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(t||fi,n)}function Ii(e,t,r){var i=this.cache,n=r.allocTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTextureCube(t||mi,n)}function ki(e,t){var r=this.cache;Mi(r,t)||(e.uniform2iv(this.addr,t),Ti(r,t))}function Ni(e,t){var r=this.cache;Mi(r,t)||(e.uniform3iv(this.addr,t),Ti(r,t))}function Ui(e,t){var r=this.cache;Mi(r,t)||(e.uniform4iv(this.addr,t),Ti(r,t))}function Bi(e,t){var r=this.cache;Mi(r,t)||(e.uniform1fv(this.addr,t),Ti(r,t))}function Fi(e,t){var r=this.cache;Mi(r,t)||(e.uniform1iv(this.addr,t),Ti(r,t))}function ji(e,t){var r=this.cache,i=bi(t,this.size,2);Mi(r,i)||(e.uniform2fv(this.addr,i),this.updateCache(i))}function Gi(e,t){var r=this.cache,i=bi(t,this.size,3);Mi(r,i)||(e.uniform3fv(this.addr,i),this.updateCache(i))}function Wi(e,t){var r=this.cache,i=bi(t,this.size,4);Mi(r,i)||(e.uniform4fv(this.addr,i),this.updateCache(i))}function Vi(e,t){var r=this.cache,i=bi(t,this.size,4);Mi(r,i)||(e.uniformMatrix2fv(this.addr,!1,i),this.updateCache(i))}function qi(e,t){var r=this.cache,i=bi(t,this.size,9);Mi(r,i)||(e.uniformMatrix3fv(this.addr,!1,i),this.updateCache(i))}function Xi(e,t){var r=this.cache,i=bi(t,this.size,16);Mi(r,i)||(e.uniformMatrix4fv(this.addr,!1,i),this.updateCache(i))}function $i(e,t,r){var i=this.cache,n=t.length,o=Ei(r,n);!1===Mi(i,o)&&(e.uniform1iv(this.addr,o),Ti(i,o));for(var a=0;a!==n;++a)r.setTexture2D(t[a]||di,o[a])}function Yi(e,t,r){var i=this.cache,n=t.length,o=Ei(r,n);!1===Mi(i,o)&&(e.uniform1iv(this.addr,o),Ti(i,o));for(var a=0;a!==n;++a)r.setTextureCube(t[a]||mi,o[a])}function Ji(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=function(e){switch(t.type){case 5126:return Si;case 35664:return Pi;case 35665:return Ai;case 35666:return Ci;case 35674:return Li;case 35675:return Oi;case 35676:return Di;case 35678:case 36198:return Hi;case 35679:return zi;case 35680:return Ii;case 5124:case 35670:return Ri;case 35667:case 35671:return ki;case 35668:case 35672:return Ni;case 35669:case 35673:return Ui}}()}function Zi(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=function(e){switch(t.type){case 5126:return Bi;case 35664:return ji;case 35665:return Gi;case 35666:return Wi;case 35674:return Vi;case 35675:return qi;case 35676:return Xi;case 35678:return $i;case 35680:return Yi;case 5124:case 35670:return Fi;case 35667:case 35671:return ki;case 35668:case 35672:return Ni;case 35669:case 35673:return Ui}}()}function Qi(e){this.id=e,vi.call(this)}Zi.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Ti(t,e)},Qi.prototype.setValue=function(e,t,r){for(var i=this.seq,n=0,o=i.length;n!==o;++n){var a=i[n];a.setValue(e,t[a.id],r)}};var Ki=/([\w\d_]+)(\])?(\[|\.)?/g;function en(e,t){e.seq.push(t),e.map[t.id]=t}function tn(e,t,r){var i=e.name,n=i.length;for(Ki.lastIndex=0;;){var o=Ki.exec(i),a=Ki.lastIndex,s=o[1],l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===n){en(r,void 0===c?new Ji(s,e,t):new Zi(s,e,t));break}var u=r.map[s];void 0===u&&en(r,u=new Qi(s)),r=u}}function rn(e,t,r){vi.call(this),this.renderer=r;for(var i=e.getProgramParameter(t,35718),n=0;n<i;++n){var o=e.getActiveUniform(t,n);tn(o,e.getUniformLocation(t,o.name),this)}}function nn(e,t,r){var i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),!1===e.getShaderParameter(i,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===t?"vertex":"fragment",e.getShaderInfoLog(i),function(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}(r)),i}rn.prototype.setValue=function(e,t,r){var i=this.map[t];void 0!==i&&i.setValue(e,r,this.renderer)},rn.prototype.setOptional=function(e,t,r){var i=t[r];void 0!==i&&this.setValue(e,r,i)},rn.upload=function(e,t,r,i){for(var n=0,o=t.length;n!==o;++n){var a=t[n],s=r[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}},rn.seqWithValue=function(e,t){for(var r=[],i=0,n=e.length;i!==n;++i){var o=e[i];o.id in t&&r.push(o)}return r};var on=0;function an(e){switch(e){case wt:return["Linear","( value )"];case bt:return["sRGB","( value )"];case Tt:return["RGBE","( value )"];case Et:return["RGBM","( value, 7.0 )"];case St:return["RGBM","( value, 16.0 )"];case Rt:return["RGBD","( value, 256.0 )"];case Mt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function sn(e,t){var r=an(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function ln(e){return""!==e}function cn(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function un(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function hn(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,t){var r=tr[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return hn(r)})}function pn(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,r,i){for(var n="",o=parseInt(t);o<parseInt(r);o++)n+=i.replace(/\[ i \]/g,"[ "+o+" ]");return n})}function dn(e,t,r){var i=[],n={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var r;return e?e.isTexture?r=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=e.texture.encoding):r=wt,r===wt&&t&&(r=Mt),r}this.getParameters=function(t,i,o,s,l,c,u){var h=n[t.type],p=u.isSkinnedMesh?function(e){var t=u.skeleton.bones;if(r.floatVertexTextures)return 1024;var i=r.maxVertexUniforms,n=Math.floor((i-20)/4),o=Math.min(n,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}():0,d=r.precision;null!==t.precision&&(d=r.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",d,"instead.");var f=e.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:r.vertexTextures,outputEncoding:a(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:a(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===me||t.envMap.mapping===ve),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Lt,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:t.skinning&&p>0,maxBones:p,useVertexTexture:r.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:l,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===w,flipSided:t.side===_,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,r){var i=[];if(r.shaderID?i.push(r.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)i.push(n),i.push(t.defines[n]);for(var a=0;a<o.length;a++)i.push(r[o[a]]);return i.push(t.onBeforeCompile.toString()),i.push(e.gammaOutput),i.push(e.gammaFactor),i.join()},this.acquireProgram=function(n,o,a,s){for(var l,c=0,u=i.length;c<u;c++){var h=i[c];if(h.code===s){++(l=h).usedTimes;break}}return void 0===l&&(l=new function(e,t,r,i,n,o,a){var s=e.context,l=i.defines,c=n.vertexShader,u=n.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===g?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===y&&(h="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case ue:case he:p="ENVMAP_TYPE_CUBE";break;case me:case ve:p="ENVMAP_TYPE_CUBE_UV";break;case pe:case de:p="ENVMAP_TYPE_EQUIREC";break;case fe:p="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case he:case de:d="ENVMAP_MODE_REFRACTION"}switch(i.combine){case te:f="ENVMAP_BLENDING_MULTIPLY";break;case re:f="ENVMAP_BLENDING_MIX";break;case ie:f="ENVMAP_BLENDING_ADD"}}var m,v,x,_,w,b=e.gammaFactor>0?e.gammaFactor:1,M=a.isWebGL2?"":function(e,t,r){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ln).join("\n")}(i.extensions,o,t),T=function(e){var t=[];for(var r in e){var i=e[r];!1!==i&&t.push("#define "+r+" "+i)}return t.join("\n")}(l),E=s.createProgram();if(i.isRawShaderMaterial?((m=[T].filter(ln).join("\n")).length>0&&(m+="\n"),(v=[M,T].filter(ln).join("\n")).length>0&&(v+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+n.name,T,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ln).join("\n"),v=[M,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+n.name,T,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.envMap?"#define "+d:"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==ne?"#define TONE_MAPPING":"",o.toneMapping!==ne?tr.tonemapping_pars_fragment:"",o.toneMapping!==ne?function(e,t){var r;switch(t){case oe:r="Linear";break;case ae:r="Reinhard";break;case se:r="Uncharted2";break;case le:r="OptimizedCineon";break;case ce:r="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 toneMapping( vec3 color ) { return "+r+"ToneMapping( color ); }"}(0,o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?tr.encodings_pars_fragment:"",o.mapEncoding?sn("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?sn("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?sn("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?sn("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(x="linearToOutputTexel",_=o.outputEncoding,w=an(_),"vec4 "+x+"( vec4 value ) { return LinearTo"+w[0]+w[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(ln).join("\n")),c=un(c=cn(c=hn(c),o),o),u=un(u=cn(u=hn(u),o),o),c=pn(c),u=pn(u),a.isWebGL2&&!i.isRawShaderMaterial){var S=!1,R=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==c.match(R)&&null!==u.match(R)&&(S=!0,c=c.replace(R,""),u=u.replace(R,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#version 300 es\n","#define varying in",S?"":"out highp vec4 pc_fragColor;",S?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v}var P=v+u,A=nn(s,35633,m+c),C=nn(s,35632,P);s.attachShader(E,A),s.attachShader(E,C),void 0!==i.index0AttributeName?s.bindAttribLocation(E,0,i.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(E,0,"position"),s.linkProgram(E);var L,O,D=s.getProgramInfoLog(E).trim(),H=s.getShaderInfoLog(A).trim(),z=s.getShaderInfoLog(C).trim(),I=!0,k=!0;return!1===s.getProgramParameter(E,35714)?(I=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(E,35715),"gl.getProgramInfoLog",D,H,z)):""!==D?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",D):""!==H&&""!==z||(k=!1),k&&(this.diagnostics={runnable:I,material:i,programLog:D,vertexShader:{log:H,prefix:m},fragmentShader:{log:z,prefix:v}}),s.deleteShader(A),s.deleteShader(C),this.getUniforms=function(){return void 0===L&&(L=new rn(s,E,e)),L},this.getAttributes=function(){return void 0===O&&(O=function(e,t){for(var r={},i=e.getProgramParameter(t,35721),n=0;n<i;n++){var o=e.getActiveAttrib(t,n).name;r[o]=e.getAttribLocation(t,o)}return r}(s,E)),O},this.destroy=function(){s.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=n.name,this.id=on++,this.code=r,this.usedTimes=1,this.program=E,this.vertexShader=A,this.fragmentShader=C,this}(e,t,s,n,o,a,r),i.push(l)),l},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function fn(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function mn(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function vn(){var e=[],t=0,r=[],i=[];function n(r,i,n,o,a,s){var l=e[t];return void 0===l?(l={id:r.id,object:r,geometry:i,material:n,program:n.program,groupOrder:o,renderOrder:r.renderOrder,z:a,group:s},e[t]=l):(l.id=r.id,l.object=r,l.geometry=i,l.material=n,l.program=n.program,l.groupOrder=o,l.renderOrder=r.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:r,transparent:i,init:function(){t=0,r.length=0,i.length=0},push:function(e,t,o,a,s,l){var c=n(e,t,o,a,s,l);(!0===o.transparent?i:r).push(c)},unshift:function(e,t,o,a,s,l){var c=n(e,t,o,a,s,l);(!0===o.transparent?i:r).unshift(c)},sort:function(){r.length>1&&r.sort(fn),i.length>1&&i.sort(mn)}}}var gn=0;function yn(){var e=new function(){var e=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new It,color:new cr,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Dt};break;case"SpotLight":r={position:new It,direction:new It,color:new cr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Dt};break;case"PointLight":r={position:new It,color:new cr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Dt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new It,skyColor:new cr,groundColor:new cr};break;case"RectAreaLight":r={color:new cr,position:new It,halfWidth:new It,halfHeight:new It}}return e[t.id]=r,r}}},t={id:gn++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=new It,i=new Ht,n=new Ht;return{setup:function(o,a,s){for(var l=0,c=0,u=0,h=0,p=0,d=0,f=0,m=0,v=s.matrixWorldInverse,g=0,y=o.length;g<y;g++){var x=o[g],_=x.color,w=x.intensity,b=x.distance,M=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)l+=_.r*w,c+=_.g*w,u+=_.b*w;else if(x.isDirectionalLight){if((E=e.get(x)).color.copy(x.color).multiplyScalar(x.intensity),E.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(v),E.shadow=x.castShadow,x.castShadow){var T=x.shadow;E.shadowBias=T.bias,E.shadowRadius=T.radius,E.shadowMapSize=T.mapSize}t.directionalShadowMap[h]=M,t.directionalShadowMatrix[h]=x.shadow.matrix,t.directional[h]=E,h++}else if(x.isSpotLight)(E=e.get(x)).position.setFromMatrixPosition(x.matrixWorld),E.position.applyMatrix4(v),E.color.copy(_).multiplyScalar(w),E.distance=b,E.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(v),E.coneCos=Math.cos(x.angle),E.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),E.decay=x.decay,E.shadow=x.castShadow,x.castShadow&&(T=x.shadow,E.shadowBias=T.bias,E.shadowRadius=T.radius,E.shadowMapSize=T.mapSize),t.spotShadowMap[d]=M,t.spotShadowMatrix[d]=x.shadow.matrix,t.spot[d]=E,d++;else if(x.isRectAreaLight)(E=e.get(x)).color.copy(_).multiplyScalar(w),E.position.setFromMatrixPosition(x.matrixWorld),E.position.applyMatrix4(v),n.identity(),i.copy(x.matrixWorld),i.premultiply(v),n.extractRotation(i),E.halfWidth.set(.5*x.width,0,0),E.halfHeight.set(0,.5*x.height,0),E.halfWidth.applyMatrix4(n),E.halfHeight.applyMatrix4(n),t.rectArea[f]=E,f++;else if(x.isPointLight)(E=e.get(x)).position.setFromMatrixPosition(x.matrixWorld),E.position.applyMatrix4(v),E.color.copy(x.color).multiplyScalar(x.intensity),E.distance=x.distance,E.decay=x.decay,E.shadow=x.castShadow,x.castShadow&&(T=x.shadow,E.shadowBias=T.bias,E.shadowRadius=T.radius,E.shadowMapSize=T.mapSize,E.shadowCameraNear=T.camera.near,E.shadowCameraFar=T.camera.far),t.pointShadowMap[p]=M,t.pointShadowMatrix[p]=x.shadow.matrix,t.point[p]=E,p++;else if(x.isHemisphereLight){var E;(E=e.get(x)).direction.setFromMatrixPosition(x.matrixWorld),E.direction.transformDirection(v),E.direction.normalize(),E.skyColor.copy(x.color).multiplyScalar(w),E.groundColor.copy(x.groundColor).multiplyScalar(w),t.hemi[m]=E,m++}}t.ambient[0]=l,t.ambient[1]=c,t.ambient[2]=u,t.directional.length=h,t.spot.length=d,t.rectArea.length=f,t.point.length=p,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=h,t.hash.pointLength=p,t.hash.spotLength=d,t.hash.rectAreaLength=f,t.hash.hemiLength=m,t.hash.shadowsLength=a.length},state:t}},t=[],r=[];return{init:function(){t.length=0,r.length=0},state:{lightsArray:t,shadowsArray:r,lights:e},setupLights:function(i){e.setup(t,r,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){r.push(e)}}}function xn(e){ni.call(this),this.type="MeshDepthMaterial",this.depthPacking=Pt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function _n(e){ni.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new It,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function wn(e,t,r){for(var i=new er,n=new Ht,o=new Dt,a=new Dt(r,r),s=new It,l=new It,c=1,u=2,h=1+(c|u),p=new Array(h),d=new Array(h),f={},m={0:_,1:x,2:w},v=[new It(1,0,0),new It(-1,0,0),new It(0,0,1),new It(0,0,-1),new It(0,1,0),new It(0,-1,0)],y=[new It(0,1,0),new It(0,1,0),new It(0,1,0),new It(0,1,0),new It(0,0,1),new It(0,0,-1)],b=[new qt,new qt,new qt,new qt,new qt,new qt],M=0;M!==h;++M){var T=0!=(M&c),E=0!=(M&u),S=new xn({depthPacking:At,morphTargets:T,skinning:E});p[M]=S;var R=new _n({morphTargets:T,skinning:E});d[M]=R}var P=this;function A(t,r,i,n,o,a){var s=t.geometry,l=null,h=p,v=t.customDepthMaterial;if(i&&(h=d,v=t.customDistanceMaterial),v)l=v;else{var g=!1;r.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===r.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var y=t.isSkinnedMesh&&r.skinning,x=0;g&&(x|=c),y&&(x|=u),l=h[x]}if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var _=l.uuid,w=r.uuid,b=f[_];void 0===b&&(b={},f[_]=b);var M=b[w];void 0===M&&(M=l.clone(),b[w]=M),l=M}return l.visible=r.visible,l.wireframe=r.wireframe,l.side=null!=r.shadowSide?r.shadowSide:m[r.side],l.clipShadows=r.clipShadows,l.clippingPlanes=r.clippingPlanes,l.clipIntersection=r.clipIntersection,l.wireframeLinewidth=r.wireframeLinewidth,l.linewidth=r.linewidth,i&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(n),l.nearDistance=o,l.farDistance=a),l}function C(r,n,o,a){if(!1!==r.visible){if(r.layers.test(n.layers)&&(r.isMesh||r.isLine||r.isPoints)&&r.castShadow&&(!r.frustumCulled||i.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,r.matrixWorld);var s=t.update(r),c=r.material;if(Array.isArray(c))for(var u=s.groups,h=0,p=u.length;h<p;h++){var d=u[h],f=c[d.materialIndex];if(f&&f.visible){var m=A(r,f,a,l,o.near,o.far);e.renderBufferDirect(o,null,s,m,r,d)}}else c.visible&&(m=A(r,c,a,l,o.near,o.far),e.renderBufferDirect(o,null,s,m,r,null))}for(var v=r.children,g=0,y=v.length;g<y;g++)C(v[g],n,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=g,this.render=function(t,r,c){if(!1!==P.enabled&&(!1!==P.autoUpdate||!1!==P.needsUpdate)&&0!==t.length){e.context;var u,h=e.state;h.disable(3042),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var p=0,d=t.length;p<d;p++){var f=t[p],m=f.shadow,g=f&&f.isPointLight;if(void 0!==m){var x=m.camera;if(o.copy(m.mapSize),o.min(a),g){var _=o.x,w=o.y;b[0].set(2*_,w,_,w),b[1].set(0,w,_,w),b[2].set(3*_,w,_,w),b[3].set(_,w,_,w),b[4].set(3*_,0,_,w),b[5].set(_,0,_,w),o.x*=4,o.y*=2}if(null===m.map){var M={minFilter:_e,magFilter:_e,format:Be};m.map=new Xt(o.x,o.y,M),m.map.texture.name=f.name+".shadowMap",x.updateProjectionMatrix()}m.isSpotLightShadow&&m.update(f);var T=m.map,E=m.matrix;l.setFromMatrixPosition(f.matrixWorld),x.position.copy(l),g?(u=6,E.makeTranslation(-l.x,-l.y,-l.z)):(u=1,s.setFromMatrixPosition(f.target.matrixWorld),x.lookAt(s),x.updateMatrixWorld(),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(x.projectionMatrix),E.multiply(x.matrixWorldInverse)),e.setRenderTarget(T),e.clear();for(var S=0;S<u;S++){if(g){s.copy(x.position),s.add(v[S]),x.up.copy(y[S]),x.lookAt(s),x.updateMatrixWorld();var R=b[S];h.viewport(R)}n.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),i.setFromMatrix(n),C(r,c,x,g)}}else console.warn("THREE.WebGLShadowMap:",f,"has no shadow.")}P.needsUpdate=!1}}}function bn(e,t,r,i,n,o,a){var s,l={};function c(e,t,r,i){var n=1;if((e.width>i||e.height>i)&&(n=i/Math.max(e.width,e.height)),n<1||!0===t){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap){void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));var o=r?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):s,a=t?Ot.floorPowerOfTwo:Math.floor;return o.width=a(n*e.width),o.height=a(n*e.height),o.getContext("2d").drawImage(e,0,0,o.width,o.height),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o.width+"x"+o.height+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function u(e){return Ot.isPowerOfTwo(e.width)&&Ot.isPowerOfTwo(e.height)}function h(e,t){return e.generateMipmaps&&t&&e.minFilter!==_e&&e.minFilter!==Me}function p(t,r,n,o){e.generateMipmap(t),i.get(r).__maxMipLevel=Math.log(Math.max(n,o))*Math.LOG2E}function d(e,r){if(!n.isWebGL2)return e;var i=e;return 6403===e&&(5126===r&&(i=33326),5131===r&&(i=33325),5121===r&&(i=33321)),6407===e&&(5126===r&&(i=34837),5131===r&&(i=34843),5121===r&&(i=32849)),6408===e&&(5126===r&&(i=34836),5131===r&&(i=34842),5121===r&&(i=32856)),33325===i||33326===i||34842===i||34836===i?t.get("EXT_color_buffer_float"):34843!==i&&34837!==i||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),i}function f(e){return e===_e||e===we||e===be?9728:9729}function m(t){var r=t.target;r.removeEventListener("dispose",m),function(t){var r=i.get(t);if(t.image&&r.__image__webglTextureCube)e.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture)}i.remove(t)}(r),r.isVideoTexture&&delete l[r.id],a.memory.textures--}function v(t){var r=t.target;r.removeEventListener("dispose",v),function(t){var r=i.get(t),n=i.get(t.texture);if(t){if(void 0!==n.__webglTexture&&e.deleteTexture(n.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(r.__webglFramebuffer[o]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[o]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}}(r),a.memory.textures--}function g(e,t){var n=i.get(e);if(e.isVideoTexture&&function(e){var t=e.id,r=a.render.frame;l[t]!==r&&(l[t]=r,e.update())}(e),e.version>0&&n.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void x(n,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.activeTexture(33984+t),r.bindTexture(3553,n.__webglTexture)}function y(r,a,s){var l;if(s?(e.texParameteri(r,10242,o.convert(a.wrapS)),e.texParameteri(r,10243,o.convert(a.wrapT)),e.texParameteri(r,10240,o.convert(a.magFilter)),e.texParameteri(r,10241,o.convert(a.minFilter))):(e.texParameteri(r,10242,33071),e.texParameteri(r,10243,33071),a.wrapS===ye&&a.wrapT===ye||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(r,10240,f(a.magFilter)),e.texParameteri(r,10241,f(a.minFilter)),a.minFilter!==_e&&a.minFilter!==Me&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=t.get("EXT_texture_filter_anisotropic")){if(a.type===Oe&&null===t.get("OES_texture_float_linear"))return;if(a.type===De&&null===(n.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(r,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,n.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function x(t,i,s){var l;l=i.isDataTexture3D?32879:3553,void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),a.memory.textures++),r.activeTexture(33984+s),r.bindTexture(l,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment);var f=function(e){return!n.isWebGL2&&(e.wrapS!==ye||e.wrapT!==ye||e.minFilter!==_e&&e.minFilter!==Me)}(i)&&!1===u(i.image),v=c(i.image,f,!1,n.maxTextureSize),g=u(v),x=o.convert(i.format),_=o.convert(i.type),w=d(x,_);y(l,i,g);var b,M=i.mipmaps;if(i.isDepthTexture){if(w=6402,i.type===Oe){if(!n.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");w=36012}else n.isWebGL2&&(w=33189);i.format===We&&6402===w&&i.type!==Ae&&i.type!==Le&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Ae,_=o.convert(i.type)),i.format===Ve&&(w=34041,i.type!==ke&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=ke,_=o.convert(i.type))),r.texImage2D(3553,0,w,v.width,v.height,0,x,_,null)}else if(i.isDataTexture)if(M.length>0&&g){for(var T=0,E=M.length;T<E;T++)b=M[T],r.texImage2D(3553,T,w,b.width,b.height,0,x,_,b.data);i.generateMipmaps=!1,t.__maxMipLevel=M.length-1}else r.texImage2D(3553,0,w,v.width,v.height,0,x,_,v.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(T=0,E=M.length;T<E;T++)b=M[T],i.format!==Be&&i.format!==Ue?r.getCompressedTextureFormats().indexOf(x)>-1?r.compressedTexImage2D(3553,T,w,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,T,w,b.width,b.height,0,x,_,b.data);t.__maxMipLevel=M.length-1}else if(i.isDataTexture3D)r.texImage3D(32879,0,w,v.width,v.height,v.depth,0,x,_,v.data),t.__maxMipLevel=0;else if(M.length>0&&g){for(T=0,E=M.length;T<E;T++)b=M[T],r.texImage2D(3553,T,w,x,_,b);i.generateMipmaps=!1,t.__maxMipLevel=M.length-1}else r.texImage2D(3553,0,w,x,_,v),t.__maxMipLevel=0;h(i,g)&&p(3553,i,v.width,v.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function _(t,n,a,s){var l=o.convert(n.texture.format),c=o.convert(n.texture.type),u=d(l,c);r.texImage2D(s,0,u,n.width,n.height,0,l,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,i.get(n.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function w(t,r,i){if(e.bindRenderbuffer(36161,t),r.depthBuffer&&!r.stencilBuffer){if(i){var n=M(r);e.renderbufferStorageMultisample(36161,n,33189,r.width,r.height)}else e.renderbufferStorage(36161,33189,r.width,r.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(r.depthBuffer&&r.stencilBuffer)i?(n=M(r),e.renderbufferStorageMultisample(36161,n,34041,r.width,r.height)):e.renderbufferStorage(36161,34041,r.width,r.height),e.framebufferRenderbuffer(36160,33306,36161,t);else{var a=d(o.convert(r.texture.format),o.convert(r.texture.type));i?(n=M(r),e.renderbufferStorageMultisample(36161,n,a,r.width,r.height)):e.renderbufferStorage(36161,a,r.width,r.height)}e.bindRenderbuffer(36161,null)}function b(t){var r=i.get(t),n=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),g(r.depthTexture,0);var n=i.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===We)e.framebufferTexture2D(36160,36096,3553,n,0);else{if(r.depthTexture.format!==Ve)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,n,0)}}(r.__webglFramebuffer,t)}else if(n){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),w(r.__webglDepthbuffer[o],t)}else e.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),w(r.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function M(e){return n.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(n.maxSamples,e.samples):0}this.setTexture2D=g,this.setTexture3D=function(e,t){var n=i.get(e);e.version>0&&n.__version!==e.version?x(n,e,t):(r.activeTexture(33984+t),r.bindTexture(32879,n.__webglTexture))},this.setTextureCube=function(t,s){var l=i.get(t);if(6===t.image.length)if(t.version>0&&l.__version!==t.version){l.__image__webglTextureCube||(t.addEventListener("dispose",m),l.__image__webglTextureCube=e.createTexture(),a.memory.textures++),r.activeTexture(33984+s),r.bindTexture(34067,l.__image__webglTextureCube),e.pixelStorei(37440,t.flipY);for(var f=t&&t.isCompressedTexture,v=t.image[0]&&t.image[0].isDataTexture,g=[],x=0;x<6;x++)g[x]=f||v?v?t.image[x].image:t.image[x]:c(t.image[x],!1,!0,n.maxCubemapSize);var _=g[0],w=u(_),b=o.convert(t.format),M=o.convert(t.type),T=d(b,M);for(y(34067,t,w),x=0;x<6;x++)if(f)for(var E,S=g[x].mipmaps,R=0,P=S.length;R<P;R++)E=S[R],t.format!==Be&&t.format!==Ue?r.getCompressedTextureFormats().indexOf(b)>-1?r.compressedTexImage2D(34069+x,R,T,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+x,R,T,E.width,E.height,0,b,M,E.data);else v?r.texImage2D(34069+x,0,T,g[x].width,g[x].height,0,b,M,g[x].data):r.texImage2D(34069+x,0,T,b,M,g[x]);l.__maxMipLevel=f?S.length-1:0,h(t,w)&&p(34067,t,_.width,_.height),l.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(33984+s),r.bindTexture(34067,l.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,t){r.activeTexture(33984+t),r.bindTexture(34067,i.get(e).__webglTexture)},this.setupRenderTarget=function(t){var s=i.get(t),l=i.get(t.texture);t.addEventListener("dispose",v),l.__webglTexture=e.createTexture(),a.memory.textures++;var c=!0===t.isWebGLRenderTargetCube,f=!0===t.isWebGLMultisampleRenderTarget,m=u(t);if(c){s.__webglFramebuffer=[];for(var g=0;g<6;g++)s.__webglFramebuffer[g]=e.createFramebuffer()}else if(s.__webglFramebuffer=e.createFramebuffer(),f)if(n.isWebGL2){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var x=d(o.convert(t.texture.format),o.convert(t.texture.type)),T=M(t);e.renderbufferStorageMultisample(36161,T,x,t.width,t.height),e.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),w(s.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){for(r.bindTexture(34067,l.__webglTexture),y(34067,t.texture,m),g=0;g<6;g++)_(s.__webglFramebuffer[g],t,36064,34069+g);h(t.texture,m)&&p(34067,t.texture,t.width,t.height),r.bindTexture(34067,null)}else r.bindTexture(3553,l.__webglTexture),y(3553,t.texture,m),_(s.__webglFramebuffer,t,36064,3553),h(t.texture,m)&&p(3553,t.texture,t.width,t.height),r.bindTexture(3553,null);t.depthBuffer&&b(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(h(t,u(e))){var n=e.isWebGLRenderTargetCube?34067:3553,o=i.get(t).__webglTexture;r.bindTexture(n,o),p(n,t,e.width,e.height),r.bindTexture(n,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(n.isWebGL2){var r=i.get(t);e.bindFramebuffer(36008,r.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,r.__webglFramebuffer);var o=t.width,a=t.height,s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024),e.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}}function Mn(e,t,r){return{convert:function(e){var i;if(e===ge)return 10497;if(e===ye)return 33071;if(e===xe)return 33648;if(e===_e)return 9728;if(e===we)return 9984;if(e===be)return 9986;if(e===Me)return 9729;if(e===Te)return 9985;if(e===Ee)return 9987;if(e===Se)return 5121;if(e===He)return 32819;if(e===ze)return 32820;if(e===Ie)return 33635;if(e===Re)return 5120;if(e===Pe)return 5122;if(e===Ae)return 5123;if(e===Ce)return 5124;if(e===Le)return 5125;if(e===Oe)return 5126;if(e===De){if(r.isWebGL2)return 5131;if(null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(e===Ne)return 6406;if(e===Ue)return 6407;if(e===Be)return 6408;if(e===Fe)return 6409;if(e===je)return 6410;if(e===We)return 6402;if(e===Ve)return 34041;if(e===qe)return 6403;if(e===L)return 32774;if(e===O)return 32778;if(e===D)return 32779;if(e===I)return 0;if(e===k)return 1;if(e===N)return 768;if(e===U)return 769;if(e===B)return 770;if(e===F)return 771;if(e===j)return 772;if(e===G)return 773;if(e===W)return 774;if(e===V)return 775;if(e===q)return 776;if((e===Xe||e===$e||e===Ye||e===Je)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(e===Xe)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===$e)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Ye)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Je)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===Ze||e===Qe||e===Ke||e===et)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(e===Ze)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Qe)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Ke)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===et)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===tt&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((e===rt||e===it||e===nt||e===ot||e===at||e===st||e===lt||e===ct||e===ut||e===ht||e===pt||e===dt||e===ft||e===mt)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return e;if(e===H||e===z){if(r.isWebGL2){if(e===H)return 32775;if(e===z)return 32776}if(null!==(i=t.get("EXT_blend_minmax"))){if(e===H)return i.MIN_EXT;if(e===z)return i.MAX_EXT}}if(e===ke){if(r.isWebGL2)return 34042;if(null!==(i=t.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Tn(){br.call(this),this.type="Group"}function En(){br.call(this),this.type="Camera",this.matrixWorldInverse=new Ht,this.projectionMatrix=new Ht,this.projectionMatrixInverse=new Ht}function Sn(e,t,r,i){En.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Rn(e){Sn.call(this),this.cameras=e||[]}xn.prototype=Object.create(ni.prototype),xn.prototype.constructor=xn,xn.prototype.isMeshDepthMaterial=!0,xn.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},_n.prototype=Object.create(ni.prototype),_n.prototype.constructor=_n,_n.prototype.isMeshDistanceMaterial=!0,_n.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Tn.prototype=Object.assign(Object.create(br.prototype),{constructor:Tn,isGroup:!0}),En.prototype=Object.assign(Object.create(br.prototype),{constructor:En,isCamera:!0,copy:function(e,t){return br.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new It),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){br.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Sn.prototype=Object.assign(Object.create(En.prototype),{constructor:Sn,isPerspectiveCamera:!0,copy:function(e,t){return En.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ot.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Ot.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Ot.RAD2DEG*Math.atan(Math.tan(.5*Ot.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,i,n,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Ot.DEG2RAD*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;n+=o.offsetX*i/a,t-=o.offsetY*r/s,i*=o.width/a,r*=o.height/s}var l=this.filmOffset;0!==l&&(n+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=br.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Rn.prototype=Object.assign(Object.create(Sn.prototype),{constructor:Rn,isArrayCamera:!0});var Pn,An,Cn,Ln,On,Dn,Hn=new It,zn=new It;function In(e,t,r){Hn.setFromMatrixPosition(t.matrixWorld),zn.setFromMatrixPosition(r.matrixWorld);var i=Hn.distanceTo(zn),n=t.projectionMatrix.elements,o=r.projectionMatrix.elements,a=n[14]/(n[10]-1),s=n[14]/(n[10]+1),l=(n[9]+1)/n[5],c=(n[9]-1)/n[5],u=(n[8]-1)/n[0],h=(o[8]+1)/o[0],p=a*u,d=a*h,f=i/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var v=a+f,g=s+f,y=p-m,x=d+(i-m),_=l*s/g*v,w=c*s/g*v;e.projectionMatrix.makePerspective(y,x,_,w,v,g)}function kn(e){var t=this,r=null,i=null,n=null,o=[],a=new Ht,s=new Ht,l=1,c="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(i=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",x,!1));var u=new Ht,h=new zt,p=new It,d=new Sn;d.bounds=new qt(0,0,.5,1),d.layers.enable(1);var f=new Sn;f.bounds=new qt(.5,0,.5,1),f.layers.enable(2);var m,v,g=new Rn([d,f]);function y(){return null!==r&&!0===r.isPresenting}function x(){if(y()){var i=r.getEyeParameters("left"),n=i.renderWidth*l,o=i.renderHeight*l;v=e.getPixelRatio(),m=e.getSize(),e.setDrawingBufferSize(2*n,o,1),b.start()}else t.enabled&&e.setDrawingBufferSize(m.width,m.height,v),b.stop()}g.layers.enable(1),g.layers.enable(2);var _=[];function w(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),r=0,i=0,n=t.length;r<n;r++){var o=t[r];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(i===e)return o;i++}}}this.enabled=!1,this.getController=function(e){var t=o[e];return void 0===t&&((t=new Tn).matrixAutoUpdate=!1,t.visible=!1,o[e]=t),t},this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e),b.setContext(e)},this.setFramebufferScaleFactor=function(e){l=e},this.setFrameOfReferenceType=function(e){c=e},this.setPoseTarget=function(e){void 0!==e&&(n=e)},this.getCamera=function(e){var t="stage"===c?1.6:0;if(null===r)return e.position.set(0,t,0),e;if(r.depthNear=e.near,r.depthFar=e.far,r.getFrameData(i),"stage"===c){var l=r.stageParameters;l?a.fromArray(l.sittingToStandingTransform):a.makeTranslation(0,t,0)}var m=i.pose,v=null!==n?n:e;if(v.matrix.copy(a),v.matrix.decompose(v.position,v.quaternion,v.scale),null!==m.orientation&&(h.fromArray(m.orientation),v.quaternion.multiply(h)),null!==m.position&&(h.setFromRotationMatrix(a),p.fromArray(m.position),p.applyQuaternion(h),v.position.add(p)),v.updateMatrixWorld(),!1===r.isPresenting)return e;d.near=e.near,f.near=e.near,d.far=e.far,f.far=e.far,d.matrixWorldInverse.fromArray(i.leftViewMatrix),f.matrixWorldInverse.fromArray(i.rightViewMatrix),s.getInverse(a),"stage"===c&&(d.matrixWorldInverse.multiply(s),f.matrixWorldInverse.multiply(s));var y=v.parent;null!==y&&(u.getInverse(y.matrixWorld),d.matrixWorldInverse.multiply(u),f.matrixWorldInverse.multiply(u)),d.matrixWorld.getInverse(d.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),d.projectionMatrix.fromArray(i.leftProjectionMatrix),f.projectionMatrix.fromArray(i.rightProjectionMatrix),In(g,d,f);var x=r.getLayers();if(x.length){var b=x[0];null!==b.leftBounds&&4===b.leftBounds.length&&d.bounds.fromArray(b.leftBounds),null!==b.rightBounds&&4===b.rightBounds.length&&f.bounds.fromArray(b.rightBounds)}return function(){for(var e=0;e<o.length;e++){var t=o[e],r=w(e);if(void 0!==r&&void 0!==r.pose){if(null===r.pose)return;var i=r.pose;!1===i.hasPosition&&t.position.set(.2,-.6,-.05),null!==i.position&&t.position.fromArray(i.position),null!==i.orientation&&t.quaternion.fromArray(i.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(a),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var n="Daydream Controller"===r.id?0:1;_[e]!==r.buttons[n].pressed&&(_[e]=r.buttons[n].pressed,!0===_[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),g},this.getStandingMatrix=function(){return a},this.isPresenting=y;var b=new dr;this.setAnimationLoop=function(e){b.setAnimationLoop(e)},this.submitFrame=function(){y()&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",x)}}function Nn(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,n=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=null,h=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=oe,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,d,g,y,b,M,T,O,D,H,z,I,k,N,U,B,F,j,G=this,W=!1,V=null,q=null,te=null,re=-1,ie={geometry:null,program:null,wireframe:!1},ne=null,ae=null,se=new qt,le=new qt,ce=null,ue=0,he=t.width,pe=t.height,de=1,fe=new qt(0,0,he,pe),me=new qt(0,0,he,pe),ve=!1,ge=new er,ye=new function(){var e=this,t=null,r=0,i=!1,n=!1,o=new Kt,a=new kt,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(t,r,i,n){var l=null!==t?t.length:0,c=null;if(0!==l){if(c=s.value,!0!==n||null===c){var u=i+4*l,h=r.matrixWorldInverse;a.getNormalMatrix(h),(null===c||c.length<u)&&(c=new Float32Array(u));for(var p=0,d=i;p!==l;++p,d+=4)o.copy(t[p]).applyMatrix4(h,a),o.normal.toArray(c,d),c[d+3]=o.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=l,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,o){var a=0!==e.length||n||0!==r||i;return i=n,t=c(e,o,0),r=e.length,a},this.beginShadows=function(){n=!0,c(null)},this.endShadows=function(){n=!1,l()},this.setState=function(e,o,a,u,h,p){if(!i||null===e||0===e.length||n&&!a)n?c(null):l();else{var d=n?0:r,f=4*d,m=h.clippingState||null;s.value=m,m=c(e,u,f,p);for(var v=0;v!==f;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=d}}},xe=!1,_e=!1,we=new Ht,be=new It;function Me(){return null===q?de:1}try{var Te={alpha:i,depth:n,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c};if(t.addEventListener("webglcontextlost",Ae,!1),t.addEventListener("webglcontextrestored",Ce,!1),null===(p=r||t.getContext("webgl",Te)||t.getContext("experimental-webgl",Te)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function Ee(){d=new function(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var i;switch(r){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(r)}return null===i&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=i,i}}}(p),(g=new function(e,t,r){var i;function n(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==r.precision?r.precision:"highp",s=n(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var l=!0===r.logarithmicDepthBuffer,c=e.getParameter(34930),u=e.getParameter(35660),h=e.getParameter(3379),p=e.getParameter(34076),d=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),v=e.getParameter(36349),g=u>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==i)return i;var r=t.get("EXT_texture_filter_anisotropic");return i=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:o?e.getParameter(36183):0}}(p,d,e)).isWebGL2||(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),j=new Mn(p,d,g),(y=new function(e,t,r,i){var n=new function(){var t=!1,r=new qt,i=null,n=new qt(0,0,0,0);return{setMask:function(r){i===r||t||(e.colorMask(r,r,r,r),i=r)},setLocked:function(e){t=e},setClear:function(t,i,o,a,s){!0===s&&(t*=a,i*=a,o*=a),r.set(t,i,o,a),!1===n.equals(r)&&(e.clearColor(t,i,o,a),n.copy(r))},reset:function(){t=!1,i=null,n.set(-1,0,0,0)}}},o=new function(){var t=!1,r=null,i=null,n=null;return{setTest:function(e){e?oe(2929):ae(2929)},setMask:function(i){r===i||t||(e.depthMask(i),r=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case X:e.depthFunc(512);break;case $:e.depthFunc(519);break;case Y:e.depthFunc(513);break;case J:e.depthFunc(515);break;case Z:e.depthFunc(514);break;case Q:e.depthFunc(518);break;case K:e.depthFunc(516);break;case ee:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){n!==t&&(e.clearDepth(t),n=t)},reset:function(){t=!1,r=null,i=null,n=null}}},a=new function(){var t=!1,r=null,i=null,n=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(e){e?oe(2960):ae(2960)},setMask:function(i){r===i||t||(e.stencilMask(i),r=i)},setFunc:function(t,r,a){i===t&&n===r&&o===a||(e.stencilFunc(t,r,a),i=t,n=r,o=a)},setOp:function(t,r,i){a===t&&s===r&&l===i||(e.stencilOp(t,r,i),a=t,s=r,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,r=null,i=null,n=null,o=null,a=null,s=null,l=null,c=null}}},s=e.getParameter(34921),l=new Uint8Array(s),c=new Uint8Array(s),u=new Uint8Array(s),h={},p=null,d=null,g=null,y=null,x=null,b=null,M=null,T=null,O=null,D=null,H=!1,z=null,I=null,k=null,N=null,U=null,B=e.getParameter(35661),F=!1,j=0,G=e.getParameter(7938);-1!==G.indexOf("WebGL")?(j=parseFloat(/^WebGL\ ([0-9])/.exec(G)[1]),F=j>=1):-1!==G.indexOf("OpenGL ES")&&(j=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(G)[1]),F=j>=2);var W=null,V={},q=new qt,te=new qt;function re(t,r,i){var n=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<i;a++)e.texImage2D(r+a,0,6408,1,1,0,6408,5121,n);return o}var ie={};function ne(r,n){l[r]=1,0===c[r]&&(e.enableVertexAttribArray(r),c[r]=1),u[r]!==n&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](r,n),u[r]=n)}function oe(t){!0!==h[t]&&(e.enable(t),h[t]=!0)}function ae(t){!1!==h[t]&&(e.disable(t),h[t]=!1)}function se(t,i,n,o,a,s,l,c){if(t!==E){if(g||(oe(3042),g=!0),t===C)a=a||i,s=s||n,l=l||o,i===x&&a===T||(e.blendEquationSeparate(r.convert(i),r.convert(a)),x=i,T=a),n===b&&o===M&&s===O&&l===D||(e.blendFuncSeparate(r.convert(n),r.convert(o),r.convert(s),r.convert(l)),b=n,M=o,O=s,D=l),y=t,H=null;else if(t!==y||c!==H){if(x===L&&T===L||(e.blendEquation(32774),x=L,T=L),c)switch(t){case S:e.blendFuncSeparate(1,771,1,771);break;case R:e.blendFunc(1,1);break;case P:e.blendFuncSeparate(0,0,769,771);break;case A:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case S:e.blendFuncSeparate(770,771,1,771);break;case R:e.blendFunc(770,1);break;case P:e.blendFunc(0,769);break;case A:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}b=null,M=null,O=null,D=null,y=t,H=c}}else g&&(ae(3042),g=!1)}function le(t){z!==t&&(t?e.frontFace(2304):e.frontFace(2305),z=t)}function ce(t){t!==f?(oe(2884),t!==I&&(t===m?e.cullFace(1029):t===v?e.cullFace(1028):e.cullFace(1032))):ae(2884),I=t}function ue(t,r,i){t?(oe(32823),N===r&&U===i||(e.polygonOffset(r,i),N=r,U=i)):ae(32823)}function he(t){void 0===t&&(t=33984+B-1),W!==t&&(e.activeTexture(t),W=t)}return ie[3553]=re(3553,3553,1),ie[34067]=re(34067,34069,6),n.setClear(0,0,0,1),o.setClear(1),a.setClear(0),oe(2929),o.setFunc(J),le(!1),ce(m),oe(2884),se(E),{buffers:{color:n,depth:o,stencil:a},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(e){ne(e,0)},enableAttributeAndDivisor:ne,disableUnusedAttributes:function(){for(var t=0,r=c.length;t!==r;++t)c[t]!==l[t]&&(e.disableVertexAttribArray(t),c[t]=0)},enable:oe,disable:ae,getCompressedTextureFormats:function(){if(null===p&&(p=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var r=e.getParameter(34467),i=0;i<r.length;i++)p.push(r[i]);return p},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:se,setMaterial:function(e,t){e.side===w?ae(2884):oe(2884);var r=e.side===_;t&&(r=!r),le(r),e.blending===S&&!1===e.transparent?se(E):se(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),n.setMask(e.colorWrite),ue(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:le,setCullFace:ce,setLineWidth:function(t){t!==k&&(F&&e.lineWidth(t),k=t)},setPolygonOffset:ue,setScissorTest:function(e){e?oe(3089):ae(3089)},activeTexture:he,bindTexture:function(t,r){null===W&&he();var i=V[W];void 0===i&&(i={type:void 0,texture:void 0},V[W]=i),i.type===t&&i.texture===r||(e.bindTexture(t,r||ie[t]),i.type=t,i.texture=r)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===q.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),q.copy(t))},viewport:function(t){!1===te.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),te.copy(t))},reset:function(){for(var t=0;t<c.length;t++)1===c[t]&&(e.disableVertexAttribArray(t),c[t]=0);h={},p=null,W=null,V={},d=null,y=null,z=null,I=null,n.reset(),o.reset(),a.reset()}}}(p,d,j,g)).scissor(le.copy(me).multiplyScalar(de)),y.viewport(se.copy(fe).multiplyScalar(de)),b=new function(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,r,i){switch(i=i||1,t.calls++,r){case 4:t.triangles+=i*(e/3);break;case 5:case 6:t.triangles+=i*(e-2);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}(p),M=new function(){var e=new WeakMap;return{get:function(t){var r=e.get(t);return void 0===r&&(r={},e.set(t,r)),r},remove:function(t){e.delete(t)},update:function(t,r,i){e.get(t)[r]=i},dispose:function(){e=new WeakMap}}},T=new bn(p,d,y,M,g,j,b),O=new function(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(r){r.isInterleavedBufferAttribute&&(r=r.data);var i=t.get(r);i&&(e.deleteBuffer(i.buffer),t.delete(r))},update:function(r,i){r.isInterleavedBufferAttribute&&(r=r.data);var n=t.get(r);void 0===n?t.set(r,function(t,r){var i=t.array,n=t.dynamic?35048:35044,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,i,n),t.onUploadCallback();var a=5126;return i instanceof Float32Array?a=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?a=5123:i instanceof Int16Array?a=5122:i instanceof Uint32Array?a=5125:i instanceof Int32Array?a=5124:i instanceof Int8Array?a=5120:i instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(r,i)):n.version<r.version&&(function(t,r,i){var n=r.array,o=r.updateRange;e.bindBuffer(i,t),!1===r.dynamic?e.bufferData(i,n,35044):-1===o.count?e.bufferSubData(i,0,n):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,o.offset*n.BYTES_PER_ELEMENT,n.subarray(o.offset,o.offset+o.count)),o.count=-1)}(n.buffer,r,i),n.version=r.version)}}}(p),D=new function(e,t,r){var i={},n={};function o(e){var a=e.target,s=i[a.id];for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);a.removeEventListener("dispose",o),delete i[a.id];var c=n[s.id];c&&(t.remove(c),delete n[s.id]),r.memory.geometries--}return{get:function(e,t){var n=i[t.id];return n||(t.addEventListener("dispose",o),t.isBufferGeometry?n=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Br).setFromObject(e)),n=t._bufferGeometry),i[t.id]=n,r.memory.geometries++,n)},update:function(e){var r=e.index,i=e.attributes;for(var n in null!==r&&t.update(r,34963),i)t.update(i[n],34962);var o=e.morphAttributes;for(var n in o)for(var a=o[n],s=0,l=a.length;s<l;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var r=n[e.id];if(r)return r;var i,o=[],a=e.index,s=e.attributes;if(null!==a)for(var l=0,c=(i=a.array).length;l<c;l+=3){var u=i[l+0],h=i[l+1],p=i[l+2];o.push(u,h,h,p,p,u)}else for(l=0,c=(i=s.position.array).length/3-1;l<c;l+=3)u=l+0,h=l+1,p=l+2,o.push(u,h,h,p,p,u);return r=new(Nr(o)>65535?Hr:Or)(o,1),t.update(r,34963),n[e.id]=r,r}}}(p,O,b),H=new function(e,t){var r={};return{update:function(i){var n=t.render.frame,o=i.geometry,a=e.get(i,o);return r[a.id]!==n&&(o.isGeometry&&a.updateFromObject(i),e.update(a),r[a.id]=n),a},dispose:function(){r={}}}}(D,b),U=new function(e){var t={},r=new Float32Array(8);return{update:function(i,n,o,a){var s=i.morphTargetInfluences,l=s.length,c=t[n.id];if(void 0===c){c=[];for(var u=0;u<l;u++)c[u]=[u,0];t[n.id]=c}var h=o.morphTargets&&n.morphAttributes.position,p=o.morphNormals&&n.morphAttributes.normal;for(u=0;u<l;u++)0!==(d=c[u])[1]&&(h&&n.removeAttribute("morphTarget"+u),p&&n.removeAttribute("morphNormal"+u));for(u=0;u<l;u++)(d=c[u])[0]=u,d[1]=s[u];for(c.sort(ui),u=0;u<8;u++){var d;if(d=c[u]){var f=d[0],m=d[1];if(m){h&&n.addAttribute("morphTarget"+u,h[f]),p&&n.addAttribute("morphNormal"+u,p[f]),r[u]=m;continue}}r[u]=0}a.getUniforms().setValue(e,"morphTargetInfluences",r)}}}(p),z=new dn(G,d,g),I=new function(){var e={};function t(r){var i=r.target;i.removeEventListener("dispose",t),delete e[i.id]}return{get:function(r,i){var n,o=e[r.id];return void 0===o?(n=new vn,e[r.id]={},e[r.id][i.id]=n,r.addEventListener("dispose",t)):void 0===(n=o[i.id])&&(n=new vn,o[i.id]=n),n},dispose:function(){e={}}}},k=new function(){var e={};function t(r){var i=r.target;i.removeEventListener("dispose",t),delete e[i.id]}return{get:function(r,i){var n;return void 0===e[r.id]?(n=new yn,e[r.id]={},e[r.id][i.id]=n,r.addEventListener("dispose",t)):void 0===e[r.id][i.id]?(n=new yn,e[r.id][i.id]=n):n=e[r.id][i.id],n},dispose:function(){e={}}}},N=new function(e,t,r,i){var n,o,a=new cr(0),s=0,l=null,c=0;function u(e,r){t.buffers.color.setClear(e.r,e.g,e.b,r,i)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),u(a,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){u(a,s=e)},render:function(t,i,h,p){var d=i.background;if(null===d?(u(a,s),l=null,c=0):d&&d.isColor&&(u(d,1),p=!0,l=null,c=0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){void 0===o&&((o=new ci(new jr(1,1,1),new oi({type:"BackgroundCubeMaterial",uniforms:rr(pr.cube.uniforms),vertexShader:pr.cube.vertexShader,fragmentShader:pr.cube.fragmentShader,side:_,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),r.update(o));var f=d.isWebGLRenderTargetCube?d.texture:d;o.material.uniforms.tCube.value=f,o.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1,l===d&&c===f.version||(o.material.needsUpdate=!0,l=d,c=f.version),t.unshift(o,o.geometry,o.material,0,0,null)}else d&&d.isTexture&&(void 0===n&&((n=new ci(new Wr(2,2),new oi({type:"BackgroundMaterial",uniforms:rr(pr.background.uniforms),vertexShader:pr.background.vertexShader,fragmentShader:pr.background.fragmentShader,side:x,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(n.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(n)),n.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),n.material.uniforms.uvTransform.value.copy(d.matrix),l===d&&c===d.version||(n.material.needsUpdate=!0,l=d,c=d.version),t.unshift(n,n.geometry,n.material,0,0,null))}}}(G,y,H,s),B=new function(e,t,r,i){var n;this.setMode=function(e){n=e},this.render=function(t,i){e.drawArrays(n,t,i),r.update(i,n)},this.renderInstances=function(o,a,s){var l;if(i.isWebGL2)l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[i.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](n,a,s,o.maxInstancedCount),r.update(s,n,o.maxInstancedCount)}}(p,d,b,g),F=new function(e,t,r,i){var n,o,a;this.setMode=function(e){n=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,i){e.drawElements(n,i,o,t*a),r.update(i,n)},this.renderInstances=function(s,l,c){var u;if(i.isWebGL2)u=e;else if(null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[i.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](n,c,o,l*a,s.maxInstancedCount),r.update(c,n,s.maxInstancedCount)}}(p,d,b,g),b.programs=z.programs,G.context=p,G.capabilities=g,G.extensions=d,G.properties=M,G.renderLists=I,G.state=y,G.info=b}Ee();var Re=null;"undefined"!=typeof navigator&&(Re="xr"in navigator?new function(e){var t=e.context,r=null,i=null,n=1,o=null,a="stage",s=null,l=[],c=[];function u(){return null!==i&&null!==o}var h=new Sn;h.layers.enable(1),h.viewport=new qt;var p=new Sn;p.layers.enable(2),p.viewport=new qt;var d=new Rn([h,p]);function f(e){var t=l[c.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function m(){e.setFramebuffer(null),y.stop()}function v(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}d.layers.enable(1),d.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=l[e];return void 0===t&&((t=new Tn).matrixAutoUpdate=!1,t.visible=!1,l[e]=t),t},this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setFramebufferScaleFactor=function(e){n=e},this.setFrameOfReferenceType=function(e){a=e},this.setSession=function(r){null!==(i=r)&&(i.addEventListener("select",f),i.addEventListener("selectstart",f),i.addEventListener("selectend",f),i.addEventListener("end",m),i.baseLayer=new XRWebGLLayer(i,t,{framebufferScaleFactor:n}),i.requestFrameOfReference(a).then(function(t){o=t,e.setFramebuffer(i.baseLayer.framebuffer),y.setContext(i),y.start()}),c=i.getInputSources(),i.addEventListener("inputsourceschange",function(){c=i.getInputSources(),console.log(c);for(var e=0;e<l.length;e++)l[e].userData.inputSource=c[e]}))},this.getCamera=function(e){if(u()){var t=e.parent,r=d.cameras;v(d,t);for(var i=0;i<r.length;i++)v(r[i],t);e.matrixWorld.copy(d.matrixWorld);for(var n=e.children,o=(i=0,n.length);i<o;i++)n[i].updateMatrixWorld(!0);return In(d,h,p),d}return e},this.isPresenting=u;var g=null,y=new dr;y.setAnimationLoop(function(e,t){if(null!==(s=t.getDevicePose(o)))for(var r=i.baseLayer,n=t.views,a=0;a<n.length;a++){var u=n[a],h=r.getViewport(u),p=s.getViewMatrix(u),f=d.cameras[a];f.matrix.fromArray(p).getInverse(f.matrix),f.projectionMatrix.fromArray(u.projectionMatrix),f.viewport.set(h.x,h.y,h.width,h.height),0===a&&d.matrix.copy(f.matrix)}for(a=0;a<l.length;a++){var m=l[a],v=c[a];if(v){var y=t.getInputPose(v,o);if(null!==y){"targetRay"in y?m.matrix.elements=y.targetRay.transformMatrix:"pointerMatrix"in y&&(m.matrix.elements=y.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}g&&g(e)}),this.setAnimationLoop=function(e){g=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}(G):new kn(G)),this.vr=Re;var Pe=new wn(G,H,g.maxTextureSize);function Ae(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),W=!0}function Ce(){console.log("THREE.WebGLRenderer: Context Restored."),W=!1,Ee()}function Le(e){var t=e.target;t.removeEventListener("dispose",Le),function(e){He(e),M.remove(e)}(t)}function He(e){var t=M.get(e).program;e.program=void 0,void 0!==t&&z.releaseProgram(t)}this.shadowMap=Pe,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=d.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=d.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return de},this.setPixelRatio=function(e){void 0!==e&&(de=e,this.setSize(he,pe,!1))},this.getSize=function(){return{width:he,height:pe}},this.setSize=function(e,r,i){Re.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(he=e,pe=r,t.width=e*de,t.height=r*de,!1!==i&&(t.style.width=e+"px",t.style.height=r+"px"),this.setViewport(0,0,e,r))},this.getDrawingBufferSize=function(){return{width:he*de,height:pe*de}},this.setDrawingBufferSize=function(e,r,i){he=e,pe=r,de=i,t.width=e*i,t.height=r*i,this.setViewport(0,0,e,r)},this.getCurrentViewport=function(){return se},this.setViewport=function(e,t,r,i){fe.set(e,pe-t-i,r,i),y.viewport(se.copy(fe).multiplyScalar(de))},this.setScissor=function(e,t,r,i){me.set(e,pe-t-i,r,i),y.scissor(le.copy(me).multiplyScalar(de))},this.setScissorTest=function(e){y.setScissorTest(ve=e)},this.getClearColor=function(){return N.getClearColor()},this.setClearColor=function(){N.setClearColor.apply(N,arguments)},this.getClearAlpha=function(){return N.getClearAlpha()},this.setClearAlpha=function(){N.setClearAlpha.apply(N,arguments)},this.clear=function(e,t,r){var i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===r||r)&&(i|=1024),p.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ae,!1),t.removeEventListener("webglcontextrestored",Ce,!1),I.dispose(),k.dispose(),M.dispose(),H.dispose(),Re.dispose(),ke.stop()},this.renderBufferImmediate=function(e,t){y.initAttributes();var r=M.get(e);e.hasPositions&&!r.position&&(r.position=p.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=p.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=p.createBuffer()),e.hasColors&&!r.color&&(r.color=p.createBuffer());var i=t.getAttributes();e.hasPositions&&(p.bindBuffer(34962,r.position),p.bufferData(34962,e.positionArray,35048),y.enableAttribute(i.position),p.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(p.bindBuffer(34962,r.normal),p.bufferData(34962,e.normalArray,35048),y.enableAttribute(i.normal),p.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(p.bindBuffer(34962,r.uv),p.bufferData(34962,e.uvArray,35048),y.enableAttribute(i.uv),p.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(p.bindBuffer(34962,r.color),p.bufferData(34962,e.colorArray,35048),y.enableAttribute(i.color),p.vertexAttribPointer(i.color,3,5126,!1,0,0)),y.disableUnusedAttributes(),p.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,r,i,n,o){var a=n.isMesh&&n.normalMatrix.determinant()<0;y.setMaterial(i,a);var s=je(e,t,i,n),l=!1;ie.geometry===r.id&&ie.program===s.id&&ie.wireframe===(!0===i.wireframe)||(ie.geometry=r.id,ie.program=s.id,ie.wireframe=!0===i.wireframe,l=!0),n.morphTargetInfluences&&(U.update(n,r,i,s),l=!0);var c,u=r.index,h=r.attributes.position,f=1;!0===i.wireframe&&(u=D.getWireframeAttribute(r),f=2);var m=B;null!==u&&(c=O.get(u),(m=F).setIndex(c)),l&&(function(e,t,r){if(r&&r.isInstancedBufferGeometry&!g.isWebGL2&&null===d.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{y.initAttributes();var i=r.attributes,n=t.getAttributes(),o=e.defaultAttributeValues;for(var a in n){var s=n[a];if(s>=0){var l=i[a];if(void 0!==l){var c=l.normalized,u=l.itemSize,h=O.get(l);if(void 0===h)continue;var f=h.buffer,m=h.type,v=h.bytesPerElement;if(l.isInterleavedBufferAttribute){var x=l.data,_=x.stride,w=l.offset;x&&x.isInstancedInterleavedBuffer?(y.enableAttributeAndDivisor(s,x.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=x.meshPerAttribute*x.count)):y.enableAttribute(s),p.bindBuffer(34962,f),p.vertexAttribPointer(s,u,m,c,_*v,w*v)}else l.isInstancedBufferAttribute?(y.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=l.meshPerAttribute*l.count)):y.enableAttribute(s),p.bindBuffer(34962,f),p.vertexAttribPointer(s,u,m,c,0,0)}else if(void 0!==o){var b=o[a];if(void 0!==b)switch(b.length){case 2:p.vertexAttrib2fv(s,b);break;case 3:p.vertexAttrib3fv(s,b);break;case 4:p.vertexAttrib4fv(s,b);break;default:p.vertexAttrib1fv(s,b)}}}}y.disableUnusedAttributes()}}(i,s,r),null!==u&&p.bindBuffer(34963,c.buffer));var v=1/0;null!==u?v=u.count:void 0!==h&&(v=h.count);var x=r.drawRange.start*f,_=r.drawRange.count*f,w=null!==o?o.start*f:0,b=null!==o?o.count*f:1/0,M=Math.max(x,w),T=Math.min(v,x+_,w+b)-1,E=Math.max(0,T-M+1);if(0!==E){if(n.isMesh)if(!0===i.wireframe)y.setLineWidth(i.wireframeLinewidth*Me()),m.setMode(1);else switch(n.drawMode){case yt:m.setMode(4);break;case xt:m.setMode(5);break;case _t:m.setMode(6)}else if(n.isLine){var S=i.linewidth;void 0===S&&(S=1),y.setLineWidth(S*Me()),n.isLineSegments?m.setMode(1):n.isLineLoop?m.setMode(2):m.setMode(3)}else n.isPoints?m.setMode(0):n.isSprite&&m.setMode(4);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&m.renderInstances(r,M,E):m.render(M,E)}},this.compile=function(e,t){(h=k.get(e,t)).init(),e.traverse(function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))}),h.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var r=0;r<t.material.length;r++)Fe(t.material[r],e.fog,t);else Fe(t.material,e.fog,t)})};var ze,Ie=null,ke=new dr;function Ne(e,t,r,i){for(var n=0,o=e.length;n<o;n++){var a=e[n],s=a.object,l=a.geometry,c=void 0===i?a.material:i,u=a.group;if(r.isArrayCamera){ae=r;for(var p=r.cameras,d=0,f=p.length;d<f;d++){var m=p[d];if(s.layers.test(m.layers)){if("viewport"in m)y.viewport(se.copy(m.viewport));else{var v=m.bounds,g=v.x*he,x=v.y*pe,_=v.z*he,w=v.w*pe;y.viewport(se.set(g,x,_,w).multiplyScalar(de))}h.setupLights(m),Ue(s,t,m,l,c,u)}}}else ae=null,Ue(s,t,r,l,c,u)}}function Ue(e,t,r,i,n,o){if(e.onBeforeRender(G,t,r,i,n,o),h=k.get(t,ae||r),e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){y.setMaterial(n);var a=je(r,t.fog,n,e);ie.geometry=null,ie.program=null,ie.wireframe=!1,function(e,t){e.render(function(e){G.renderBufferImmediate(e,t)})}(e,a)}else G.renderBufferDirect(r,t.fog,i,n,e,o);e.onAfterRender(G,t,r,i,n,o),h=k.get(t,ae||r)}function Fe(e,t,r){var i=M.get(e),n=h.state.lights,o=h.state.shadowsArray,a=i.lightsHash,s=n.state.hash,l=z.getParameters(e,n.state,o,t,ye.numPlanes,ye.numIntersection,r),c=z.getProgramCode(e,l),u=i.program,p=!0;if(void 0===u)e.addEventListener("dispose",Le);else if(u.code!==c)He(e);else if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,p=!1;else{if(void 0!==l.shaderID)return;p=!1}if(p){if(l.shaderID){var d=pr[l.shaderID];i.shader={name:e.type,uniforms:rr(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader,G),c=z.getProgramCode(e,l),u=z.acquireProgram(e,i.shader,l,c),i.program=u,e.program=u}var f=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var m=0;m<G.maxMorphTargets;m++)f["morphTarget"+m]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,m=0;m<G.maxMorphNormals;m++)f["morphNormal"+m]>=0&&e.numSupportedMorphNormals++;var v=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=ye.numPlanes,i.numIntersection=ye.numIntersection,v.clippingPlanes=ye.uniform),i.fog=t,void 0===a&&(i.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,e.lights&&(v.ambientLightColor.value=n.state.ambient,v.directionalLights.value=n.state.directional,v.spotLights.value=n.state.spot,v.rectAreaLights.value=n.state.rectArea,v.pointLights.value=n.state.point,v.hemisphereLights.value=n.state.hemi,v.directionalShadowMap.value=n.state.directionalShadowMap,v.directionalShadowMatrix.value=n.state.directionalShadowMatrix,v.spotShadowMap.value=n.state.spotShadowMap,v.spotShadowMatrix.value=n.state.spotShadowMatrix,v.pointShadowMap.value=n.state.pointShadowMap,v.pointShadowMatrix.value=n.state.pointShadowMatrix);var g=i.program.getUniforms(),y=rn.seqWithValue(g.seq,v);i.uniformsList=y}function je(e,t,r,i){ue=0;var n=M.get(r),o=h.state.lights,a=n.lightsHash,s=o.state.hash;if(xe&&(_e||e!==ne)){var l=e===ne&&r.id===re;ye.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,n,l)}!1===r.needsUpdate&&(void 0===n.program?r.needsUpdate=!0:r.fog&&n.fog!==t?r.needsUpdate=!0:(!r.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===n.numClippingPlanes||n.numClippingPlanes===ye.numPlanes&&n.numIntersection===ye.numIntersection)||(r.needsUpdate=!0)),r.needsUpdate&&(Fe(r,t,i),r.needsUpdate=!1);var c,u,d=!1,f=!1,m=!1,v=n.program,x=v.getUniforms(),w=n.shader.uniforms;if(y.useProgram(v.program)&&(d=!0,f=!0,m=!0),r.id!==re&&(re=r.id,f=!0),d||ne!==e){if(x.setValue(p,"projectionMatrix",e.projectionMatrix),g.logarithmicDepthBuffer&&x.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),ne!==e&&(ne=e,f=!0,m=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var b=x.map.cameraPosition;void 0!==b&&b.setValue(p,be.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&x.setValue(p,"viewMatrix",e.matrixWorldInverse)}if(r.skinning){x.setOptional(p,i,"bindMatrix"),x.setOptional(p,i,"bindMatrixInverse");var T=i.skeleton;if(T){var E=T.bones;if(g.floatVertexTextures){if(void 0===T.boneTexture){var S=Math.sqrt(4*E.length);S=Ot.ceilPowerOfTwo(S),S=Math.max(S,4);var R=new Float32Array(S*S*4);R.set(T.boneMatrices);var P=new Jt(R,S,S,Be,Oe);P.needsUpdate=!0,T.boneMatrices=R,T.boneTexture=P,T.boneTextureSize=S}x.setValue(p,"boneTexture",T.boneTexture),x.setValue(p,"boneTextureSize",T.boneTextureSize)}else x.setOptional(p,T,"boneMatrices")}}return f&&(x.setValue(p,"toneMappingExposure",G.toneMappingExposure),x.setValue(p,"toneMappingWhitePoint",G.toneMappingWhitePoint),r.lights&&(u=m,(c=w).ambientLightColor.needsUpdate=u,c.directionalLights.needsUpdate=u,c.pointLights.needsUpdate=u,c.spotLights.needsUpdate=u,c.rectAreaLights.needsUpdate=u,c.hemisphereLights.needsUpdate=u),t&&r.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(w,t),r.isMeshBasicMaterial?Ge(w,r):r.isMeshLambertMaterial?(Ge(w,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(w,r)):r.isMeshPhongMaterial?(Ge(w,r),r.isMeshToonMaterial?function(e,t){We(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(w,r):We(w,r)):r.isMeshStandardMaterial?(Ge(w,r),r.isMeshPhysicalMaterial?function(e,t){Ve(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(w,r):Ve(w,r)):r.isMeshMatcapMaterial?(Ge(w,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===_&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===_&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,r)):r.isMeshDepthMaterial?(Ge(w,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,r)):r.isMeshDistanceMaterial?(Ge(w,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(w,r)):r.isMeshNormalMaterial?(Ge(w,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===_&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===_&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(w,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(w,r)):r.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*de,e.scale.value=.5*pe,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(w,r):r.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(w,r):r.isShadowMaterial&&(w.color.value=r.color,w.opacity.value=r.opacity),void 0!==w.ltc_1&&(w.ltc_1.value=hr.LTC_1),void 0!==w.ltc_2&&(w.ltc_2.value=hr.LTC_2),rn.upload(p,n.uniformsList,w,G)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(rn.upload(p,n.uniformsList,w,G),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&x.setValue(p,"center",i.center),x.setValue(p,"modelViewMatrix",i.modelViewMatrix),x.setValue(p,"normalMatrix",i.normalMatrix),x.setValue(p,"modelMatrix",i.matrixWorld),v}function Ge(e,t){var r;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=M.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}function We(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===_&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===_&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Ve(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===_&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===_&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}ke.setAnimationLoop(function(e){Re.isPresenting()||Ie&&Ie(e)}),"undefined"!=typeof window&&ke.setContext(window),this.setAnimationLoop=function(e){Ie=e,Re.setAnimationLoop(e),ke.start()},this.render=function(e,t,r,i){if(t&&t.isCamera){if(!W){ie.geometry=null,ie.program=null,ie.wireframe=!1,re=-1,ne=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Re.enabled&&(t=Re.getCamera(t)),(h=k.get(e,t)).init(),e.onBeforeRender(G,e,t,r),we.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ge.setFromMatrix(we),_e=this.localClippingEnabled,xe=ye.init(this.clippingPlanes,_e,t),(u=I.get(e,t)).init(),function e(t,r,i,n){if(!1!==t.visible){if(t.layers.test(r.layers))if(t.isGroup)i=t.renderOrder;else if(t.isLight)h.pushLight(t),t.castShadow&&h.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||ge.intersectsSprite(t)){n&&be.setFromMatrixPosition(t.matrixWorld).applyMatrix4(we);var o=H.update(t),a=t.material;u.push(t,o,a,i,be.z,null)}}else if(t.isImmediateRenderObject)n&&be.setFromMatrixPosition(t.matrixWorld).applyMatrix4(we),u.push(t,null,t.material,i,be.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||ge.intersectsObject(t))){n&&be.setFromMatrixPosition(t.matrixWorld).applyMatrix4(we);o=H.update(t),a=t.material;if(Array.isArray(a))for(var s=o.groups,l=0,c=s.length;l<c;l++){var p=s[l],d=a[p.materialIndex];d&&d.visible&&u.push(t,o,d,i,be.z,p)}else a.visible&&u.push(t,o,a,i,be.z,null)}var f=t.children;for(l=0,c=f.length;l<c;l++)e(f[l],r,i,n)}}(e,t,0,G.sortObjects),!0===G.sortObjects&&u.sort(),xe&&ye.beginShadows();var n=h.state.shadowsArray;Pe.render(n,e,t),h.setupLights(t),xe&&ye.endShadows(),this.info.autoReset&&this.info.reset(),void 0===r&&(r=null),this.setRenderTarget(r),N.render(u,e,t,i);var o=u.opaque,a=u.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&Ne(o,e,t,s),a.length&&Ne(a,e,t,s)}else o.length&&Ne(o,e,t),a.length&&Ne(a,e,t);r&&(T.updateRenderTargetMipmap(r),T.updateMultisampleRenderTarget(r)),y.buffers.depth.setTest(!0),y.buffers.depth.setMask(!0),y.buffers.color.setMask(!0),y.setPolygonOffset(!1),e.onAfterRender(G,e,t),Re.enabled&&Re.submitFrame(),u=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=ue;return e>=g.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+g.maxTextures),ue+=1,e},this.setTexture2D=(ze=!1,function(e,t){e&&e.isWebGLRenderTarget&&(ze||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),ze=!0),e=e.texture),T.setTexture2D(e,t)}),this.setTexture3D=function(e,t){T.setTexture3D(e,t)},this.setTexture=function(){var e=!1;return function(t,r){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),T.setTexture2D(t,r)}}(),this.setTextureCube=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?T.setTextureCube(t,r):T.setTextureCubeDynamic(t,r)}}(),this.setFramebuffer=function(e){V=e},this.getRenderTarget=function(){return q},this.setRenderTarget=function(e){q=e,e&&void 0===M.get(e).__webglFramebuffer&&T.setupRenderTarget(e);var t=V,r=!1;if(e){var i=M.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=i[e.activeCubeFace],r=!0):t=e.isWebGLMultisampleRenderTarget?M.get(e).__webglMultisampledFramebuffer:i,se.copy(e.viewport),le.copy(e.scissor),ce=e.scissorTest}else se.copy(fe).multiplyScalar(de),le.copy(me).multiplyScalar(de),ce=ve;if(te!==t&&(p.bindFramebuffer(36160,t),te=t),y.viewport(se),y.scissor(le),y.setScissorTest(ce),r){var n=M.get(e.texture);p.framebufferTexture2D(36160,36064,34069+e.activeCubeFace,n.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,r,i,n,o){if(e&&e.isWebGLRenderTarget){var a=M.get(e).__webglFramebuffer;if(a){var s=!1;a!==te&&(p.bindFramebuffer(36160,a),s=!0);try{var l=e.texture,c=l.format,u=l.type;if(c!==Be&&j.convert(c)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===Se||j.convert(u)===p.getParameter(35738)||u===Oe&&(g.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float"))||u===De&&(g.isWebGL2?d.get("EXT_color_buffer_float"):d.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&r>=0&&r<=e.height-n&&p.readPixels(t,r,i,n,j.convert(c),j.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&p.bindFramebuffer(36160,te)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,r){var i=t.image.width,n=t.image.height,o=j.convert(t.format);this.setTexture2D(t,0),p.copyTexImage2D(3553,r||0,o,e.x,e.y,i,n,0)},this.copyTextureToTexture=function(e,t,r,i){var n=t.image.width,o=t.image.height,a=j.convert(r.format),s=j.convert(r.type);this.setTexture2D(r,0),t.isDataTexture?p.texSubImage2D(3553,i||0,e.x,e.y,n,o,a,s,t.image.data):p.texSubImage2D(3553,i||0,e.x,e.y,a,s,t.image)}}function Un(e,t){this.name="",this.color=new cr(e),this.density=void 0!==t?t:25e-5}function Bn(e,t,r){this.name="",this.color=new cr(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function Fn(){br.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function jn(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Gn(e,t,r,i){this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===i}function Wn(e){ni.call(this),this.type="SpriteMaterial",this.color=new cr(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function Vn(e){if(br.call(this),this.type="Sprite",void 0===Pn){Pn=new Br;var t=new jn(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Pn.setIndex([0,1,2,0,2,3]),Pn.addAttribute("position",new Gn(t,3,0,!1)),Pn.addAttribute("uv",new Gn(t,2,3,!1))}this.geometry=Pn,this.material=void 0!==e?e:new Wn,this.center=new Dt(.5,.5)}function qn(){br.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Xn(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),ci.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ht,this.bindMatrixInverse=new Ht}function $n(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ht)}}function Yn(){br.call(this),this.type="Bone"}function Jn(e){ni.call(this),this.type="LineBasicMaterial",this.color=new cr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Zn(e,t,r){1===r&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),br.call(this),this.type="Line",this.geometry=void 0!==e?e:new Br,this.material=void 0!==t?t:new Jn({color:16777215*Math.random()})}function Qn(e,t){Zn.call(this,e,t),this.type="LineSegments"}function Kn(e,t){Zn.call(this,e,t),this.type="LineLoop"}function eo(e){ni.call(this),this.type="PointsMaterial",this.color=new cr(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function to(e,t){br.call(this),this.type="Points",this.geometry=void 0!==e?e:new Br,this.material=void 0!==t?t:new eo({color:16777215*Math.random()})}function ro(e,t,r,i,n,o,a,s,l){Vt.call(this,e,t,r,i,n,o,a,s,l),this.format=void 0!==a?a:Ue,this.minFilter=void 0!==o?o:Me,this.magFilter=void 0!==n?n:Me,this.generateMipmaps=!1}function io(e,t,r,i,n,o,a,s,l,c,u,h){Vt.call(this,null,o,a,s,l,c,i,n,u,h),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function no(e,t,r,i,n,o,a,s,l){Vt.call(this,e,t,r,i,n,o,a,s,l),this.needsUpdate=!0}function oo(e,t,r,i,n,o,a,s,l,c){if((c=void 0!==c?c:We)!==We&&c!==Ve)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&c===We&&(r=Ae),void 0===r&&c===Ve&&(r=ke),Vt.call(this,null,i,n,o,a,s,c,r,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:_e,this.minFilter=void 0!==s?s:_e,this.flipY=!1,this.generateMipmaps=!1}function ao(e){Br.call(this),this.type="WireframeGeometry";var t,r,i,n,o,a,s,l,c,u,h=[],p=[0,0],d={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var v=m[t];for(r=0;r<3;r++)s=v[f[r]],l=v[f[(r+1)%3]],p[0]=Math.min(s,l),p[1]=Math.max(s,l),void 0===d[c=p[0]+","+p[1]]&&(d[c]={index1:p[0],index2:p[1]})}for(c in d)a=d[c],u=e.vertices[a.index1],h.push(u.x,u.y,u.z),u=e.vertices[a.index2],h.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var g,y,x,_,w,b,M;if(u=new It,null!==e.index){for(g=e.attributes.position,y=e.index,0===(x=e.groups).length&&(x=[{start:0,count:y.count,materialIndex:0}]),n=0,o=x.length;n<o;++n)for(t=w=(_=x[n]).start,i=w+_.count;t<i;t+=3)for(r=0;r<3;r++)s=y.getX(t+r),l=y.getX(t+(r+1)%3),p[0]=Math.min(s,l),p[1]=Math.max(s,l),void 0===d[c=p[0]+","+p[1]]&&(d[c]={index1:p[0],index2:p[1]});for(c in d)a=d[c],u.fromBufferAttribute(g,a.index1),h.push(u.x,u.y,u.z),u.fromBufferAttribute(g,a.index2),h.push(u.x,u.y,u.z)}else for(t=0,i=(g=e.attributes.position).count/3;t<i;t++)for(r=0;r<3;r++)b=3*t+r,u.fromBufferAttribute(g,b),h.push(u.x,u.y,u.z),M=3*t+(r+1)%3,u.fromBufferAttribute(g,M),h.push(u.x,u.y,u.z)}this.addAttribute("position",new zr(h,3))}function so(e,t,r){Sr.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new lo(e,t,r)),this.mergeVertices()}function lo(e,t,r){Br.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var i,n,o=[],a=[],s=[],l=[],c=new It,u=new It,h=new It,p=new It,d=new It;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=t+1;for(i=0;i<=r;i++){var m=i/r;for(n=0;n<=t;n++){var v=n/t;e(v,m,u),a.push(u.x,u.y,u.z),v-1e-5>=0?(e(v-1e-5,m,h),p.subVectors(u,h)):(e(v+1e-5,m,h),p.subVectors(h,u)),m-1e-5>=0?(e(v,m-1e-5,h),d.subVectors(u,h)):(e(v,m+1e-5,h),d.subVectors(h,u)),c.crossVectors(p,d).normalize(),s.push(c.x,c.y,c.z),l.push(v,m)}}for(i=0;i<r;i++)for(n=0;n<t;n++){var g=i*f+n,y=i*f+n+1,x=(i+1)*f+n+1,_=(i+1)*f+n;o.push(g,y,_),o.push(y,x,_)}this.setIndex(o),this.addAttribute("position",new zr(a,3)),this.addAttribute("normal",new zr(s,3)),this.addAttribute("uv",new zr(l,2))}function co(e,t,r,i){Sr.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i},this.fromBufferGeometry(new uo(e,t,r,i)),this.mergeVertices()}function uo(e,t,r,i){Br.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i},r=r||1;var n=[],o=[];function a(e,t,r,i){var n,o,a=Math.pow(2,i),l=[];for(n=0;n<=a;n++){l[n]=[];var c=e.clone().lerp(r,n/a),u=t.clone().lerp(r,n/a),h=a-n;for(o=0;o<=h;o++)l[n][o]=0===o&&n===a?c:c.clone().lerp(u,o/h)}for(n=0;n<a;n++)for(o=0;o<2*(a-n)-1;o++){var p=Math.floor(o/2);o%2==0?(s(l[n][p+1]),s(l[n+1][p]),s(l[n][p])):(s(l[n][p+1]),s(l[n+1][p+1]),s(l[n+1][p]))}}function s(e){n.push(e.x,e.y,e.z)}function l(t,r){var i=3*t;r.x=e[i+0],r.y=e[i+1],r.z=e[i+2]}function c(e,t,r,i){i<0&&1===e.x&&(o[t]=e.x-1),0===r.x&&0===r.z&&(o[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){for(var r=new It,i=new It,n=new It,o=0;o<t.length;o+=3)l(t[o+0],r),l(t[o+1],i),l(t[o+2],n),a(r,i,n,e)}(i=i||0),function(e){for(var t=new It,r=0;r<n.length;r+=3)t.x=n[r+0],t.y=n[r+1],t.z=n[r+2],t.normalize().multiplyScalar(e),n[r+0]=t.x,n[r+1]=t.y,n[r+2]=t.z}(r),function(){for(var e=new It,t=0;t<n.length;t+=3){e.x=n[t+0],e.y=n[t+1],e.z=n[t+2];var r=u(e)/2/Math.PI+.5,i=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(r,1-i)}var a;(function(){for(var e=new It,t=new It,r=new It,i=new It,a=new Dt,s=new Dt,l=new Dt,h=0,p=0;h<n.length;h+=9,p+=6){e.set(n[h+0],n[h+1],n[h+2]),t.set(n[h+3],n[h+4],n[h+5]),r.set(n[h+6],n[h+7],n[h+8]),a.set(o[p+0],o[p+1]),s.set(o[p+2],o[p+3]),l.set(o[p+4],o[p+5]),i.copy(e).add(t).add(r).divideScalar(3);var d=u(i);c(a,p+0,e,d),c(s,p+2,t,d),c(l,p+4,r,d)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],r=o[e+2],i=o[e+4],n=Math.max(t,r,i),a=Math.min(t,r,i);n>.9&&a<.1&&(t<.2&&(o[e+0]+=1),r<.2&&(o[e+2]+=1),i<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new zr(n,3)),this.addAttribute("normal",new zr(n.slice(),3)),this.addAttribute("uv",new zr(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function ho(e,t){Sr.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new po(e,t)),this.mergeVertices()}function po(e,t){uo.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function fo(e,t){Sr.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new mo(e,t)),this.mergeVertices()}function mo(e,t){uo.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function vo(e,t){Sr.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new go(e,t)),this.mergeVertices()}function go(e,t){var r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];uo.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function yo(e,t){Sr.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new xo(e,t)),this.mergeVertices()}function xo(e,t){var r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i];uo.call(this,n,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function _o(e,t,r,i,n,o){Sr.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:n},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new wo(e,t,r,i,n);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function wo(e,t,r,i,n){Br.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:n},t=t||64,r=r||1,i=i||8,n=n||!1;var o=e.computeFrenetFrames(t,n);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,l=new It,c=new It,u=new Dt,h=new It,p=[],d=[],f=[],m=[];function v(n){h=e.getPointAt(n/t,h);var a=o.normals[n],u=o.binormals[n];for(s=0;s<=i;s++){var f=s/i*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);c.x=v*a.x+m*u.x,c.y=v*a.y+m*u.y,c.z=v*a.z+m*u.z,c.normalize(),d.push(c.x,c.y,c.z),l.x=h.x+r*c.x,l.y=h.y+r*c.y,l.z=h.z+r*c.z,p.push(l.x,l.y,l.z)}}!function(){for(a=0;a<t;a++)v(a);v(!1===n?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=i;s++)u.x=a/t,u.y=s/i,f.push(u.x,u.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=i;a++){var e=(i+1)*(s-1)+(a-1),r=(i+1)*s+(a-1),n=(i+1)*s+a,o=(i+1)*(s-1)+a;m.push(e,r,o),m.push(r,n,o)}}()}(),this.setIndex(m),this.addAttribute("position",new zr(p,3)),this.addAttribute("normal",new zr(d,3)),this.addAttribute("uv",new zr(f,2))}function bo(e,t,r,i,n,o,a){Sr.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Mo(e,t,r,i,n,o)),this.mergeVertices()}function Mo(e,t,r,i,n,o){Br.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:o},e=e||1,t=t||.4,r=Math.floor(r)||64,i=Math.floor(i)||8,n=n||2,o=o||3;var a,s,l=[],c=[],u=[],h=[],p=new It,d=new It,f=new It,m=new It,v=new It,g=new It,y=new It;for(a=0;a<=r;++a){var x=a/r*n*Math.PI*2;for(R(x,n,o,e,f),R(x+.01,n,o,e,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=i;++s){var _=s/i*Math.PI*2,w=-t*Math.cos(_),b=t*Math.sin(_);p.x=f.x+(w*y.x+b*v.x),p.y=f.y+(w*y.y+b*v.y),p.z=f.z+(w*y.z+b*v.z),c.push(p.x,p.y,p.z),d.subVectors(p,f).normalize(),u.push(d.x,d.y,d.z),h.push(a/r),h.push(s/i)}}for(s=1;s<=r;s++)for(a=1;a<=i;a++){var M=(i+1)*(s-1)+(a-1),T=(i+1)*s+(a-1),E=(i+1)*s+a,S=(i+1)*(s-1)+a;l.push(M,T,S),l.push(T,E,S)}function R(e,t,r,i,n){var o=Math.cos(e),a=Math.sin(e),s=r/t*e,l=Math.cos(s);n.x=i*(2+l)*.5*o,n.y=i*(2+l)*a*.5,n.z=i*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new zr(c,3)),this.addAttribute("normal",new zr(u,3)),this.addAttribute("uv",new zr(h,2))}function To(e,t,r,i,n){Sr.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:n},this.fromBufferGeometry(new Eo(e,t,r,i,n)),this.mergeVertices()}function Eo(e,t,r,i,n){Br.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:n},e=e||1,t=t||.4,r=Math.floor(r)||8,i=Math.floor(i)||6,n=n||2*Math.PI;var o,a,s=[],l=[],c=[],u=[],h=new It,p=new It,d=new It;for(o=0;o<=r;o++)for(a=0;a<=i;a++){var f=a/i*n,m=o/r*Math.PI*2;p.x=(e+t*Math.cos(m))*Math.cos(f),p.y=(e+t*Math.cos(m))*Math.sin(f),p.z=t*Math.sin(m),l.push(p.x,p.y,p.z),h.x=e*Math.cos(f),h.y=e*Math.sin(f),d.subVectors(p,h).normalize(),c.push(d.x,d.y,d.z),u.push(a/i),u.push(o/r)}for(o=1;o<=r;o++)for(a=1;a<=i;a++){var v=(i+1)*o+a-1,g=(i+1)*(o-1)+a-1,y=(i+1)*(o-1)+a,x=(i+1)*o+a;s.push(v,g,x),s.push(g,y,x)}this.setIndex(s),this.addAttribute("position",new zr(l,3)),this.addAttribute("normal",new zr(c,3)),this.addAttribute("uv",new zr(u,2))}Un.prototype.isFogExp2=!0,Un.prototype.clone=function(){return new Un(this.color,this.density)},Un.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Bn.prototype.isFog=!0,Bn.prototype.clone=function(){return new Bn(this.color,this.near,this.far)},Bn.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Fn.prototype=Object.assign(Object.create(br.prototype),{constructor:Fn,copy:function(e,t){return br.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=br.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(jn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(jn.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(Gn.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Gn.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this},setXYZW:function(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}}),Wn.prototype=Object.create(ni.prototype),Wn.prototype.constructor=Wn,Wn.prototype.isSpriteMaterial=!0,Wn.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},Vn.prototype=Object.assign(Object.create(br.prototype),{constructor:Vn,isSprite:!0,raycast:function(){var e=new It,t=new It,r=new It,i=new Dt,n=new Dt,o=new Ht,a=new It,s=new It,l=new It,c=new Dt,u=new Dt,h=new Dt;function p(e,t,r,a,s,l){i.subVectors(e,r).addScalar(.5).multiply(a),void 0!==s?(n.x=l*i.x-s*i.y,n.y=s*i.x+l*i.y):n.copy(i),e.copy(t),e.x+=n.x,e.y+=n.y,e.applyMatrix4(o)}return function(i,n){t.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),r.setFromMatrixPosition(this.modelViewMatrix);var d,f,m=this.material.rotation;0!==m&&(f=Math.cos(m),d=Math.sin(m));var v=this.center;p(a.set(-.5,-.5,0),r,v,t,d,f),p(s.set(.5,-.5,0),r,v,t,d,f),p(l.set(.5,.5,0),r,v,t,d,f),c.set(0,0),u.set(1,0),h.set(1,1);var g=i.ray.intersectTriangle(a,s,l,!1,e);if(null!==g||(p(s.set(-.5,.5,0),r,v,t,d,f),u.set(0,1),null!==(g=i.ray.intersectTriangle(a,l,s,!1,e)))){var y=i.ray.origin.distanceTo(e);y<i.near||y>i.far||n.push({distance:y,point:e.clone(),uv:si.getUV(e,a,s,l,c,u,h,new Dt),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return br.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),qn.prototype=Object.assign(Object.create(br.prototype),{constructor:qn,copy:function(e){br.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,i=t.length;r<i;r++){var n=t[r];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,i=0;i<r.length&&!(t<r[i].distance);i++);r.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,r=1,i=t.length;r<i&&!(e<t[r].distance);r++);return t[r-1].object},raycast:(An=new It,function(e,t){An.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(An);this.getObjectForDistance(r).raycast(e,t)}),update:function(){var e=new It,t=new It;return function(r){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var n=e.distanceTo(t);i[0].object.visible=!0;for(var o=1,a=i.length;o<a&&n>=i[o].distance;o++)i[o-1].object.visible=!1,i[o].object.visible=!0;for(;o<a;o++)i[o].object.visible=!1}}}(),toJSON:function(e){var t=br.prototype.toJSON.call(this,e);t.object.levels=[];for(var r=this.levels,i=0,n=r.length;i<n;i++){var o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Xn.prototype=Object.assign(Object.create(ci.prototype),{constructor:Xn,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new qt,t=this.geometry.attributes.skinWeight,r=0,i=t.count;r<i;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);var n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){ci.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign($n.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new Ht;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){var e,t,r;for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(Cn=new Ht,Ln=new Ht,function(){for(var e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture,n=0,o=e.length;n<o;n++){var a=e[n]?e[n].matrixWorld:Ln;Cn.multiplyMatrices(a,t[n]),Cn.toArray(r,16*n)}void 0!==i&&(i.needsUpdate=!0)}),clone:function(){return new $n(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,r=this.bones.length;t<r;t++){var i=this.bones[t];if(i.name===e)return i}}}),Yn.prototype=Object.assign(Object.create(br.prototype),{constructor:Yn,isBone:!0}),Jn.prototype=Object.create(ni.prototype),Jn.prototype.constructor=Jn,Jn.prototype.isLineBasicMaterial=!0,Jn.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Zn.prototype=Object.assign(Object.create(br.prototype),{constructor:Zn,isLine:!0,computeLineDistances:(On=new It,Dn=new It,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,r=[0],i=1,n=t.count;i<n;i++)On.fromBufferAttribute(t,i-1),Dn.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=On.distanceTo(Dn);e.addAttribute("lineDistance",new zr(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for((r=e.lineDistances)[0]=0,i=1,n=o.length;i<n;i++)r[i]=r[i-1],r[i]+=o[i-1].distanceTo(o[i])}return this}),raycast:function(){var e=new Ht,t=new ai,r=new Qt;return function(i,n){var o=i.linePrecision,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),r.copy(a.boundingSphere),r.applyMatrix4(s),r.radius+=o,!1!==i.ray.intersectsSphere(r)){e.getInverse(s),t.copy(i.ray).applyMatrix4(e);var l=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=new It,h=new It,p=new It,d=new It,f=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var m=a.index,v=a.attributes.position.array;if(null!==m)for(var g=m.array,y=0,x=g.length-1;y<x;y+=f){var _=g[y],w=g[y+1];u.fromArray(v,3*_),h.fromArray(v,3*w),t.distanceSqToSegment(u,h,d,p)>c||(d.applyMatrix4(this.matrixWorld),(T=i.ray.origin.distanceTo(d))<i.near||T>i.far||n.push({distance:T,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else for(y=0,x=v.length/3-1;y<x;y+=f)u.fromArray(v,3*y),h.fromArray(v,3*y+3),t.distanceSqToSegment(u,h,d,p)>c||(d.applyMatrix4(this.matrixWorld),(T=i.ray.origin.distanceTo(d))<i.near||T>i.far||n.push({distance:T,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else if(a.isGeometry){var b=a.vertices,M=b.length;for(y=0;y<M-1;y+=f){var T;t.distanceSqToSegment(b[y],b[y+1],d,p)>c||(d.applyMatrix4(this.matrixWorld),(T=i.ray.origin.distanceTo(d))<i.near||T>i.far||n.push({distance:T,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}}}}}(),copy:function(e){return br.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),Qn.prototype=Object.assign(Object.create(Zn.prototype),{constructor:Qn,isLineSegments:!0,computeLineDistances:function(){var e=new It,t=new It;return function(){var r=this.geometry;if(r.isBufferGeometry)if(null===r.index){for(var i=r.attributes.position,n=[],o=0,a=i.count;o<a;o+=2)e.fromBufferAttribute(i,o),t.fromBufferAttribute(i,o+1),n[o]=0===o?0:n[o-1],n[o+1]=n[o]+e.distanceTo(t);r.addAttribute("lineDistance",new zr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(r.isGeometry){var s=r.vertices;for(n=r.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),n[o]=0===o?0:n[o-1],n[o+1]=n[o]+e.distanceTo(t)}return this}}()}),Kn.prototype=Object.assign(Object.create(Zn.prototype),{constructor:Kn,isLineLoop:!0}),eo.prototype=Object.create(ni.prototype),eo.prototype.constructor=eo,eo.prototype.isPointsMaterial=!0,eo.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},to.prototype=Object.assign(Object.create(br.prototype),{constructor:to,isPoints:!0,raycast:function(){var e=new Ht,t=new ai,r=new Qt;return function(i,n){var o=this,a=this.geometry,s=this.matrixWorld,l=i.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),r.copy(a.boundingSphere),r.applyMatrix4(s),r.radius+=l,!1!==i.ray.intersectsSphere(r)){e.getInverse(s),t.copy(i.ray).applyMatrix4(e);var c=l/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,h=new It,p=new It;if(a.isBufferGeometry){var d=a.index,f=a.attributes.position.array;if(null!==d)for(var m=d.array,v=0,g=m.length;v<g;v++){var y=m[v];h.fromArray(f,3*y),w(h,y)}else{v=0;for(var x=f.length/3;v<x;v++)h.fromArray(f,3*v),w(h,v)}}else{var _=a.vertices;for(v=0,x=_.length;v<x;v++)w(_[v],v)}}function w(e,r){var a=t.distanceSqToPoint(e);if(a<u){t.closestPointToPoint(e,p),p.applyMatrix4(s);var l=i.ray.origin.distanceTo(p);if(l<i.near||l>i.far)return;n.push({distance:l,distanceToRay:Math.sqrt(a),point:p.clone(),index:r,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ro.prototype=Object.assign(Object.create(Vt.prototype),{constructor:ro,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),io.prototype=Object.create(Vt.prototype),io.prototype.constructor=io,io.prototype.isCompressedTexture=!0,no.prototype=Object.create(Vt.prototype),no.prototype.constructor=no,no.prototype.isCanvasTexture=!0,oo.prototype=Object.create(Vt.prototype),oo.prototype.constructor=oo,oo.prototype.isDepthTexture=!0,ao.prototype=Object.create(Br.prototype),ao.prototype.constructor=ao,so.prototype=Object.create(Sr.prototype),so.prototype.constructor=so,lo.prototype=Object.create(Br.prototype),lo.prototype.constructor=lo,co.prototype=Object.create(Sr.prototype),co.prototype.constructor=co,uo.prototype=Object.create(Br.prototype),uo.prototype.constructor=uo,ho.prototype=Object.create(Sr.prototype),ho.prototype.constructor=ho,po.prototype=Object.create(uo.prototype),po.prototype.constructor=po,fo.prototype=Object.create(Sr.prototype),fo.prototype.constructor=fo,mo.prototype=Object.create(uo.prototype),mo.prototype.constructor=mo,vo.prototype=Object.create(Sr.prototype),vo.prototype.constructor=vo,go.prototype=Object.create(uo.prototype),go.prototype.constructor=go,yo.prototype=Object.create(Sr.prototype),yo.prototype.constructor=yo,xo.prototype=Object.create(uo.prototype),xo.prototype.constructor=xo,_o.prototype=Object.create(Sr.prototype),_o.prototype.constructor=_o,wo.prototype=Object.create(Br.prototype),wo.prototype.constructor=wo,bo.prototype=Object.create(Sr.prototype),bo.prototype.constructor=bo,Mo.prototype=Object.create(Br.prototype),Mo.prototype.constructor=Mo,To.prototype=Object.create(Sr.prototype),To.prototype.constructor=To,Eo.prototype=Object.create(Br.prototype),Eo.prototype.constructor=Eo;function So(e,t,r,i,n){var o,a;if(n===function(e,t,r,i){for(var n=0,o=t,a=r-i;o<r;o+=i)n+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return n}(e,t,r,i)>0)for(o=t;o<r;o+=i)a=Wo(o,e[o],e[o+1],a);else for(o=r-i;o>=t;o-=i)a=Wo(o,e[o],e[o+1],a);return a&&Bo(a,a.next)&&(Vo(a),a=a.next),a}function Ro(e,t){if(!e)return e;t||(t=e);var r,i=e;do{if(r=!1,i.steiner||!Bo(i,i.next)&&0!==Uo(i.prev,i,i.next))i=i.next;else{if(Vo(i),(i=t=i.prev)===i.next)break;r=!0}}while(r||i!==t);return t}function Po(e,t,r,i,n,o,a){if(e){!a&&o&&function(e,t,r,i){var n=e;do{null===n.z&&(n.z=zo(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,r,i,n,o,a,s,l,c=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,i=r,s=0,t=0;t<c&&(s++,i=i.nextZ);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,l--),o?o.nextZ=n:e=n,n.prevZ=o,o=n;r=i}o.nextZ=null,c*=2}while(a>1)}(n)}(e,i,n,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Co(e,i,n,o):Ao(e))t.push(s.i/r),t.push(e.i/r),t.push(l.i/r),Vo(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Po(e=Lo(e,t,r),t,r,i,n,o,2):2===a&&Oo(e,t,r,i,n,o):Po(Ro(e),t,r,i,n,o,1);break}}}function Ao(e){var t=e.prev,r=e,i=e.next;if(Uo(t,r,i)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(ko(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&Uo(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Co(e,t,r,i){var n=e.prev,o=e,a=e.next;if(Uo(n,o,a)>=0)return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,l=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,c=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,u=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,h=zo(s,l,t,r,i),p=zo(c,u,t,r,i),d=e.nextZ;d&&d.z<=p;){if(d!==e.prev&&d!==e.next&&ko(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Uo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&ko(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Uo(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function Lo(e,t,r){var i=e;do{var n=i.prev,o=i.next.next;!Bo(n,o)&&Fo(n,i,i.next,o)&&jo(n,o)&&jo(o,n)&&(t.push(n.i/r),t.push(i.i/r),t.push(o.i/r),Vo(i),Vo(i.next),i=e=o),i=i.next}while(i!==e);return i}function Oo(e,t,r,i,n,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&No(a,s)){var l=Go(a,s);return a=Ro(a,a.next),l=Ro(l,l.next),Po(a,t,r,i,n,o),void Po(l,t,r,i,n,o)}s=s.next}a=a.next}while(a!==e)}function Do(e,t){return e.x-t.x}function Ho(e,t){if(t=function(e,t){var r,i=t,n=e.x,o=e.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>a){if(a=s,s===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!r)return null;if(n===a)return r.prev;var l,c=r,u=r.x,h=r.y,p=1/0;for(i=r.next;i!==c;)n>=i.x&&i.x>=u&&n!==i.x&&ko(o<h?n:a,o,u,h,o<h?a:n,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(n-i.x))<p||l===p&&i.x>r.x)&&jo(i,e)&&(r=i,p=l),i=i.next;return r}(e,t)){var r=Go(t,e);Ro(r,r.next)}}function zo(e,t,r,i,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Io(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function ko(e,t,r,i,n,o,a,s){return(n-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(n-a)*(i-s)>=0}function No(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Fo(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&jo(e,t)&&jo(t,e)&&function(e,t){var r=e,i=!1,n=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}(e,t)}function Uo(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Bo(e,t){return e.x===t.x&&e.y===t.y}function Fo(e,t,r,i){return!!(Bo(e,t)&&Bo(r,i)||Bo(e,i)&&Bo(r,t))||Uo(e,t,r)>0!=Uo(e,t,i)>0&&Uo(r,i,e)>0!=Uo(r,i,t)>0}function jo(e,t){return Uo(e.prev,e,e.next)<0?Uo(e,t,e.next)>=0&&Uo(e,e.prev,t)>=0:Uo(e,t,e.prev)<0||Uo(e,e.next,t)<0}function Go(e,t){var r=new qo(e.i,e.x,e.y),i=new qo(t.i,t.x,t.y),n=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function Wo(e,t,r,i){var n=new qo(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Vo(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function qo(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Xo={area:function(e){for(var t=e.length,r=0,i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return.5*r},isClockWise:function(e){return Xo.area(e)<0},triangulateShape:function(e,t){var r=[],i=[],n=[];$o(e),Yo(r,e);var o=e.length;t.forEach($o);for(var a=0;a<t.length;a++)i.push(o),o+=t[a].length,Yo(r,t[a]);var s=function(e,t,r){r=r||2;var i,n,o,a,s,l,c,u=t&&t.length,h=u?t[0]*r:e.length,p=So(e,0,h,r,!0),d=[];if(!p)return d;if(u&&(p=function(e,t,r,i){var n,o,a,s=[];for(n=0,o=t.length;n<o;n++)(a=So(e,t[n]*i,n<o-1?t[n+1]*i:e.length,i,!1))===a.next&&(a.steiner=!0),s.push(Io(a));for(s.sort(Do),n=0;n<s.length;n++)Ho(s[n],r),r=Ro(r,r.next);return r}(e,t,p,r)),e.length>80*r){i=o=e[0],n=a=e[1];for(var f=r;f<h;f+=r)s=e[f],l=e[f+1],s<i&&(i=s),l<n&&(n=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-i,a-n))?1/c:0}return Po(p,d,r,i,n,c),d}(r,i);for(a=0;a<s.length;a+=3)n.push(s.slice(a,a+3));return n}};function $o(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Yo(e,t){for(var r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}function Jo(e,t){Sr.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Zo(e,t)),this.mergeVertices()}function Zo(e,t){Br.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t};for(var r=this,i=[],n=[],o=0,a=(e=Array.isArray(e)?e:[e]).length;o<a;o++)s(e[o]);function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,p=void 0!==t.bevelSegments?t.bevelSegments:3,d=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:Qo;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var m,v,g,y,x,_,w,b,M=!1;d&&(m=d.getSpacedPoints(s),M=!0,c=!1,v=d.computeFrenetFrames(s,!1),g=new It,y=new It,x=new It),c||(p=0,u=0,h=0);var T=e.extractPoints(a),E=T.shape,S=T.holes;if(!Xo.isClockWise(E))for(E=E.reverse(),w=0,b=S.length;w<b;w++)_=S[w],Xo.isClockWise(_)&&(S[w]=_.reverse());var R=Xo.triangulateShape(E,S),P=E;for(w=0,b=S.length;w<b;w++)_=S[w],E=E.concat(_);function A(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}var C,L,O,D,H,z,I=E.length,k=R.length;function N(e,t,r){var i,n,o,a=e.x-t.x,s=e.y-t.y,l=r.x-e.x,c=r.y-e.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>Number.EPSILON){var p=Math.sqrt(u),d=Math.sqrt(l*l+c*c),f=t.x-s/p,m=t.y+a/p,v=((r.x-c/d-f)*c-(r.y+l/d-m)*l)/(a*c-s*l),g=(i=f+a*v-e.x)*i+(n=m+s*v-e.y)*n;if(g<=2)return new Dt(i,n);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?l>Number.EPSILON&&(y=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(c)&&(y=!0),y?(i=-s,n=a,o=Math.sqrt(u)):(i=a,n=s,o=Math.sqrt(u/2))}return new Dt(i/o,n/o)}for(var U=[],B=0,F=P.length,j=F-1,G=B+1;B<F;B++,j++,G++)j===F&&(j=0),G===F&&(G=0),U[B]=N(P[B],P[j],P[G]);var W,V,q=[],X=U.concat();for(w=0,b=S.length;w<b;w++){for(_=S[w],W=[],B=0,j=(F=_.length)-1,G=B+1;B<F;B++,j++,G++)j===F&&(j=0),G===F&&(G=0),W[B]=N(_[B],_[j],_[G]);q.push(W),X=X.concat(W)}for(C=0;C<p;C++){for(O=C/p,D=u*Math.cos(O*Math.PI/2),L=h*Math.sin(O*Math.PI/2),B=0,F=P.length;B<F;B++)Y((H=A(P[B],U[B],L)).x,H.y,-D);for(w=0,b=S.length;w<b;w++)for(_=S[w],W=q[w],B=0,F=_.length;B<F;B++)Y((H=A(_[B],W[B],L)).x,H.y,-D)}for(L=h,B=0;B<I;B++)H=c?A(E[B],X[B],L):E[B],M?(y.copy(v.normals[0]).multiplyScalar(H.x),g.copy(v.binormals[0]).multiplyScalar(H.y),x.copy(m[0]).add(y).add(g),Y(x.x,x.y,x.z)):Y(H.x,H.y,0);for(V=1;V<=s;V++)for(B=0;B<I;B++)H=c?A(E[B],X[B],L):E[B],M?(y.copy(v.normals[V]).multiplyScalar(H.x),g.copy(v.binormals[V]).multiplyScalar(H.y),x.copy(m[V]).add(y).add(g),Y(x.x,x.y,x.z)):Y(H.x,H.y,l/s*V);for(C=p-1;C>=0;C--){for(O=C/p,D=u*Math.cos(O*Math.PI/2),L=h*Math.sin(O*Math.PI/2),B=0,F=P.length;B<F;B++)Y((H=A(P[B],U[B],L)).x,H.y,l+D);for(w=0,b=S.length;w<b;w++)for(_=S[w],W=q[w],B=0,F=_.length;B<F;B++)H=A(_[B],W[B],L),M?Y(H.x,H.y+m[s-1].y,m[s-1].x+D):Y(H.x,H.y,l+D)}function $(e,t){var r,i;for(B=e.length;--B>=0;){r=B,(i=B-1)<0&&(i=e.length-1);var n=0,o=s+2*p;for(n=0;n<o;n++){var a=I*n,l=I*(n+1);Z(t+r+a,t+i+a,t+i+l,t+r+l)}}}function Y(e,t,r){o.push(e),o.push(t),o.push(r)}function J(e,t,n){Q(e),Q(t),Q(n);var o=i.length/3,a=f.generateTopUV(r,i,o-3,o-2,o-1);K(a[0]),K(a[1]),K(a[2])}function Z(e,t,n,o){Q(e),Q(t),Q(o),Q(t),Q(n),Q(o);var a=i.length/3,s=f.generateSideWallUV(r,i,a-6,a-3,a-2,a-1);K(s[0]),K(s[1]),K(s[3]),K(s[1]),K(s[2]),K(s[3])}function Q(e){i.push(o[3*e+0]),i.push(o[3*e+1]),i.push(o[3*e+2])}function K(e){n.push(e.x),n.push(e.y)}!function(){var e=i.length/3;if(c){var t=0,n=I*t;for(B=0;B<k;B++)J((z=R[B])[2]+n,z[1]+n,z[0]+n);for(n=I*(t=s+2*p),B=0;B<k;B++)J((z=R[B])[0]+n,z[1]+n,z[2]+n)}else{for(B=0;B<k;B++)J((z=R[B])[2],z[1],z[0]);for(B=0;B<k;B++)J((z=R[B])[0]+I*s,z[1]+I*s,z[2]+I*s)}r.addGroup(e,i.length/3-e,0)}(),function(){var e=i.length/3,t=0;for($(P,t),t+=P.length,w=0,b=S.length;w<b;w++)$(_=S[w],t),t+=_.length;r.addGroup(e,i.length/3-e,1)}()}this.addAttribute("position",new zr(i,3)),this.addAttribute("uv",new zr(n,2)),this.computeVertexNormals()}Jo.prototype=Object.create(Sr.prototype),Jo.prototype.constructor=Jo,Jo.prototype.toJSON=function(){var e=Sr.prototype.toJSON.call(this);return Ko(this.parameters.shapes,this.parameters.options,e)},Zo.prototype=Object.create(Br.prototype),Zo.prototype.constructor=Zo,Zo.prototype.toJSON=function(){var e=Br.prototype.toJSON.call(this);return Ko(this.parameters.shapes,this.parameters.options,e)};var Qo={generateTopUV:function(e,t,r,i,n){var o=t[3*r],a=t[3*r+1],s=t[3*i],l=t[3*i+1],c=t[3*n],u=t[3*n+1];return[new Dt(o,a),new Dt(s,l),new Dt(c,u)]},generateSideWallUV:function(e,t,r,i,n,o){var a=t[3*r],s=t[3*r+1],l=t[3*r+2],c=t[3*i],u=t[3*i+1],h=t[3*i+2],p=t[3*n],d=t[3*n+1],f=t[3*n+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-u)<.01?[new Dt(a,1-l),new Dt(c,1-h),new Dt(p,1-f),new Dt(m,1-g)]:[new Dt(s,1-l),new Dt(u,1-h),new Dt(d,1-f),new Dt(v,1-g)]}};function Ko(e,t,r){if(r.shapes=[],Array.isArray(e))for(var i=0,n=e.length;i<n;i++){var o=e[i];r.shapes.push(o.uuid)}else r.shapes.push(e.uuid);return void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON()),r}function ea(e,t){Sr.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new ta(e,t)),this.mergeVertices()}function ta(e,t){var r=(t=t||{}).font;if(!r||!r.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Sr;var i=r.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Zo.call(this,i,t),this.type="TextBufferGeometry"}function ra(e,t,r,i,n,o,a){Sr.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new ia(e,t,r,i,n,o,a)),this.mergeVertices()}function ia(e,t,r,i,n,o,a){Br.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var s,l,c=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),u=0,h=[],p=new It,d=new It,f=[],m=[],v=[],g=[];for(l=0;l<=r;l++){var y=[],x=l/r;for(s=0;s<=t;s++){var _=s/t;p.x=-e*Math.cos(i+_*n)*Math.sin(o+x*a),p.y=e*Math.cos(o+x*a),p.z=e*Math.sin(i+_*n)*Math.sin(o+x*a),m.push(p.x,p.y,p.z),d.set(p.x,p.y,p.z).normalize(),v.push(d.x,d.y,d.z),g.push(_,1-x),y.push(u++)}h.push(y)}for(l=0;l<r;l++)for(s=0;s<t;s++){var w=h[l][s+1],b=h[l][s],M=h[l+1][s],T=h[l+1][s+1];(0!==l||o>0)&&f.push(w,b,T),(l!==r-1||c<Math.PI)&&f.push(b,M,T)}this.setIndex(f),this.addAttribute("position",new zr(m,3)),this.addAttribute("normal",new zr(v,3)),this.addAttribute("uv",new zr(g,2))}function na(e,t,r,i,n,o){Sr.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:n,thetaLength:o},this.fromBufferGeometry(new oa(e,t,r,i,n,o)),this.mergeVertices()}function oa(e,t,r,i,n,o){Br.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:n,thetaLength:o},e=e||.5,t=t||1,n=void 0!==n?n:0,o=void 0!==o?o:2*Math.PI,r=void 0!==r?Math.max(3,r):8;var a,s,l,c=[],u=[],h=[],p=[],d=e,f=(t-e)/(i=void 0!==i?Math.max(1,i):1),m=new It,v=new Dt;for(s=0;s<=i;s++){for(l=0;l<=r;l++)a=n+l/r*o,m.x=d*Math.cos(a),m.y=d*Math.sin(a),u.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,p.push(v.x,v.y);d+=f}for(s=0;s<i;s++){var g=s*(r+1);for(l=0;l<r;l++){var y=a=l+g,x=a+r+1,_=a+r+2,w=a+1;c.push(y,x,w),c.push(x,_,w)}}this.setIndex(c),this.addAttribute("position",new zr(u,3)),this.addAttribute("normal",new zr(h,3)),this.addAttribute("uv",new zr(p,2))}function aa(e,t,r,i){Sr.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},this.fromBufferGeometry(new sa(e,t,r,i)),this.mergeVertices()}function sa(e,t,r,i){Br.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t)||12,r=r||0,i=i||2*Math.PI,i=Ot.clamp(i,0,2*Math.PI);var n,o,a,s=[],l=[],c=[],u=1/t,h=new It,p=new Dt;for(o=0;o<=t;o++){var d=r+o*u*i,f=Math.sin(d),m=Math.cos(d);for(a=0;a<=e.length-1;a++)h.x=e[a].x*f,h.y=e[a].y,h.z=e[a].x*m,l.push(h.x,h.y,h.z),p.x=o/t,p.y=a/(e.length-1),c.push(p.x,p.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var v=n=a+o*e.length,g=n+e.length,y=n+e.length+1,x=n+1;s.push(v,g,x),s.push(g,y,x)}if(this.setIndex(s),this.addAttribute("position",new zr(l,3)),this.addAttribute("uv",new zr(c,2)),this.computeVertexNormals(),i===2*Math.PI){var _=this.attributes.normal.array,w=new It,b=new It,M=new It;for(n=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)w.x=_[a+0],w.y=_[a+1],w.z=_[a+2],b.x=_[n+a+0],b.y=_[n+a+1],b.z=_[n+a+2],M.addVectors(w,b).normalize(),_[a+0]=_[n+a+0]=M.x,_[a+1]=_[n+a+1]=M.y,_[a+2]=_[n+a+2]=M.z}}function la(e,t){Sr.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ca(e,t)),this.mergeVertices()}function ca(e,t){Br.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],i=[],n=[],o=[],a=0,s=0;if(!1===Array.isArray(e))c(e);else for(var l=0;l<e.length;l++)c(e[l]),this.addGroup(a,s,l),a+=s,s=0;function c(e){var a,l,c,u=i.length/3,h=e.extractPoints(t),p=h.shape,d=h.holes;for(!1===Xo.isClockWise(p)&&(p=p.reverse()),a=0,l=d.length;a<l;a++)c=d[a],!0===Xo.isClockWise(c)&&(d[a]=c.reverse());var f=Xo.triangulateShape(p,d);for(a=0,l=d.length;a<l;a++)c=d[a],p=p.concat(c);for(a=0,l=p.length;a<l;a++){var m=p[a];i.push(m.x,m.y,0),n.push(0,0,1),o.push(m.x,m.y)}for(a=0,l=f.length;a<l;a++){var v=f[a],g=v[0]+u,y=v[1]+u,x=v[2]+u;r.push(g,y,x),s+=3}}this.setIndex(r),this.addAttribute("position",new zr(i,3)),this.addAttribute("normal",new zr(n,3)),this.addAttribute("uv",new zr(o,2))}function ua(e,t){if(t.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var n=e[r];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}function ha(e,t){Br.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var r,i,n,o,a=[],s=Math.cos(Ot.DEG2RAD*t),l=[0,0],c={},u=["a","b","c"];e.isBufferGeometry?(o=new Sr).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,p=o.faces,d=0,f=p.length;d<f;d++)for(var m=p[d],v=0;v<3;v++)r=m[u[v]],i=m[u[(v+1)%3]],l[0]=Math.min(r,i),l[1]=Math.max(r,i),void 0===c[n=l[0]+","+l[1]]?c[n]={index1:l[0],index2:l[1],face1:d,face2:void 0}:c[n].face2=d;for(n in c){var g=c[n];if(void 0===g.face2||p[g.face1].normal.dot(p[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new zr(a,3))}function pa(e,t,r,i,n,o,a,s){Sr.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new da(e,t,r,i,n,o,a,s)),this.mergeVertices()}function da(e,t,r,i,n,o,a,s){Br.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:o,thetaStart:a,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,r=r||1,i=Math.floor(i)||8,n=Math.floor(n)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var c=[],u=[],h=[],p=[],d=0,f=[],m=r/2,v=0;function g(r){var n,o,f,g=new Dt,y=new It,x=0,_=!0===r?e:t,w=!0===r?1:-1;for(o=d,n=1;n<=i;n++)u.push(0,m*w,0),h.push(0,w,0),p.push(.5,.5),d++;for(f=d,n=0;n<=i;n++){var b=n/i*s+a,M=Math.cos(b),T=Math.sin(b);y.x=_*T,y.y=m*w,y.z=_*M,u.push(y.x,y.y,y.z),h.push(0,w,0),g.x=.5*M+.5,g.y=.5*T*w+.5,p.push(g.x,g.y),d++}for(n=0;n<i;n++){var E=o+n,S=f+n;!0===r?c.push(S,S+1,E):c.push(S+1,S,E),x+=3}l.addGroup(v,x,!0===r?1:2),v+=x}!function(){var o,g,y=new It,x=new It,_=0,w=(t-e)/r;for(g=0;g<=n;g++){var b=[],M=g/n,T=M*(t-e)+e;for(o=0;o<=i;o++){var E=o/i,S=E*s+a,R=Math.sin(S),P=Math.cos(S);x.x=T*R,x.y=-M*r+m,x.z=T*P,u.push(x.x,x.y,x.z),y.set(R,w,P).normalize(),h.push(y.x,y.y,y.z),p.push(E,1-M),b.push(d++)}f.push(b)}for(o=0;o<i;o++)for(g=0;g<n;g++){var A=f[g][o],C=f[g+1][o],L=f[g+1][o+1],O=f[g][o+1];c.push(A,C,O),c.push(C,L,O),_+=6}l.addGroup(v,_,0),v+=_}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(c),this.addAttribute("position",new zr(u,3)),this.addAttribute("normal",new zr(h,3)),this.addAttribute("uv",new zr(p,2))}function fa(e,t,r,i,n,o,a){pa.call(this,0,e,t,r,i,n,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:o,thetaLength:a}}function ma(e,t,r,i,n,o,a){da.call(this,0,e,t,r,i,n,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:o,thetaLength:a}}function va(e,t,r,i){Sr.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},this.fromBufferGeometry(new ga(e,t,r,i)),this.mergeVertices()}function ga(e,t,r,i){Br.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var n,o,a=[],s=[],l=[],c=[],u=new It,h=new Dt;for(s.push(0,0,0),l.push(0,0,1),c.push(.5,.5),o=0,n=3;o<=t;o++,n+=3){var p=r+o/t*i;u.x=e*Math.cos(p),u.y=e*Math.sin(p),s.push(u.x,u.y,u.z),l.push(0,0,1),h.x=(s[n]/e+1)/2,h.y=(s[n+1]/e+1)/2,c.push(h.x,h.y)}for(n=1;n<=t;n++)a.push(n,n+1,0);this.setIndex(a),this.addAttribute("position",new zr(s,3)),this.addAttribute("normal",new zr(l,3)),this.addAttribute("uv",new zr(c,2))}ea.prototype=Object.create(Sr.prototype),ea.prototype.constructor=ea,ta.prototype=Object.create(Zo.prototype),ta.prototype.constructor=ta,ra.prototype=Object.create(Sr.prototype),ra.prototype.constructor=ra,ia.prototype=Object.create(Br.prototype),ia.prototype.constructor=ia,na.prototype=Object.create(Sr.prototype),na.prototype.constructor=na,oa.prototype=Object.create(Br.prototype),oa.prototype.constructor=oa,aa.prototype=Object.create(Sr.prototype),aa.prototype.constructor=aa,sa.prototype=Object.create(Br.prototype),sa.prototype.constructor=sa,la.prototype=Object.create(Sr.prototype),la.prototype.constructor=la,la.prototype.toJSON=function(){var e=Sr.prototype.toJSON.call(this);return ua(this.parameters.shapes,e)},ca.prototype=Object.create(Br.prototype),ca.prototype.constructor=ca,ca.prototype.toJSON=function(){var e=Br.prototype.toJSON.call(this);return ua(this.parameters.shapes,e)},ha.prototype=Object.create(Br.prototype),ha.prototype.constructor=ha,pa.prototype=Object.create(Sr.prototype),pa.prototype.constructor=pa,da.prototype=Object.create(Br.prototype),da.prototype.constructor=da,fa.prototype=Object.create(pa.prototype),fa.prototype.constructor=fa,ma.prototype=Object.create(da.prototype),ma.prototype.constructor=ma,va.prototype=Object.create(Sr.prototype),va.prototype.constructor=va,ga.prototype=Object.create(Br.prototype),ga.prototype.constructor=ga;var ya=Object.freeze({WireframeGeometry:ao,ParametricGeometry:so,ParametricBufferGeometry:lo,TetrahedronGeometry:ho,TetrahedronBufferGeometry:po,OctahedronGeometry:fo,OctahedronBufferGeometry:mo,IcosahedronGeometry:vo,IcosahedronBufferGeometry:go,DodecahedronGeometry:yo,DodecahedronBufferGeometry:xo,PolyhedronGeometry:co,PolyhedronBufferGeometry:uo,TubeGeometry:_o,TubeBufferGeometry:wo,TorusKnotGeometry:bo,TorusKnotBufferGeometry:Mo,TorusGeometry:To,TorusBufferGeometry:Eo,TextGeometry:ea,TextBufferGeometry:ta,SphereGeometry:ra,SphereBufferGeometry:ia,RingGeometry:na,RingBufferGeometry:oa,PlaneGeometry:Gr,PlaneBufferGeometry:Wr,LatheGeometry:aa,LatheBufferGeometry:sa,ShapeGeometry:la,ShapeBufferGeometry:ca,ExtrudeGeometry:Jo,ExtrudeBufferGeometry:Zo,EdgesGeometry:ha,ConeGeometry:fa,ConeBufferGeometry:ma,CylinderGeometry:pa,CylinderBufferGeometry:da,CircleGeometry:va,CircleBufferGeometry:ga,BoxGeometry:Fr,BoxBufferGeometry:jr});function xa(e){ni.call(this),this.type="ShadowMaterial",this.color=new cr(0),this.transparent=!0,this.setValues(e)}function _a(e){oi.call(this,e),this.type="RawShaderMaterial"}function wa(e){ni.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new cr(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ct,this.normalScale=new Dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ba(e){wa.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Ma(e){ni.call(this),this.type="MeshPhongMaterial",this.color=new cr(16777215),this.specular=new cr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ct,this.normalScale=new Dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=te,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ta(e){Ma.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Ea(e){ni.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ct,this.normalScale=new Dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Sa(e){ni.call(this),this.type="MeshLambertMaterial",this.color=new cr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=te,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ra(e){ni.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new cr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ct,this.normalScale=new Dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e)}function Pa(e){Jn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}xa.prototype=Object.create(ni.prototype),xa.prototype.constructor=xa,xa.prototype.isShadowMaterial=!0,xa.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this},_a.prototype=Object.create(oi.prototype),_a.prototype.constructor=_a,_a.prototype.isRawShaderMaterial=!0,wa.prototype=Object.create(ni.prototype),wa.prototype.constructor=wa,wa.prototype.isMeshStandardMaterial=!0,wa.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ba.prototype=Object.create(wa.prototype),ba.prototype.constructor=ba,ba.prototype.isMeshPhysicalMaterial=!0,ba.prototype.copy=function(e){return wa.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Ma.prototype=Object.create(ni.prototype),Ma.prototype.constructor=Ma,Ma.prototype.isMeshPhongMaterial=!0,Ma.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ta.prototype=Object.create(Ma.prototype),Ta.prototype.constructor=Ta,Ta.prototype.isMeshToonMaterial=!0,Ta.prototype.copy=function(e){return Ma.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Ea.prototype=Object.create(ni.prototype),Ea.prototype.constructor=Ea,Ea.prototype.isMeshNormalMaterial=!0,Ea.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Sa.prototype=Object.create(ni.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isMeshLambertMaterial=!0,Sa.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ra.prototype=Object.create(ni.prototype),Ra.prototype.constructor=Ra,Ra.prototype.isMeshMatcapMaterial=!0,Ra.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Pa.prototype=Object.create(Jn.prototype),Pa.prototype.constructor=Pa,Pa.prototype.isLineDashedMaterial=!0,Pa.prototype.copy=function(e){return Jn.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Aa=Object.freeze({ShadowMaterial:xa,SpriteMaterial:Wn,RawShaderMaterial:_a,ShaderMaterial:oi,PointsMaterial:eo,MeshPhysicalMaterial:ba,MeshStandardMaterial:wa,MeshPhongMaterial:Ma,MeshToonMaterial:Ta,MeshNormalMaterial:Ea,MeshLambertMaterial:Sa,MeshDepthMaterial:xn,MeshDistanceMaterial:_n,MeshBasicMaterial:li,MeshMatcapMaterial:Ra,LineDashedMaterial:Pa,LineBasicMaterial:Jn,Material:ni}),Ca={arraySlice:function(e,t,r){return Ca.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,r=new Array(t),i=0;i!==t;++i)r[i]=i;return r.sort(function(t,r){return e[t]-e[r]}),r},sortedArray:function(e,t,r){for(var i=e.length,n=new e.constructor(i),o=0,a=0;a!==i;++o)for(var s=r[o]*t,l=0;l!==t;++l)n[a++]=e[s+l];return n},flattenJSON:function(e,t,r,i){for(var n=1,o=e[0];void 0!==o&&void 0===o[i];)o=e[n++];if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[i])&&(t.push(o.time),r.push.apply(r,a)),o=e[n++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[i])&&(t.push(o.time),a.toArray(r,r.length)),o=e[n++]}while(void 0!==o);else do{void 0!==(a=o[i])&&(t.push(o.time),r.push(a)),o=e[n++]}while(void 0!==o)}}};function La(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function Oa(e,t,r,i){La.call(this,e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Da(e,t,r,i){La.call(this,e,t,r,i)}function Ha(e,t,r,i){La.call(this,e,t,r,i)}function za(e,t,r,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ca.convertArray(t,this.TimeBufferType),this.values=Ca.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Ia(e,t,r){za.call(this,e,t,r)}function ka(e,t,r,i){za.call(this,e,t,r,i)}function Na(e,t,r,i){za.call(this,e,t,r,i)}function Ua(e,t,r,i){La.call(this,e,t,r,i)}function Ba(e,t,r,i){za.call(this,e,t,r,i)}function Fa(e,t,r,i){za.call(this,e,t,r,i)}function ja(e,t,r,i){za.call(this,e,t,r,i)}function Ga(e,t,r){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.uuid=Ot.generateUUID(),this.duration<0&&this.resetDuration()}function Wa(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Na;case"vector":case"vector2":case"vector3":case"vector4":return ja;case"color":return ka;case"quaternion":return Ba;case"bool":case"boolean":return Ia;case"string":return Fa}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var r=[],i=[];Ca.flattenJSON(e.keys,r,i,"value"),e.times=r,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(La.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,i=t[r],n=t[r-1];e:{t:{var o;r:{i:if(!(e<i)){for(var a=r+2;;){if(void 0===i){if(e<n)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,n)}if(r===a)break;if(n=i,e<(i=t[++r]))break t}o=t.length;break r}if(e>=n)break e;var s=t[1];for(e<s&&(r=2,n=s),a=r-2;;){if(void 0===n)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===a)break;if(i=n,e>=(n=t[--r-1]))break t}o=r,r=0}for(;r<o;){var l=r+o>>>1;e<t[l]?o=l:r=l+1}if(i=t[r],void 0===(n=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,n,e)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=e*i,o=0;o!==i;++o)t[o]=r[n+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(La.prototype,{beforeStart_:La.prototype.copySampleValue_,afterEnd_:La.prototype.copySampleValue_}),Oa.prototype=Object.assign(Object.create(La.prototype),{constructor:Oa,DefaultSettings_:{endingStart:gt,endingEnd:gt},intervalChanged_:function(e,t,r){var i=this.parameterPositions,n=e-2,o=e+1,a=i[n],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:n=e,a=2*t-r;break;case 2402:a=t+i[n=i.length-2]-i[n+1];break;default:n=e,a=r}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*r-t;break;case 2402:o=1,s=r+i[1]-i[0];break;default:o=e-1,s=t}var l=.5*(r-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-r),this._offsetPrev=n*c,this._offsetNext=o*c},interpolate_:function(e,t,r,i){for(var n=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,p=this._weightNext,d=(r-t)/(i-t),f=d*d,m=f*d,v=-h*m+2*h*f-h*d,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,x=p*m-p*f,_=0;_!==a;++_)n[_]=v*o[c+_]+g*o[l+_]+y*o[s+_]+x*o[u+_];return n}}),Da.prototype=Object.assign(Object.create(La.prototype),{constructor:Da,interpolate_:function(e,t,r,i){for(var n=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(r-t)/(i-t),u=1-c,h=0;h!==a;++h)n[h]=o[l+h]*u+o[s+h]*c;return n}}),Ha.prototype=Object.assign(Object.create(La.prototype),{constructor:Ha,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(za,{toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:Ca.convertArray(e.times,Array),values:Ca.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}),Object.assign(za.prototype,{constructor:za,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Ha(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Da(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Oa(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,i=t.length;r!==i;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,i=t.length;r!==i;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,i=r.length,n=0,o=i-1;n!==i&&r[n]<e;)++n;for(;-1!==o&&r[o]>t;)--o;if(++o,0!==n||o!==i){n>=o&&(n=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=Ca.arraySlice(r,n,o),this.values=Ca.arraySlice(this.values,n*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var r=this.times,i=this.values,n=r.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==n;a++){var s=r[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==i&&Ca.isTypedArray(i)){a=0;for(var l=i.length;a!==l;++a){var c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,r=this.getValueSize(),i=2302===this.getInterpolation(),n=1,o=e.length-1,a=1;a<o;++a){var s=!1,l=e[a];if(l!==e[a+1]&&(1!==a||l!==l[0]))if(i)s=!0;else for(var c=a*r,u=c-r,h=c+r,p=0;p!==r;++p){var d=t[c+p];if(d!==t[u+p]||d!==t[h+p]){s=!0;break}}if(s){if(a!==n){e[n]=e[a];var f=a*r,m=n*r;for(p=0;p!==r;++p)t[m+p]=t[f+p]}++n}}if(o>0){for(e[n]=e[o],f=o*r,m=n*r,p=0;p!==r;++p)t[m+p]=t[f+p];++n}return n!==e.length&&(this.times=Ca.arraySlice(e,0,n),this.values=Ca.arraySlice(t,0,n*r)),this}}),Ia.prototype=Object.assign(Object.create(za.prototype),{constructor:Ia,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ka.prototype=Object.assign(Object.create(za.prototype),{constructor:ka,ValueTypeName:"color"}),Na.prototype=Object.assign(Object.create(za.prototype),{constructor:Na,ValueTypeName:"number"}),Ua.prototype=Object.assign(Object.create(La.prototype),{constructor:Ua,interpolate_:function(e,t,r,i){for(var n=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=(r-t)/(i-t),c=s+a;s!==c;s+=4)zt.slerpFlat(n,0,o,s-a,o,s,l);return n}}),Ba.prototype=Object.assign(Object.create(za.prototype),{constructor:Ba,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Ua(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Fa.prototype=Object.assign(Object.create(za.prototype),{constructor:Fa,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ja.prototype=Object.assign(Object.create(za.prototype),{constructor:ja,ValueTypeName:"vector"}),Object.assign(Ga,{parse:function(e){for(var t=[],r=e.tracks,i=1/(e.fps||1),n=0,o=r.length;n!==o;++n)t.push(Wa(r[n]).scale(i));return new Ga(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},n=0,o=r.length;n!==o;++n)t.push(za.toJSON(r[n]));return i},CreateFromMorphTargetSequence:function(e,t,r,i){for(var n=t.length,o=[],a=0;a<n;a++){var s=[],l=[];s.push((a+n-1)%n,a,(a+1)%n),l.push(0,1,0);var c=Ca.getKeyframeOrder(s);s=Ca.sortedArray(s,1,c),l=Ca.sortedArray(l,1,c),i||0!==s[0]||(s.push(n),l.push(l[0])),o.push(new Na(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/r))}return new Ga(e,-1,o)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var i=e;r=i.geometry&&i.geometry.animations||i.animations}for(var n=0;n<r.length;n++)if(r[n].name===t)return r[n];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var i={},n=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],l=s.name.match(n);if(l&&l.length>1){var c=i[h=l[1]];c||(i[h]=c=[]),c.push(s)}}var u=[];for(var h in i)u.push(Ga.CreateFromMorphTargetSequence(h,i[h],t,r));return u},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var r=function(e,t,r,i,n){if(0!==r.length){var o=[],a=[];Ca.flattenJSON(r,o,a,i),0!==o.length&&n.push(new e(t,o,a))}},i=[],n=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var c=s[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var u={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var p=0;p<c[h].morphTargets.length;p++)u[c[h].morphTargets[p]]=-1;for(var d in u){var f=[],m=[];for(p=0;p!==c[h].morphTargets.length;++p){var v=c[h];f.push(v.time),m.push(v.morphTarget===d?1:0)}i.push(new Na(".morphTargetInfluence["+d+"]",f,m))}o=u.length*(a||1)}else{var g=".bones["+t[l].name+"]";r(ja,g+".position",c,"pos",i),r(Ba,g+".quaternion",c,"rot",i),r(ja,g+".scale",c,"scl",i)}}return 0===i.length?null:new Ga(n,o,i)}}),Object.assign(Ga.prototype,{resetDuration:function(){for(var e=0,t=0,r=this.tracks.length;t!==r;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}});var Va={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function qa(e,t,r){var i=this,n=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){a++,!1===n&&void 0!==i.onStart&&i.onStart(e,o,a),n=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,a),o===a&&(n=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var Xa=new qa,$a={};function Ya(e){this.manager=void 0!==e?e:Xa}function Ja(e){this.manager=void 0!==e?e:Xa}function Za(e){this.manager=void 0!==e?e:Xa,this._parser=null}function Qa(e){this.manager=void 0!==e?e:Xa,this._parser=null}function Ka(e){this.manager=void 0!==e?e:Xa}function es(e){this.manager=void 0!==e?e:Xa}function ts(e){this.manager=void 0!==e?e:Xa}function rs(){this.type="Curve",this.arcLengthDivisions=200}function is(e,t,r,i,n,o,a,s){rs.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=r||1,this.yRadius=i||1,this.aStartAngle=n||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function ns(e,t,r,i,n,o){is.call(this,e,t,r,r,i,n,o),this.type="ArcCurve"}function os(){var e=0,t=0,r=0,i=0;function n(n,o,a,s){e=n,t=a,r=-3*n+3*o-2*a-s,i=2*n-2*o+a+s}return{initCatmullRom:function(e,t,r,i,o){n(t,r,o*(r-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,r,i,o,a,s){var l=(t-e)/o-(r-e)/(o+a)+(r-t)/a,c=(r-t)/a-(i-t)/(a+s)+(i-r)/s;n(t,r,l*=a,c*=a)},calc:function(n){var o=n*n;return e+t*n+r*o+i*(o*n)}}}Object.assign(Ya.prototype,{load:function(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var n=this,o=Va.get(e);if(void 0!==o)return n.manager.itemStart(e),setTimeout(function(){t&&t(o),n.manager.itemEnd(e)},0),o;if(void 0===$a[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],l=!!a[2],c=a[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var u,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var p=new Uint8Array(c.length),d=0;d<c.length;d++)p[d]=c.charCodeAt(d);u="blob"===h?new Blob([p.buffer],{type:s}):p.buffer;break;case"document":var f=new DOMParser;u=f.parseFromString(c,s);break;case"json":u=JSON.parse(c);break;default:u=c}setTimeout(function(){t&&t(u),n.manager.itemEnd(e)},0)}catch(t){setTimeout(function(){i&&i(t),n.manager.itemError(e),n.manager.itemEnd(e)},0)}}else{$a[e]=[],$a[e].push({onLoad:t,onProgress:r,onError:i});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",function(t){var r=this.response;Va.add(e,r);var i=$a[e];if(delete $a[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=i.length;o<a;o++)(s=i[o]).onLoad&&s.onLoad(r);n.manager.itemEnd(e)}else{for(o=0,a=i.length;o<a;o++){var s;(s=i[o]).onError&&s.onError(t)}n.manager.itemError(e),n.manager.itemEnd(e)}},!1),m.addEventListener("progress",function(t){for(var r=$a[e],i=0,n=r.length;i<n;i++){var o=r[i];o.onProgress&&o.onProgress(t)}},!1),m.addEventListener("error",function(t){var r=$a[e];delete $a[e];for(var i=0,o=r.length;i<o;i++){var a=r[i];a.onError&&a.onError(t)}n.manager.itemError(e),n.manager.itemEnd(e)},!1),m.addEventListener("abort",function(t){var r=$a[e];delete $a[e];for(var i=0,o=r.length;i<o;i++){var a=r[i];a.onError&&a.onError(t)}n.manager.itemError(e),n.manager.itemEnd(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return n.manager.itemStart(e),m}$a[e].push({onLoad:t,onProgress:r,onError:i})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Ja.prototype,{load:function(e,t,r,i){var n=this,o=new Ya(n.manager);o.setPath(n.path),o.load(e,function(e){t(n.parse(JSON.parse(e)))},r,i)},parse:function(e,t){for(var r=[],i=0;i<e.length;i++){var n=Ga.parse(e[i]);r.push(n)}t(r)},setPath:function(e){return this.path=e,this}}),Object.assign(Za.prototype,{load:function(e,t,r,i){var n=this,o=[],a=new io;a.image=o;var s=new Ya(this.manager);function l(l){s.load(e[l],function(e){var r=n._parser(e,!0);o[l]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(c+=1)&&(1===r.mipmapCount&&(a.minFilter=Me),a.format=r.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,u=0,h=e.length;u<h;++u)l(u);else s.load(e,function(e){var r=n._parser(e,!0);if(r.isCubemap)for(var i=r.mipmaps.length/r.mipmapCount,s=0;s<i;s++){o[s]={mipmaps:[]};for(var l=0;l<r.mipmapCount;l++)o[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+l]),o[s].format=r.format,o[s].width=r.width,o[s].height=r.height}else a.image.width=r.width,a.image.height=r.height,a.mipmaps=r.mipmaps;1===r.mipmapCount&&(a.minFilter=Me),a.format=r.format,a.needsUpdate=!0,t&&t(a)},r,i);return a},setPath:function(e){return this.path=e,this}}),Object.assign(Qa.prototype,{load:function(e,t,r,i){var n=this,o=new Jt,a=new Ya(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,function(e){var r=n._parser(e);r&&(void 0!==r.image?o.image=r.image:void 0!==r.data&&(o.image.width=r.width,o.image.height=r.height,o.image.data=r.data),o.wrapS=void 0!==r.wrapS?r.wrapS:ye,o.wrapT=void 0!==r.wrapT?r.wrapT:ye,o.magFilter=void 0!==r.magFilter?r.magFilter:Me,o.minFilter=void 0!==r.minFilter?r.minFilter:Ee,o.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(o.format=r.format),void 0!==r.type&&(o.type=r.type),void 0!==r.mipmaps&&(o.mipmaps=r.mipmaps),1===r.mipmapCount&&(o.minFilter=Me),o.needsUpdate=!0,t&&t(o,r))},r,i),o},setPath:function(e){return this.path=e,this}}),Object.assign(Ka.prototype,{crossOrigin:"anonymous",load:function(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var n=this,o=Va.get(e);if(void 0!==o)return n.manager.itemStart(e),setTimeout(function(){t&&t(o),n.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),Va.add(e,this),t&&t(this),n.manager.itemEnd(e)}function l(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),i&&i(t),n.manager.itemError(e),n.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),n.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(es.prototype,{crossOrigin:"anonymous",load:function(e,t,r,i){var n=new hi,o=new Ka(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(r){o.load(e[r],function(e){n.images[r]=e,6==++a&&(n.needsUpdate=!0,t&&t(n))},void 0,i)}for(var l=0;l<e.length;++l)s(l);return n},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(ts.prototype,{crossOrigin:"anonymous",load:function(e,t,r,i){var n=new Vt,o=new Ka(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(r){n.image=r;var i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);n.format=i?Ue:Be,n.needsUpdate=!0,void 0!==t&&t(n)},r,i),n},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(rs.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var r=this.getUtoTmapping(e);return this.getPoint(r,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,i=[],n=this.getPoint(0),o=0;for(i.push(0),r=1;r<=e;r++)o+=(t=this.getPoint(r/e)).distanceTo(n),i.push(o),n=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,i=this.getLengths(),n=0,o=i.length;r=t||e*i[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=i[n=Math.floor(s+(l-s)/2)]-r)<0)s=n+1;else{if(!(a>0)){l=n;break}l=n-1}if(i[n=l]===r)return n/(o-1);var c=i[n];return(n+(r-c)/(i[n+1]-c))/(o-1)},getTangent:function(e){var t=e-1e-4,r=e+1e-4;t<0&&(t=0),r>1&&(r=1);var i=this.getPoint(t);return this.getPoint(r).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r,i,n,o=new It,a=[],s=[],l=[],c=new It,u=new Ht;for(r=0;r<=e;r++)i=r/e,a[r]=this.getTangentAt(i),a[r].normalize();s[0]=new It,l[0]=new It;var h=Number.MAX_VALUE,p=Math.abs(a[0].x),d=Math.abs(a[0].y),f=Math.abs(a[0].z);for(p<=h&&(h=p,o.set(1,0,0)),d<=h&&(h=d,o.set(0,1,0)),f<=h&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),l[0].crossVectors(a[0],s[0]),r=1;r<=e;r++)s[r]=s[r-1].clone(),l[r]=l[r-1].clone(),c.crossVectors(a[r-1],a[r]),c.length()>Number.EPSILON&&(c.normalize(),n=Math.acos(Ot.clamp(a[r-1].dot(a[r]),-1,1)),s[r].applyMatrix4(u.makeRotationAxis(c,n))),l[r].crossVectors(a[r],s[r]);if(!0===t)for(n=Math.acos(Ot.clamp(s[0].dot(s[e]),-1,1)),n/=e,a[0].dot(c.crossVectors(s[0],s[e]))>0&&(n=-n),r=1;r<=e;r++)s[r].applyMatrix4(u.makeRotationAxis(a[r],n*r)),l[r].crossVectors(a[r],s[r]);return{tangents:a,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),is.prototype=Object.create(rs.prototype),is.prototype.constructor=is,is.prototype.isEllipseCurve=!0,is.prototype.getPoint=function(e,t){for(var r=t||new Dt,i=2*Math.PI,n=this.aEndAngle-this.aStartAngle,o=Math.abs(n)<Number.EPSILON;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(n=o?0:i),!0!==this.aClockwise||o||(n===i?n=-i:n-=i);var a=this.aStartAngle+e*n,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=s-this.aX,p=l-this.aY;s=h*c-p*u+this.aX,l=h*u+p*c+this.aY}return r.set(s,l)},is.prototype.copy=function(e){return rs.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},is.prototype.toJSON=function(){var e=rs.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},is.prototype.fromJSON=function(e){return rs.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ns.prototype=Object.create(is.prototype),ns.prototype.constructor=ns,ns.prototype.isArcCurve=!0;var as=new It,ss=new os,ls=new os,cs=new os;function us(e,t,r,i){rs.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=r||"centripetal",this.tension=i||.5}function hs(e,t,r,i,n){var o=.5*(i-t),a=.5*(n-r),s=e*e;return(2*r-2*i+o+a)*(e*s)+(-3*r+3*i-2*o-a)*s+o*e+r}function ps(e,t,r,i){return function(e,t){var r=1-e;return r*r*t}(e,t)+function(e,t){return 2*(1-e)*e*r}(e)+function(e,t){return e*e*i}(e)}function ds(e,t,r,i,n){return function(e,t){var r=1-e;return r*r*r*t}(e,t)+function(e,t){var r=1-e;return 3*r*r*e*t}(e,r)+function(e,t){return 3*(1-e)*e*e*i}(e)+function(e,t){return e*e*e*n}(e)}function fs(e,t,r,i){rs.call(this),this.type="CubicBezierCurve",this.v0=e||new Dt,this.v1=t||new Dt,this.v2=r||new Dt,this.v3=i||new Dt}function ms(e,t,r,i){rs.call(this),this.type="CubicBezierCurve3",this.v0=e||new It,this.v1=t||new It,this.v2=r||new It,this.v3=i||new It}function vs(e,t){rs.call(this),this.type="LineCurve",this.v1=e||new Dt,this.v2=t||new Dt}function gs(e,t){rs.call(this),this.type="LineCurve3",this.v1=e||new It,this.v2=t||new It}function ys(e,t,r){rs.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Dt,this.v1=t||new Dt,this.v2=r||new Dt}function xs(e,t,r){rs.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new It,this.v1=t||new It,this.v2=r||new It}function _s(e){rs.call(this),this.type="SplineCurve",this.points=e||[]}us.prototype=Object.create(rs.prototype),us.prototype.constructor=us,us.prototype.isCatmullRomCurve3=!0,us.prototype.getPoint=function(e,t){var r,i,n,o,a=t||new It,s=this.points,l=s.length,c=(l-(this.closed?0:1))*e,u=Math.floor(c),h=c-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/l)+1)*l:0===h&&u===l-1&&(u=l-2,h=1),this.closed||u>0?r=s[(u-1)%l]:(as.subVectors(s[0],s[1]).add(s[0]),r=as),i=s[u%l],n=s[(u+1)%l],this.closed||u+2<l?o=s[(u+2)%l]:(as.subVectors(s[l-1],s[l-2]).add(s[l-1]),o=as),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=Math.pow(r.distanceToSquared(i),p),f=Math.pow(i.distanceToSquared(n),p),m=Math.pow(n.distanceToSquared(o),p);f<1e-4&&(f=1),d<1e-4&&(d=f),m<1e-4&&(m=f),ss.initNonuniformCatmullRom(r.x,i.x,n.x,o.x,d,f,m),ls.initNonuniformCatmullRom(r.y,i.y,n.y,o.y,d,f,m),cs.initNonuniformCatmullRom(r.z,i.z,n.z,o.z,d,f,m)}else"catmullrom"===this.curveType&&(ss.initCatmullRom(r.x,i.x,n.x,o.x,this.tension),ls.initCatmullRom(r.y,i.y,n.y,o.y,this.tension),cs.initCatmullRom(r.z,i.z,n.z,o.z,this.tension));return a.set(ss.calc(h),ls.calc(h),cs.calc(h)),a},us.prototype.copy=function(e){rs.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},us.prototype.toJSON=function(){var e=rs.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},us.prototype.fromJSON=function(e){rs.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new It).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},fs.prototype=Object.create(rs.prototype),fs.prototype.constructor=fs,fs.prototype.isCubicBezierCurve=!0,fs.prototype.getPoint=function(e,t){var r=t||new Dt,i=this.v0,n=this.v1,o=this.v2,a=this.v3;return r.set(ds(e,i.x,n.x,o.x,a.x),ds(e,i.y,n.y,o.y,a.y)),r},fs.prototype.copy=function(e){return rs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},fs.prototype.toJSON=function(){var e=rs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},fs.prototype.fromJSON=function(e){return rs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ms.prototype=Object.create(rs.prototype),ms.prototype.constructor=ms,ms.prototype.isCubicBezierCurve3=!0,ms.prototype.getPoint=function(e,t){var r=t||new It,i=this.v0,n=this.v1,o=this.v2,a=this.v3;return r.set(ds(e,i.x,n.x,o.x,a.x),ds(e,i.y,n.y,o.y,a.y),ds(e,i.z,n.z,o.z,a.z)),r},ms.prototype.copy=function(e){return rs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},ms.prototype.toJSON=function(){var e=rs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},ms.prototype.fromJSON=function(e){return rs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},vs.prototype=Object.create(rs.prototype),vs.prototype.constructor=vs,vs.prototype.isLineCurve=!0,vs.prototype.getPoint=function(e,t){var r=t||new Dt;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},vs.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},vs.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},vs.prototype.copy=function(e){return rs.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},vs.prototype.toJSON=function(){var e=rs.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},vs.prototype.fromJSON=function(e){return rs.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},gs.prototype=Object.create(rs.prototype),gs.prototype.constructor=gs,gs.prototype.isLineCurve3=!0,gs.prototype.getPoint=function(e,t){var r=t||new It;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},gs.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},gs.prototype.copy=function(e){return rs.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},gs.prototype.toJSON=function(){var e=rs.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},gs.prototype.fromJSON=function(e){return rs.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ys.prototype=Object.create(rs.prototype),ys.prototype.constructor=ys,ys.prototype.isQuadraticBezierCurve=!0,ys.prototype.getPoint=function(e,t){var r=t||new Dt,i=this.v0,n=this.v1,o=this.v2;return r.set(ps(e,i.x,n.x,o.x),ps(e,i.y,n.y,o.y)),r},ys.prototype.copy=function(e){return rs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ys.prototype.toJSON=function(){var e=rs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ys.prototype.fromJSON=function(e){return rs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},xs.prototype=Object.create(rs.prototype),xs.prototype.constructor=xs,xs.prototype.isQuadraticBezierCurve3=!0,xs.prototype.getPoint=function(e,t){var r=t||new It,i=this.v0,n=this.v1,o=this.v2;return r.set(ps(e,i.x,n.x,o.x),ps(e,i.y,n.y,o.y),ps(e,i.z,n.z,o.z)),r},xs.prototype.copy=function(e){return rs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},xs.prototype.toJSON=function(){var e=rs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},xs.prototype.fromJSON=function(e){return rs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},_s.prototype=Object.create(rs.prototype),_s.prototype.constructor=_s,_s.prototype.isSplineCurve=!0,_s.prototype.getPoint=function(e,t){var r=t||new Dt,i=this.points,n=(i.length-1)*e,o=Math.floor(n),a=n-o,s=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return r.set(hs(a,s.x,l.x,c.x,u.x),hs(a,s.y,l.y,c.y,u.y)),r},_s.prototype.copy=function(e){rs.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this},_s.prototype.toJSON=function(){var e=rs.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e},_s.prototype.fromJSON=function(e){rs.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new Dt).fromArray(i))}return this};var ws=Object.freeze({ArcCurve:ns,CatmullRomCurve3:us,CubicBezierCurve:fs,CubicBezierCurve3:ms,EllipseCurve:is,LineCurve:vs,LineCurve3:gs,QuadraticBezierCurve:ys,QuadraticBezierCurve3:xs,SplineCurve:_s});function bs(){rs.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ms(e){bs.call(this),this.type="Path",this.currentPoint=new Dt,e&&this.setFromPoints(e)}function Ts(e){Ms.call(this,e),this.uuid=Ot.generateUUID(),this.type="Shape",this.holes=[]}function Es(e,t){br.call(this),this.type="Light",this.color=new cr(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Ss(e,t,r){Es.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(br.DefaultUp),this.updateMatrix(),this.groundColor=new cr(t)}function Rs(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Dt(512,512),this.map=null,this.matrix=new Ht}function Ps(){Rs.call(this,new Sn(50,1,.5,500))}function As(e,t,r,i,n,o){Es.call(this,e,t),this.type="SpotLight",this.position.copy(br.DefaultUp),this.updateMatrix(),this.target=new br,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==n?n:0,this.decay=void 0!==o?o:1,this.shadow=new Ps}function Cs(e,t,r,i){Es.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==i?i:1,this.shadow=new Rs(new Sn(90,1,.5,500))}function Ls(e,t,r,i,n,o){En.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==r?r:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==n?n:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Os(){Rs.call(this,new Ls(-5,5,5,-5,.5,500))}function Ds(e,t){Es.call(this,e,t),this.type="DirectionalLight",this.position.copy(br.DefaultUp),this.updateMatrix(),this.target=new br,this.shadow=new Os}function Hs(e,t){Es.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function zs(e,t,r,i){Es.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==r?r:10,this.height=void 0!==i?i:10}function Is(e){this.manager=void 0!==e?e:Xa,this.textures={}}bs.prototype=Object.assign(Object.create(rs.prototype),{constructor:bs,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new vs(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=t){var n=r[i]-t,o=this.curves[i],a=o.getLength(),s=0===a?0:1-n/a;return o.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],i=0,n=this.curves;i<n.length;i++)for(var o=n[i],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),l=0;l<s.length;l++){var c=s[l];t&&t.equals(c)||(r.push(c),t=c)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(e){rs.prototype.copy.call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=rs.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){rs.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new ws[i.type]).fromJSON(i))}return this}}),Ms.prototype=Object.assign(Object.create(bs.prototype),{constructor:Ms,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new vs(this.currentPoint.clone(),new Dt(e,t));this.curves.push(r),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,i){var n=new ys(this.currentPoint.clone(),new Dt(e,t),new Dt(r,i));this.curves.push(n),this.currentPoint.set(r,i)},bezierCurveTo:function(e,t,r,i,n,o){var a=new fs(this.currentPoint.clone(),new Dt(e,t),new Dt(r,i),new Dt(n,o));this.curves.push(a),this.currentPoint.set(n,o)},splineThru:function(e){var t=new _s([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,i,n,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,r,i,n,o)},absarc:function(e,t,r,i,n,o){this.absellipse(e,t,r,r,i,n,o)},ellipse:function(e,t,r,i,n,o,a,s){var l=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+l,t+c,r,i,n,o,a,s)},absellipse:function(e,t,r,i,n,o,a,s){var l=new is(e,t,r,i,n,o,a,s);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);this.currentPoint.copy(u)},copy:function(e){return bs.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=bs.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return bs.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Ts.prototype=Object.assign(Object.create(Ms.prototype),{constructor:Ts,getPointsHoles:function(e){for(var t=[],r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Ms.prototype.copy.call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=Ms.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){Ms.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new Ms).fromJSON(i))}return this}}),Es.prototype=Object.assign(Object.create(br.prototype),{constructor:Es,isLight:!0,copy:function(e){return br.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=br.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Ss.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ss,isHemisphereLight:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Rs.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Ps.prototype=Object.assign(Object.create(Rs.prototype),{constructor:Ps,isSpotLightShadow:!0,update:function(e){var t=this.camera,r=2*Ot.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;r===t.fov&&i===t.aspect&&n===t.far||(t.fov=r,t.aspect=i,t.far=n,t.updateProjectionMatrix())}}),As.prototype=Object.assign(Object.create(Es.prototype),{constructor:As,isSpotLight:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Cs.prototype=Object.assign(Object.create(Es.prototype),{constructor:Cs,isPointLight:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Ls.prototype=Object.assign(Object.create(En.prototype),{constructor:Ls,isOrthographicCamera:!0,copy:function(e,t){return En.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,r,i,n,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,o=r+e,a=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(n+=u*(this.view.offsetX/l))+u*(this.view.width/l),s=(a-=h*(this.view.offsetY/c))-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(n,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=br.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Os.prototype=Object.assign(Object.create(Rs.prototype),{constructor:Os}),Ds.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ds,isDirectionalLight:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Hs.prototype=Object.assign(Object.create(Es.prototype),{constructor:Hs,isAmbientLight:!0}),zs.prototype=Object.assign(Object.create(Es.prototype),{constructor:zs,isRectAreaLight:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Es.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(Is.prototype,{load:function(e,t,r,i){var n=this,o=new Ya(n.manager);o.setPath(n.path),o.load(e,function(e){t(n.parse(JSON.parse(e)))},r,i)},parse:function(e){var t=this.textures;function r(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new Aa[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.uniforms)for(var n in e.uniforms){var o=e.uniforms[n];switch(i.uniforms[n]={},o.type){case"t":i.uniforms[n].value=r(o.value);break;case"c":i.uniforms[n].value=(new cr).setHex(o.value);break;case"v2":i.uniforms[n].value=(new Dt).fromArray(o.value);break;case"v3":i.uniforms[n].value=(new It).fromArray(o.value);break;case"v4":i.uniforms[n].value=(new qt).fromArray(o.value);break;case"m3":i.uniforms[n].value=(new kt).fromArray(o.value);case"m4":i.uniforms[n].value=(new Ht).fromArray(o.value);break;default:i.uniforms[n].value=o.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var a in e.extensions)i.extensions[a]=e.extensions[a];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=r(e.map)),void 0!==e.alphaMap&&(i.alphaMap=r(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=r(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),i.normalScale=(new Dt).fromArray(s)}return void 0!==e.displacementMap&&(i.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=r(e.specularMap)),void 0!==e.envMap&&(i.envMap=r(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=r(e.gradientMap)),i},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var ks={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Ns(e){this.manager=void 0!==e?e:Xa}Object.assign(Ns.prototype,{load:function(e,t,r,i){var n=this,o=new Ya(n.manager);o.setPath(n.path),o.load(e,function(e){t(n.parse(JSON.parse(e)))},r,i)},parse:function(e){var t=new Br,r=e.data.index;if(void 0!==r){var i=new Us[r.type](r.array);t.setIndex(new Rr(i,1))}var n=e.data.attributes;for(var o in n){var a=n[o];i=new Us[a.type](a.array),t.addAttribute(o,new Rr(i,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var l=0,c=s.length;l!==c;++l){var u=s[l];t.addGroup(u.start,u.count,u.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var p=new It;void 0!==h.center&&p.fromArray(h.center),t.boundingSphere=new Qt(p,h.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t},setPath:function(e){return this.path=e,this}});var Us={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Bs(e){this.manager=void 0!==e?e:Xa,this.resourcePath=""}Object.assign(Bs.prototype,{crossOrigin:"anonymous",load:function(e,t,r,i){var n=this,o=void 0===this.path?ks.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new Ya(n.manager);a.setPath(this.path),a.load(e,function(r){var o=null;try{o=JSON.parse(r)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?n.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)},r,i)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var r=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,r),n=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,n),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,i,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var r=0,i=e.length;r<i;r++){var n=(new Ts).fromJSON(e[r]);t[n.uuid]=n}return t},parseGeometries:function(e,t){var r={};if(void 0!==e)for(var i=new Ns,n=0,o=e.length;n<o;n++){var a,s=e[n];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new ya[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new ya[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new ya[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new ya[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new ya[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new ya[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new ya[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new ya[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new ya[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new ya[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new ya[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new ya[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],c=0,u=s.shapes.length;c<u;c++){var h=t[s.shapes[c]];l.push(h)}a=new ya[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],c=0,u=s.shapes.length;c<u;c++)h=t[s.shapes[c]],l.push(h);var p=s.options.extrudePath;void 0!==p&&(s.options.extrudePath=(new ws[p.type]).fromJSON(p)),a=new ya[s.type](l,s.options);break;case"BufferGeometry":a=i.parse(s);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?a=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),r[s.uuid]=a}return r},parseMaterials:function(e,t){var r={},i={};if(void 0!==e){var n=new Is;n.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var l=[],c=0;c<s.materials.length;c++){var u=s.materials[c];void 0===r[u.uuid]&&(r[u.uuid]=n.parse(u)),l.push(r[u.uuid])}i[s.uuid]=l}else i[s.uuid]=n.parse(s),r[s.uuid]=i[s.uuid]}}return i},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r],n=Ga.parse(i);void 0!==i.uuid&&(n.uuid=i.uuid),t.push(n)}return t},parseImages:function(e,t){var r=this,i={};function n(e){return r.manager.itemStart(e),o.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemError(e),r.manager.itemEnd(e)})}if(void 0!==e&&e.length>0){var o=new Ka(new qa(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var l=e[a],c=l.url;if(Array.isArray(c)){i[l.uuid]=[];for(var u=0,h=c.length;u<h;u++){var p=c[u],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:r.resourcePath+p;i[l.uuid].push(n(d))}}else d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:r.resourcePath+l.url,i[l.uuid]=n(d)}}return i},parseTextures:function(e,t){function r(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var n=0,o=e.length;n<o;n++){var a,s=e[n];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new hi(t[s.image]):new Vt(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=r(s.mapping,qs)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=r(s.wrap[0],Xs),a.wrapT=r(s.wrap[1],Xs)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=r(s.minFilter,$s)),void 0!==s.magFilter&&(a.magFilter=r(s.magFilter,$s)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),i[s.uuid]=a}return i},parseObject:function(e,t,r){var i;function n(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,n=e.length;i<n;i++){var o=e[i];void 0===r[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(r[o])}return t}return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}}switch(e.type){case"Scene":i=new Fn,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new cr(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new Bn(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Un(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new Sn(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Ls(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new Hs(e.color,e.intensity);break;case"DirectionalLight":i=new Ds(e.color,e.intensity);break;case"PointLight":i=new Cs(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new zs(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new As(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new Ss(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=n(e.geometry),s=o(e.material);i=a.bones&&a.bones.length>0?new Xn(a,s):new ci(a,s);break;case"LOD":i=new qn;break;case"Line":i=new Zn(n(e.geometry),o(e.material),e.mode);break;case"LineLoop":i=new Kn(n(e.geometry),o(e.material));break;case"LineSegments":i=new Qn(n(e.geometry),o(e.material));break;case"PointCloud":case"Points":i=new to(n(e.geometry),o(e.material));break;case"Sprite":i=new Vn(o(e.material));break;case"Group":i=new Tn;break;default:i=new br}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children)for(var l=e.children,c=0;c<l.length;c++)i.add(this.parseObject(l[c],t,r));if("LOD"===e.type)for(var u=e.levels,h=0;h<u.length;h++){var p=u[h],d=i.getObjectByProperty("uuid",p.object);void 0!==d&&i.addLevel(d,p.distance)}return i}});var Fs,js,Gs,Ws,Vs,qs={UVMapping:300,CubeReflectionMapping:ue,CubeRefractionMapping:he,EquirectangularReflectionMapping:pe,EquirectangularRefractionMapping:de,SphericalReflectionMapping:fe,CubeUVReflectionMapping:me,CubeUVRefractionMapping:ve},Xs={RepeatWrapping:ge,ClampToEdgeWrapping:ye,MirroredRepeatWrapping:xe},$s={NearestFilter:_e,NearestMipMapNearestFilter:we,NearestMipMapLinearFilter:be,LinearFilter:Me,LinearMipMapNearestFilter:Te,LinearMipMapLinearFilter:Ee};function Ys(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Xa,this.options=void 0}function Js(){this.type="ShapePath",this.color=new cr,this.subPaths=[],this.currentPath=null}function Zs(e){this.type="Font",this.data=e}function Qs(e,t,r,i,n){var o=n.glyphs[e]||n.glyphs["?"];if(o){var a,s,l,c,u,h,p,d,f=new Js;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;)switch(m[v++]){case"m":a=m[v++]*t+r,s=m[v++]*t+i,f.moveTo(a,s);break;case"l":a=m[v++]*t+r,s=m[v++]*t+i,f.lineTo(a,s);break;case"q":l=m[v++]*t+r,c=m[v++]*t+i,u=m[v++]*t+r,h=m[v++]*t+i,f.quadraticCurveTo(u,h,l,c);break;case"b":l=m[v++]*t+r,c=m[v++]*t+i,u=m[v++]*t+r,h=m[v++]*t+i,p=m[v++]*t+r,d=m[v++]*t+i,f.bezierCurveTo(u,h,p,d,l,c)}return{offsetX:o.ha*t,path:f}}}function Ks(e){this.manager=void 0!==e?e:Xa}function el(){}Ys.prototype={constructor:Ys,setOptions:function(e){return this.options=e,this},load:function(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var n=this,o=Va.get(e);if(void 0!==o)return n.manager.itemStart(e),setTimeout(function(){t&&t(o),n.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,n.options)}).then(function(r){Va.add(e,r),t&&t(r),n.manager.itemEnd(e)}).catch(function(t){i&&i(t),n.manager.itemError(e),n.manager.itemEnd(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Js.prototype,{moveTo:function(e,t){this.currentPath=new Ms,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,i){this.currentPath.quadraticCurveTo(e,t,r,i)},bezierCurveTo:function(e,t,r,i,n,o){this.currentPath.bezierCurveTo(e,t,r,i,n,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function r(e){for(var t=[],r=0,i=e.length;r<i;r++){var n=e[r],o=new Ts;o.curves=n.curves,t.push(o)}return t}function i(e,t){for(var r=t.length,i=!1,n=r-1,o=0;o<r;n=o++){var a=t[n],s=t[o],l=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[o],l=-l,s=t[n],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var u=c*(e.x-a.x)-l*(e.y-a.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return i}var n=Xo.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return r(o);var a,s,l,c=[];if(1===o.length)return s=o[0],(l=new Ts).curves=s.curves,c.push(l),c;var u=!n(o[0].getPoints());u=e?!u:u;var h,p,d=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=n(h=(s=o[g]).getPoints()),(a=e?!a:a)?(!u&&f[v]&&v++,f[v]={s:new Ts,p:h},f[v].s.curves=s.curves,u&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return r(o);if(f.length>1){for(var x=!1,_=[],w=0,b=f.length;w<b;w++)d[w]=[];for(w=0,b=f.length;w<b;w++)for(var M=m[w],T=0;T<M.length;T++){for(var E=M[T],S=!0,R=0;R<f.length;R++)i(E.p,f[R].p)&&(w!==R&&_.push({froms:w,tos:R,hole:T}),S?(S=!1,d[R].push(E)):x=!0);S&&d[w].push(E)}_.length>0&&(x||(m=d))}g=0;for(var P=f.length;g<P;g++){l=f[g].s,c.push(l);for(var A=0,C=(p=m[g]).length;A<C;A++)l.holes.push(p[A].h)}return c}}),Object.assign(Zs.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var r=[],i=function(e,t,r){for(var i=Array.from?Array.from(e):String(e).split(""),n=t/r.resolution,o=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*n,a=[],s=0,l=0,c=0;c<i.length;c++){var u=i[c];if("\n"===u)s=0,l-=o;else{var h=Qs(u,n,s,l,r);s+=h.offsetX,a.push(h.path)}}return a}(e,t,this.data),n=0,o=i.length;n<o;n++)Array.prototype.push.apply(r,i[n].toShapes());return r}}),Object.assign(Ks.prototype,{load:function(e,t,r,i){var n=this,o=new Ya(this.manager);o.setPath(this.path),o.load(e,function(e){var r;try{r=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var i=n.parse(r);t&&t(i)},r,i)},parse:function(e){return new Zs(e)},setPath:function(e){return this.path=e,this}}),el.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,r=0,i=t.length;r<i;r+=2){var n=t[r],o=t[r+1];if(n.test(e))return o}return null}},Object.assign(el.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,r){for(var i=[],n=0;n<e.length;++n)i[n]=this.createMaterial(e[n],t,r);return i},createMaterial:(Fs={NoBlending:E,NormalBlending:S,AdditiveBlending:R,SubtractiveBlending:P,MultiplyBlending:A,CustomBlending:C},js=new cr,Gs=new ts,Ws=new Is,function(e,t,r){var i={};function n(e,n,o,a,s){var l,c=t+e,u=el.Handlers.get(c);null!==u?l=u.load(c):(Gs.setCrossOrigin(r),l=Gs.load(c)),void 0!==n&&(l.repeat.fromArray(n),1!==n[0]&&(l.wrapS=ge),1!==n[1]&&(l.wrapT=ge)),void 0!==o&&l.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(l.wrapS=ge),"mirror"===a[0]&&(l.wrapS=xe),"repeat"===a[1]&&(l.wrapT=ge),"mirror"===a[1]&&(l.wrapT=xe)),void 0!==s&&(l.anisotropy=s);var h=Ot.generateUUID();return i[h]=l,h}var o={uuid:Ot.generateUUID(),type:"MeshLambertMaterial"};for(var a in e){var s=e[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":o.name=s;break;case"blending":o.blending=Fs[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",a,"is no longer supported.");break;case"colorDiffuse":o.color=js.fromArray(s).getHex();break;case"colorSpecular":o.specular=js.fromArray(s).getHex();break;case"colorEmissive":o.emissive=js.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=n(s,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":o.emissiveMap=n(s,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":o.lightMap=n(s,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":o.aoMap=n(s,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":o.bumpMap=n(s,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":o.normalMap=n(s,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":o.specularMap=n(s,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":o.metalnessMap=n(s,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":o.roughnessMap=n(s,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":o.alphaMap=n(s,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":o.side=_;break;case"doubleSided":o.side=w;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[a]=s;break;case"vertexColors":!0===s&&(o.vertexColors=T),"face"===s&&(o.vertexColors=M);break;default:console.error("THREE.Loader.createMaterial: Unsupported",a,s)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),Ws.setTextures(i),Ws.parse(o)})});var tl,rl,il,nl,ol,al,sl,ll,cl,ul,hl,pl,dl,fl,ml,vl,gl,yl,xl,_l,wl,bl,Ml,Tl,El,Sl={getContext:function(){return void 0===Vs&&(Vs=new(window.AudioContext||window.webkitAudioContext)),Vs},setContext:function(e){Vs=e}};function Rl(e){this.manager=void 0!==e?e:Xa}function Pl(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Sn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Sn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Al(e,t,r,i){br.call(this),this.type="CubeCamera";var n=new Sn(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new It(1,0,0)),this.add(n);var o=new Sn(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new It(-1,0,0)),this.add(o);var a=new Sn(90,1,e,t);a.up.set(0,0,1),a.lookAt(new It(0,1,0)),this.add(a);var s=new Sn(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new It(0,-1,0)),this.add(s);var l=new Sn(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new It(0,0,1)),this.add(l);var c=new Sn(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new It(0,0,-1)),this.add(c),i=i||{format:Ue,magFilter:Me,minFilter:Me},this.renderTarget=new Yt(r,r,i),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=e.getRenderTarget(),i=this.renderTarget,u=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,e.render(t,n,i),i.activeCubeFace=1,e.render(t,o,i),i.activeCubeFace=2,e.render(t,a,i),i.activeCubeFace=3,e.render(t,s,i),i.activeCubeFace=4,e.render(t,l,i),i.texture.generateMipmaps=u,i.activeCubeFace=5,e.render(t,c,i),e.setRenderTarget(r)},this.clear=function(e,t,r,i){for(var n=e.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)o.activeCubeFace=a,e.setRenderTarget(o),e.clear(t,r,i);e.setRenderTarget(n)}}function Cl(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Ll(){br.call(this),this.type="AudioListener",this.context=Sl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Ol(e){br.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Dl(e){Ol.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Hl(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function zl(e,t,r){this.binding=e,this.valueSize=r;var i,n=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":n=Array,i=this._select;break;default:i=this._lerp}this.buffer=new n(4*r),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Il(e,t,r){var i=r||kl.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function kl(e,t,r){this.path=t,this.parsedPath=r||kl.parseTrackName(t),this.node=kl.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Nl(){this.uuid=Ot.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Ul(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var i=t.tracks,n=i.length,o=new Array(n),a={endingStart:gt,endingEnd:gt},s=0;s!==n;++s){var l=i[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Bl(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Fl(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function jl(){Br.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Gl(e,t,r){jn.call(this,e,t),this.meshPerAttribute=r||1}function Wl(e,t,r,i){"number"==typeof r&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Rr.call(this,e,t,r),this.meshPerAttribute=i||1}function Vl(e,t,r,i){this.ray=new ai(e,t),this.near=r||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ql(e,t){return e.distance-t.distance}function Xl(e,t,r,i){if(!1!==e.visible&&(e.raycast(t,r),!0===i))for(var n=e.children,o=0,a=n.length;o<a;o++)Xl(n[o],t,r,!0)}function $l(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function Yl(e,t,r){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==r?r:0,this}function Jl(e,t){this.min=void 0!==e?e:new Dt(1/0,1/0),this.max=void 0!==t?t:new Dt(-1/0,-1/0)}function Zl(e,t){this.start=void 0!==e?e:new It,this.end=void 0!==t?t:new It}function Ql(e){br.call(this),this.material=e,this.render=function(){}}function Kl(e,t,r,i){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==r?r:16711680,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var l=new Br,c=new zr(2*a*3,3);l.addAttribute("position",c),Qn.call(this,l,new Jn({color:n,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ec(e,t){br.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var r=new Br,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,o=1;n<32;n++,o++){var a=n/32*Math.PI*2,s=o/32*Math.PI*2;i.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}r.addAttribute("position",new zr(i,3));var l=new Jn({fog:!1});this.cone=new Qn(r,l),this.add(this.cone),this.update()}function tc(e){for(var t=function e(t){var r=[];t&&t.isBone&&r.push(t);for(var i=0;i<t.children.length;i++)r.push.apply(r,e(t.children[i]));return r}(e),r=new Br,i=[],n=[],o=new cr(0,0,1),a=new cr(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),n.push(o.r,o.g,o.b),n.push(a.r,a.g,a.b))}r.addAttribute("position",new zr(i,3)),r.addAttribute("color",new zr(n,3));var c=new Jn({vertexColors:T,depthTest:!1,depthWrite:!1,transparent:!0});Qn.call(this,r,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function rc(e,t,r){this.light=e,this.light.updateMatrixWorld(),this.color=r;var i=new ia(t,4,2),n=new li({wireframe:!0,fog:!1});ci.call(this,i,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ic(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var r=new Br;r.addAttribute("position",new zr([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere();var i=new Jn({fog:!1});Zn.call(this,r,i);var n=new Br;n.addAttribute("position",new zr([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),n.computeBoundingSphere(),this.add(new ci(n,new li({side:THREE.BackSide,fog:!1}))),this.update()}function nc(e,t,r){br.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;var i=new mo(t);i.rotateY(.5*Math.PI),this.material=new li({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=T);var n=i.getAttribute("position"),o=new Float32Array(3*n.count);i.addAttribute("color",new Rr(o,3)),this.add(new ci(i,this.material)),this.update()}function oc(e,t,r,i){e=e||10,t=t||10,r=new cr(void 0!==r?r:4473924),i=new cr(void 0!==i?i:8947848);for(var n=t/2,o=e/t,a=e/2,s=[],l=[],c=0,u=0,h=-a;c<=t;c++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var p=c===n?r:i;p.toArray(l,u),u+=3,p.toArray(l,u),u+=3,p.toArray(l,u),u+=3,p.toArray(l,u),u+=3}var d=new Br;d.addAttribute("position",new zr(s,3)),d.addAttribute("color",new zr(l,3));var f=new Jn({vertexColors:T});Qn.call(this,d,f)}function ac(e,t,r,i,n,o){e=e||10,t=t||16,r=r||8,i=i||64,n=new cr(void 0!==n?n:4473924),o=new cr(void 0!==o?o:8947848);var a,s,l,c,u,h,p,d=[],f=[];for(c=0;c<=t;c++)l=c/t*(2*Math.PI),a=Math.sin(l)*e,s=Math.cos(l)*e,d.push(0,0,0),d.push(a,0,s),p=1&c?n:o,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b);for(c=0;c<=r;c++)for(p=1&c?n:o,h=e-e/r*c,u=0;u<i;u++)l=u/i*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,d.push(a,0,s),f.push(p.r,p.g,p.b),l=(u+1)/i*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,d.push(a,0,s),f.push(p.r,p.g,p.b);var m=new Br;m.addAttribute("position",new zr(d,3)),m.addAttribute("color",new zr(f,3));var v=new Jn({vertexColors:T});Qn.call(this,m,v)}function sc(e,t,r,i){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==r?r:16776960,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Br,c=new zr(2*a*3,3);l.addAttribute("position",c),Qn.call(this,l,new Jn({color:n,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function lc(e,t,r){br.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===t&&(t=1);var i=new Br;i.addAttribute("position",new zr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var n=new Jn({fog:!1});this.lightPlane=new Zn(i,n),this.add(this.lightPlane),(i=new Br).addAttribute("position",new zr([0,0,0,0,0,1],3)),this.targetLine=new Zn(i,n),this.add(this.targetLine),this.update()}function cc(e){var t=new Br,r=new Jn({color:16777215,vertexColors:M}),i=[],n=[],o={},a=new cr(16755200),s=new cr(16711680),l=new cr(43775),c=new cr(16777215),u=new cr(3355443);function h(e,t,r){p(e,r),p(t,r)}function p(e,t){i.push(0,0,0),n.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(i.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",c),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.addAttribute("position",new zr(i,3)),t.addAttribute("color",new zr(n,3)),Qn.call(this,t,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function uc(e,t){this.object=e,void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),n=new Br;n.setIndex(new Rr(r,1)),n.addAttribute("position",new Rr(i,3)),Qn.call(this,n,new Jn({color:t})),this.matrixAutoUpdate=!1,this.update()}function hc(e,t){this.type="Box3Helper",this.box=e;var r=void 0!==t?t:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Br;n.setIndex(new Rr(i,1)),n.addAttribute("position",new zr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Qn.call(this,n,new Jn({color:r})),this.geometry.computeBoundingSphere()}function pc(e,t,r){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==r?r:16776960,n=new Br;n.addAttribute("position",new zr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),n.computeBoundingSphere(),Zn.call(this,n,new Jn({color:i}));var o=new Br;o.addAttribute("position",new zr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new ci(o,new li({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function dc(e,t,r,i,n,o){br.call(this),void 0===e&&(e=new THREE.Vector3(0,0,1)),void 0===t&&(t=new THREE.Vector3(0,0,0)),void 0===r&&(r=1),void 0===i&&(i=16776960),void 0===n&&(n=.2*r),void 0===o&&(o=.2*n),void 0===bl&&((bl=new Br).addAttribute("position",new zr([0,0,0,0,1,0],3)),(Ml=new da(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Zn(bl,new Jn({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ci(Ml,new li({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,n,o)}function fc(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new Br;r.addAttribute("position",new zr(t,3)),r.addAttribute("color",new zr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new Jn({vertexColors:T});Qn.call(this,r,i)}function mc(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),us.call(this,e),this.type="catmullrom",this.closed=!0}function vc(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),us.call(this,e),this.type="catmullrom"}function gc(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),us.call(this,e),this.type="catmullrom"}Object.assign(Rl.prototype,{load:function(e,t,r,i){var n=new Ya(this.manager);n.setResponseType("arraybuffer"),n.setPath(this.path),n.load(e,function(e){var r=e.slice(0);Sl.getContext().decodeAudioData(r,function(e){t(e)})},r,i)},setPath:function(e){return this.path=e,this}}),Object.assign(Pl.prototype,{update:(cl=new Ht,ul=new Ht,function(e){if(tl!==this||rl!==e.focus||il!==e.fov||nl!==e.aspect*this.aspect||ol!==e.near||al!==e.far||sl!==e.zoom||ll!==this.eyeSep){tl=this,rl=e.focus,il=e.fov,nl=e.aspect*this.aspect,ol=e.near,al=e.far,sl=e.zoom;var t,r,i=e.projectionMatrix.clone(),n=(ll=this.eyeSep/2)*ol/rl,o=ol*Math.tan(Ot.DEG2RAD*il*.5)/sl;ul.elements[12]=-ll,cl.elements[12]=ll,t=-o*nl+n,r=o*nl+n,i.elements[0]=2*ol/(r-t),i.elements[8]=(r+t)/(r-t),this.cameraL.projectionMatrix.copy(i),t=-o*nl-n,r=o*nl-n,i.elements[0]=2*ol/(r-t),i.elements[8]=(r+t)/(r-t),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ul),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(cl)})}),Al.prototype=Object.create(br.prototype),Al.prototype.constructor=Al,Object.assign(Cl.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Ll.prototype=Object.assign(Object.create(br.prototype),{constructor:Ll,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new It,t=new zt,r=new It,i=new It,n=new Cl;return function(o){br.prototype.updateMatrixWorld.call(this,o);var a=this.context.listener,s=this.up;if(this.timeDelta=n.getDelta(),this.matrixWorld.decompose(e,t,r),i.set(0,0,-1).applyQuaternion(t),a.positionX){var l=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(e.x,l),a.positionY.linearRampToValueAtTime(e.y,l),a.positionZ.linearRampToValueAtTime(e.z,l),a.forwardX.linearRampToValueAtTime(i.x,l),a.forwardY.linearRampToValueAtTime(i.y,l),a.forwardZ.linearRampToValueAtTime(i.z,l),a.upX.linearRampToValueAtTime(s.x,l),a.upY.linearRampToValueAtTime(s.y,l),a.upZ.linearRampToValueAtTime(s.z,l)}else a.setPosition(e.x,e.y,e.z),a.setOrientation(i.x,i.y,i.z,s.x,s.y,s.z)}}()}),Ol.prototype=Object.assign(Object.create(br.prototype),{constructor:Ol,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.detune&&(e.detune.value=this.detune),e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),Dl.prototype=Object.assign(Object.create(Ol.prototype),{constructor:Dl,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this},updateMatrixWorld:function(){var e=new It,t=new zt,r=new It,i=new It;return function(n){if(br.prototype.updateMatrixWorld.call(this,n),!1!==this.isPlaying){this.matrixWorld.decompose(e,t,r),i.set(0,0,1).applyQuaternion(t);var o=this.panner;if(o.positionX){var a=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(e.x,a),o.positionY.linearRampToValueAtTime(e.y,a),o.positionZ.linearRampToValueAtTime(e.z,a),o.orientationX.linearRampToValueAtTime(i.x,a),o.orientationY.linearRampToValueAtTime(i.y,a),o.orientationZ.linearRampToValueAtTime(i.z,a)}else o.setPosition(e.x,e.y,e.z),o.setOrientation(i.x,i.y,i.z)}}}()}),Object.assign(Hl.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),Object.assign(zl.prototype,{accumulate:function(e,t){var r=this.buffer,i=this.valueSize,n=e*i+i,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==i;++a)r[n+a]=r[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(r,n,0,s,i)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,r=this.buffer,i=e*t+t,n=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,n<1){var a=3*t;this._mixBufferRegion(r,i,a,1-n,t)}for(var s=t,l=t+t;s!==l;++s)if(r[s]!==r[s+t]){o.setValue(r,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,i=3*r;e.getValue(t,i);for(var n=r,o=i;n!==o;++n)t[n]=t[i+n%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,i,n){if(i>=.5)for(var o=0;o!==n;++o)e[t+o]=e[r+o]},_slerp:function(e,t,r,i){zt.slerpFlat(e,t,e,t,e,r,i)},_lerp:function(e,t,r,i,n){for(var o=1-i,a=0;a!==n;++a){var s=t+a;e[s]=e[s]*o+e[r+a]*i}}}),Object.assign(Il.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,i=this._bindings[r];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}),Object.assign(kl,{Composite:Il,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new kl.Composite(e,t,r):new kl(e,t,r)},sanitizeNodeName:(xl=new RegExp("[\\[\\]\\.:\\/]","g"),function(e){return e.replace(/\s/g,"_").replace(xl,"")}),parseTrackName:(hl="[^\\[\\]\\.:\\/]",pl="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",dl=/((?:WC+[\/:])*)/.source.replace("WC",hl),fl=/(WCOD+)?/.source.replace("WCOD",pl),ml=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hl),vl=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hl),gl=new RegExp("^"+dl+fl+ml+vl+"$"),yl=["material","materials","bones"],function(e){var t=gl.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=r.nodeName.substring(i+1);-1!==yl.indexOf(n)&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=n)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){var i=function(e){for(var r=0;r<e.length;r++){var n=e[r];if(n.name===t||n.uuid===t)return n;var o=i(n.children);if(o)return o}return null},n=i(e.children);if(n)return n}return null}}),Object.assign(kl.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)e[t++]=r[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=e[t++]},function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,n=t.propertyIndex;if(e||(e=kl.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var o=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[i];if(void 0!==s){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===n){n=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===n){n=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(kl.prototype,{_getValue_unbound:kl.prototype.getValue,_setValue_unbound:kl.prototype.setValue}),Object.assign(Nl.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,i=this._indicesByUUID,n=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,c=0,u=arguments.length;c!==u;++c){var h=arguments[c],p=h.uuid,d=i[p];if(void 0===d){d=t++,i[p]=d,e.push(h);for(var f=0,m=s;f!==m;++f)a[f].push(new kl(h,n[f],o[f]))}else if(d<r){l=e[d];var v=--r,g=e[v];for(i[g.uuid]=d,e[d]=g,i[p]=v,e[v]=h,f=0,m=s;f!==m;++f){var y=a[f],x=y[v],_=y[d];y[d]=x,void 0===_&&(_=new kl(h,n[f],o[f])),y[v]=_}}else e[d]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,n=i.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,c=r[l];if(void 0!==c&&c>=t){var u=t++,h=e[u];r[h.uuid]=c,e[c]=h,r[l]=u,e[u]=s;for(var p=0,d=n;p!==d;++p){var f=i[p],m=f[u],v=f[c];f[c]=m,f[u]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,o=n.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a].uuid,c=i[l];if(void 0!==c)if(delete i[l],c<r){var u=--r,h=e[u],p=e[g=--t];i[h.uuid]=c,e[c]=h,i[p.uuid]=u,e[u]=p,e.pop();for(var d=0,f=o;d!==f;++d){var m=(y=n[d])[u],v=y[g];y[c]=m,y[u]=v,y.pop()}}else{var g;for(i[(p=e[g=--t]).uuid]=c,e[c]=p,e.pop(),d=0,f=o;d!==f;++d){var y;(y=n[d])[c]=y[g],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,i=r[e],n=this._bindings;if(void 0!==i)return n[i];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=n.length,r[e]=i,o.push(e),a.push(t),n.push(u);for(var h=c,p=s.length;h!==p;++h){var d=s[h];u[h]=new kl(d,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var i=this._paths,n=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=r,o[r]=s,o.pop(),n[r]=n[a],n.pop(),i[r]=i[a],i.pop()}}}),Object.assign(Ul.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var i=this._clip.duration,n=e._clip.duration,o=n/i,a=i/n;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var i=this._mixer,n=i.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=n,s[1]=n+r,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,i){if(this.enabled){var n=this._startTime;if(null!==n){var o=(e-n)*r;if(o<0||0===r)return;this._startTime=null,t=r*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,c=this._propertyBindings,u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulate(i,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,r=this._clip.duration,i=this.loop,n=this._loopCount,o=2202===i;if(0===e)return-1===n?t:o&&1==(1&n)?r-t:t;if(2200===i){-1===n&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===n&&(e>=0?(n=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=r||t<0){var a=Math.floor(t/r);t-=r*a,n+=Math.abs(a);var s=this.repetitions-n;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&n))return this.time=t,r-t}return this.time=t,t},_setEndings:function(e,t,r){var i=this._interpolantSettings;r?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=e?this.zeroSlopeAtStart?2401:gt:2402,i.endingEnd=t?this.zeroSlopeAtEnd?2401:gt:2402)},_scheduleFading:function(e,t,r){var i=this._mixer,n=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=n,s[0]=t,a[1]=n+e,s[1]=r,this}}),Bl.prototype=Object.assign(Object.create(t.prototype),{constructor:Bl,_bindAction:function(e,t){var r=e._localRoot||this._root,i=e._clip.tracks,n=i.length,o=e._propertyBindings,a=e._interpolants,s=r.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==n;++u){var h=i[u],p=h.name,d=c[p];if(void 0!==d)o[u]=d;else{if(void 0!==(d=o[u])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=t&&t._propertyBindings[u].binding.parsedPath;++(d=new zl(kl.create(r,p,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),o[u]=d}a[u].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,i=this._actionsByClip[r];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,r,t)}for(var n=e._propertyBindings,o=0,a=n.length;o!==a;++o){var s=n[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,i=t.length;r!==i;++r){var n=t[r];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var i=this._actions,n=this._actionsByClip,o=n[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;var n=e._clip.uuid,o=this._actionsByClip,a=o[n],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[n],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,i=t.length;r!==i;++r){var n=t[r];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_addInactiveBinding:function(e,t,r){var i=this._bindingsByRootAndName,n=i[t],o=this._bindings;void 0===n&&(n={},i[t]=n),n[r]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,i=r.rootNode.uuid,n=r.path,o=this._bindingsByRootAndName,a=o[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[n];e:{for(var c in a)break e;delete o[i]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&((r=new Da(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];e.__cacheIndex=i,t[i]=e,n.__cacheIndex=r,t[r]=n},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var r=t||this._root,i=r.uuid,n="string"==typeof e?Ga.findByName(r,e):e,o=null!==n?n.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[i];if(void 0!==l)return l;s=a.knownActions[0],null===n&&(n=s._clip)}if(null===n)return null;var c=new Ul(this,n,t);return this._bindAction(c,s),this._addInactiveAction(c,o,i),c},existingAction:function(e,t){var r=t||this._root,i=r.uuid,n="string"==typeof e?Ga.findByName(r,e):e,o=n?n.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var n=0;n!==t;++n)e[n].reset();for(n=0;n!==i;++n)r[n].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,i=this.time+=e,n=Math.sign(e),o=this._accuIndex^=1,a=0;a!==r;++a)t[a]._update(i,e,n,o);var s=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,i=this._actionsByClip,n=i[r];if(void 0!==n){for(var o=n.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var i in r){var n=r[i].actionByRoot[t];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),Fl.prototype.clone=function(){return new Fl(void 0===this.value.clone?this.value:this.value.clone())},jl.prototype=Object.assign(Object.create(Br.prototype),{constructor:jl,isInstancedBufferGeometry:!0,copy:function(e){return Br.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Gl.prototype=Object.assign(Object.create(jn.prototype),{constructor:Gl,isInstancedInterleavedBuffer:!0,copy:function(e){return jn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Wl.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Wl,isInstancedBufferAttribute:!0,copy:function(e){return Rr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Vl.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,r){var i=r||[];return Xl(e,this,i,t),i.sort(ql),i},intersectObjects:function(e,t,r){var i=r||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,o=e.length;n<o;n++)Xl(e[n],this,i,t);return i.sort(ql),i}}),Object.assign($l.prototype,{set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ot.clamp(t/this.radius,-1,1))),this}}),Object.assign(Yl.prototype,{set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}}),Object.assign(Jl.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Dt;return function(t,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Dt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Dt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Dt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Dt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Dt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Zl.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new It),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new It),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new It),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(_l=new It,wl=new It,function(e,t){_l.subVectors(e,this.start),wl.subVectors(this.end,this.start);var r=wl.dot(wl),i=wl.dot(_l)/r;return t&&(i=Ot.clamp(i,0,1)),i}),closestPointToPoint:function(e,t,r){var i=this.closestPointToPointParameter(e,t);return void 0===r&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),r=new It),this.delta(r).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Ql.prototype=Object.create(br.prototype),Ql.prototype.constructor=Ql,Ql.prototype.isImmediateRenderObject=!0,Kl.prototype=Object.create(Qn.prototype),Kl.prototype.constructor=Kl,Kl.prototype.update=function(){var e=new It,t=new It,r=new kt;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var n=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,l=a.faces,c=0,u=0,h=l.length;u<h;u++)for(var p=l[u],d=0,f=p.vertexNormals.length;d<f;d++){var m=s[p[i[d]]],v=p.vertexNormals[d];e.copy(m).applyMatrix4(n),t.copy(v).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry){var g=a.attributes.position,y=a.attributes.normal;for(c=0,d=0,f=g.count;d<f;d++)e.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(n),t.set(y.getX(d),y.getY(d),y.getZ(d)),t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}o.needsUpdate=!0}}(),ec.prototype=Object.create(br.prototype),ec.prototype.constructor=ec,ec.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ec.prototype.update=function(){var e=new It;return function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,r=t*Math.tan(this.light.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),tc.prototype=Object.create(Qn.prototype),tc.prototype.constructor=tc,tc.prototype.updateMatrixWorld=function(){var e=new It,t=new Ht,r=new Ht;return function(i){var n=this.bones,o=this.geometry,a=o.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<n.length;s++){var c=n[s];c.parent&&c.parent.isBone&&(t.multiplyMatrices(r,c.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(r,c.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l+1,e.x,e.y,e.z),l+=2)}o.getAttribute("position").needsUpdate=!0,br.prototype.updateMatrixWorld.call(this,i)}}(),rc.prototype=Object.create(ci.prototype),rc.prototype.constructor=rc,rc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},rc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ic.prototype=Object.create(Zn.prototype),ic.prototype.constructor=ic,ic.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},ic.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},nc.prototype=Object.create(br.prototype),nc.prototype.constructor=nc,nc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},nc.prototype.update=function(){var e=new It,t=new cr,r=new cr;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var n=i.geometry.getAttribute("color");t.copy(this.light.color),r.copy(this.light.groundColor);for(var o=0,a=n.count;o<a;o++){var s=o<a/2?t:r;n.setXYZ(o,s.r,s.g,s.b)}n.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),oc.prototype=Object.create(Qn.prototype),oc.prototype.constructor=oc,ac.prototype=Object.create(Qn.prototype),ac.prototype.constructor=ac,sc.prototype=Object.create(Qn.prototype),sc.prototype.constructor=sc,sc.prototype.update=function(){var e=new It,t=new It,r=new kt;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,n=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,l=0,c=0,u=s.length;c<u;c++){var h=s[c],p=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(i),t.copy(p).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),n.setXYZ(l,e.x,e.y,e.z),l+=1,n.setXYZ(l,t.x,t.y,t.z),l+=1}n.needsUpdate=!0}}(),lc.prototype=Object.create(br.prototype),lc.prototype.constructor=lc,lc.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},lc.prototype.update=function(){var e=new It,t=new It,r=new It;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e),this.lightPlane.lookAt(t),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(t),this.targetLine.scale.z=r.length()}}(),cc.prototype=Object.create(Qn.prototype),cc.prototype.constructor=cc,cc.prototype.update=function(){var e,t,r=new It,i=new En;function n(n,o,a,s){r.set(o,a,s).unproject(i);var l=t[n];if(void 0!==l)for(var c=e.getAttribute("position"),u=0,h=l.length;u<h;u++)c.setXYZ(l[u],r.x,r.y,r.z)}return function(){e=this.geometry,t=this.pointMap,i.projectionMatrix.copy(this.camera.projectionMatrix),n("c",0,0,-1),n("t",0,0,1),n("n1",-1,-1,-1),n("n2",1,-1,-1),n("n3",-1,1,-1),n("n4",1,1,-1),n("f1",-1,-1,1),n("f2",1,-1,1),n("f3",-1,1,1),n("f4",1,1,1),n("u1",.7,1.1,-1),n("u2",-.7,1.1,-1),n("u3",0,2,-1),n("cf1",-1,0,1),n("cf2",1,0,1),n("cf3",0,-1,1),n("cf4",0,1,1),n("cn1",-1,0,-1),n("cn2",1,0,-1),n("cn3",0,-1,-1),n("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),uc.prototype=Object.create(Qn.prototype),uc.prototype.constructor=uc,uc.prototype.update=function(){var e=new Zt;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var r=e.min,i=e.max,n=this.geometry.attributes.position,o=n.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=r.x,o[4]=i.y,o[5]=i.z,o[6]=r.x,o[7]=r.y,o[8]=i.z,o[9]=i.x,o[10]=r.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=r.z,o[15]=r.x,o[16]=i.y,o[17]=r.z,o[18]=r.x,o[19]=r.y,o[20]=r.z,o[21]=i.x,o[22]=r.y,o[23]=r.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),uc.prototype.setFromObject=function(e){return this.object=e,this.update(),this},uc.prototype.copy=function(e){return Qn.prototype.copy.call(this,e),this.object=e.object,this},uc.prototype.clone=function(){return(new this.constructor).copy(this)},hc.prototype=Object.create(Qn.prototype),hc.prototype.constructor=hc,hc.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),br.prototype.updateMatrixWorld.call(this,e))},pc.prototype=Object.create(Zn.prototype),pc.prototype.constructor=pc,pc.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?_:x,this.lookAt(this.plane.normal),br.prototype.updateMatrixWorld.call(this,e)},dc.prototype=Object.create(br.prototype),dc.prototype.constructor=dc,dc.prototype.setDirection=(El=new It,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(El.set(e.z,0,-e.x).normalize(),Tl=Math.acos(e.y),this.quaternion.setFromAxisAngle(El,Tl))}),dc.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},dc.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},dc.prototype.copy=function(e){return br.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},dc.prototype.clone=function(){return(new this.constructor).copy(this)},fc.prototype=Object.create(Qn.prototype),fc.prototype.constructor=fc,rs.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(rs.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(bs.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Sr,r=0,i=e.length;r<i;r++){var n=e[r];t.vertices.push(new It(n.x,n.y,n.z||0))}return t}}),Object.assign(Ms.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),mc.prototype=Object.create(us.prototype),vc.prototype=Object.create(us.prototype),gc.prototype=Object.create(us.prototype),Object.assign(gc.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),oc.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},tc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(el.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ks.extractUrlBase(e)}}),Object.assign(Bs.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Jl.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Zt.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Zl.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Ot,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ot.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ot.ceilPowerOfTwo(e)}}),Object.assign(kt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ht.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new It),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,i,n,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,r,n,o)}}),Kt.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},zt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(ai.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(si.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(si,{barycoordFromPoint:function(e,t,r,i,n){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),si.getBarycoord(e,t,r,i,n)},normal:function(e,t,r,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),si.getNormal(e,t,r,i)}}),Object.assign(Ts.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Jo(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new la(this,e)}}),Object.assign(Dt.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(It.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(qt.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Sr.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(br.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(br.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(qn.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty($n.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Xn.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(rs.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Sn.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Es.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Rr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Br.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Br.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Zo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Fl.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ni.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new cr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(Ma.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(oi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Nn.prototype,{clearTarget:function(e,t,r,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,r,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Nn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(wn.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Xt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(kn.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Ol.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Rl).load(e,function(e){t.setBuffer(e)}),this},Hl.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Al.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var yc={merge:function(e,t,r){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};Gt.crossOrigin=void 0,Gt.loadTexture=function(e,t,r,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var n=new ts;n.setCrossOrigin(this.crossOrigin);var o=n.load(e,r,void 0,i);return t&&(o.mapping=t),o},Gt.loadTextureCube=function(e,t,r,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var n=new es;n.setCrossOrigin(this.crossOrigin);var o=n.load(e,r,void 0,i);return t&&(o.mapping=t),o},Gt.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Gt.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var xc={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};e.WebGLMultisampleRenderTarget=$t,e.WebGLRenderTargetCube=Yt,e.WebGLRenderTarget=Xt,e.WebGLRenderer=Nn,e.ShaderLib=pr,e.UniformsLib=hr,e.UniformsUtils=sr,e.ShaderChunk=tr,e.FogExp2=Un,e.Fog=Bn,e.Scene=Fn,e.Sprite=Vn,e.LOD=qn,e.SkinnedMesh=Xn,e.Skeleton=$n,e.Bone=Yn,e.Mesh=ci,e.LineSegments=Qn,e.LineLoop=Kn,e.Line=Zn,e.Points=to,e.Group=Tn,e.VideoTexture=ro,e.DataTexture=Jt,e.DataTexture3D=pi,e.CompressedTexture=io,e.CubeTexture=hi,e.CanvasTexture=no,e.DepthTexture=oo,e.Texture=Vt,e.AnimationLoader=Ja,e.CompressedTextureLoader=Za,e.DataTextureLoader=Qa,e.CubeTextureLoader=es,e.TextureLoader=ts,e.ObjectLoader=Bs,e.MaterialLoader=Is,e.BufferGeometryLoader=Ns,e.DefaultLoadingManager=Xa,e.LoadingManager=qa,e.ImageLoader=Ka,e.ImageBitmapLoader=Ys,e.FontLoader=Ks,e.FileLoader=Ya,e.Loader=el,e.LoaderUtils=ks,e.Cache=Va,e.AudioLoader=Rl,e.SpotLightShadow=Ps,e.SpotLight=As,e.PointLight=Cs,e.RectAreaLight=zs,e.HemisphereLight=Ss,e.DirectionalLightShadow=Os,e.DirectionalLight=Ds,e.AmbientLight=Hs,e.LightShadow=Rs,e.Light=Es,e.StereoCamera=Pl,e.PerspectiveCamera=Sn,e.OrthographicCamera=Ls,e.CubeCamera=Al,e.ArrayCamera=Rn,e.Camera=En,e.AudioListener=Ll,e.PositionalAudio=Dl,e.AudioContext=Sl,e.AudioAnalyser=Hl,e.Audio=Ol,e.VectorKeyframeTrack=ja,e.StringKeyframeTrack=Fa,e.QuaternionKeyframeTrack=Ba,e.NumberKeyframeTrack=Na,e.ColorKeyframeTrack=ka,e.BooleanKeyframeTrack=Ia,e.PropertyMixer=zl,e.PropertyBinding=kl,e.KeyframeTrack=za,e.AnimationUtils=Ca,e.AnimationObjectGroup=Nl,e.AnimationMixer=Bl,e.AnimationClip=Ga,e.Uniform=Fl,e.InstancedBufferGeometry=jl,e.BufferGeometry=Br,e.Geometry=Sr,e.InterleavedBufferAttribute=Gn,e.InstancedInterleavedBuffer=Gl,e.InterleavedBuffer=jn,e.InstancedBufferAttribute=Wl,e.Face3=fr,e.Object3D=br,e.Raycaster=Vl,e.Layers=vr,e.EventDispatcher=t,e.Clock=Cl,e.QuaternionLinearInterpolant=Ua,e.LinearInterpolant=Da,e.DiscreteInterpolant=Ha,e.CubicInterpolant=Oa,e.Interpolant=La,e.Triangle=si,e.Math=Ot,e.Spherical=$l,e.Cylindrical=Yl,e.Plane=Kt,e.Frustum=er,e.Sphere=Qt,e.Ray=ai,e.Matrix4=Ht,e.Matrix3=kt,e.Box3=Zt,e.Box2=Jl,e.Line3=Zl,e.Euler=mr,e.Vector4=qt,e.Vector3=It,e.Vector2=Dt,e.Quaternion=zt,e.Color=cr,e.ImmediateRenderObject=Ql,e.VertexNormalsHelper=Kl,e.SpotLightHelper=ec,e.SkeletonHelper=tc,e.PointLightHelper=rc,e.RectAreaLightHelper=ic,e.HemisphereLightHelper=nc,e.GridHelper=oc,e.PolarGridHelper=ac,e.FaceNormalsHelper=sc,e.DirectionalLightHelper=lc,e.CameraHelper=cc,e.BoxHelper=uc,e.Box3Helper=hc,e.PlaneHelper=pc,e.ArrowHelper=dc,e.AxesHelper=fc,e.Shape=Ts,e.Path=Ms,e.ShapePath=Js,e.Font=Zs,e.CurvePath=bs,e.Curve=rs,e.ImageUtils=Gt,e.ShapeUtils=Xo,e.WebGLUtils=Mn,e.WireframeGeometry=ao,e.ParametricGeometry=so,e.ParametricBufferGeometry=lo,e.TetrahedronGeometry=ho,e.TetrahedronBufferGeometry=po,e.OctahedronGeometry=fo,e.OctahedronBufferGeometry=mo,e.IcosahedronGeometry=vo,e.IcosahedronBufferGeometry=go,e.DodecahedronGeometry=yo,e.DodecahedronBufferGeometry=xo,e.PolyhedronGeometry=co,e.PolyhedronBufferGeometry=uo,e.TubeGeometry=_o,e.TubeBufferGeometry=wo,e.TorusKnotGeometry=bo,e.TorusKnotBufferGeometry=Mo,e.TorusGeometry=To,e.TorusBufferGeometry=Eo,e.TextGeometry=ea,e.TextBufferGeometry=ta,e.SphereGeometry=ra,e.SphereBufferGeometry=ia,e.RingGeometry=na,e.RingBufferGeometry=oa,e.PlaneGeometry=Gr,e.PlaneBufferGeometry=Wr,e.LatheGeometry=aa,e.LatheBufferGeometry=sa,e.ShapeGeometry=la,e.ShapeBufferGeometry=ca,e.ExtrudeGeometry=Jo,e.ExtrudeBufferGeometry=Zo,e.EdgesGeometry=ha,e.ConeGeometry=fa,e.ConeBufferGeometry=ma,e.CylinderGeometry=pa,e.CylinderBufferGeometry=da,e.CircleGeometry=va,e.CircleBufferGeometry=ga,e.BoxGeometry=Fr,e.BoxBufferGeometry=jr,e.ShadowMaterial=xa,e.SpriteMaterial=Wn,e.RawShaderMaterial=_a,e.ShaderMaterial=oi,e.PointsMaterial=eo,e.MeshPhysicalMaterial=ba,e.MeshStandardMaterial=wa,e.MeshPhongMaterial=Ma,e.MeshToonMaterial=Ta,e.MeshNormalMaterial=Ea,e.MeshLambertMaterial=Sa,e.MeshDepthMaterial=xn,e.MeshDistanceMaterial=_n,e.MeshBasicMaterial=li,e.MeshMatcapMaterial=Ra,e.LineDashedMaterial=Pa,e.LineBasicMaterial=Jn,e.Material=ni,e.Float64BufferAttribute=Ir,e.Float32BufferAttribute=zr,e.Uint32BufferAttribute=Hr,e.Int32BufferAttribute=Dr,e.Uint16BufferAttribute=Or,e.Int16BufferAttribute=Lr,e.Uint8ClampedBufferAttribute=Cr,e.Uint8BufferAttribute=Ar,e.Int8BufferAttribute=Pr,e.BufferAttribute=Rr,e.ArcCurve=ns,e.CatmullRomCurve3=us,e.CubicBezierCurve=fs,e.CubicBezierCurve3=ms,e.EllipseCurve=is,e.LineCurve=vs,e.LineCurve3=gs,e.QuadraticBezierCurve=ys,e.QuadraticBezierCurve3=xs,e.SplineCurve=_s,e.REVISION="101dev",e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.CullFaceNone=f,e.CullFaceBack=m,e.CullFaceFront=v,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=0,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=g,e.PCFSoftShadowMap=y,e.FrontSide=x,e.BackSide=_,e.DoubleSide=w,e.FlatShading=1,e.SmoothShading=2,e.NoColors=b,e.FaceColors=M,e.VertexColors=T,e.NoBlending=E,e.NormalBlending=S,e.AdditiveBlending=R,e.SubtractiveBlending=P,e.MultiplyBlending=A,e.CustomBlending=C,e.AddEquation=L,e.SubtractEquation=O,e.ReverseSubtractEquation=D,e.MinEquation=H,e.MaxEquation=z,e.ZeroFactor=I,e.OneFactor=k,e.SrcColorFactor=N,e.OneMinusSrcColorFactor=U,e.SrcAlphaFactor=B,e.OneMinusSrcAlphaFactor=F,e.DstAlphaFactor=j,e.OneMinusDstAlphaFactor=G,e.DstColorFactor=W,e.OneMinusDstColorFactor=V,e.SrcAlphaSaturateFactor=q,e.NeverDepth=X,e.AlwaysDepth=$,e.LessDepth=Y,e.LessEqualDepth=J,e.EqualDepth=Z,e.GreaterEqualDepth=Q,e.GreaterDepth=K,e.NotEqualDepth=ee,e.MultiplyOperation=te,e.MixOperation=re,e.AddOperation=ie,e.NoToneMapping=ne,e.LinearToneMapping=oe,e.ReinhardToneMapping=ae,e.Uncharted2ToneMapping=se,e.CineonToneMapping=le,e.ACESFilmicToneMapping=ce,e.UVMapping=300,e.CubeReflectionMapping=ue,e.CubeRefractionMapping=he,e.EquirectangularReflectionMapping=pe,e.EquirectangularRefractionMapping=de,e.SphericalReflectionMapping=fe,e.CubeUVReflectionMapping=me,e.CubeUVRefractionMapping=ve,e.RepeatWrapping=ge,e.ClampToEdgeWrapping=ye,e.MirroredRepeatWrapping=xe,e.NearestFilter=_e,e.NearestMipMapNearestFilter=we,e.NearestMipMapLinearFilter=be,e.LinearFilter=Me,e.LinearMipMapNearestFilter=Te,e.LinearMipMapLinearFilter=Ee,e.UnsignedByteType=Se,e.ByteType=Re,e.ShortType=Pe,e.UnsignedShortType=Ae,e.IntType=Ce,e.UnsignedIntType=Le,e.FloatType=Oe,e.HalfFloatType=De,e.UnsignedShort4444Type=He,e.UnsignedShort5551Type=ze,e.UnsignedShort565Type=Ie,e.UnsignedInt248Type=ke,e.AlphaFormat=Ne,e.RGBFormat=Ue,e.RGBAFormat=Be,e.LuminanceFormat=Fe,e.LuminanceAlphaFormat=je,e.RGBEFormat=Ge,e.DepthFormat=We,e.DepthStencilFormat=Ve,e.RedFormat=qe,e.RGB_S3TC_DXT1_Format=Xe,e.RGBA_S3TC_DXT1_Format=$e,e.RGBA_S3TC_DXT3_Format=Ye,e.RGBA_S3TC_DXT5_Format=Je,e.RGB_PVRTC_4BPPV1_Format=Ze,e.RGB_PVRTC_2BPPV1_Format=Qe,e.RGBA_PVRTC_4BPPV1_Format=Ke,e.RGBA_PVRTC_2BPPV1_Format=et,e.RGB_ETC1_Format=tt,e.RGBA_ASTC_4x4_Format=rt,e.RGBA_ASTC_5x4_Format=it,e.RGBA_ASTC_5x5_Format=nt,e.RGBA_ASTC_6x5_Format=ot,e.RGBA_ASTC_6x6_Format=at,e.RGBA_ASTC_8x5_Format=st,e.RGBA_ASTC_8x6_Format=lt,e.RGBA_ASTC_8x8_Format=ct,e.RGBA_ASTC_10x5_Format=ut,e.RGBA_ASTC_10x6_Format=ht,e.RGBA_ASTC_10x8_Format=pt,e.RGBA_ASTC_10x10_Format=dt,e.RGBA_ASTC_12x10_Format=ft,e.RGBA_ASTC_12x12_Format=mt,e.LoopOnce=2200,e.LoopRepeat=vt,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=gt,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=yt,e.TriangleStripDrawMode=xt,e.TriangleFanDrawMode=_t,e.LinearEncoding=wt,e.sRGBEncoding=bt,e.GammaEncoding=Mt,e.RGBEEncoding=Tt,e.LogLuvEncoding=3003,e.RGBM7Encoding=Et,e.RGBM16Encoding=St,e.RGBDEncoding=Rt,e.BasicDepthPacking=Pt,e.RGBADepthPacking=At,e.TangentSpaceNormalMap=Ct,e.ObjectSpaceNormalMap=Lt,e.CubeGeometry=Fr,e.Face4=function(e,t,r,i,n,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new fr(e,t,r,n,o,a)},e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new to(e,t)},e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Vn(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new to(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new eo(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new eo(e)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new eo(e)},e.Vertex=function(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new It(e,t,r)},e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Rr(e,t).setDynamic(!0)},e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Pr(e,t)},e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ar(e,t)},e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Cr(e,t)},e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Lr(e,t)},e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Or(e,t)},e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Dr(e,t)},e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Hr(e,t)},e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new zr(e,t)},e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ir(e,t)},e.ClosedSplineCurve3=mc,e.SplineCurve3=vc,e.Spline=gc,e.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new fc(e)},e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new uc(e,t)},e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Qn(new ha(e.geometry),new Jn({color:void 0!==t?t:16777215}))},e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Qn(new ao(e.geometry),new Jn({color:void 0!==t?t:16777215}))},e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Ya(e)},e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Qa(e)},e.GeometryUtils=yc,e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},e.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},e.SceneUtils=xc,e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(e,"__esModule",{value:!0})});var THREEx=THREEx||{};THREEx.WindowResize=function(e,t,r){(r=r||{}).width=r.width||function(){return window.innerWidth},r.height=r.height||function(){return window.innerHeight},r.maxWidth=r.maxWidth||null,r.maxHeight=r.maxHeight||null,r.before=r.before||null,r.after=r.after||null,r.scale=r.scale||"default";var i=function(e){var t=window.getComputedStyle(document.documentElement,""),r=["Webkit","O","Moz","ms"];if(!(e in t))for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<r.length;n++)if(r[n]+i in t)return"-"+r[n].toLowerCase()+"-";return""}("transform"),n=function(){r.before&&r.before();var n=r.width(),o=r.height(),a=r.maxWidth&&r.maxWidth<n?r.maxWidth:n,s=r.maxHeight&&r.maxHeight<o?r.maxHeight:o;e.setSize(a,s,!1),e.domElement.style.cssText="","3d"===r.scale?(e.domElement.style[i+"transform"]="scale3d("+n/a+","+o/s+",1)",e.domElement.style[i+"transform-origin"]="left top"):"2d"===r.scale?(e.domElement.style[i+"transform"]="scale("+n/a+","+o/s+")",e.domElement.style[i+"transform-origin"]="left top"):"default"===r.scale&&(e.domElement.style.width=n+"px",e.domElement.style.height=o+"px"),t.aspect=n/o,t.updateProjectionMatrix(),r.after&&r.after()};return window.addEventListener("resize",n,!1),{trigger:function(){n()},option:function(e,t){r[e]=t,n()},destroy:function(){window.removeEventListener("resize",n)}}},function(){"use strict";function e(e){e||(e=Math.random),this.p=t(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}function t(e){var t,r=new Uint8Array(256);for(t=0;t<256;t++)r[t]=t;for(t=0;t<255;t++){var i=t+1+~~(e()*(255-t)),n=r[t];r[t]=r[i],r[i]=n}return r}var r=.5*(Math.sqrt(3)-1),i=(3-Math.sqrt(3))/6,n=1/6,o=(Math.sqrt(5)-1)/4,a=(5-Math.sqrt(5))/20;e.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(e,t){var n,o,a=this.permMod12,s=this.perm,l=this.grad3,c=0,u=0,h=0,p=(e+t)*r,d=Math.floor(e+p),f=Math.floor(t+p),m=(d+f)*i,v=e-(d-m),g=t-(f-m);v>g?(n=1,o=0):(n=0,o=1);var y=v-n+i,x=g-o+i,_=v-1+2*i,w=g-1+2*i,b=255&d,M=255&f,T=.5-v*v-g*g;if(T>=0){var E=3*a[b+s[M]];c=(T*=T)*T*(l[E]*v+l[E+1]*g)}var S=.5-y*y-x*x;if(S>=0){var R=3*a[b+n+s[M+o]];u=(S*=S)*S*(l[R]*y+l[R+1]*x)}var P=.5-_*_-w*w;if(P>=0){var A=3*a[b+1+s[M+1]];h=(P*=P)*P*(l[A]*_+l[A+1]*w)}return 70*(c+u+h)},noise3D:function(e,t,r){var i,o,a,s,l,c,u,h,p,d,f=this.permMod12,m=this.perm,v=this.grad3,g=(e+t+r)*(1/3),y=Math.floor(e+g),x=Math.floor(t+g),_=Math.floor(r+g),w=(y+x+_)*n,b=e-(y-w),M=t-(x-w),T=r-(_-w);b>=M?M>=T?(l=1,c=0,u=0,h=1,p=1,d=0):b>=T?(l=1,c=0,u=0,h=1,p=0,d=1):(l=0,c=0,u=1,h=1,p=0,d=1):M<T?(l=0,c=0,u=1,h=0,p=1,d=1):b<T?(l=0,c=1,u=0,h=0,p=1,d=1):(l=0,c=1,u=0,h=1,p=1,d=0);var E=b-l+n,S=M-c+n,R=T-u+n,P=b-h+2*n,A=M-p+2*n,C=T-d+2*n,L=b-1+.5,O=M-1+.5,D=T-1+.5,H=255&y,z=255&x,I=255&_,k=.6-b*b-M*M-T*T;if(k<0)i=0;else{var N=3*f[H+m[z+m[I]]];i=(k*=k)*k*(v[N]*b+v[N+1]*M+v[N+2]*T)}var U=.6-E*E-S*S-R*R;if(U<0)o=0;else{var B=3*f[H+l+m[z+c+m[I+u]]];o=(U*=U)*U*(v[B]*E+v[B+1]*S+v[B+2]*R)}var F=.6-P*P-A*A-C*C;if(F<0)a=0;else{var j=3*f[H+h+m[z+p+m[I+d]]];a=(F*=F)*F*(v[j]*P+v[j+1]*A+v[j+2]*C)}var G=.6-L*L-O*O-D*D;if(G<0)s=0;else{var W=3*f[H+1+m[z+1+m[I+1]]];s=(G*=G)*G*(v[W]*L+v[W+1]*O+v[W+2]*D)}return 32*(i+o+a+s)},noise4D:function(e,t,r,i){var n,s,l,c,u,h,p,d,f,m,v,g,y,x,_,w,b,M=(this.permMod12,this.perm),T=this.grad4,E=(e+t+r+i)*o,S=Math.floor(e+E),R=Math.floor(t+E),P=Math.floor(r+E),A=Math.floor(i+E),C=(S+R+P+A)*a,L=e-(S-C),O=t-(R-C),D=r-(P-C),H=i-(A-C),z=0,I=0,k=0,N=0;L>O?z++:I++,L>D?z++:k++,L>H?z++:N++,O>D?I++:k++,O>H?I++:N++,D>H?k++:N++;var U=L-(h=z>=3?1:0)+a,B=O-(p=I>=3?1:0)+a,F=D-(d=k>=3?1:0)+a,j=H-(f=N>=3?1:0)+a,G=L-(m=z>=2?1:0)+2*a,W=O-(v=I>=2?1:0)+2*a,V=D-(g=k>=2?1:0)+2*a,q=H-(y=N>=2?1:0)+2*a,X=L-(x=z>=1?1:0)+3*a,$=O-(_=I>=1?1:0)+3*a,Y=D-(w=k>=1?1:0)+3*a,J=H-(b=N>=1?1:0)+3*a,Z=L-1+4*a,Q=O-1+4*a,K=D-1+4*a,ee=H-1+4*a,te=255&S,re=255&R,ie=255&P,ne=255&A,oe=.6-L*L-O*O-D*D-H*H;if(oe<0)n=0;else{var ae=M[te+M[re+M[ie+M[ne]]]]%32*4;n=(oe*=oe)*oe*(T[ae]*L+T[ae+1]*O+T[ae+2]*D+T[ae+3]*H)}var se=.6-U*U-B*B-F*F-j*j;if(se<0)s=0;else{var le=M[te+h+M[re+p+M[ie+d+M[ne+f]]]]%32*4;s=(se*=se)*se*(T[le]*U+T[le+1]*B+T[le+2]*F+T[le+3]*j)}var ce=.6-G*G-W*W-V*V-q*q;if(ce<0)l=0;else{var ue=M[te+m+M[re+v+M[ie+g+M[ne+y]]]]%32*4;l=(ce*=ce)*ce*(T[ue]*G+T[ue+1]*W+T[ue+2]*V+T[ue+3]*q)}var he=.6-X*X-$*$-Y*Y-J*J;if(he<0)c=0;else{var pe=M[te+x+M[re+_+M[ie+w+M[ne+b]]]]%32*4;c=(he*=he)*he*(T[pe]*X+T[pe+1]*$+T[pe+2]*Y+T[pe+3]*J)}var de=.6-Z*Z-Q*Q-K*K-ee*ee;if(de<0)u=0;else{var fe=M[te+1+M[re+1+M[ie+1+M[ne+1]]]]%32*4;u=(de*=de)*de*(T[fe]*Z+T[fe+1]*Q+T[fe+2]*K+T[fe+3]*ee)}return 27*(n+s+l+c+u)}},e._buildPermutationTable=t,"undefined"!=typeof define&&define.amd&&define(function(){return e}),"undefined"!=typeof exports?exports.SimplexNoise=e:"undefined"!=typeof window&&(window.SimplexNoise=e),"undefined"!=typeof module&&(module.exports=e)}(),THREE.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var r={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1},i=e.getDrawingBufferSize();(t=new THREE.WebGLRenderTarget(i.width,i.height,r)).texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===THREE.ShaderPass&&console.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},Object.assign(THREE.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getDrawingBufferSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,r,i=!1,n=this.passes.length;for(r=0;r<n;r++)if(!1!==(t=this.passes[r]).enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==THREE.MaskPass&&(t instanceof THREE.MaskPass?i=!0:t instanceof THREE.ClearMaskPass&&(i=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getDrawingBufferSize();(e=this.renderTarget1.clone()).setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(e,t)}}),THREE.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(THREE.Pass.prototype,{setSize:function(e,t){},render:function(e,t,r,i,n){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),THREE.RenderPass=function(e,t,r,i,n){THREE.Pass.call(this),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=void 0!==n?n:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},THREE.RenderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.RenderPass,render:function(e,t,r,i,n){var o,a,s=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(o=e.getClearColor().getHex(),a=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:r,this.clear),this.clearColor&&e.setClearColor(o,a),this.scene.overrideMaterial=null,e.autoClear=s}}),THREE.ShaderPass=function(e,t){THREE.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof THREE.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.ShaderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.ShaderPass,render:function(e,t,r,i,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}}),function(e){var t=e.noise={};function r(e,t,r){this.x=e,this.y=t,this.z=r}r.prototype.dot2=function(e,t){return this.x*e+this.y*t},r.prototype.dot3=function(e,t,r){return this.x*e+this.y*t+this.z*r};var i=[new r(1,1,0),new r(-1,1,0),new r(1,-1,0),new r(-1,-1,0),new r(1,0,1),new r(-1,0,1),new r(1,0,-1),new r(-1,0,-1),new r(0,1,1),new r(0,-1,1),new r(0,1,-1),new r(0,-1,-1)],n=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],o=new Array(512),a=new Array(512);t.seed=function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var r;r=1&t?n[t]^255&e:n[t]^e>>8&255,o[t]=o[t+256]=r,a[t]=a[t+256]=i[r%12]}},t.seed(0);var s=.5*(Math.sqrt(3)-1),l=(3-Math.sqrt(3))/6,c=1/6;function u(e){return e*e*e*(e*(6*e-15)+10)}function h(e,t,r){return(1-r)*e+r*t}t.simplex2=function(e,t){var r,i,n=(e+t)*s,c=Math.floor(e+n),u=Math.floor(t+n),h=(c+u)*l,p=e-c+h,d=t-u+h;p>d?(r=1,i=0):(r=0,i=1);var f=p-r+l,m=d-i+l,v=p-1+2*l,g=d-1+2*l,y=a[(c&=255)+o[u&=255]],x=a[c+r+o[u+i]],_=a[c+1+o[u+1]],w=.5-p*p-d*d,b=.5-f*f-m*m,M=.5-v*v-g*g;return 70*((w<0?0:(w*=w)*w*y.dot2(p,d))+(b<0?0:(b*=b)*b*x.dot2(f,m))+(M<0?0:(M*=M)*M*_.dot2(v,g)))},t.simplex3=function(e,t,r){var i,n,s,l,u,h,p=(e+t+r)*(1/3),d=Math.floor(e+p),f=Math.floor(t+p),m=Math.floor(r+p),v=(d+f+m)*c,g=e-d+v,y=t-f+v,x=r-m+v;g>=y?y>=x?(i=1,n=0,s=0,l=1,u=1,h=0):g>=x?(i=1,n=0,s=0,l=1,u=0,h=1):(i=0,n=0,s=1,l=1,u=0,h=1):y<x?(i=0,n=0,s=1,l=0,u=1,h=1):g<x?(i=0,n=1,s=0,l=0,u=1,h=1):(i=0,n=1,s=0,l=1,u=1,h=0);var _=g-i+c,w=y-n+c,b=x-s+c,M=g-l+2*c,T=y-u+2*c,E=x-h+2*c,S=g-1+.5,R=y-1+.5,P=x-1+.5,A=a[(d&=255)+o[(f&=255)+o[m&=255]]],C=a[d+i+o[f+n+o[m+s]]],L=a[d+l+o[f+u+o[m+h]]],O=a[d+1+o[f+1+o[m+1]]],D=.6-g*g-y*y-x*x,H=.6-_*_-w*w-b*b,z=.6-M*M-T*T-E*E,I=.6-S*S-R*R-P*P;return 32*((D<0?0:(D*=D)*D*A.dot3(g,y,x))+(H<0?0:(H*=H)*H*C.dot3(_,w,b))+(z<0?0:(z*=z)*z*L.dot3(M,T,E))+(I<0?0:(I*=I)*I*O.dot3(S,R,P)))},t.perlin2=function(e,t){var r=Math.floor(e),i=Math.floor(t);e-=r,t-=i;var n=a[(r&=255)+o[i&=255]].dot2(e,t),s=a[r+o[i+1]].dot2(e,t-1),l=a[r+1+o[i]].dot2(e-1,t),c=a[r+1+o[i+1]].dot2(e-1,t-1),p=u(e);return h(h(n,l,p),h(s,c,p),u(t))},t.perlin3=function(e,t,r){var i=Math.floor(e),n=Math.floor(t),s=Math.floor(r);e-=i,t-=n,r-=s;var l=a[(i&=255)+o[(n&=255)+o[s&=255]]].dot3(e,t,r),c=a[i+o[n+o[s+1]]].dot3(e,t,r-1),p=a[i+o[n+1+o[s]]].dot3(e,t-1,r),d=a[i+o[n+1+o[s+1]]].dot3(e,t-1,r-1),f=a[i+1+o[n+o[s]]].dot3(e-1,t,r),m=a[i+1+o[n+o[s+1]]].dot3(e-1,t,r-1),v=a[i+1+o[n+1+o[s]]].dot3(e-1,t-1,r),g=a[i+1+o[n+1+o[s+1]]].dot3(e-1,t-1,r-1),y=u(e),x=u(t),_=u(r);return h(h(h(l,f,y),h(c,m,y),_),h(h(p,v,y),h(d,g,y),_),x)}}(this),THREE.Fire=function(e,t){THREE.Mesh.call(this,e),this.type="Fire",this.clock=new THREE.Clock;var r=(t=t||{}).textureWidth||512,i=t.textureHeight||512,n=1/r,o=1/i,a=void 0!==t.debug&&t.debug;this.color1=t.color1||new THREE.Color(16777215),this.color2=t.color2||new THREE.Color(16752640),this.color3=t.color3||new THREE.Color(0),this.colorBias=void 0===t.colorBias?.8:t.colorBias,this.diffuse=void 0===t.diffuse?1.33:t.diffuse,this.viscosity=void 0===t.viscosity?.25:t.viscosity,this.expansion=void 0===t.expansion?-.25:t.expansion,this.swirl=void 0===t.swirl?50:t.swirl,this.burnRate=void 0===t.burnRate?.3:t.burnRate,this.drag=void 0===t.drag?.35:t.drag,this.airSpeed=void 0===t.airSpeed?6:t.airSpeed,this.windVector=t.windVector||new THREE.Vector2(0,.75),this.speed=void 0===t.speed?500:t.speed,this.massConservation=void 0!==t.massConservation&&t.massConservation;var s=r*i;this.sourceData=new Uint8Array(4*s),this.clearSources=function(){for(var e=0;e<i;e++)for(var t=0;t<r;t++){var n=4*(e*r+t);this.sourceData[n]=0,this.sourceData[n+1]=0,this.sourceData[n+2]=0,this.sourceData[n+3]=0}return this.sourceMaterial.uniforms.sourceMap.value=this.internalSource,this.sourceMaterial.needsUpdate=!0,this.sourceData},this.addSource=function(e,t,a,s=null,l=null,c=null){for(var u=Math.max(Math.floor((e-a)*r),0),h=Math.max(Math.floor((t-a)*i),0),p=Math.min(Math.floor((e+a)*r),r),d=Math.min(Math.floor((t+a)*i),i),f=h;f<d;f++)for(var m=u;m<p;m++){var v=m*n-e,g=f*o-t;if(v*v+g*g<a*a){var y,x=4*(f*r+m);null!=s&&(this.sourceData[x]=255*Math.min(Math.max(s,0),1)),null!=l&&(y=(y=Math.min(Math.max(l,-1),1))<0?Math.floor(127*y)+255:Math.floor(127*y),this.sourceData[x+1]=y),null!=c&&(y=(y=Math.min(Math.max(c,-1),1))<0?Math.floor(127*y)+255:Math.floor(127*y),this.sourceData[x+2]=y)}}return this.internalSource.needsUpdate=!0,this.sourceData},this.setSourceMap=function(e){this.sourceMaterial.uniforms.sourceMap.value=e};var l={minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,depthBuffer:!1,stencilBuffer:!1};this.field0=new THREE.WebGLRenderTarget(r,i,l),this.field0.background=new THREE.Color(0),this.field1=new THREE.WebGLRenderTarget(r,i,l),this.field0.background=new THREE.Color(0),this.fieldProj=new THREE.WebGLRenderTarget(r,i,l),this.field0.background=new THREE.Color(0),THREE.Math.isPowerOfTwo(r)&&THREE.Math.isPowerOfTwo(i)||(this.field0.texture.generateMipmaps=!1,this.field1.texture.generateMipmaps=!1,this.fieldProj.texture.generateMipmaps=!1),this.fieldScene=new THREE.Scene,this.fieldScene.background=new THREE.Color(0),this.orthoCamera=new THREE.OrthographicCamera(r/-2,r/2,i/2,i/-2,1,2),this.orthoCamera.position.z=1,this.fieldGeometry=new THREE.PlaneBufferGeometry(r,i),this.internalSource=new THREE.DataTexture(this.sourceData,r,i,THREE.RGBAFormat);var c=THREE.Fire.SourceShader;this.sourceMaterial=new THREE.ShaderMaterial({uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,transparent:!1}),this.clearSources(),this.sourceMesh=new THREE.Mesh(this.fieldGeometry,this.sourceMaterial),this.fieldScene.add(this.sourceMesh),c=THREE.Fire.DiffuseShader,this.diffuseMaterial=new THREE.ShaderMaterial({uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,transparent:!1}),this.diffuseMaterial.uniforms.oneOverWidth.value=n,this.diffuseMaterial.uniforms.oneOverHeight.value=o,this.diffuseMesh=new THREE.Mesh(this.fieldGeometry,this.diffuseMaterial),this.fieldScene.add(this.diffuseMesh),c=THREE.Fire.DriftShader,this.driftMaterial=new THREE.ShaderMaterial({uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,transparent:!1}),this.driftMaterial.uniforms.oneOverWidth.value=n,this.driftMaterial.uniforms.oneOverHeight.value=o,this.driftMesh=new THREE.Mesh(this.fieldGeometry,this.driftMaterial),this.fieldScene.add(this.driftMesh),c=THREE.Fire.ProjectionShader1,this.projMaterial1=new THREE.ShaderMaterial({uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,transparent:!1}),this.projMaterial1.uniforms.oneOverWidth.value=n,this.projMaterial1.uniforms.oneOverHeight.value=o,this.projMesh1=new THREE.Mesh(this.fieldGeometry,this.projMaterial1),this.fieldScene.add(this.projMesh1),c=THREE.Fire.ProjectionShader2,this.projMaterial2=new THREE.ShaderMaterial({uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,transparent:!1}),this.projMaterial2.uniforms.oneOverWidth.value=n,this.projMaterial2.uniforms.oneOverHeight.value=o,this.projMesh2=new THREE.Mesh(this.fieldGeometry,this.projMaterial2),this.fieldScene.add(this.projMesh2),c=THREE.Fire.ProjectionShader3,this.projMaterial3=new THREE.ShaderMaterial({uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,transparent:!1}),this.projMaterial3.uniforms.oneOverWidth.value=n,this.projMaterial3.uniforms.oneOverHeight.value=o,this.projMesh3=new THREE.Mesh(this.fieldGeometry,this.projMaterial3),this.fieldScene.add(this.projMesh3),c=a?THREE.Fire.DebugShader:THREE.Fire.ColorShader,this.material=new THREE.ShaderMaterial({uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,transparent:!0}),this.material.uniforms.densityMap.value=this.field1.texture,this.configShaders=function(e){this.diffuseMaterial.uniforms.diffuse.value=.05*e*this.diffuse,this.diffuseMaterial.uniforms.viscosity.value=.05*e*this.viscosity,this.diffuseMaterial.uniforms.expansion.value=Math.exp(-1*this.expansion),this.diffuseMaterial.uniforms.swirl.value=Math.exp(-.1*this.swirl),this.diffuseMaterial.uniforms.drag.value=Math.exp(-.1*this.drag),this.diffuseMaterial.uniforms.burnRate.value=this.burnRate*e*.01,this.driftMaterial.uniforms.windVector.value=this.windVector,this.driftMaterial.uniforms.airSpeed.value=e*this.airSpeed*.001*i,this.material.uniforms.color1.value=this.color1,this.material.uniforms.color2.value=this.color2,this.material.uniforms.color3.value=this.color3,this.material.uniforms.colorBias.value=this.colorBias},this.clearDiffuse=function(){this.diffuseMaterial.uniforms.expansion.value=1,this.diffuseMaterial.uniforms.swirl.value=1,this.diffuseMaterial.uniforms.drag.value=1,this.diffuseMaterial.uniforms.burnRate.value=0},this.swapTextures=function(){var e=this.field0;this.field0=this.field1,this.field1=e},this.saveRenderState=function(e){this.savedRenderTarget=e.getRenderTarget(),this.savedVrEnabled=e.vr.enabled,this.savedShadowAutoUpdate=e.shadowMap.autoUpdate,this.savedAntialias=e.antialias,this.savedToneMapping=e.toneMapping},this.restoreRenderState=function(e){e.vr.enabled=this.savedVrEnabled,e.shadowMap.autoUpdate=this.savedShadowAutoUpdate,e.setRenderTarget(this.savedRenderTarget),e.antialias=this.savedAntialias,e.toneMapping=this.savedToneMapping},this.renderSource=function(e){this.sourceMesh.visible=!0,this.sourceMaterial.uniforms.densityMap.value=this.field0.texture,e.render(this.fieldScene,this.orthoCamera,this.field1),this.sourceMesh.visible=!1,this.swapTextures()},this.renderDiffuse=function(e){this.diffuseMesh.visible=!0,this.diffuseMaterial.uniforms.densityMap.value=this.field0.texture,e.render(this.fieldScene,this.orthoCamera,this.field1),this.diffuseMesh.visible=!1,this.swapTextures()},this.renderDrift=function(e){this.driftMesh.visible=!0,this.driftMaterial.uniforms.densityMap.value=this.field0.texture,e.render(this.fieldScene,this.orthoCamera,this.field1),this.driftMesh.visible=!1,this.swapTextures()},this.renderProject=function(e){this.projMesh1.visible=!0,this.projMaterial1.uniforms.densityMap.value=this.field0.texture,e.render(this.fieldScene,this.orthoCamera,this.fieldProj),this.projMesh1.visible=!1,this.projMaterial2.uniforms.densityMap.value=this.fieldProj.texture,this.projMesh2.visible=!0;for(var t=0;t<20;t++){e.render(this.fieldScene,this.orthoCamera,this.field1);var r=this.field1;this.field1=this.fieldProj,this.fieldProj=r,this.projMaterial2.uniforms.densityMap.value=this.fieldProj.texture}this.projMesh2.visible=!1,this.projMaterial3.uniforms.densityMap.value=this.field0.texture,this.projMaterial3.uniforms.projMap.value=this.fieldProj.texture,this.projMesh3.visible=!0,e.render(this.fieldScene,this.orthoCamera,this.field1),this.projMesh3.visible=!1,this.swapTextures()},this.onBeforeRender=function(e,t,r){var i=this.clock.getDelta();i>.1&&(i=.1);var n=i*(.1*this.speed);this.configShaders(n),this.saveRenderState(e),e.vr.enabled=!1,e.shadowMap.autoUpdate=!1,e.antialias=!1,e.toneMapping=THREE.NoToneMapping,this.sourceMesh.visible=!1,this.diffuseMesh.visible=!1,this.driftMesh.visible=!1,this.projMesh1.visible=!1,this.projMesh2.visible=!1,this.projMesh3.visible=!1,this.renderSource(e),this.clearDiffuse();for(var o=0;o<21;o++)this.renderDiffuse(e);this.configShaders(n),this.renderDiffuse(e),this.renderDrift(e),this.massConservation&&(this.renderProject(e),this.renderProject(e)),this.material.map=this.field1.texture,this.material.transparent=!0,this.material.minFilter=THREE.LinearFilter,this.material.magFilter=THREE.LinearFilter,this.restoreRenderState(e)}},THREE.Fire.prototype=Object.create(THREE.Mesh.prototype),THREE.Fire.prototype.constructor=THREE.Fire,THREE.Fire.SourceShader={uniforms:{sourceMap:{type:"t",value:null},densityMap:{type:"t",value:null}},vertexShader:["varying vec2 vUv;","void main() {"," \t  vUv = uv;","     vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","     gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform sampler2D sourceMap;","uniform sampler2D densityMap;","varying vec2 vUv;","void main() {","    vec4 source = vec4(vec3(1.0) - texture2D(sourceMap, vUv ).rgb, 1);","    vec4 current = texture2D( densityMap, vUv );","    vec2 v0 = (current.gb - step(0.5, current.gb)) * 2.0;","    vec2 v1 = (source.gb - step(0.5, source.gb)) * 2.0;","    vec2 newVel = v0 + v1;","    newVel = clamp(newVel, -0.99, 0.99);","    newVel = newVel * 0.5 + step(0.0, -newVel);","    float newDensity = source.r + current.a;","    float newTemp = source.r + current.b;","    newDensity = clamp(newDensity, 0.0, 1.0);","    newTemp = clamp(newTemp, 0.0, 1.0);","    gl_FragColor = vec4(newTemp, newVel.xy, newDensity);","}"].join("\n")},THREE.Fire.DiffuseShader={uniforms:{oneOverWidth:{type:"f",value:null},oneOverHeight:{type:"f",value:null},diffuse:{type:"f",value:null},viscosity:{type:"f",value:null},expansion:{type:"f",value:null},swirl:{type:"f",value:null},drag:{type:"f",value:null},moveX:{type:"f",value:null},moveY:{type:"f",value:null},burnRate:{type:"f",value:null},densityMap:{type:"t",value:null}},vertexShader:["varying vec2 vUv;","void main() {"," \t  vUv = uv;","     vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","     gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform float oneOverWidth;","uniform float oneOverHeight;","uniform float diffuse;","uniform float viscosity;","uniform float expansion;","uniform float swirl;","uniform float burnRate;","uniform float drag;","uniform sampler2D densityMap;","varying vec2 vUv;","void main() {","    vec4 dC = texture2D( densityMap, vUv );","    vec4 dL = texture2D( densityMap, vec2(vUv.x - oneOverWidth, vUv.y) );","    vec4 dR = texture2D( densityMap, vec2(vUv.x + oneOverWidth, vUv.y) );","    vec4 dU = texture2D( densityMap, vec2(vUv.x, vUv.y - oneOverHeight) );","    vec4 dD = texture2D( densityMap, vec2(vUv.x, vUv.y + oneOverHeight) );","    vec4 dUL = texture2D( densityMap, vec2(vUv.x - oneOverWidth, vUv.y - oneOverHeight) );","    vec4 dUR = texture2D( densityMap, vec2(vUv.x + oneOverWidth, vUv.y - oneOverHeight) );","    vec4 dDL = texture2D( densityMap, vec2(vUv.x - oneOverWidth, vUv.y + oneOverHeight) );","    vec4 dDR = texture2D( densityMap, vec2(vUv.x + oneOverWidth, vUv.y + oneOverHeight) );","    dC.yz = (dC.yz - step(0.5, dC.yz)) * 2.0;","    dL.yz = (dL.yz - step(0.5, dL.yz)) * 2.0;","    dR.yz = (dR.yz - step(0.5, dR.yz)) * 2.0;","    dU.yz = (dU.yz - step(0.5, dU.yz)) * 2.0;","    dD.yz = (dD.yz - step(0.5, dD.yz)) * 2.0;","    dUL.yz = (dUL.yz - step(0.5, dUL.yz)) * 2.0;","    dUR.yz = (dUR.yz - step(0.5, dUR.yz)) * 2.0;","    dDL.yz = (dDL.yz - step(0.5, dDL.yz)) * 2.0;","    dDR.yz = (dDR.yz - step(0.5, dDR.yz)) * 2.0;","    vec4 result = (dC + vec4(diffuse, viscosity, viscosity, diffuse) * ( dL + dR + dU + dD + dUL + dUR + dDL + dDR )) / (1.0 + 8.0 * vec4(diffuse, viscosity, viscosity, diffuse)) - vec4(0.0, 0.0, 0.0, 0.001);","    float temperature = result.r;","    temperature = clamp(temperature - burnRate, 0.0, 1.0);","    vec2 velocity = result.yz;","    vec2 expansionVec = vec2(dL.w - dR.w, dU.w - dD.w);","    vec2 swirlVec = vec2((dL.z - dR.z) * 0.5, (dU.y - dD.y) * 0.5);","    velocity = velocity + (1.0 - expansion) * expansionVec + (1.0 - swirl) * swirlVec;","    velocity = velocity - (1.0 - drag) * velocity;","    gl_FragColor = vec4(temperature, velocity * 0.5 + step(0.0, -velocity), result.w);","    gl_FragColor = gl_FragColor * step(oneOverWidth, vUv.x);","    gl_FragColor = gl_FragColor * step(oneOverHeight, vUv.y);","    gl_FragColor = gl_FragColor * step(vUv.x, 1.0 - oneOverWidth);","    gl_FragColor = gl_FragColor * step(vUv.y, 1.0 - oneOverHeight);","}"].join("\n")},THREE.Fire.DriftShader={uniforms:{oneOverWidth:{type:"f",value:null},oneOverHeight:{type:"f",value:null},windVector:{type:"v2",value:new THREE.Vector2(0,0)},airSpeed:{type:"f",value:null},densityMap:{type:"t",value:null}},vertexShader:["varying vec2 vUv;","void main() {"," \t  vUv = uv;","     vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","     gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform float oneOverWidth;","uniform float oneOverHeight;","uniform vec2 windVector;","uniform float airSpeed;","uniform sampler2D densityMap;","varying vec2 vUv;","void main() {","    vec2 velocity = texture2D( densityMap, vUv ).gb;","    velocity = (velocity - step(0.5, velocity)) * 2.0;","    velocity = velocity + windVector;","    vec2 sourcePos = vUv - airSpeed * vec2(oneOverWidth, oneOverHeight) * velocity;","    vec2 units = sourcePos / vec2(oneOverWidth, oneOverHeight);","    vec2 intPos = floor(units);","    vec2 frac = units - intPos;","    intPos = intPos * vec2(oneOverWidth, oneOverHeight);","    vec4 dX0Y0 = texture2D( densityMap, intPos + vec2(0.0, -oneOverHeight) );","    vec4 dX1Y0 = texture2D( densityMap, intPos + vec2(oneOverWidth, 0.0) );","    vec4 dX0Y1 = texture2D( densityMap, intPos + vec2(0.0, oneOverHeight) );","    vec4 dX1Y1 = texture2D( densityMap, intPos + vec2(oneOverWidth, oneOverHeight) );","    dX0Y0.gb = (dX0Y0.gb - step(0.5, dX0Y0.gb)) * 2.0;","    dX1Y0.gb = (dX1Y0.gb - step(0.5, dX1Y0.gb)) * 2.0;","    dX0Y1.gb = (dX0Y1.gb - step(0.5, dX0Y1.gb)) * 2.0;","    dX1Y1.gb = (dX1Y1.gb - step(0.5, dX1Y1.gb)) * 2.0;","    vec4 source = mix(mix(dX0Y0, dX1Y0, frac.x), mix(dX0Y1, dX1Y1, frac.x), frac.y);","    source.gb = source.gb * 0.5 + step(0.0, -source.gb);","    gl_FragColor = source;","}"].join("\n")},THREE.Fire.ProjectionShader1={uniforms:{oneOverWidth:{type:"f",value:null},oneOverHeight:{type:"f",value:null},densityMap:{type:"t",value:null}},vertexShader:["varying vec2 vUv;","void main() {"," \t  vUv = uv;","     vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","     gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform float oneOverWidth;","uniform float oneOverHeight;","uniform sampler2D densityMap;","varying vec2 vUv;","void main() {","    float dL = texture2D( densityMap, vec2(vUv.x - oneOverWidth, vUv.y) ).g;","    float dR = texture2D( densityMap, vec2(vUv.x + oneOverWidth, vUv.y) ).g;","    float dU = texture2D( densityMap, vec2(vUv.x, vUv.y - oneOverHeight) ).b;","    float dD = texture2D( densityMap, vec2(vUv.x, vUv.y + oneOverHeight) ).b;","    dL = (dL - step(0.5, dL)) * 2.0;","    dR = (dR - step(0.5, dR)) * 2.0;","    dU = (dU - step(0.5, dU)) * 2.0;","    dD = (dD - step(0.5, dD)) * 2.0;","    float h = (oneOverWidth + oneOverHeight) * 0.5;","    float div = -0.5 * h * (dR - dL + dD - dU);","    gl_FragColor = vec4( 0.0, 0.0, div * 0.5 + step(0.0, -div), 0.0);","}"].join("\n")},THREE.Fire.ProjectionShader2={uniforms:{oneOverWidth:{type:"f",value:null},oneOverHeight:{type:"f",value:null},densityMap:{type:"t",value:null}},vertexShader:["varying vec2 vUv;","void main() {"," \t  vUv = uv;","     vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","     gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform float oneOverWidth;","uniform float oneOverHeight;","uniform sampler2D densityMap;","varying vec2 vUv;","void main() {","    float div = texture2D( densityMap, vUv ).b;","    float pL = texture2D( densityMap, vec2(vUv.x - oneOverWidth, vUv.y) ).g;","    float pR = texture2D( densityMap, vec2(vUv.x + oneOverWidth, vUv.y) ).g;","    float pU = texture2D( densityMap, vec2(vUv.x, vUv.y - oneOverHeight) ).g;","    float pD = texture2D( densityMap, vec2(vUv.x, vUv.y + oneOverHeight) ).g;","    float divNorm = (div - step(0.5, div)) * 2.0;","    pL = (pL - step(0.5, pL)) * 2.0;","    pR = (pR - step(0.5, pR)) * 2.0;","    pU = (pU - step(0.5, pU)) * 2.0;","    pD = (pD - step(0.5, pD)) * 2.0;","    float p = (divNorm + pR + pL + pD + pU) * 0.25;","    gl_FragColor = vec4( 0.0, p * 0.5 + step(0.0, -p), div, 0.0);","}"].join("\n")},THREE.Fire.ProjectionShader3={uniforms:{oneOverWidth:{type:"f",value:null},oneOverHeight:{type:"f",value:null},densityMap:{type:"t",value:null},projMap:{type:"t",value:null}},vertexShader:["varying vec2 vUv;","void main() {"," \t  vUv = uv;","     vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","     gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform float oneOverWidth;","uniform float oneOverHeight;","uniform sampler2D densityMap;","uniform sampler2D projMap;","varying vec2 vUv;","void main() {","    vec4 orig = texture2D(densityMap, vUv);","    float pL = texture2D( projMap, vec2(vUv.x - oneOverWidth, vUv.y) ).g;","    float pR = texture2D( projMap, vec2(vUv.x + oneOverWidth, vUv.y) ).g;","    float pU = texture2D( projMap, vec2(vUv.x, vUv.y - oneOverHeight) ).g;","    float pD = texture2D( projMap, vec2(vUv.x, vUv.y + oneOverHeight) ).g;","    float uNorm = (orig.g - step(0.5, orig.g)) * 2.0;","    float vNorm = (orig.b - step(0.5, orig.b)) * 2.0;","    pL = (pL - step(0.5, pL)) * 2.0;","    pR = (pR - step(0.5, pR)) * 2.0;","    pU = (pU - step(0.5, pU)) * 2.0;","    pD = (pD - step(0.5, pD)) * 2.0;","    float h = (oneOverWidth + oneOverHeight) * 0.5;","    float u = uNorm - (0.5 * (pR - pL) / h);","    float v = vNorm - (0.5 * (pD - pU) / h);","    gl_FragColor = vec4( orig.r, u * 0.5 + step(0.0, -u), v * 0.5 + step(0.0, -v), orig.a);","}"].join("\n")},THREE.Fire.ColorShader={uniforms:{color1:{type:"c",value:null},color2:{type:"c",value:null},color3:{type:"c",value:null},colorBias:{type:"f",value:null},densityMap:{type:"t",value:null}},vertexShader:["varying vec2 vUv;","void main() {"," \t  vUv = uv;","     vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","     gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 color1;","uniform vec3 color2;","uniform vec3 color3;","uniform float colorBias;","uniform sampler2D densityMap;","varying vec2 vUv;","void main() {","    float density = texture2D( densityMap, vUv ).a;","    float temperature = texture2D( densityMap, vUv ).r;","    float bias = clamp(colorBias, 0.0001, 0.9999);","    vec3 blend1 = mix(color3, color2, temperature / bias) * (1.0 - step(bias, temperature));","    vec3 blend2 = mix(color2, color1, (temperature - bias) / (1.0 - bias) ) * step(bias, temperature);","    gl_FragColor = vec4(blend1 + blend2, density);","}"].join("\n")},THREE.Fire.DebugShader={uniforms:{color1:{type:"c",value:null},color2:{type:"c",value:null},color3:{type:"c",value:null},colorBias:{type:"f",value:null},densityMap:{type:"t",value:null}},vertexShader:["varying vec2 vUv;","void main() {"," \t  vUv = uv;","     vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","     gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform sampler2D densityMap;","varying vec2 vUv;","void main() {","    float density;","    density = texture2D( densityMap, vUv ).a;","    vec2 vel = texture2D( densityMap, vUv ).gb;","    vel = (vel - step(0.5, vel)) * 2.0;","    float r = density;","    float g = max(abs(vel.x), density * 0.5);","    float b = max(abs(vel.y), density * 0.5);","    float a = max(density * 0.5, max(abs(vel.x), abs(vel.y)));","    gl_FragColor = vec4(r, g, b, a);","}"].join("\n")},THREE.GlitchPass=function(e){THREE.Pass.call(this),void 0===THREE.DigitalGlitch&&console.error("THREE.GlitchPass relies on THREE.DigitalGlitch");var t=THREE.DigitalGlitch;this.uniforms=THREE.UniformsUtils.clone(t.uniforms),void 0==e&&(e=64),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.goWild=!1,this.curF=0,this.generateTrigger()},THREE.GlitchPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.GlitchPass,render:function(e,t,r,i,n){this.uniforms.tDiffuse.value=r.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=THREE.Math.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=THREE.Math.randFloat(-1,1),this.uniforms.seed_y.value=THREE.Math.randFloat(-1,1),this.uniforms.distortion_x.value=THREE.Math.randFloat(0,1),this.uniforms.distortion_y.value=THREE.Math.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/10?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value+=0,this.uniforms.distortion_x.value+=.001,this.uniforms.distortion_y.value+=.001,THREE.Math.randFloat(0,0),this.uniforms.seed_x.value=0,this.uniforms.seed_y.value=0):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)},generateTrigger:function(){this.randX=THREE.Math.randInt(10,240)},generateHeightmap:function(e){for(var t=new Float32Array(e*e*3),r=e*e,i=0;i<r;i++){var n=THREE.Math.randFloat(0,1);t[3*i+0]=n,t[3*i+1]=n,t[3*i+2]=n}var o=new THREE.DataTexture(t,e,e,THREE.RGBFormat,THREE.FloatType);return o.needsUpdate=!0,o}}),THREE.MaskPass=function(e,t){THREE.Pass.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1},THREE.MaskPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.MaskPass,render:function(e,t,r,i,n){var o,a,s=e.context,l=e.state;l.buffers.color.setMask(!1),l.buffers.depth.setMask(!1),l.buffers.color.setLocked(!0),l.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),l.buffers.stencil.setTest(!0),l.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),l.buffers.stencil.setFunc(s.ALWAYS,o,4294967295),l.buffers.stencil.setClear(a),e.render(this.scene,this.camera,r,this.clear),e.render(this.scene,this.camera,t,this.clear),l.buffers.color.setLocked(!1),l.buffers.depth.setLocked(!1),l.buffers.stencil.setFunc(s.EQUAL,1,4294967295),l.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP)}}),THREE.ClearMaskPass=function(){THREE.Pass.call(this),this.needsSwap=!1},THREE.ClearMaskPass.prototype=Object.create(THREE.Pass.prototype),Object.assign(THREE.ClearMaskPass.prototype,{render:function(e,t,r,i,n){e.state.buffers.stencil.setTest(!1)}}),THREE.HueSaturationShader={uniforms:{tDiffuse:{value:null},hue:{value:0},saturation:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float hue;","uniform float saturation;","varying vec2 vUv;","void main() {","gl_FragColor = texture2D( tDiffuse, vUv );","float angle = hue * 3.14159265;","float s = sin(angle), c = cos(angle);","vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;","float len = length(gl_FragColor.rgb);","gl_FragColor.rgb = vec3(","dot(gl_FragColor.rgb, weights.xyz),","dot(gl_FragColor.rgb, weights.zxy),","dot(gl_FragColor.rgb, weights.yzx)",");","float average = (gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0;","if (saturation > 0.0) {","gl_FragColor.rgb += (average - gl_FragColor.rgb) * (1.0 - 1.0 / (1.001 - saturation));","} else {","gl_FragColor.rgb += (average - gl_FragColor.rgb) * (-saturation);","}","}"].join("\n")},THREE.AfterimagePass=function(e){THREE.Pass.call(this),void 0===THREE.AfterimageShader&&console.error("THREE.AfterimagePass relies on THREE.AfterimageShader"),this.shader=THREE.AfterimageShader,this.uniforms=THREE.UniformsUtils.clone(this.shader.uniforms),this.uniforms.damp.value=void 0!==e?e:.96,this.textureComp=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat}),this.textureOld=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat}),this.shaderMaterial=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.sceneComp=new THREE.Scene,this.scene=new THREE.Scene,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.camera.position.z=1;var t=new THREE.PlaneBufferGeometry(2,2);this.quadComp=new THREE.Mesh(t,this.shaderMaterial),this.sceneComp.add(this.quadComp);var r=new THREE.MeshBasicMaterial({map:this.textureComp.texture}),i=new THREE.Mesh(t,r);this.scene.add(i)},THREE.AfterimagePass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.AfterimagePass,render:function(e,t,r){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=r.texture,this.quadComp.material=this.shaderMaterial,e.render(this.sceneComp,this.camera,this.textureComp),e.render(this.scene,this.camera,this.textureOld),this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}}),THREE.ShaderGodRays={godrays_depthMask:{uniforms:{tInput:{value:null}},vertexShader:["varying vec2 vUv;","void main() {"," vUv = uv;"," gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tInput;","void main() {","\tgl_FragColor = vec4( 1.0 ) - texture2D( tInput, vUv );","}"].join("\n")},godrays_generate:{uniforms:{tInput:{value:null},fStepSize:{value:1},vSunPositionScreenSpace:{value:new THREE.Vector2(.5,.5)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define TAPS_PER_PASS 6.0","varying vec2 vUv;","uniform sampler2D tInput;","uniform vec2 vSunPositionScreenSpace;","uniform float fStepSize;","void main() {","vec2 delta = vSunPositionScreenSpace - vUv;","float dist = length( delta );","vec2 stepv = fStepSize * delta / dist;","float iters = dist/fStepSize;","vec2 uv = vUv.xy;","float col = 0.0;","if ( 0.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r;","uv += stepv;","if ( 1.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r;","uv += stepv;","if ( 2.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r;","uv += stepv;","if ( 3.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r;","uv += stepv;","if ( 4.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r;","uv += stepv;","if ( 5.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r;","uv += stepv;","gl_FragColor = vec4( col/TAPS_PER_PASS );","gl_FragColor.a = 1.0;","}"].join("\n")},godrays_combine:{uniforms:{tColors:{value:null},tGodRays:{value:null},fGodRayIntensity:{value:.69},vSunPositionScreenSpace:{value:new THREE.Vector2(.5,.5)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tColors;","uniform sampler2D tGodRays;","uniform vec2 vSunPositionScreenSpace;","uniform float fGodRayIntensity;","void main() {","gl_FragColor = texture2D( tColors, vUv ) + fGodRayIntensity * vec4( 1.0 - texture2D( tGodRays, vUv ).r );","gl_FragColor.a = 1.0;","}"].join("\n")},godrays_fake_sun:{uniforms:{vSunPositionScreenSpace:{value:new THREE.Vector2(.5,.5)},fAspect:{value:1},sunColor:{value:new THREE.Color(16772608)},bgColor:{value:new THREE.Color(0)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform vec2 vSunPositionScreenSpace;","uniform float fAspect;","uniform vec3 sunColor;","uniform vec3 bgColor;","void main() {","vec2 diff = vUv - vSunPositionScreenSpace;","diff.x *= fAspect;","float prop = clamp( length( diff ) / 0.5, 0.0, 1.0 );","prop = 0.35 * pow( 1.0 - prop, 3.0 );","gl_FragColor.xyz = mix( sunColor, bgColor, 1.0 - prop );","gl_FragColor.w = 1.0;","}"].join("\n")}},THREE.RGBShiftShader={uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float amount;","uniform float angle;","varying vec2 vUv;","void main() {","vec2 offset = amount * vec2( cos(angle), sin(angle));","vec4 cr = texture2D(tDiffuse, vUv + offset);","vec4 cga = texture2D(tDiffuse, vUv);","vec4 cb = texture2D(tDiffuse, vUv - offset);","gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","}"].join("\n")},THREE.BadTVShader={uniforms:{tDiffuse:{type:"t",value:null},time:{type:"f",value:0},distortion:{type:"f",value:3},distortion2:{type:"f",value:5},speed:{type:"f",value:.2},rollSpeed:{type:"f",value:.1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float time;","uniform float distortion;","uniform float distortion2;","uniform float speed;","uniform float rollSpeed;","varying vec2 vUv;","vec3 mod289(vec3 x) {","  return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec2 mod289(vec2 x) {","  return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec3 permute(vec3 x) {","  return mod289(((x*34.0)+1.0)*x);","}","float snoise(vec2 v)","  {","  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0","                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)","                     -0.577350269189626,  // -1.0 + 2.0 * C.x","                      0.024390243902439); // 1.0 / 41.0","  vec2 i  = floor(v + dot(v, C.yy) );","  vec2 x0 = v -   i + dot(i, C.xx);","  vec2 i1;","  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);","  vec4 x12 = x0.xyxy + C.xxzz;"," x12.xy -= i1;","  i = mod289(i); // Avoid truncation effects in permutation","  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))","\t\t+ i.x + vec3(0.0, i1.x, 1.0 ));","  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);","  m = m*m ;","  m = m*m ;","  vec3 x = 2.0 * fract(p * C.www) - 1.0;","  vec3 h = abs(x) - 0.5;","  vec3 ox = floor(x + 0.5);","  vec3 a0 = x - ox;","  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );","  vec3 g;","  g.x  = a0.x  * x0.x  + h.x  * x0.y;","  g.yz = a0.yz * x12.xz + h.yz * x12.yw;","  return 130.0 * dot(m, g);","}","void main() {","vec2 p = vUv;","float ty = time*speed;","float yt = p.y - ty;","float offset = snoise(vec2(yt*1.0,0.0))*0.2;","offset = offset*distortion * offset*distortion * offset;","offset += snoise(vec2(yt*1.2,0.0))*distortion2;","gl_FragColor = texture2D(tDiffuse,  vec2(fract(p.x + offset),fract(p.y-time*rollSpeed) ));","}"].join("\n")},THREE.ColorifyShader={uniforms:{tDiffuse:{type:"t",value:null},color:{type:"c",value:new THREE.Color(16777215)},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec3 finalColor = vec3(","(opacity * v * color.x) + ((1.0 - opacity) * texel.x),","(opacity * v * color.y) + ((1.0 - opacity) * texel.y),","(opacity * v * color.z) + ((1.0 - opacity) * texel.z)",");","gl_FragColor = vec4( finalColor, texel.w );","}"].join("\n")},THREE.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:.9}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},THREE.DigitalGlitch={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:8e-4},angle:{value:0},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:2.5},distortion_y:{value:2.6},col_s:{value:.15}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform int byp;","uniform sampler2D tDiffuse;","uniform sampler2D tDisp;","uniform float amount;","uniform float angle;","uniform float seed;","uniform float seed_x;","uniform float seed_y;","uniform float distortion_x;","uniform float distortion_y;","uniform float col_s;","varying vec2 vUv;","float rand(vec2 co){","return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","if(byp<1) {","vec2 p = vUv;","float xs = floor(gl_FragCoord.x / 0.25);","float ys = floor(gl_FragCoord.y / 0.25);","vec4 normal = texture2D (tDisp, p*seed*seed);","if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {","if(seed_x>0.){","p.y = 1. - (p.y + distortion_y);","}","else {","p.y = distortion_y;","}","}","if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {","if(seed_y>0.){","p.x=distortion_x;","}","else {","p.x = 1. - (p.x + distortion_x);","}","}","p.x+=normal.x*seed_x*(seed/5.);","p.y+=normal.y*seed_y*(seed/5.);","vec2 offset = amount * vec2( cos(angle), sin(angle));","vec4 cr = texture2D(tDiffuse, p);","vec4 cga = texture2D(tDiffuse, p);","vec4 cb = texture2D(tDiffuse, p);","gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","vec4 snow = 100.*amount*vec4(rand(vec2(xs * seed,ys * seed*5.))*0.0);","gl_FragColor = gl_FragColor+ snow;","}","else {","gl_FragColor=texture2D (tDiffuse, vUv);","}","}"].join("\n")},THREE.AfterimageShader={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float damp;","uniform sampler2D tOld;","uniform sampler2D tNew;","varying vec2 vUv;","vec4 when_gt( vec4 x, float y ) {","return max( sign( x - y ), 0.0 );","}","void main() {","vec4 texelOld = texture2D( tOld, vUv );","vec4 texelNew = texture2D( tNew, vUv );","texelOld *= damp * when_gt( texelOld, 0.05 );","gl_FragColor = max(texelNew, texelOld);","}"].join("\n")},THREE.StaticShader={uniforms:{tDiffuse:{type:"t",value:null},time:{type:"f",value:0},amount:{type:"f",value:.5},size:{type:"f",value:4}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float time;","uniform float amount;","uniform float size;","varying vec2 vUv;","float rand(vec2 co){","return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","vec2 p = vUv;","vec4 color = texture2D(tDiffuse, p);","float xs = floor(gl_FragCoord.x / size);","float ys = floor(gl_FragCoord.y / size);","vec4 snow = vec4(rand(vec2(xs * time,ys * time))*amount);","gl_FragColor = color+ snow;","}"].join("\n")},THREE.HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/256},mouse:{value:new THREE.Vector2},ratio:{value:window.innerWidth/window.innerHeight}},vertexShader:[" varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float h;","uniform vec2 mouse;","uniform float ratio;","varying vec2 vUv;","void main() {","vec2 uv = vUv;","uv = -1. + 2. * uv;","uv -= mouse;","uv.x *= ratio;","if ( length(uv) > 0.2 ) {","gl_FragColor = texture2D(tDiffuse, vUv);"," } "," else{","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;","gl_FragColor = sum;","}","}"].join("\n")},THREE.VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/256},mouse:{value:new THREE.Vector2},ratio:{value:window.innerWidth/window.innerHeight}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","uniform vec2 mouse;","uniform float ratio;","varying vec2 vUv;","void main() {","vec2 uv = vUv;","uv = -1. + 2. * uv;","uv -= mouse;","uv.x *= ratio;","if ( length(uv) > 0.2 ) {","gl_FragColor = texture2D(tDiffuse, vUv);","}","else{","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;","gl_FragColor = sum;","}","}"].join("\n")},THREE.VolumetericLightShader={uniforms:{tDiffuse:{value:null},lightPosition:{value:new THREE.Vector2(.5,.5)},exposure:{value:.18},decay:{value:.95},density:{value:.8},weight:{value:.4},samples:{value:50}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tDiffuse;","uniform vec2 lightPosition;","uniform float exposure;","uniform float decay;","uniform float density;","uniform float weight;","uniform int samples;","const int MAX_SAMPLES = 100;","void main()","{","vec2 texCoord = vUv;","vec2 deltaTextCoord = texCoord - lightPosition;","deltaTextCoord *= 1.0 / float(samples) * density;","vec4 color = texture2D(tDiffuse, texCoord);","float illuminationDecay = 1.0;","for(int i=0; i < MAX_SAMPLES; i++)","{","if(i == samples){","break;","}","texCoord -= deltaTextCoord;","vec4 sample = texture2D(tDiffuse, texCoord);","sample *= illuminationDecay * weight;","color += sample;","illuminationDecay *= decay;","}","gl_FragColor = color * exposure;","}"].join("\n")},THREE.AdditiveBlendingShader={uniforms:{tDiffuse:{value:null},tAdd:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D tAdd;","varying vec2 vUv;","void main() {","vec4 color = texture2D( tDiffuse, vUv );","vec4 add = texture2D( tAdd, vUv );","gl_FragColor = color + add;","}"].join("\n")},THREE.PassThroughShader={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","gl_FragColor = texture2D( tDiffuse, vec2( vUv.x, vUv.y ) );","}"].join("\n")};var noiseVertex='\n//\n// GLSL textureless classic 3D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x)\n{\nreturn x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\nreturn x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\nreturn mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\nreturn 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\nreturn t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\nvec3 Pi0 = floor(P); // Integer part for indexing\nvec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\nPi0 = mod289(Pi0);\nPi1 = mod289(Pi1);\nvec3 Pf0 = fract(P); // Fractional part for interpolation\nvec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\nvec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\nvec4 iy = vec4(Pi0.yy, Pi1.yy);\nvec4 iz0 = Pi0.zzzz;\nvec4 iz1 = Pi1.zzzz;\n\nvec4 ixy = permute(permute(ix) + iy);\nvec4 ixy0 = permute(ixy + iz0);\nvec4 ixy1 = permute(ixy + iz1);\n\nvec4 gx0 = ixy0 * (1.0 / 7.0);\nvec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\ngx0 = fract(gx0);\nvec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\nvec4 sz0 = step(gz0, vec4(0.0));\ngx0 -= sz0 * (step(0.0, gx0) - 0.5);\ngy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\nvec4 gx1 = ixy1 * (1.0 / 7.0);\nvec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\ngx1 = fract(gx1);\nvec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\nvec4 sz1 = step(gz1, vec4(0.0));\ngx1 -= sz1 * (step(0.0, gx1) - 0.5);\ngy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\nvec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\nvec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\nvec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\nvec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\nvec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\nvec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\nvec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\nvec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\nvec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\ng000 *= norm0.x;\ng010 *= norm0.y;\ng100 *= norm0.z;\ng110 *= norm0.w;\nvec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\ng001 *= norm1.x;\ng011 *= norm1.y;\ng101 *= norm1.z;\ng111 *= norm1.w;\n\nfloat n000 = dot(g000, Pf0);\nfloat n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\nfloat n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\nfloat n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\nfloat n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\nfloat n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\nfloat n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\nfloat n111 = dot(g111, Pf1);\n\nvec3 fade_xyz = fade(Pf0);\nvec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\nvec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\nfloat n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\nreturn 2.2 * n_xyz;\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\nvec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\nvec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\nPi0 = mod289(Pi0);\nPi1 = mod289(Pi1);\nvec3 Pf0 = fract(P); // Fractional part for interpolation\nvec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\nvec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\nvec4 iy = vec4(Pi0.yy, Pi1.yy);\nvec4 iz0 = Pi0.zzzz;\nvec4 iz1 = Pi1.zzzz;\n\nvec4 ixy = permute(permute(ix) + iy);\nvec4 ixy0 = permute(ixy + iz0);\nvec4 ixy1 = permute(ixy + iz1);\n\nvec4 gx0 = ixy0 * (1.0 / 7.0);\nvec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\ngx0 = fract(gx0);\nvec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\nvec4 sz0 = step(gz0, vec4(0.0));\ngx0 -= sz0 * (step(0.0, gx0) - 0.5);\ngy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\nvec4 gx1 = ixy1 * (1.0 / 7.0);\nvec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\ngx1 = fract(gx1);\nvec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\nvec4 sz1 = step(gz1, vec4(0.0));\ngx1 -= sz1 * (step(0.0, gx1) - 0.5);\ngy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\nvec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\nvec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\nvec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\nvec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\nvec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\nvec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\nvec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\nvec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\nvec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\ng000 *= norm0.x;\ng010 *= norm0.y;\ng100 *= norm0.z;\ng110 *= norm0.w;\nvec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\ng001 *= norm1.x;\ng011 *= norm1.y;\ng101 *= norm1.z;\ng111 *= norm1.w;\n\nfloat n000 = dot(g000, Pf0);\nfloat n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\nfloat n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\nfloat n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\nfloat n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\nfloat n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\nfloat n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\nfloat n111 = dot(g111, Pf1);\n\nvec3 fade_xyz = fade(Pf0);\nvec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\nvec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\nfloat n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\nreturn 2.2 * n_xyz;\n}\n\nfloat stripes( float x, float f) {\n\tfloat PI = 3.14159265358979323846264;\n\tfloat t = .5 + .5 * sin( f * 2.0 * PI * x);\n\treturn t * t - .5;\n}\n\nfloat turbulence( vec3 p ) {\n\tfloat w = 100.0;\n\tfloat t = -.5;\n\tfor (float f = 1.0 ; f <= 10.0 ; f++ ){\n\t\tfloat power = pow( 2.0, f );\n\t\tt += abs( pnoise( vec3( power * p ), vec3( 10.0, 10.0, 10.0 ) ) / power );\n\t}\n\treturn t;\n}\n\nfloat f( vec3 p ) {\n\treturn pnoise( vec3( p ), vec3( 10.0, 10.0, 10.0 ) );\n\treturn pnoise( 8.0 * vec3( p ), vec3( 10.0, 10.0, 10.0 ) );\n}\n\nvarying vec3 vNormal;\nvarying vec3 vReflect;\nvarying float ao;\nuniform float time;\nuniform float weight;\n\nfloat fround( float value ) {\n\treturn floor( value + 0.5 );\n}\n\nvec3 v3round( vec3 value ) {\n\treturn vec3( fround( value.x ), fround( value.y ), fround( value.z ) );\n}\n\nvoid main() {\n\n\tvec3 evNormal = normal;\n\tvec3 aniNormal = 2.0 * evNormal + time;\n\tfloat f0 = weight * f( aniNormal );\n\tfloat fx = weight * f( aniNormal + vec3( .0001, 0.0, 0.0 ) );\n\tfloat fy = weight * f( aniNormal + vec3( 0.0, .0001, 0.0 ) );\n\tfloat fz = weight * f( aniNormal + vec3( 0.0, 0.0, .0001 ) );\n\tvec3 modifiedNormal = normalize( evNormal - vec3( (fx - f0) / .0001, (fy - f0) / .0001, (fz - f0) / .0001 ) );\n\n\tif( weight > 0.0 ) {\n\t\tao = f0 / weight;\n\t} else {\n\t\tao = 0.0;\n\t}\n\tvNormal = modifiedNormal;\n\tvec3 newPosition = position + f0 * evNormal;\n\tvec3 nWorld = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * modifiedNormal );\n\tvReflect = normalize( reflect( normalize( newPosition.xyz - cameraPosition ), nWorld ) );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );\n\n}\n',noiseFragment="\n\t\t\t\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tvarying vec3 vNormal;\n\t\t\t\tvarying vec3 vReflect;\n\t\t\t\tvarying float ao;\n\t\t\t\tuniform sampler2D tShine;\n\t\t\t\tuniform float time;\n\t\t\t\tuniform vec3 colors;\n\t\t\t\tuniform vec3 black;\n\t\t\t\tfloat PI = 3.14159265358979323846264;\n\t\t\t\t\n\t\t\t\tvoid main() {\n\t\t\t\n\t\t\t\t\tfloat yaw = .5 - atan( vReflect.z, - vReflect.x ) / ( 2.0 * PI );\n\t\t\t\t\tfloat pitch = .5 - asin( vReflect.y ) / PI;\n\t\t\t\t\tvec2 pos = vec2( yaw, pitch );\n\t\t\t\t\tvec3 color = texture2D( tShine, pos ).rgb * colors;\n\t\t\t\t\tfloat diffuse_value1 = .0015 * max(dot(vNormal, vec3( -490.0, 29.8, -85.8 ) ), 0.0);\n\t\t\t\t\tfloat diffuse_value2 = .0005 * max(dot(vNormal, vec3( -460.0, 40.27, 187.4 ) ), 0.0);\n\t\t\t\t\tfloat diffuse_value3 = .0010 * max(dot(vNormal, vec3( 175.5, 30.04, 466.4 ) ), 0.0);\n\t\t\t\t\tfloat diffuse_value4 = .0005 * max(dot(vNormal, vec3( 466.0, 45.3, 172.9 ) ), 0.0);\n\t\t\t\n\t\t\t\t\tgl_FragColor = vec4(color - .15 * ao + .5 * vec3( diffuse_value1 + diffuse_value2 + diffuse_value3 + diffuse_value4 ), 0.36 );\n\t\t\t\n\t\t\t\t}\n\t\t\t\t";function webglAvailable(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}function webAudioAvailable(){try{return window.AudioContext=window.AudioContext||window.webkitAudioContext,context=new AudioContext,!0}catch(e){return!1}}function preloadAudio(e){console.log(e);var t=new Audio;t.addEventListener("canplaythrough",function(){loadedAudio(e)},!1),t.src=e}backgrounds=[$templateDirectory+"/promo/assets/images/test-4.jpg",$templateDirectory+"/promo/assets/images/app-textures-2.2.jpg",$templateDirectory+"/promo/assets/images/app-smudges-2.jpg",$templateDirectory+"/promo/assets/images/app-textures-2.5.jpg",$templateDirectory+"/promo/assets/images/app-textures-2.6.jpg",$templateDirectory+"/promo/assets/images/texture-tour-3.jpg",$templateDirectory+"/promo/assets/images/texture-tour-2.jpg",$templateDirectory+"/promo/assets/images/app-textures-2.10.jpg"],textTextures=[$templateDirectory+"/promo/assets/images/app-poem.png",$templateDirectory+"/promo/assets/images/app.jpg",$templateDirectory+"/promo/assets/images/type-texture.png"],maskTextures=[$templateDirectory+"/promo/assets/images/appn.jpg",$templateDirectory+"/promo/assets/images/app-mask-8.jpg",$templateDirectory+"/promo/assets/images/app-mask-7.jpg",$templateDirectory+"/promo/assets/images/app-mask-6.jpg",$templateDirectory+"/promo/assets/images/app-mask-5.jpg",$templateDirectory+"/promo/assets/images/app-mask-4.jpg",$templateDirectory+"/promo/assets/images/app-mask-3.jpg",$templateDirectory+"/promo/assets/images/app-mask-2.jpg",$templateDirectory+"/promo/assets/images/app-mask-1.jpg",$templateDirectory+"/promo/assets/images/app-flower-mask.png"],snips=[$templateDirectory+"/promo/assets/audio/airo5.aac",$templateDirectory+"/promo/assets/audio/Branden.aac",$templateDirectory+"/promo/assets/audio/Cock_Intro.aac",$templateDirectory+"/promo/assets/audio/euca_chords.aac",$templateDirectory+"/promo/assets/audio/EQ_Break.aac",$templateDirectory+"/promo/assets/audio/Jam9.aac",$templateDirectory+"/promo/assets/audio/Heroist.aac",$templateDirectory+"/promo/assets/audio/Hokkaido.aac",$templateDirectory+"/promo/assets/audio/Laminar.aac",$templateDirectory+"/promo/assets/audio/Laminar2.aac",$templateDirectory+"/promo/assets/audio/LeierBird.aac",$templateDirectory+"/promo/assets/audio/MeansOf.aac",$templateDirectory+"/promo/assets/audio/Somechords.aac"],loadedSnips=[];var scene,switcher,mouse,fire,upperAvgFr,upperMaxFr,lowerAvgFr,lowerMaxFr,upperAvg,upperMax,lowerAvg,lowerMax,overallAvg,deadline,$buff,loopTimer,listener,$track,textureContext,sphere_mesh,ambientLight,volumetericLightShaderUniforms,audioLoader,videoTexture,occlusionComposer,occlusionRenderTarget,occlusionBox,lightSphere,dartaArray,pointLight,$pointLight,idleTimer,$portal,textMesh,mouseTimer,portalMesh,portalrenderer,sound,camera,material,composer,analyser,dataArray,glitchPass,afterimagePass,rgbParams,rgbPass,filmParams,filmPass,renderPass,copyPass,loaded=0;function loadedAudio(e){loaded++,loadedSnips.push(e),snips.length}$loopSequence=shuffle(snips.slice(0)),groups=["group1","group2","group3","group4","group5","group6","group7","group8","group9","group10"],colors=[16765028,16458891,120677,16247827,1936960,14842176,2730493,16639],wW=$(document).width(),wH=$(document).height();var shaderUniforms,shaderAttributes,DEFAULT_LAYER=0,OCCLUSION_LAYER=1,objects=[],p=0,loadedTexts=[];randomPlanes=[],textureIndex=0,$loopDur=0,$loopLength=0,renderScale=.5,ready4=!1,angle=0,audioData=[],shaderTime=0,btime=0,fftSize=512,$drawMe=!1,ready3=!1,playing=!1,ready=!1,ready2=!1,holding=!1,font2=void 0,startX=wW/2,startY=wH/2,backgroundsLoaded=!1,loadedCubes=[],loadedBackgrounds=[],loadedMasks=[],removeableItems=[],loadedMasks=[],mX=0,mY=0,b=0,d=0,r=0,$r=0,$switch=!0,oldMax=0,shaderTime=0,start=Date.now(),wifreframeBallColor=0,switchBG=0,switchColor=0,rate=0,time=0,offset={upper:0,lower:0},showGroup="none",$g=1,$first=!0,timeOutput="00:00:00:00",textCreated=!1,$spin=!1,wH>wW?$portrait=!0:$portrait=!1,wW<1024?($mobile=!0,$(".sticker").addClass("rotated")):$mobile=!1,$done=!1;var particleSystem,windowResize,particles=[],imageWidth=512,imageHeight=512,imageData=null,animationTime=0,animationDelta=.03,$sequence=[];if(webglAvailable()&&webAudioAvailable()){var noise2=new SimplexNoise,simplex=new SimplexNoise,manager=new THREE.LoadingManager,loader=new THREE.TextureLoader(manager);$fallback=!1,setTimeout(function(){init(),loadBackgrounds(backgrounds[0]),loadTextTextures(textTextures[0]),loadMaskTextures(maskTextures[0]),Marquee3k.init({selector:"marquee"});var e=setInterval(function(){loadedBackgrounds.length>=2&&loadedMasks.length>=1&&loadedTexts.length>=1&&(ready4=!0,$spin=!1,$("body").addClass("started"),clearInterval(e))},100)},400),$(".instruction.fallback").remove()}else{function getTimeRemaining(e){var t=Date.parse(e)-Date.parse(new Date),r=Math.floor(t/1e3%60),i=Math.floor(t/1e3/60%60),n=Math.floor(t/36e5%24);return{total:t,days:Math.floor(t/864e5),hours:n,minutes:i,seconds:r}}function updateClock(){var e=getTimeRemaining(deadline);timeOutput=e.days+":"+("0"+e.hours).slice(-2)+":"+("0"+e.minutes).slice(-2)+":"+("0"+e.seconds).slice(-2),$(".output#time").html("LP5_"+timeOutput),e.total<=0&&clearInterval(timeinterval)}$fallback=!0,$("body").addClass("fallback"),$("body").addClass("started"),$(".sticker .fallback").remove(),$(".instruction.primary").remove(),Marquee3k.init({selector:"marquee"}),deadline="2019-03-22T00:00:00+00:00";var timeinterval=setInterval(updateClock,1e3);$(window).resize(function(){onWindowResize()})}function init(){setupScene(),setupTicker()}function randGroup(){ready3=!1,$scene=getUrlVars().s,$scene?showGroup=groups[$scene]:$first?($sequence=shuffle(groups.slice(0)),showGroup=$sequence[0],$sequence.shift()):(showGroup=$sequence[0],$sequence.shift()),0===$sequence.length&&($sequence=shuffle(groups.slice(0))),createGroup(showGroup),$first=!1}function setupScene(){scene=new THREE.Scene,fogColor=new THREE.Color(0),scene.background=fogColor,scene.fog=new THREE.Fog(fogColor,.0025,60),res=wW/wH,(camera=new THREE.PerspectiveCamera(45,res,.1,2e3)).position.x=0,camera.position.y=0,camera.layers.set(DEFAULT_LAYER),camera.position.z=10,camera.lookAt(scene.position),(ambientLight=new THREE.AmbientLight(16777215)).intensity=.6,scene.add(ambientLight),spotLight=new THREE.SpotLight(16777215),spotLight.position.set(0,0,10),spotLight.castShadow=!0,spotLight.intensity=1,spotLight.shadow.mapSize.width=1024,spotLight.shadow.mapSize.height=1024,spotLight.shadow.camera.near=1,spotLight.shadow.camera.far=2e3,spotLight.shadow.camera.fov=45,spotLight.name="mainSpot",scene.add(spotLight),$mainSpot=scene.getObjectByName("mainSpot"),group1=new THREE.Group,group2=new THREE.Group,group3=new THREE.Group,group4=new THREE.Group,group5=new THREE.Group,group6=new THREE.Group,group7=new THREE.Group,group8=new THREE.Group,group9=new THREE.Group,group10=new THREE.Group,scene.add(group1),scene.add(group2),scene.add(group3),scene.add(group4),scene.add(group5),scene.add(group6),scene.add(group7),scene.add(group8),scene.add(group9),scene.add(group10),renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!1}),wW=$(document).width(),wH=$(document).height(),windowResize=new THREEx.WindowResize(renderer,camera,{width:function(){return wW},height:function(){return wH},maxWidth:1280,maxHeight:1280,after:onWindowResize}),renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFShadowMap,renderer.setSize(wW,wH),pixelRatio=1,occlusionRenderTarget=new THREE.WebGLRenderTarget(wW,wH),(occlusionComposer=new THREE.EffectComposer(renderer,occlusionRenderTarget)).addPass(new THREE.RenderPass(scene,camera)),pass=new THREE.ShaderPass(THREE.VolumetericLightShader),pass.needsSwap=!1,occlusionComposer.addPass(pass),(volumetericLightShaderUniforms=pass.uniforms).exposure.value=0,volumetericLightShaderUniforms.decay.value=.9,volumetericLightShaderUniforms.density.value=.8,volumetericLightShaderUniforms.weight.value=.9,volumetericLightShaderUniforms.samples.value=100,(composer=new THREE.EffectComposer(this.renderer)).setSize(wW,wH),composer.addPass(new THREE.RenderPass(scene,camera)),THREE.ColorCorrectionShader={uniforms:{tDiffuse:{value:null},powRGB:{value:new THREE.Vector3(2,2,2)},mulRGB:{value:new THREE.Vector3(1,1,1)},addRGB:{value:new THREE.Vector3(0,0,0)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 powRGB;","uniform vec3 mulRGB;","uniform vec3 addRGB;","varying vec2 vUv;","void main() {","gl_FragColor = texture2D( tDiffuse, vUv );","gl_FragColor.rgb = mulRGB * pow( ( gl_FragColor.rgb + addRGB ), powRGB );","}"].join("\n")},colorify=new THREE.ShaderPass(THREE.ColorifyShader),colorify.uniforms.opacity.value=0,colorify.uniforms.color.value.setRGB(1,1,1),colorify.renderToScreen=!1,composer.addPass(colorify),badTVPass=new THREE.ShaderPass(THREE.BadTVShader),badTVPass.renderToScreen=!1,badTVPass.uniforms.distortion.value=0,badTVPass.uniforms.distortion2.value=0,badTVPass.uniforms.speed.value=0,badTVPass.uniforms.rollSpeed.value=0,composer.addPass(badTVPass),pass=new THREE.ShaderPass(THREE.AdditiveBlendingShader),pass.uniforms.tAdd.value=occlusionRenderTarget.texture,composer.addPass(pass),(glitchPass=new THREE.GlitchPass).renderToScreen=!1,composer.addPass(glitchPass),pass.renderToScreen=!1,staticPass=new THREE.ShaderPass(THREE.StaticShader),staticPass.uniforms.amount.value=.2,staticPass.uniforms.size.value=1,staticPass.renderToScreen=!1,hueSat=new THREE.ShaderPass(THREE.HueSaturationShader),hueSat.enabled=!0,hueSat.renderToScreen=!1,hueSat.uniforms.hue.value=0,hueSat.uniforms.saturation.value=0,composer.addPass(hueSat),(afterimagePass=new THREE.AfterimagePass).renderToScreen=!0,composer.addPass(afterimagePass),mouse=new THREE.Vector2,$(".scroll .scroll-content").append(renderer.domElement),setTimeout(function(){wW=$(document).width(),wH=$(document).height(),windowResize.destroy(),(windowResize=new THREEx.WindowResize(renderer,camera,{width:function(){return wW},height:function(){return wH},maxWidth:1280,maxHeight:1280,after:onWindowResize})).trigger()},500)}function loadBackgrounds(e){new THREE.TextureLoader(manager).load(e,function(t){loadedBackgrounds.push(t);var r=[e,e,e,e,e,e],i=(new THREE.CubeTextureLoader).load(r);loadedCubes.push(i),loadedBackgrounds.length==backgrounds.length||(b++,b<=backgrounds.length&&loadBackgrounds(backgrounds[b]))})}function loadMaskTextures(e){new THREE.TextureLoader(manager).load(e,function(e){loadedMasks.push(e),loadedMasks.length==maskTextures.length||(d++,d<=maskTextures.length&&loadMaskTextures(maskTextures[d]))})}function loadTextTextures(e){new THREE.TextureLoader(manager).load(e,function(e){loadedTexts.push(e),loadedTexts.length==textTextures.length?(backgroundsLoaded=!0,windowResize.trigger()):++p<=textTextures.length?loadTextTextures(textTextures[p]):(backgroundsLoaded=!0,windowResize.trigger())})}function setupTicker(){ticker=new THREE.Group;deadline="2019-03-22T00:00:00+00:00";(new THREE.FontLoader).load($templateDirectory+"/promo/assets/fonts/Terminal Grotesque_Regular.json",function(e){font2=e,updateClock();setInterval(updateClock,1e3);ready=!0,draw()});scene.add(ticker)}function getTimeRemaining(e){$current=new Date,$start=new Date("January 22, 2019 04:20:00 GMT"),$current.getTime()>$start.getTime()&&$(".announcement").removeClass("hidden");var t=Date.parse(e)-Date.parse(new Date),r=Math.floor(t/1e3%60),i=Math.floor(t/1e3/60%60),n=Math.floor(t/36e5%24);return{total:t,days:Math.floor(t/864e5),hours:n,minutes:i,seconds:r}}function updateClock(){var e=getTimeRemaining(deadline);ready4?countDown="LP_5."+e.days+":"+("0"+e.hours).slice(-2)+":"+("0"+e.minutes).slice(-2)+":"+("0"+e.seconds).slice(-2):(countDown="\x3c!--loading--\x3e",$spin=!0),timeOutput=e.days+":"+("0"+e.hours).slice(-2)+":"+("0"+e.minutes).slice(-2)+":"+("0"+e.seconds).slice(-2),document.title=countDown,holding||refreshText(),e.total<=0&&clearInterval(timeinterval)}function refreshText(){textCreated&&(ticker.getObjectByName("textMesh").material.dispose(),ticker.getObjectByName("textMesh").geometry.dispose(),ticker.remove(ticker.getObjectByName("textMesh"))),createText()}function createText(){textCreated=!0,$portrait?tSize=wH/700:(tSize=wW/700,$mobile&&(tSize=wW/400));var e=new THREE.MeshStandardMaterial({color:16777215}),t=new THREE.TextGeometry(countDown,{font:font2,size:tSize,height:.1,curveSegments:3});t.center(),(textMesh=new THREE.Mesh(t,e)).scale.set(.25,.25,.25),textMesh.name="textMesh",ticker.add(textMesh)}function handleGroup(){if(ready2=!1,"none"!=showGroup){if("group1"===showGroup?group=group1:"group2"===showGroup?group=group2:"group3"===showGroup?group=group3:"group4"===showGroup?group=group4:"group5"===showGroup?group=group5:"group6"===showGroup?group=group6:"group7"===showGroup?group=group7:"group8"===showGroup?group=group8:"group9"===showGroup?group=group9:"group10"===showGroup&&(group=group10),removeableItems.forEach(function(e,t){if(1==e.material.length)e.material.dispose();else for(var r=0;r<e.material.length;r++)e.material[r].dispose();e.geometry.dispose(),e=void 0}),group.children.length>0){for(var e=group.children.length-1;e>=0;e--)group.remove(group.children[e]);randGroup(),playing=!1}}else playing=!1,listener=new THREE.AudioListener,camera.add(listener),sound=new THREE.Audio(listener),audioLoader=new THREE.AudioLoader,analyser=new THREE.AudioAnalyser(sound,fftSize),getAudioData(dataArray=analyser.data),randGroup();($track=getUrlVars().t)?$track<=snips.length?($r=parseInt($track)-1,$loop=snips[$r]):$loop=snips[0]:($loop=$loopSequence[0],$loopSequence.shift(),1===$loopSequence.length&&($loopSequence=shuffle(snips.slice(0)))),audioLoader.load($loop,function(e){sound.setBuffer(e),sound.setLoop(!0),sound.offset=0,$buff=e,$loopDur=$buff.duration,$loopLength=$buff.length,ready2=!0,playing=!1,$r>snips.length-1&&($r=0)})}function loadLoop(){playing,handleGroup()}function createGroup(e){if($drawMe=!1,"group1"===e){var t=colors[Math.floor(Math.random()*colors.length)];x=new THREE.ShaderMaterial({wireframe:!0,transparent:!0,opacity:0,side:THREE.DoubleSide,uniforms:{black:{type:"c",value:new THREE.Color(0)},colors:{type:"c",value:new THREE.Color(16777215)},time:{type:"f",value:0},weight:{type:"f",value:.2}},vertexShader:noiseVertex,fragmentShader:noiseFragment}),mesh=new THREE.Mesh(new THREE.IcosahedronBufferGeometry(8,6),x),group1.add(mesh),group1.position.z=100,removeableItems.push(mesh),mesh.name="wireframeBall",$wireframeBall=group1.getObjectByName("wireframeBall"),addPortal()}if("group2"===e){ratio=wW/wH;var r=camera.position.z-(N=0),i=wW/wH,n=camera.fov*Math.PI/180,o=(U=2*Math.tan(n/2)*r)*i;sizes=1.2*o,group2.position.z=100;t=colors[Math.floor(Math.random()*colors.length)];var a=colors[Math.floor(Math.random()*colors.length)],s=colors[Math.floor(Math.random()*colors.length)],l=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)],c=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)],u=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)];$portrait?sizes=1.2*U:sizes=1.2*o;var h=new THREE.PlaneGeometry(sizes,sizes,112,112),p=new THREE.MeshBasicMaterial({color:16777215,map:l,wireframe:!1,transparent:!0,opacity:1});l.magFilter=THREE.NearestFilter,l.wrapT=THREE.RepeatWrapping,l.wrapS=THREE.RepeatWrapping,l.repeat.set(1,1),(A=new THREE.Mesh(h,p)).name="plane1",group2.add(A),$plane1=group2.getObjectByName("plane1");var d=new THREE.PlaneGeometry(sizes,sizes,112,112),f=new THREE.MeshBasicMaterial({color:a,wireframe:!0,transparent:!0,opacity:1});c.magFilter=THREE.NearestFilter,c.wrapT=THREE.RepeatWrapping,c.wrapS=THREE.RepeatWrapping,c.repeat.set(1,1),(H=new THREE.Mesh(d,f)).name="plane2",group2.add(H),$plane2=group2.getObjectByName("plane2");var m=new THREE.PlaneGeometry(sizes,sizes,112,112),v=new THREE.MeshBasicMaterial({color:t,map:u,wireframe:!1,transparent:!0,opacity:1}),g=new THREE.Mesh(m,v);u.magFilter=THREE.NearestFilter,u.wrapT=THREE.RepeatWrapping,u.wrapS=THREE.RepeatWrapping,u.repeat.set(1,1),g.name="plane3",group2.add(g),$plane3=group2.getObjectByName("plane3"),removeableItems.push(A),removeableItems.push(H),removeableItems.push(g)}if("group3"===e){group3.position.z=100,ratio=wW/wH,$portrait?sizes=12*ratio:sizes=8*ratio;var y=new THREE.SphereGeometry(sizes,32,32);(B=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)]).magFilter=THREE.NearestFilter,B.wrapT=THREE.RepeatWrapping,B.wrapS=THREE.RepeatWrapping,B.repeat.set(1,1);var x=new THREE.MeshStandardMaterial({color:16777215,roughness:1,metalness:1,map:B,side:THREE.BackSide,transparent:!0,opacity:1}),_=new THREE.Mesh(y,x);_.receiveShadow=!0,_.name="room",group3.add(_),removeableItems.push(_),$room=group3.getObjectByName("room"),$ra=Math.floor(Math.random()*loadedMasks.length),0===$ra&&($ra=1);var w=loadedMasks[$ra];t=colors[Math.floor(Math.random()*colors.length)];(pointLight=createLight(t,w)).name="innerLight",pointLight.position.z=3,group3.add(pointLight),$pointLight=group3.getObjectByName("innerLight")}if("group4"===e){b=new THREE.SphereBufferGeometry(3,32,32),x=new THREE.MeshBasicMaterial({color:colors[0]}),$am=Math.floor(Math.random()*loadedMasks.length),0===$am&&($am=1);w=loadedMasks[$am];group4.position.z=100,(lightSphere=new THREE.Mesh(b,x)).layers.set(OCCLUSION_LAYER),lightSphere.name="lightSphere",removeableItems.push(lightSphere),group4.add(lightSphere),$lightSphere=group4.getObjectByName("lightSphere");var b=new THREE.SphereBufferGeometry(3,200,200);x=new THREE.MeshPhongMaterial({color:16777215,specular:colors[0],shininess:1,polygonOffset:!0,polygonOffsetFactor:1,wireframe:!0,transparent:!0,opacity:0});mesh=new THREE.Mesh(b,x),removeableItems.push(mesh),mesh.name="god",mesh.castShadow=!0,mesh.receiveShadow=!0,group4.add(mesh),$god=group4.getObjectByName("god");var M=w;M.magFilter=THREE.NearestFilter,M.wrapT=THREE.RepeatWrapping,M.wrapS=THREE.RepeatWrapping,M.repeat.set(1,1);var T=[new THREE.MeshLambertMaterial({color:"pink",side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({transparent:!0,opacity:0})],E=(T=new THREE.MeshPhongMaterial({alphaMap:M,shininess:20,color:16777215,specular:16777215,alphaTest:.5,transparent:!0,opacity:1}),new THREE.SphereBufferGeometry(3,32,32));(sphere_mesh=new THREE.Mesh(E,T)).position.set(0,0,0),removeableItems.push(sphere_mesh),sphere_mesh.name="spheremesh",mesh.add(sphere_mesh),sphere_mesh.layers.set(OCCLUSION_LAYER),(B=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)]).wrapS=THREE.RepeatWrapping,B.blending=THREE.SubtractiveBlending,B.wrapT=THREE.RepeatWrapping,B.repeat.set(20,10);var S=colors[Math.floor(Math.random()*colors.length)];E=new THREE.SphereBufferGeometry(2.99,32,32);T=new THREE.MeshStandardMaterial({roughness:.8,metalness:.5,map:B,color:S}),(sphere_mesh=new THREE.Mesh(E,T)).position.set(0,0,0),sphere_mesh.name="orblayer",group4.add(sphere_mesh),$orbLayer=group4.getObjectByName("orblayer"),removeableItems.push(sphere_mesh)}if("group5"===e){ratio=wW/wH,sizes=10*ratio,$portrait?sizes=wH:sizes=wW,group5.position.z=100,canvasTexture=document.createElement("canvas"),canvasTexture.id="drawingCanvas",canvasTexture.width=sizes,canvasTexture.height=sizes,(textureContext=canvasTexture.getContext("2d")).fillStyle="black",textureContext.fillRect(0,0,sizes,sizes),$drawMe=!0;l=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)];$rand2=Math.floor(Math.random()*loadedBackgrounds.length);c=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)];var R=loadedMasks[Math.floor(Math.random()*loadedMasks.length)];r=camera.position.z-(N=1.1),i=wW/wH,n=camera.fov*Math.PI/180,o=(U=2*Math.tan(n/2)*r)*i;$portrait?size=U:size=o;var P=loadedTexts[Math.floor(Math.random()*loadedTexts.length)];P.wrapS=THREE.RepeatWrapping,P.wrapT=THREE.RepeatWrapping,P.repeat.set(1,1);S=colors[Math.floor(Math.random()*colors.length)],b=new THREE.PlaneBufferGeometry(size,size,12,12),x=new THREE.MeshBasicMaterial({color:S,map:P,wireframe:!1,transparent:!0,opacity:1});var A,C=new THREE.CanvasTexture(canvasTexture);C.minFilter=THREE.NearestFilter,x.alphaTest=.25,x.alphaMap=C,C.needsUpdate=!0,(A=new THREE.Mesh(b,x)).name="plane1",A.position.z=N,A.castShadow=!0,A.receiveShadow=!1;var L=new THREE.MeshDepthMaterial({depthPacking:THREE.RGBADepthPacking,map:C,alphaTest:.8});A.customDepthMaterial=L,group5.add(A),$plane1=group5.getObjectByName("plane1");r=camera.position.z-(N=-5),i=wW/wH,n=camera.fov*Math.PI/180,o=(U=2*Math.tan(n/2)*r)*i;c.wrapS=THREE.RepeatWrapping,c.wrapT=THREE.RepeatWrapping,c.repeat.set(1,1),$portrait?size=U:size=o;b=new THREE.PlaneBufferGeometry(size,size,12,12),S=colors[Math.floor(Math.random()*colors.length)];var O=new THREE.ShaderMaterial({uniforms:{col1:{type:"c",value:new THREE.Color(S)},tex0:{type:"t",value:R},tex1:{type:"t",value:l},amt:{tyle:"f",value:.08},delta:{type:"f",value:0},scale:{tyle:"f",value:1.5}},vertexShader:["precision highp float;","precision highp int;","varying vec2 vUv;","uniform float delta;","uniform float scale;","void main() {","vUv = uv;","vec3 p = position;","vec4 mvPosition = modelViewMatrix * vec4(scale * p, 1.0 );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["precision mediump float;","varying vec2 vUv;","uniform vec3 col1;","varying vec4 color;","uniform sampler2D tex0;","uniform sampler2D tex1;","uniform float amt;","void main() {","  vec2 uv = vUv;","  vec4 cam = texture2D(tex0, uv + amt);","  float avg = dot(cam.rgb, vec3(0.33333));","  avg = avg * 2.0 - 1.0;","  float disp = avg * amt;","  vec4 pup = texture2D(tex1, uv + disp);","  vec4 color = pup;","\tfloat gray = dot(0.6 - color.rgb, vec3(0.299, 0.587, 0.114));","  gl_FragColor = pup;","}"].join("\n")});(H=new THREE.Mesh(b,O)).name="plane2",H.position.z=N,H.castShadow=!1,H.receiveShadow=!0,group5.add(H),$plane2=group5.getObjectByName("plane2"),removeableItems.push(A),removeableItems.push(H)}if("group6"===e){group6.position.z=100;R=loadedBackgrounds[0],c=loadedBackgrounds[0];R.wrapS=THREE.RepeatWrapping,R.wrapT=THREE.RepeatWrapping,R.repeat.set(1,1),c.wrapS=THREE.RepeatWrapping,c.wrapT=THREE.RepeatWrapping,c.repeat.set(1,1);r=camera.position.z-(N=0),i=wW/wH,n=camera.fov*Math.PI/180,o=(U=2*Math.tan(n/2)*r)*i;var D=new THREE.PlaneBufferGeometry(o,U);O=new THREE.ShaderMaterial({uniforms:{time:{value:0},mx:{value:0},my:{value:0},texture1:{value:c},texture2:{value:R}},vertexShader:["precision highp float;","precision highp int;","varying vec2 vUv;","void main() {","  vUv = uv;","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);","}"].join("\n"),fragmentShader:["precision highp float;","uniform float time;","uniform float mx;","uniform float my;","uniform sampler2D texture1;","uniform sampler2D texture2;","varying vec2 vUv;","void main() {","  vec3 c = vec3(texture2D(texture1, vUv));","  //float v = time + (vUv.x*0.5 + vUv.y*0.5);","  float v = time;","  vec2 Uv2 = vec2(c.r + c.g + v+ mx, c.r + c.b + v + mx);","  vec3 outcolor = vec3(texture2D(texture2, Uv2));","  //vec3 outcolor = vec3( mod(c.r+v,1.0), mod(c.g+v,1.0), mod(c.b+v,1.0));","  gl_FragColor = vec4( outcolor, 1.0 );","}"].join("\n")});(F=new THREE.Mesh(D,O)).name="feedback",group6.add(F),removeableItems.push(F),$feedback=group6.getObjectByName("feedback")}if("group7"===e){(B=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)]).wrapT=THREE.RepeatWrapping,B.wrapS=THREE.RepeatWrapping,B.repeat.set(1,1);r=camera.position.z-(N=0),i=wW/wH,n=camera.fov*Math.PI/180,o=(U=2*Math.tan(n/2)*r)*i;$portrait?(size=U,res=wH):(size=o,res=wW);var H;b=new THREE.PlaneBufferGeometry(size,size,12,12),O=new THREE.ShaderMaterial({uniforms:{mouseX:{type:"f",value:[.5]},mouseY:{type:"f",value:[.5]},amount:{type:"f",value:[.3]},count:{type:"f",value:[10]},resolution:{type:"v2",value:new THREE.Vector2(res,res)},tex0:{type:"t",value:B}},vertexShader:["precision highp float;","precision highp int;","varying vec2 vUv;","void main() {","  vUv = uv;","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);","}"].join("\n"),fragmentShader:["precision mediump float;","varying vec2 vUv;","uniform sampler2D tex0;","uniform vec2 resolution;","uniform float amount;","uniform float count;","uniform float mouseX;","uniform float mouseY;","void main() {","\tfloat amt = amount; // the amount of displacement, higher is more","\tfloat squares = count; // the number of squares to render vertically","  float aspect = resolution.x / resolution.y;","  float offset = amt * mouseY;","  vec2 uv = vUv;","  uv.y =  uv.y + mouseY;","  vec2 tc = uv;","  uv -= 0.5;","  uv.x *= aspect ;","  vec2 tile = fract(uv * squares + 0.5) * amt;","  vec4 tex = texture2D(tex0, tc + tile - offset - mouseX);","  gl_FragColor = tex;","}"].join("\n")});(H=new THREE.Mesh(b,O)).name="plane2",H.position.z=N,H.castShadow=!1,H.receiveShadow=!0,group7.add(H),removeableItems.push(H),group7.position.z=100,$plane2=group7.getObjectByName("plane2")}if("group8"===e&&(group8.position.z=900,textureIndex=Math.floor(Math.random()*backgrounds.length),1===textureIndex&&(textureIndex=0),imageSource=backgrounds[textureIndex],createPixelData(imageSource)),"group9"===e){group9.position.z=400;var z=loadedCubes[Math.floor(Math.random()*loadedCubes.length)],I=(S=colors[Math.floor(Math.random()*colors.length)],THREE.ShaderLib.cube);I.uniforms.tCube.value=z;new THREE.ShaderMaterial({fragmentShader:I.fragmentShader,vertexShader:I.vertexShader,uniforms:I.uniforms,depthWrite:!1,side:THREE.BackSide});var k={color:{type:"c",value:new THREE.Color(S)},envMap:{type:"t",value:z},fresnelBias:{type:"f",value:.5,min:0,max:1},fresnelScale:{type:"f",value:.5,min:0,max:10},fresnelPower:{type:"f",value:.5,min:0,max:10}};x=new THREE.ShaderMaterial({uniforms:k,vertexShader:["uniform float fresnelBias;","uniform float fresnelScale;","uniform float fresnelPower;","varying float vReflectionFactor;","varying vec3 vI;","varying vec3 vWorldNormal;","void main() {","  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","  vWorldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );","  vI = worldPosition.xyz - cameraPosition;","  vReflectionFactor = fresnelBias + fresnelScale * pow( 1.0 + dot( normalize( vI ), vWorldNormal ), fresnelPower );","  gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform samplerCube envMap;","varying float vReflectionFactor;","varying vec3 vI;","varying vec3 vWorldNormal;","void main() {","  vec3 reflection = reflect( vI, vWorldNormal );","  vec4 envColor = textureCube( envMap, vec3( -reflection.x, reflection.yz ) );","  gl_FragColor = vec4(mix(color, envColor.xyz, vec3(clamp( vReflectionFactor, 0.0, 1.0 ))), 1.0);","}"].join("\n")});b=new THREE.BoxGeometry(4,4,4);mesh=new THREE.Mesh(b,x),group9.add(mesh),removeableItems.push(mesh),mesh.name="mirror",$mirror=group9.getObjectByName("mirror"),mesh2=new THREE.Mesh(b,x),group9.add(mesh2),removeableItems.push(mesh2),mesh2.name="mirror2",$mirror2=group9.getObjectByName("mirror2"),mesh3=new THREE.Mesh(b,x),group9.add(mesh3),removeableItems.push(mesh3),mesh3.name="mirror3",$mirror3=group9.getObjectByName("mirror3"),mesh4=new THREE.Mesh(b,x),group9.add(mesh4),removeableItems.push(mesh4),mesh4.name="mirror4",$mirror4=group9.getObjectByName("mirror4")}if("group10"===e){var N,U;r=camera.position.z-(N=0),i=wW/wH,n=camera.fov*Math.PI/180,o=(U=2*Math.tan(n/2)*r)*i;$portrait?(size=U,tWidth=wH):(size=o,tWidth=wW);var B,F=new THREE.PlaneBufferGeometry(size,size);(B=loadedMasks[Math.floor(Math.random()*loadedMasks.length)]).wrapS=THREE.RepeatWrapping,B.wrapT=THREE.RepeatWrapping,B.repeat.set(1,1);t=colors[Math.floor(Math.random()*colors.length)],a=colors[Math.floor(Math.random()*colors.length)],s=colors[Math.floor(Math.random()*colors.length)];(fire=new THREE.Fire(F,{textureWidth:tWidth,textureHeight:tWidth,debug:!1})).color1.set(0),fire.color2.set(a),fire.color3.set(s),fire.colorBias=.5,fire.burnRate=10,fire.diffuse=1,fire.viscosity=0,fire.expansion=-1,fire.swirl=0,fire.drag=0,fire.airSpeed=0,fire.oneOverWidth=0,fire.windVector.y=0,fire.speed=40,fire.setSourceMap(B),group10.position.z=100,group10.add(fire)}ready3=!0}function createPixelData(e){var t=document.createElement("img"),r=document.createElement("canvas"),i=r.getContext("2d");t.crossOrigin="Anonymous",t.onload=function(){t.width=r.width=imageWidth,t.height=r.height=imageHeight,i.drawImage(t,0,0,imageWidth,imageHeight),imageData=i.getImageData(0,0,imageWidth,imageHeight).data,createPaticles(e)},t.src=e}function createPaticles(){var e,t,r=[],i=[.2126,.7152,.0722],n=0,o=new THREE.Geometry;e=-.5*imageWidth,t=.5*imageHeight;var a=r[Math.floor(Math.random()*r.length)];new THREE.TextureLoader;shaderAttributes={vertexColor:{type:"c",value:[]}},shaderUniforms={vertexColor:{type:"c",value:new THREE.Color(a)},amplitude:{type:"f",value:.5},tex0:{type:"t",value:loadedBackgrounds[textureIndex]}};for(var s=new THREE.ShaderMaterial({uniforms:shaderUniforms,vertexShader:["uniform float amplitude;","uniform vec3 vertexColor;","varying vec4 varColor;","void main(){","varColor = vec4(vertexColor, 1.0);","vec4 pos = vec4(position, 1.0);","pos.z *= amplitude;","vec4 mvPosition = modelViewMatrix * pos;","gl_PointSize = 1.0;","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["varying vec4 varColor;","void main(){","gl_FragColor = varColor;","}"].join("\n")}),l=0;l<imageHeight;l++){for(var c=0;c<imageWidth;c++){var u=new THREE.Color;u.setRGB(imageData[n]/255,imageData[n+1]/255,imageData[n+2]/255);var h=u.r*i[0]+u.g*i[1]+u.b*i[2],p=new THREE.Vector3;p.x=e,p.y=t,p.z=30*h-15,o.vertices.push(p),n+=4,e++}e=-.5*imageWidth,t--}(particleSystem=new THREE.Points(o,s)).material.uniforms.tex0.value.needsUpdate=!0,group8.add(particleSystem),removeableItems.push(particleSystem)}function getHeightData(e,t){void 0==t&&(t=1);var r=document.createElement("canvas");r.width=wW,r.height=wW;var i=r.getContext("2d"),n=wW*wW,o=new Float32Array(n);i.drawImage(e,0,0);for(var a=0;a<n;a++)o[a]=0;var s=i.getImageData(0,0,wW,wW).data,l=0;for(a=0;a<s.length;a+=4){var c=s[a]+s[a+1]+s[a+2];o[l++]=c/(12*t)}return o}function generateTexture(){var e=document.createElement("canvas");e.width=2048,e.height=2048;for(var t=e.getContext("2d"),r=0;r<2048/3;r++){t.beginPath(),t.strokeStyle=r%2?"white":"black",t.lineWidth=3,t.moveTo(3*r+1.5,0),t.lineTo(3*r+1.5,2048),t.stroke()}return e}function generateTexture3(){var e=document.createElement("canvas");e.width=2048,e.height=2048;for(var t=e.getContext("2d"),r=0;r<1024;r++){t.beginPath(),t.strokeStyle=r%2?"white":"black",t.lineWidth=2,t.moveTo(0,2*r+1),t.lineTo(2048,2*r+1),t.stroke()}return e}function generateTexture2(){var e=document.createElement("canvas");e.width=2048,e.height=2048;var t=e.getContext("2d");for(i=2048;i>10;i-=10)t.beginPath(),t.arc(1024,1024,i,0,2*Math.PI,!1),t.fillStyle="white",t.fill(),t.lineWidth=8,t.strokeStyle="black",t.stroke();return e}function createLight(e,t){var r=new THREE.PointLight(e,5,100);r.castShadow=!0,r.shadow.camera.near=.1,r.shadow.camera.far=100,r.shadow.mapSize.height=1024,r.shadow.mapSize.width=1024,r.shadow.bias=-0;var i=t;i.repeat.x=-1,i.wrapT=THREE.RepeatWrapping,i.wrapS=THREE.RepeatWrapping;var n=new THREE.SphereBufferGeometry(.8,32,32),o=new THREE.MeshPhongMaterial({side:THREE.DoubleSide,alphaMap:i,shininess:1,color:0,specular:16777215,alphaTest:.5,transparent:!0,opacity:0}),a=new THREE.Mesh(n,o);removeableItems.push(a),a.castShadow=!0,a.receiveShadow=!1,a.name="amap 2",r.add(a);var s=new THREE.MeshDistanceMaterial({alphaMap:o.alphaMap,alphaTest:o.alphaTest});return a.customDistanceMaterial=s,r}function addPortal(){var e=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)];e.wrapT=THREE.RepeatWrapping,e.wrapS=THREE.RepeatWrapping,e.repeat.set(1,1);var t=new THREE.SphereBufferGeometry(1,128,128),r=new THREE.MeshStandardMaterial({color:16777215,map:e,refractionRatio:.1,transparent:!0,roughness:1,alphaTest:.5,opacity:0});r.side=THREE.DoubleSide,r.wrapS=r.wrapT=THREE.MirroredRepeatWrapping;var i=new THREE.Mesh(t,r);removeableItems.push(i),i.position.z=-2,i.geometry.needsUpdate=!0,i.material.needsUpdate=!0,i.name="portalMesh",group1.add(i),$portal=group1.getObjectByName("portalMesh")}function makeWireframe(e,t,r,i){e.geometry.vertices.forEach(function(n,o){var a=e.geometry.parameters.radius,s=i/40,l=window.performance.now();n.normalize();var c=a+t+noise2.noise3D(n.x+1e-4*l*7,n.y+1e-4*l*8,n.z+1e-4*l*9)*s*r;n.multiplyScalar(c)}),e.geometry.verticesNeedUpdate=!0,e.geometry.normalsNeedUpdate=!0,e.geometry.computeVertexNormals(),e.geometry.computeFaceNormals()}function makeWaveform(e){for(var t=0;t<this.analyser.frequencyBinCount;t++){var r=this.times[t],i=HEIGHT*(r/256),n=HEIGHT-i-1,o=WIDTH/this.analyser.frequencyBinCount;drawContext.fillStyle="white",drawContext.fillRect(t*o,n,1,2)}}function draw(){if(requestAnimationFrame(draw),shaderTime+=.01,holding||($done=!1,colorify.uniforms.opacity.value=0,TweenMax.to(badTVPass.uniforms.distortion,1,{value:0}),TweenMax.to(badTVPass.uniforms.speed,1,{value:0}),TweenMax.to(badTVPass.uniforms.time,1,{value:0}),TweenMax.to(badTVPass.uniforms.distortion2,1,{value:0}),badTVPass.uniforms.speed.value=0,badTVPass.uniforms.rollSpeed.value=0,TweenMax.to(ticker.position,0,{delay:1,z:0}),TweenMax.to($mainSpot,.25,{delay:.5,intensity:1}),afterimagePass.uniforms.damp.value=.92,$switch=!0,oldMax=0,switcher&&window.clearTimeout(switcher),volumetericLightShaderUniforms.exposure.value=0),$spin?ticker.rotation.x+=.15:(ticker.rotation.x=0,ticker.rotation.y=0),ready&&ready3&&ready2){if(holding&&($spin=!1,playing=!0,analyser.getFrequencyData(dataArray),makeWaveform(dataArray),lowerHalfArray=dataArray.slice(0,dataArray.length/2-1),upperHalfArray=dataArray.slice(dataArray.length/2-1,dataArray.length-1),overallAvg=avg(dataArray),lowerAvg=avg(lowerHalfArray),upperMax=max(upperHalfArray),upperMaxFr=upperMax/upperHalfArray.length,TweenMax.to(hueSat.uniforms.hue,5,{value:overallAvg/10}),TweenMax.to(ticker.position,0,{z:100}),sound.isPlaying||sound.play(),$(".output#time").html(timeOutput),$(".output#data").html(parseFloat(overallAvg).toFixed(4)+"<br />"+parseFloat(lowerAvg).toFixed(4)),$(".output#coords").html("["+mX+","+mY+"]"),$(".output#loop").html(parseFloat($loopLength)+"<br />"+parseFloat($loopDur).toFixed(2))),"group1"===showGroup&&(holding?(group1.position.z=6,$portal.material.opacity=1,$wireframeBall.material.uniforms.time.value=6e-4*(Date.now()-start),TweenMax.to($wireframeBall.material.uniforms.weight,1,{value:Math.min(8,overallAvg/1.5)}),$wireframeBall.rotation.y=(mX-wW/2)/wW,$wireframeBall.rotation.x=(mY-wH/2)/wH,$portal.rotation.y+=(mX-wW/2)/wW*.05,$portal.rotation.x+=(mY-wH/2)/wH*.05):group1.position.z=100),"group2"===showGroup)if(holding){if(group2.position.z=0,$plane2.rotation.z+=(mX-wW/2)/wW*1.5*-.005,$plane3.rotation.z-=(mX-wW/2)/wW*1.5*.005,TweenMax.to($plane3.position,.6,{z:overallAvg/500}),TweenMax.to($plane2.position,.5,{z:overallAvg/400}),TweenMax.to($plane1.position,1,{z:overallAvg/300}),TweenMax.to(offset,.6,{upper:overallAvg/10,lower:lowerAvg/10}),rate+=overallAvg/5e3,upperMaxFr!==oldMax&&$switch){switchBG=0,$switch=!1;var e=colors[Math.floor(Math.random()*colors.length)];$plane2.material.color=new THREE.Color(e);e=colors[Math.floor(Math.random()*colors.length)];$plane3.material.color=new THREE.Color(e),oldMax=upperMaxFr,switcher&&window.clearTimeout(switcher),switcher=window.setTimeout(function(){$switch=!0},500)}adjustMeshPlaneVertices(Math.max(1,offset.upper),Math.max(1,offset.lower),rate)}else group2.position.z=100;if("group3"===showGroup&&(holding?($mainSpot.intensity=.05,group3.position.z=0,TweenMax.to(group3.position,.2,{z:0}),$pointLight.traverse(function(e){e.name&&e.name.includes("amap")&&(e.material.alphaMap.offset.y+=3e-4,e.material.opacity=1)}),$pointLight.rotation.y-=(mX-wW/2)/wW*1.5*-.025,$pointLight.rotation.x+=(mY-wH/2)/wH*1.5*.015,TweenMax.to($pointLight,.8,{intensity:overallAvg/9})):(group3.position.z=100,$pointLight.intensity=0)),"group4"===showGroup)if(holding){if(group4.position.z=-10,volumetericLightShaderUniforms.exposure.value=.9,TweenMax.to(volumetericLightShaderUniforms.samples,.8,{value:Math.max(0,120-overallAvg)}),upperMaxFr!==oldMax&&$switch){switchBG=0;e=colors[Math.floor(Math.random()*colors.length)];$god.material.specular=new THREE.Color(e),group4.traverse(function(t){t.name&&t.name.includes("lightSphere")&&(t.material.color=new THREE.Color(e),t.material.needsUpdate=!0)}),(r=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)]).wrapS=THREE.RepeatWrapping,r.wrapT=THREE.RepeatWrapping,r.blending=THREE.SubtractiveBlending,r.repeat.set(20,10);e=colors[Math.floor(Math.random()*colors.length)];$orbLayer.material.color=new THREE.Color(e),$orbLayer.material.map=r,$orbLayer.material.needsUpdate=!0,$switch=!1,oldMax=upperMaxFr,switcher&&window.clearTimeout(switcher),switcher=window.setTimeout(function(){$switch=!0},500)}$orbLayer.material.map.offset.x-=(mX-wW/2)/wW*1.5*.09,$orbLayer.material.map.offset.y+=(mY-wH/2)/wH*1.5*.05,$god.traverse(function(e){e.name&&e.name.includes("spheremesh")&&(e.material.alphaMap.offset.x-=(mX-wW/2)/wW*1.5*.005,e.material.alphaMap.offset.y+=(mY-wH/2)/wH*1.5*.005)})}else group4.position.z=100,$orbLayer.material.map.offset.x=0,$orbLayer.material.map.offset.y=0;if("group5"===showGroup)if(holding){if(TweenMax.to($plane2.material.uniforms.amt,2,{value:overallAvg/800}),group5.position.z=0,upperMaxFr!==oldMax&&$switch){switchBG=0;var t=loadedMasks[Math.floor(Math.random()*loadedMasks.length)];t.wrapT=THREE.RepeatWrapping,t.wrapS=THREE.RepeatWrapping,t.repeat.set(1,1),$plane2.material.uniforms.tex0.value=t,$switch=!1;e=colors[Math.floor(Math.random()*colors.length)];$plane1.material.color=new THREE.Color(e),oldMax=upperMaxFr,switcher&&window.clearTimeout(switcher),switcher=window.setTimeout(function(){$switch=!0},500)}}else group5.position.z=100;if("group6"===showGroup)if(holding){if(TweenMax.to(badTVPass.uniforms.distortion,2,{value:overallAvg/60}),TweenMax.to(badTVPass.uniforms.speed,3,{value:overallAvg/100*-.25}),TweenMax.to(badTVPass.uniforms.distortion2,2,{value:overallAvg/150}),btime+=overallAvg/5e3,group6.position.z=0,badTVPass.uniforms.time.value=btime,$feedback.material.uniforms.mx.value=mX/wW*2-.5,$feedback.material.uniforms.time.value=btime/2,TweenMax.to($feedback.material.uniforms.my,2,{value:overallAvg/300}),upperMaxFr!==oldMax&&$switch)switchBG=0,(r=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)]).wrapT=THREE.RepeatWrapping,r.wrapS=THREE.RepeatWrapping,r.repeat.set(1,1),$feedback.material.uniforms.texture1.value=r,$switch=!1,oldMax=upperMaxFr,switcher&&window.clearTimeout(switcher),switcher=window.setTimeout(function(){$switch=!0},1e3)}else btime=0,group6.position.z=100;if("group7"===showGroup)if(holding){if(group7.position.z=0,$plane2.material.uniforms.mouseX.value=(mX-wW/2)/wW*.5,$plane2.material.uniforms.mouseY.value=(mY-wH/2)/wH*.5,TweenMax.to($plane2.material.uniforms.amount,2,{value:.4-overallAvg/100}),TweenMax.to($plane2.material.uniforms.count,4,{value:overallAvg/2}),upperMaxFr!==oldMax&&$switch)switchBG=0,(r=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)]).wrapT=THREE.RepeatWrapping,r.wrapS=THREE.RepeatWrapping,r.repeat.set(1,1),$plane2.material.uniforms.tex0.value=r,$switch=!1,oldMax=upperMaxFr,switcher&&window.clearTimeout(switcher),switcher=window.setTimeout(function(){$switch=!0},800)}else group7.position.z=100;if("group8"===showGroup)if(holding){if(group8.position.z=-800-(mY-wH/2)/wH*-800,group8.rotation.x=-.45*Math.PI+(mY-wH/2)/wH*5,group8.rotation.z=(mX-wW/2)/wW*5,TweenMax.to(shaderUniforms.amplitude,.8,{value:upperMax-overallAvg/2-lowerAvg}),colorify.uniforms.opacity.value=1,overallAvg!==oldMax&&$switch){switchBG=0;e=colors[Math.floor(Math.random()*colors.length)];colorify.uniforms.color.value=new THREE.Color(e),oldMax=overallAvg,$switch=!1,switcher&&window.clearTimeout(switcher),switcher=window.setTimeout(function(){$switch=!0},800)}}else group8.position.z=900;if("group9"===showGroup&&(holding?(group9.position.z=0,TweenMax.to($mirror.scale,2,{x:overallAvg/100,y:overallAvg/40,z:overallAvg/50}),$mirror.rotation.y-=.01-(mX-wW/2)/wW*1.5*-.015,$mirror.rotation.x+=.01+(mY-wH/2)/wH*1.5*.005,$mirror.rotation.z-=overallAvg/5e3,TweenMax.to($mirror2.scale,1,{x:overallAvg/40,y:overallAvg/60,z:overallAvg/80}),$mirror2.rotation.y-=.005-(mX-wW/2)/wW*1.5*.015,$mirror2.rotation.x+=.005+(mY-wH/2)/wH*1.5*-.005,$mirror2.rotation.z+=overallAvg/3e3,TweenMax.to($mirror3.scale,1.5,{x:overallAvg/100,y:overallAvg/50,z:overallAvg/70}),$mirror3.rotation.y-=(mX-wW/2)/wW*1.5*.02,$mirror3.rotation.x+=(mY-wH/2)/wH*1.5*.008,$mirror3.rotation.z+=overallAvg/5e3,TweenMax.to($mirror4.scale,2,{x:overallAvg/100,y:overallAvg/30,z:overallAvg/100}),$mirror4.rotation.y-=(mX-wW/2)/wW*2*-.02,$mirror4.rotation.x+=(mY-wH/2)/wH*2*-.008,$mirror4.rotation.z-=overallAvg/4e3):group9.position.z=900),"group10"===showGroup)if(holding){if(group10.position.z=0,fire.windVector.x=(mX-wW/2)/wW*5,fire.windVector.y=(mY-wH/2)/wH*-5,fire.airSpeed=overallAvg/3,fire.viscosity=overallAvg/100,fire.expansion=lowerAvg/50-1,fire.swirl=overallAvg/20,fire.drag=overallAvg/200,overallAvg!==oldMax&&$switch){switchBG=0;colors[Math.floor(Math.random()*colors.length)];var r,i=colors[Math.floor(Math.random()*colors.length)],n=colors[Math.floor(Math.random()*colors.length)];fire.color2.set(i),fire.color3.set(n),(r=loadedMasks[Math.floor(Math.random()*loadedMasks.length)]).wrapT=THREE.RepeatWrapping,r.wrapS=THREE.RepeatWrapping,r.repeat.set(1,1),fire.setSourceMap(r),oldMax=overallAvg,$switch=!1,switcher&&window.clearTimeout(switcher),switcher=window.setTimeout(function(){$switch=!0},2e3)}}else group10.position.z=100,oldMax=overallAvg}camera.layers.set(OCCLUSION_LAYER),renderer.setClearColor(0),occlusionComposer.render(),camera.layers.set(DEFAULT_LAYER),composer.render(this.renderer)}function adjustMeshPlaneVertices(e,t,r){for(var i=0;i<$plane1.geometry.vertices.length;i++){var n=(s=$plane1.geometry.vertices[i]).x/e*.25,o=s.y/e*.25,a=2*simplex.noise2D(n+r,o);s.z=a}$plane1.geometry.verticesNeedUpdate=!0,$plane1.geometry.computeVertexNormals(),$plane1.geometry.computeFaceNormals();for(i=0;i<$plane2.geometry.vertices.length;i++){n=(s=$plane2.geometry.vertices[i]).x/e*-.3,o=s.y/e*-.3,a=-2.4*simplex.noise2D(n+r,o);s.z=a}$plane2.geometry.verticesNeedUpdate=!0,$plane2.geometry.computeVertexNormals(),$plane2.geometry.computeFaceNormals();for(i=0;i<$plane3.geometry.vertices.length;i++){var s;n=(s=$plane3.geometry.vertices[i]).x/e*.43,o=s.y/e*.43,a=-2.4*simplex.noise2D(n+r,o+r);s.z=a}$plane3.geometry.verticesNeedUpdate=!0,$plane3.geometry.computeVertexNormals(),$plane3.geometry.computeFaceNormals()}function onWindowResize(){wW=$(document).width(),wH=$(document).height(),wH>wW?$portrait=!0:$portrait=!1,wW<1024?$mobile=!0:$mobile=!1,$fallback||(camera.updateProjectionMatrix(),composer.setSize(wW,wH),renderer.setSize(wW,wH),$drawMe&&($portrait?sizes=wH:sizes=wW,canvasTexture.width=sizes,canvasTexture.height=sizes,(textureContext=canvasTexture.getContext("2d")).fillStyle="black",textureContext.fillRect(0,0,sizes,sizes)))}function mouseDown(e,t){$first&&ready4&&loadLoop(),ready4&&($spin=!0,holding=!0),!playing&&ready&&ready2&&ready3&&(playing=!0,idleMouse()),loopTimer&&window.clearTimeout(loopTimer),idleTimer&&window.clearTimeout(idleTimer),holding&&ready2&&$drawMe&&(startX=e,startY=t,drawMask(startX,startY,15,0,255,0,1)),idleTimer=window.setTimeout(idleMouse,500)}function mouseMove(e,t){if(holding?!playing&&ready&&ready2&&ready3&&(sound.isPlaying||sound.play(),playing=!0):movingMouse(),mX=e,mY=t,holding&&$drawMe){var r=Math.sqrt(Math.pow(startX-mX,2)+Math.pow(startY-mY,2));for(i=0;i<r;i+=1){var n=i/r;drawMask(startX*n+mX*(1-n),startY*n+mY*(1-n),15,0,255,0,1)}startX=mX,startY=mY}$mobile?$(".instruction").css({top:"50%",left:"50%"}):$(".instruction").css({top:mY,left:mX})}function drawMask(e,t,r,i,n,o,a){$portrait?(t=t,e=(wH-wW)/2+e):(e=e,t=(wW-wH)/2+t);var s=textureContext.createRadialGradient(e,t,0,e,t,r/4);s.addColorStop(0,"rgba("+i+", "+n+", "+o+", "+a+")"),textureContext.beginPath(),textureContext.arc(e,t,r/4,0,2*Math.PI),textureContext.fillStyle=s,textureContext.fill(),textureContext.closePath(),$plane1.material.alphaMap.needsUpdate=!0}function mouseUp(){holding=!1,playing&&ready&&ready2&&ready3&&(sound.isPlaying&&sound.pause(),playing=!0),movingMouse(),ready2=!1,ready3=!1,$spin=!1,loopTimer&&window.clearTimeout(loopTimer),$first||(loopTimer=window.setTimeout(loadLoop,400)),idleTimer&&window.clearTimeout(idleTimer),idleTimer=window.setTimeout(movingMouse,600)}var scrollbar=Scrollbar.init($(document).find(".scroll")[0],{speed:.8,damping:.1,renderByPixels:!0,syncCallbacks:!0,continuousScrolling:!1,alwaysShowTracks:!1,overscrollEffect:!1});function movingMouse(){$("body").removeClass("idle")}function idleMouse(){$("body").addClass("idle")}function fractionate(e,t,r){return(e-t)/(r-t)}function modulate(e,t,r,i,n){return i+fractionate(e,t,r)*(n-i)}function avg(e){return e.reduce(function(e,t){return e+t})/e.length}function max(e){return e.reduce(function(e,t){return Math.max(e,t)})}function getAudioData(e){for(var t=splitFrenquencyArray(e,3),r=0;r<t.length;r++){for(var i=0,n=0;n<t[r].length;n++)i+=t[r][n];audioData[r]=i/t[r].length}return audioData}function splitFrenquencyArray(e,t){for(var r=Object.keys(e).map(function(t){return e[t]}),i=r.length,n=[],o=0;o<i;){var a=Math.ceil((i-o)/t--);n.push(r.slice(o,o+a)),o+=a}return n}function randomString(e,t){var r="";t.indexOf("a")>-1&&(r+="abcdefghijklmnopqrstuvwxyz"),t.indexOf("A")>-1&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),t.indexOf("#")>-1&&(r+="0123456789"),t.indexOf("!")>-1&&(r+="~!#$%&*_+-=?");for(var i="",n=e;n>0;--n)i+=r[Math.floor(Math.random()*r.length)];return i}function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,r,i){e[r]=i});return e}function shuffle(e){for(var t,r,i=e.length;i;t=parseInt(Math.random()*i),r=e[--i],e[i]=e[t],e[t]=r);return e}$(document).bind("mousemove",function(e){mouseMove(e.pageX,e.pageY)}),$(document).bind("touchmove",function(e){var t=e.originalEvent.touches[0];mouseMove(t.pageX,t.pageY)}),$(document).bind("mousedown",function(e){mouseDown(e.pageX,e.pageY),e.preventDefault()}),$(document).bind("touchstart",function(e){var t=e.originalEvent.touches[0];mouseDown(t.pageX,t.pageY)}),$(document).bind("mouseup",function(e){mouseUp(e.pageX,e.pageY)}),$(document).bind("touchend",function(e){var t=e.originalEvent.changedTouches[0];mouseUp(t.pageX,t.pageY)}),$(window).resize(function(){$fallback||windowResize.trigger()});