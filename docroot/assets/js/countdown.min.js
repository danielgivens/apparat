function randGroup(){ready3=!1,rand=$g,showGroup="group"+rand,$scene=getUrlVars().s,$first&&$scene&&($scene<=groups.length?showGroup="group"+$scene:showGroup="group1",$g=$scene),createGroup(showGroup),$g++,$g>groups.length&&($g=1),$first=!1}function loadBackgrounds(a){new THREE.TextureLoader(manager).load(a,function(a){loadedBackgrounds.push(a),loadedBackgrounds.length==backgrounds.length?loadTextTextures(textTextures[0]):(b++,b<=backgrounds.length?loadBackgrounds(backgrounds[b]):loadTextTextures(textTextures[0]))})}function loadTextTextures(a){new THREE.TextureLoader(manager).load(a,function(a){loadedText.push(a),loadedText.length==textTextures.length?backgroundsLoaded=!0:(d++,d<=textTextures.length?loadTextTextures(textTextures[d]):backgroundsLoaded=!0)})}function getTimeRemaining(a){var b=Date.parse(a)-Date.parse(new Date),c=Math.floor(b/1e3%60),d=Math.floor(b/1e3/60%60),e=Math.floor(b/36e5%24);return{total:b,days:Math.floor(b/864e5),hours:e,minutes:d,seconds:c}}function updateClock(){var a=getTimeRemaining(deadline);countDown=ready?"LP_5."+a.days+":"+("0"+a.hours).slice(-2)+":"+("0"+a.minutes).slice(-2)+":"+("0"+a.seconds).slice(-2):"\x3c!--loading--\x3e",timeOutput=a.days+":"+("0"+a.hours).slice(-2)+":"+("0"+a.minutes).slice(-2)+":"+("0"+a.seconds).slice(-2),holding||refreshText(),a.total<=0&&clearInterval(timeinterval)}function refreshText(){ticker.remove(ticker.getObjectByName("textMesh")),textMesh=void 0,createText()}function createText(){var a=new THREE.MeshStandardMaterial({color:16777215}),b=new THREE.TextGeometry(countDown,{font:font2,size:window.innerWidth/1e3,height:.1,curveSegments:4});b.center(),textMesh=new THREE.Mesh(b,a),textMesh.scale.set(.25,.25,.25),ticker.add(textMesh),textMesh.name="textMesh"}function handleGroup(){if("none"!=showGroup){if("group1"===showGroup?group=group1:"group2"===showGroup?group=group2:"group3"===showGroup?group=group3:"group4"===showGroup?group=group4:"group5"===showGroup&&(group=group5),removeableItems.forEach(function(a,b){a.material.dispose(),a.geometry.dispose(),a=void 0}),group.children.length>0){for(var a=group.children.length-1;a>=0;a--)group.remove(group.children[a]);randGroup(),playing=!1}}else playing=!1,console.log("theres not a group, getting a random group and setting up audio context"),listener=new THREE.AudioListener,camera.add(listener),sound=new THREE.Audio(listener),audioLoader=new THREE.AudioLoader,analyser=new THREE.AudioAnalyser(sound,fftSize),dataArray=analyser.data,hpfilter=sound.context.createBiquadFilter(),hpfilter.type="highpass",hpfilter.frequency.value=1e-4,sound.setFilters([hpfilter]),getAudioData(dataArray),randGroup(),($track=getUrlVars().t)&&($track<=snips.length?$r=parseInt($track)-1:$r=0);console.log(sound.context.state),audioLoader.load(snips[$r],function(a){sound.setBuffer(a),sound.setLoop(!0),sound.setVolume(0),sound.offset=0,$buff=a,$loopDur=$buff.duration,$loopLength=$buff.length,sound.isPlaying,sound.playbackRate=.7,console.log(sound.context.state),ready2=!0,playing=!1,console.log("loaded loop: "+snips[$r]),++$r>snips.length-1&&($r=0)})}function loadLoop(){playing?TweenMax.to(sound,.2,{setPlaybackRate:.7,setVolume:0,onComplete:function(){sound.pause(),handleGroup()}}):handleGroup()}function createGroup(a){if("group1"===a){var b=colors[Math.floor(Math.random()*colors.length)];r=new THREE.ShaderMaterial({wireframe:!0,transparent:!0,opacity:0,uniforms:{black:{type:"c",value:new THREE.Color(0)},colors:{type:"c",value:new THREE.Color(b)},time:{type:"f",value:0},weight:{type:"f",value:0}},vertexShader:$("#noise-v").html(),fragmentShader:$("#noise-f").html()}),mesh=new THREE.Mesh(new THREE.IcosahedronBufferGeometry(7,6),r),group1.add(mesh),group1.position.z=-1e3,removeableItems.push(mesh),mesh.name="wireframeBall",$wireframeBall=group1.getObjectByName("wireframeBall"),addPortal()}if("group2"===a){ratio=window.innerWidth/window.innerHeight,sizes=9*ratio,group2=new THREE.Group;var b=colors[Math.floor(Math.random()*colors.length)],c=colors[Math.floor(Math.random()*colors.length)],d=colors[Math.floor(Math.random()*colors.length)],e=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)],f=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)],g=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)],h=new THREE.PlaneGeometry(sizes,sizes,112,112),i=new THREE.MeshBasicMaterial({color:b,map:e,wireframe:!1,transparent:!0,opacity:0});e.magFilter=THREE.NearestFilter,e.wrapT=THREE.RepeatWrapping,e.wrapS=THREE.RepeatWrapping,e.repeat.set(1,1);var j=new THREE.Mesh(h,i);j.name="plane1",group2.add(j),$plane1=group2.getObjectByName("plane1");var k=new THREE.PlaneGeometry(sizes,sizes,112,112),l=new THREE.MeshBasicMaterial({color:c,map:f,wireframe:!1,transparent:!0,opacity:0});f.magFilter=THREE.NearestFilter,f.wrapT=THREE.RepeatWrapping,f.wrapS=THREE.RepeatWrapping,f.repeat.set(1,1);var m=new THREE.Mesh(k,l);m.name="plane2",group2.add(m),$plane2=group2.getObjectByName("plane2");var n=new THREE.PlaneGeometry(sizes,sizes,112,112),o=new THREE.MeshBasicMaterial({color:d,map:g,wireframe:!1,transparent:!0,opacity:0}),p=new THREE.Mesh(n,o);g.magFilter=THREE.NearestFilter,g.wrapT=THREE.RepeatWrapping,g.wrapS=THREE.RepeatWrapping,g.repeat.set(1,1),p.name="plane3",group2.add(p),$plane3=group2.getObjectByName("plane3"),removeableItems.push(j),removeableItems.push(m),removeableItems.push(p),scene.add(group2)}if("group3"===a){var q=new THREE.SphereGeometry(20);ratio=window.innerWidth/window.innerHeight,sizes=6*ratio;var q=new THREE.BoxBufferGeometry(sizes,sizes,sizes),r=new THREE.MeshStandardMaterial({color:13421772,roughness:1,metalness:1,side:THREE.BackSide,transparent:!0,opacity:0}),s=new THREE.Mesh(q,r);s.position.z=0,s.receiveShadow=!0,s.name="room",group3.add(s),removeableItems.push(s),$room=group3.getObjectByName("room");var t=loadedText[Math.floor(Math.random()*loadedText.length)],b=colors[Math.floor(Math.random()*colors.length)];pointLight=createLight(b,t),pointLight.name="innerLight",group3.add(pointLight),$pointLight=group3.getObjectByName("innerLight");var u=colors[Math.floor(Math.random()*colors.length)];colorify.uniforms.color.value=new THREE.Color(u),scene.add(group3)}if("group4"===a){v=new THREE.SphereBufferGeometry(3,32,32),r=new THREE.MeshBasicMaterial({color:colors[0]});var t=loadedText[Math.floor(Math.random()*loadedText.length)];lightSphere=new THREE.Mesh(v,r),lightSphere.layers.set(OCCLUSION_LAYER),lightSphere.name="lightSphere",removeableItems.push(lightSphere),group4.add(lightSphere),$lightSphere=group4.getObjectByName("lightSphere");var v=new THREE.SphereBufferGeometry(3,32,32),r=new THREE.MeshPhongMaterial({color:0,specular:colors[0],shininess:1,polygonOffset:!0,polygonOffsetFactor:1,wireframe:!0,transparent:!0,opacity:0});mesh=new THREE.Mesh(v,r),removeableItems.push(mesh),mesh.name="god",mesh.castShadow=!0,mesh.receiveShadow=!0,group4.add(mesh),$god=group4.getObjectByName("god");var w=t;w.magFilter=THREE.NearestFilter,w.wrapT=THREE.RepeatWrapping,w.wrapS=THREE.RepeatWrapping,w.repeat.set(1,1);var x=[new THREE.MeshLambertMaterial({color:"pink",side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({transparent:!0,opacity:0})],x=new THREE.MeshPhongMaterial({side:THREE.DoubleSide,alphaMap:w,shininess:10,color:16777215,specular:16777215,alphaTest:.5,transparent:!0,opacity:1}),y=new THREE.SphereBufferGeometry(3,32,32);sphere_mesh=new THREE.Mesh(y,x),sphere_mesh.position.set(0,0,0),removeableItems.push(sphere_mesh),sphere_mesh.name="spheremesh",mesh.add(sphere_mesh),sphere_mesh.layers.set(OCCLUSION_LAYER)}if("group5"===a){ratio=window.innerWidth/window.innerHeight,size=20*ratio;var z=12*size;group5.position.z=100;var u=colors[Math.floor(Math.random()*colors.length)],A=new THREE.GridHelper(size,z,u,u);A.rotation.x=1.5*Math.PI,A.position.z=.5,A.name="grid1";var z=size,u=colors[Math.floor(Math.random()*colors.length)],B=new THREE.PolarGridHelper(size,2,20*z,4*z,0,u);B.rotation.x=1.5*Math.PI,B.name="grid2",group5.add(B),$grid2=group5.getObjectByName("grid2");var z=size,u=colors[Math.floor(Math.random()*colors.length)],C=new THREE.PolarGridHelper(size,2,22*z,4*z,0,u);C.rotation.x=1.5*Math.PI,C.name="grid3",group5.add(C),$grid3=group5.getObjectByName("grid3")}ready3=!0}function generateTexture(){var a=document.createElement("canvas");a.width=2,a.height=2;var b=a.getContext("2d");return b.fillStyle="white",b.fillRect(0,1,2,1),a}function createLight(a,b){var c=new THREE.PointLight(a,5,100);c.castShadow=!0,c.shadow.camera.near=.1,c.shadow.camera.far=200,c.shadow.mapSize.height=768,c.shadow.mapSize.width=768,c.shadow.bias=-0;var d=b;d.magFilter=THREE.NearestFilter,d.repeat.x=-1,d.wrapT=THREE.RepeatWrapping,d.wrapS=THREE.RepeatWrapping;var e=new THREE.SphereBufferGeometry(1,32,32),f=new THREE.MeshPhongMaterial({side:THREE.DoubleSide,alphaMap:d,shininess:10,color:0,specular:16777215,alphaTest:.5,transparent:!0,opacity:0}),g=new THREE.Mesh(e,f);removeableItems.push(g),g.castShadow=!0,g.receiveShadow=!0,g.name="amap 2",c.add(g);var h=new THREE.MeshDistanceMaterial({alphaMap:f.alphaMap,alphaTest:f.alphaTest});return g.customDistanceMaterial=h,c}function addPortal(){var a=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)],b=new THREE.CircleBufferGeometry(1,64),c=new THREE.MeshStandardMaterial({color:16777215,map:a,refractionRatio:.1,transparent:!0,roughness:1,alphaTest:.5,opacity:0});c.side=THREE.DoubleSide,c.wrapS=c.wrapT=THREE.MirroredRepeatWrapping;var d=new THREE.Mesh(b,c);removeableItems.push(d),d.position.z=0,d.geometry.needsUpdate=!0,d.material.needsUpdate=!0,d.name="portalMesh",group1.add(d),$portal=group1.getObjectByName("portalMesh")}function makeWireframe(a,b,c,d){a.geometry.vertices.forEach(function(e,f){var g=a.geometry.parameters.radius,h=d/40,i=window.performance.now();e.normalize();var j=g+b+noise2.noise3D(e.x+1e-4*i*7,e.y+1e-4*i*8,e.z+1e-4*i*9)*h*c;e.multiplyScalar(j)}),a.geometry.verticesNeedUpdate=!0,a.geometry.normalsNeedUpdate=!0,a.geometry.computeVertexNormals(),a.geometry.computeFaceNormals()}function draw(){if(requestAnimationFrame(draw),shaderTime+=.01,holding){if(ready2){playing=!0,analyser.getFrequencyData(dataArray);var a=dataArray.slice(0,dataArray.length/2-1),b=dataArray.slice(dataArray.length/2-1,dataArray.length-1),c=avg(dataArray),d=max(a),e=avg(a),f=max(b),g=avg(b),h=d/a.length,i=e/a.length,j=f/b.length,k=g/b.length;TweenMax.to(ticker.position,0,{z:10}),sound.isPlaying||sound.play(),TweenMax.to(sound,.2,{setPlaybackRate:1,setVolume:1}),$(".output#time").html(timeOutput),$(".output#data").html(parseFloat(c).toFixed(4)+"<br />"+parseFloat(e).toFixed(4)),$(".output#coords").html("["+mX+","+mY+"]"),$(".output#loop").html(parseFloat($loopLength)+"<br />"+parseFloat($loopDur).toFixed(2)),staticPass.uniforms.amount.value=.05}}else TweenMax.to(ticker.position,.01,{delay:.5,z:1}),staticPass.uniforms.amount.value=.2;if(staticPass.uniforms.time.value=shaderTime,ready2){if("group1"===showGroup)if(holding&&ready3){if(group1.position.z=6,$portal.material.opacity=1,ampl=Math.min(60,e-c+255-d),$wireframeBall.material.uniforms.time.value=4e-4*(Date.now()-start),$wireframeBall.rotation.y+=.001,TweenMax.to($wireframeBall.material.uniforms.weight,.3,{value:c/12}),group1.rotation.y=(mX-window.innerWidth/2)/window.innerWidth,group1.rotation.x=(mY-window.innerHeight/2)/window.innerHeight,$portal.material.map.offset.x=(mX-window.innerWidth/2)/window.innerWidth,$portal.material.map.offset.y=(mY-window.innerHeight/2)/window.innerHeight,TweenMax.to($portal.position,1,{z:c/60*-1,x:0,y:0}),switchBG+=c,switchBG>600){switchBG=0;var l=loadedBackgrounds[Math.floor(Math.random()*loadedBackgrounds.length)];$portal.material.map=l}}else group1.position.z=-1e3;if("group2"===showGroup?holding&&ready3&&(TweenMax.to(group2.position,.2,{z:0}),$plane1.rotation.z+=(mX-window.innerWidth/2)/window.innerWidth*1.5*.05,$plane2.rotation.z+=(mX-window.innerWidth/2)/window.innerWidth*1.5*-.025,$plane3.rotation.z-=(mX-window.innerWidth/2)/window.innerWidth*1.5*.05,$plane1.material.opacity=1,$plane2.material.opacity=1,$plane3.material.opacity=1,TweenMax.to(offset,.6,{upper:i+j,lower:h+k}),rate+=.005,adjustMeshPlaneVertices(Math.max(1,2-.75*offset.upper),Math.max(1,.85*offset.lower),rate)):rate=0,"group3"===showGroup)if(holding&&ready3){afterimagePass.uniforms.damp.value=.85,$mainSpot.intensity=0,TweenMax.to(group3.position,.2,{z:0}),$pointLight.traverse(function(a){a.name&&a.name.includes("amap")&&(a.material.alphaMap.offset.y+=5e-4,a.material.opacity=1)}),$pointLight.position.x=(mX-window.innerWidth/2)/window.innerWidth*1.5*-2,$pointLight.position.y=(mY-window.innerHeight/2)/window.innerHeight*1.5*2,$pointLight.position.z=e/200,$pointLight.rotation.x+=.005,$pointLight.rotation.y+=.005,$room.material.opacity=1,$pointLight.intensity=5;var m=.001*performance.now();if($pointLight.position.z=3*Math.sin(.8*m),switchColor+=c,colorify.uniforms.opacity.value=1,parseInt(switchColor)>800){switchColor=0;var n=colors[Math.floor(Math.random()*colors.length)];colorify.uniforms.color.value=new THREE.Color(n)}}else $mainSpot.intensity=1,ambientLight.intensity=.6,$room.material.opacity=0,$pointLight.intensity=0,$pointLight.traverse(function(a){a.name&&a.name.includes("amap")&&(a.material.opacity=0)}),colorify.uniforms.opacity.value=0,afterimagePass.uniforms.damp.value=.96;else $mainSpot.intensity=1,colorify.uniforms.opacity.value=0,afterimagePass.uniforms.damp.value=.96;if("group4"===showGroup)if(holding&&ready3){if(volumetericLightShaderUniforms.exposure.value=.6,volumetericLightShaderUniforms.samples.value=120-c,switchColor+=c,parseInt(switchColor)>700){switchColor=0;var n=colors[Math.floor(Math.random()*colors.length)];$god.material.specular=new THREE.Color(n),group4.traverse(function(a){a.name&&a.name.includes("lightSphere")&&(a.material.color=new THREE.Color(n),a.material.needsUpdate=!0)})}var m=.001*performance.now();group4.position.x=1.2*Math.sin(.3*m)-.5,group4.position.y=3*Math.sin(.4*m)-.5,group4.position.z=2*Math.sin(.6*m);var m=.001*performance.now();$god.traverse(function(a){a.name&&a.name.includes("spheremesh")&&(a.material.alphaMap.offset.x-=(mX-window.innerWidth/2)/window.innerWidth*1.5*.005,a.material.alphaMap.offset.y+=(mY-window.innerHeight/2)/window.innerHeight*1.5*.005)})}else volumetericLightShaderUniforms.exposure.value=0,colorify.uniforms.opacity.value=0;else volumetericLightShaderUniforms.exposure.value=0;if("group5"===showGroup)if(holding&&ready3){if($grid2.position.x=(mX-window.innerWidth/2)/window.innerWidth*6,$grid2.position.y=(mY-window.innerHeight/2)/window.innerHeight*-6,$grid2.rotation.y=(mX-window.innerWidth/2)/window.innerWidth*-6,$grid3.position.x=(mX-window.innerWidth/2)/window.innerWidth*-6,$grid3.position.y=(mY-window.innerHeight/2)/window.innerHeight*6,$grid3.rotation.y=(mX-window.innerWidth/2)/window.innerWidth*6,TweenMax.to(group5.position,1,{z:0+c/12}),colorify.uniforms.opacity.value=c/100,switchColor+=c,parseInt(switchColor)>800){switchColor=0;var n=colors[Math.floor(Math.random()*colors.length)];$grid3.material.color=new THREE.Color(n);var n=colors[Math.floor(Math.random()*colors.length)];$grid2.material.color=new THREE.Color(n)}colorify.uniforms.color.value=new THREE.Color(16777215)}else afterimagePass.uniforms.damp.value=.96,group5.position.z=100,colorify.uniforms.opacity.value=0}camera.layers.set(OCCLUSION_LAYER),renderer.setClearColor(0),occlusionComposer.render(),camera.layers.set(DEFAULT_LAYER),composer.render(this.renderer)}function adjustMeshPlaneVertices(a,b,c){for(var d=0;d<$plane1.geometry.vertices.length;d++){var e=$plane1.geometry.vertices[d],f=e.x/a*.25,g=e.y/a*.25,h=2*simplex.noise2D(f,g+c);e.z=h}$plane1.geometry.verticesNeedUpdate=!0,$plane1.geometry.normalsNeedUpdate=!0,$plane1.geometry.computeVertexNormals(),$plane1.geometry.computeFaceNormals();for(var d=0;d<$plane2.geometry.vertices.length;d++){var e=$plane2.geometry.vertices[d],f=e.x/b*.3,g=e.y/b*.3,h=2.4*simplex.noise2D(f+c,g);e.z=h}$plane2.geometry.verticesNeedUpdate=!0,$plane2.geometry.normalsNeedUpdate=!0,$plane2.geometry.computeVertexNormals(),$plane2.geometry.computeFaceNormals();for(var d=0;d<$plane3.geometry.vertices.length;d++){var e=$plane3.geometry.vertices[d],f=e.x/a*.17,g=e.y/a*.17,h=3*simplex.noise2D(f,g-c/2);e.z=h}$plane3.geometry.verticesNeedUpdate=!0,$plane3.geometry.normalsNeedUpdate=!0,$plane3.geometry.computeVertexNormals(),$plane3.geometry.computeFaceNormals()}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function mouseDown(){$first&&(loadLoop(),console.log("load")),holding=!0,!playing&&ready&&ready2&&ready3&&(sound.isPlaying||sound.play(),console.log("play"),playing=!0,idleMouse()),loopTimer&&window.clearTimeout(loopTimer),idleTimer&&window.clearTimeout(idleTimer),idleTimer=window.setTimeout(idleMouse,500)}function mouseMove(a){holding||(movingMouse(),a.preventDefault()),mX=a.pageX,mY=a.pageY}function mouseUp(){holding=!1,movingMouse(),ready2=!1,ready3=!1,!playing&&ready&&ready2&&ready3&&(console.log("play it"),sound.isPlaying||sound.play(),playing=!0),loopTimer&&window.clearTimeout(loopTimer),$first||(loopTimer=window.setTimeout(loadLoop,400)),idleTimer&&window.clearTimeout(idleTimer),idleTimer=window.setTimeout(movingMouse,600)}function movingMouse(){$("body").removeClass("idle")}function idleMouse(){$("body").addClass("idle")}function execMouseDown(){}function fractionate(a,b,c){return(a-b)/(c-b)}function modulate(a,b,c,d,e){return d+fractionate(a,b,c)*(e-d)}function avg(a){return a.reduce(function(a,b){return a+b})/a.length}function max(a){return a.reduce(function(a,b){return Math.max(a,b)})}function getAudioData(a){for(var b=splitFrenquencyArray(a,3),c=0;c<b.length;c++){for(var d=0,e=0;e<b[c].length;e++)d+=b[c][e];audioData[c]=d/b[c].length}return audioData}function splitFrenquencyArray(a,b){for(var c=Object.keys(a).map(function(b){return a[b]}),d=c.length,e=[],f=0;f<d;){var g=Math.ceil((d-f)/b--);e.push(c.slice(f,f+g)),f+=g}return e}function randomString(a,b){var c="";b.indexOf("a")>-1&&(c+="abcdefghijklmnopqrstuvwxyz"),b.indexOf("A")>-1&&(c+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),b.indexOf("#")>-1&&(c+="0123456789"),b.indexOf("!")>-1&&(c+="~!#$%&*_+-=?¿£€¥≠¢§ĦǼØÞßøł°Œ©Ⓟ");for(var d="",e=a;e>0;--e)d+=c[Math.floor(Math.random()*c.length)];return d}function getUrlVars(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){a[c]=d});return a}var composer,analyser,dataArray,audioData=[],shaderTime=0,fftSize=512,glitchPass,afterimagePass,renderPass,copyPass,rgbParams,rgbPass,filmParams,filmPass,renderPass,copyPass,scene,camera,material,sound,renderer,portalMesh,portal,mouseTimer,textMesh,$portal,idleTimer,$pointLight,pointLight,$buff,listener,audioLoader,dataArray;ready3=!1,playing=!1,ready=!1,ready2=!1,holding=!1,font2=void 0,mX=0,mY=0,b=0,d=0,wifreframeBallColor=0,switchBG=0,switchColor=0,rate=0,time=0,offset={upper:0,lower:0};var timeOutput="00:00:00:00",group=new THREE.Group,noise2=new SimplexNoise,simplex=new SimplexNoise,manager=new THREE.LoadingManager,loader=new THREE.TextureLoader(manager),backgroundsLoaded=!1,backgrounds=[],loadedBackgrounds=[];backgrounds=["/assets/images/app.jpg","/assets/images/test-4.jpg","/assets/images/texture-tour-1.jpg","/assets/images/texture-tour-2.jpg","/assets/images/texture-tour-3.jpg","/assets/images/texture-tour-4.jpg","/assets/images/texture-tour-6.jpg","/assets/images/texture-tour-8.jpg","/assets/images/texture-tour-10.jpg"];var removeableItems=[],textTextures=[],loadedText=[];textTextures=["/assets/images/type-texture.png","/assets/images/type-texture1.png"],snips=["/assets/audio/loop-1.mp3","/assets/audio/loop-2.mp3","/assets/audio/loop-3.mp3","/assets/audio/loop-4.mp3","/assets/audio/loop-5.mp3","/assets/audio/loop-6.mp3","/assets/audio/loop-7.mp3","/assets/audio/loop-8.mp3","/assets/audio/loop-9.mp3","/assets/audio/loop-10.mp3"],groups=["group1","group2","group3","group4","group5"],group1=new THREE.Group,group2=new THREE.Group,group3=new THREE.Group,group4=new THREE.Group,group5=new THREE.Group;var occlusionComposer,occlusionRenderTarget,occlusionBox,lightSphere,volumetericLightShaderUniforms,DEFAULT_LAYER=0,OCCLUSION_LAYER=1,renderScale=.5,angle=0,sphere_mesh;colors=[16765028,16458891,120677],showGroup="none",$g=1,$first=!0;var $track;scene=new THREE.Scene,fogColor=new THREE.Color(0),scene.background=fogColor,scene.fog=new THREE.Fog(fogColor,.0025,60);var res=window.innerWidth/window.innerHeight;camera=new THREE.PerspectiveCamera(45,res,.1,2e3),camera.position.x=0,camera.position.y=0,camera.layers.set(DEFAULT_LAYER),camera.position.z=10,camera.lookAt(scene.position);var ambientLight=new THREE.AmbientLight(16777215);ambientLight.intensity=.6,scene.add(ambientLight);var spotLight=new THREE.SpotLight(16777215);spotLight.position.set(0,0,10),spotLight.castShadow=!0,spotLight.intensity=1,spotLight.shadow.mapSize.width=1024,spotLight.shadow.mapSize.height=1024,spotLight.shadow.camera.near=1,spotLight.shadow.camera.far=2e3,spotLight.shadow.camera.fov=45,spotLight.name="mainSpot",scene.add(spotLight),$mainSpot=scene.getObjectByName("mainSpot"),scene.add(group1),scene.add(group2),scene.add(group3),scene.add(group4),scene.add(group5),renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!1}),renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFShadowMap,renderer.setSize(window.innerWidth,window.innerHeight),pixelRatio=1,occlusionRenderTarget=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight),occlusionComposer=new THREE.EffectComposer(renderer,occlusionRenderTarget),occlusionComposer.addPass(new THREE.RenderPass(scene,camera)),pass=new THREE.ShaderPass(THREE.VolumetericLightShader),pass.needsSwap=!1,occlusionComposer.addPass(pass),volumetericLightShaderUniforms=pass.uniforms,volumetericLightShaderUniforms.exposure.value=0,volumetericLightShaderUniforms.decay.value=.9,volumetericLightShaderUniforms.density.value=.8,volumetericLightShaderUniforms.weight.value=.9,volumetericLightShaderUniforms.samples.value=100,composer=new THREE.EffectComposer(this.renderer),composer.setSize(window.innerWidth*pixelRatio,window.innerHeight*pixelRatio),composer.addPass(new THREE.RenderPass(this.scene,this.camera)),colorify=new THREE.ShaderPass(THREE.ColorifyShader),colorify.uniforms.opacity.value=0,colorify.uniforms.color.value.setRGB(1,1,1),colorify.renderToScreen=!1,composer.addPass(colorify),pass=new THREE.ShaderPass(THREE.AdditiveBlendingShader),pass.uniforms.tAdd.value=occlusionRenderTarget.texture,composer.addPass(pass),glitchPass=new THREE.GlitchPass,glitchPass.renderToScreen=!1,composer.addPass(glitchPass),pass.renderToScreen=!1,staticPass=new THREE.ShaderPass(THREE.StaticShader),staticPass.uniforms.amount.value=.2,staticPass.uniforms.size.value=1,staticPass.renderToScreen=!1,composer.addPass(staticPass),afterimagePass=new THREE.AfterimagePass,afterimagePass.renderToScreen=!0,composer.addPass(afterimagePass);var mouse=new THREE.Vector2;document.body.appendChild(renderer.domElement),window.addEventListener("resize",onWindowResize),loadBackgrounds(backgrounds[0]);var loadChecker=setInterval(function(){backgroundsLoaded&&clearInterval(loadChecker)},100);ticker=new THREE.Group;var countDown="LP_5",deadline="2019-03-12T12:00:00+00:00",fontLoader=new THREE.FontLoader,font=fontLoader.load("/assets/fonts/Terminal Grotesque_Regular.json",function(a){font2=a,updateClock();setInterval(updateClock,1e3);ready=!0,draw()}),textMesh;scene.add(ticker),$r=0,$("#messages .message > span").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),shaderTime=0;var start=Date.now();$("#test").click(function(){$first&&(loadLoop(),console.log("load"))});var loopTimer;document.body.addEventListener("mousemove",mouseMove),$(document).on("mousemove touchmove",function(a){a.preventDefault()}),$("#scene")[0].addEventListener("mousedown",mouseDown),document.body.addEventListener("mouseup",mouseUp),document.body.addEventListener("touchstart",mouseDown),document.body.addEventListener("touchend",mouseUp);